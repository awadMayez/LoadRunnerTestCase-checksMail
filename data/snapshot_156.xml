<?xml version="1.0" encoding="utf-8"?>
<HTTPSnapshot xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" id="156">
  <HTTPTask id="3497" hostname="yastatic.net" path="/mail/neo2/_/def0d1a263899d118d6115e2dd012ccd.js" url="https://yastatic.net/mail/neo2/_/def0d1a263899d118d6115e2dd012ccd.js" ip="178.154.131.216" port="443" connectionId="24" origin="Primary" frame="1" startDateTime="2017-03-10T15:43:02.020+03:00" startTime="57692453" endTime="57692484">
    <HTTPRequest method="GET">
      <HTTPHeaders>
        <HTTPHeaderEntity name="Accept" index="0">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>YXBwbGljYXRpb24vamF2YXNjcmlwdCwgKi8qO3E9MC44</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Referer" index="1">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>aHR0cHM6Ly9tYWlsLnlhbmRleC5ydS8=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Accept-Language" index="2">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>cnUtUlU=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="User-Agent" index="3">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>TW96aWxsYS81LjAgKFdpbmRvd3MgTlQgMTAuMDsgV09XNjQ7IFRyaWRlbnQvNy4wOyBydjoxMS4wKSBsaWtlIEdlY2tv</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Accept-Encoding" index="4">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>Z3ppcCwgZGVmbGF0ZQ==</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Host" index="5">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>eWFzdGF0aWMubmV0</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Connection" index="6">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>S2VlcC1BbGl2ZQ==</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPAllHeaders>
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>R0VUIC9tYWlsL25lbzIvXy9kZWYwZDFhMjYzODk5ZDExOGQ2MTE1ZTJkZDAxMmNjZC5qcyBIVFRQLzEuMQ0KQWNjZXB0OiBhcHBsaWNhdGlvbi9qYXZhc2NyaXB0LCAqLyo7cT0wLjgNClJlZmVyZXI6IGh0dHBzOi8vbWFpbC55YW5kZXgucnUvDQpBY2NlcHQtTGFuZ3VhZ2U6IHJ1LVJVDQpVc2VyLUFnZW50OiBNb3ppbGxhLzUuMCAoV2luZG93cyBOVCAxMC4wOyBXT1c2NDsgVHJpZGVudC83LjA7IHJ2OjExLjApIGxpa2UgR2Vja28NCkFjY2VwdC1FbmNvZGluZzogZ3ppcCwgZGVmbGF0ZQ0KSG9zdDogeWFzdGF0aWMubmV0DQpDb25uZWN0aW9uOiBLZWVwLUFsaXZlDQoNCg==</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPAllHeaders>
      </HTTPHeaders>
    </HTTPRequest>
    <HTTPResponse>
      <HTTPHeaders>
        <HTTPHeaderEntity name="Server" index="0">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>bmdpbngvMS45LjQ=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Date" index="1">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>RnJpLCAxMCBNYXIgMjAxNyAxMjozNjowNCBHTVQ=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Content-Type" index="2">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>YXBwbGljYXRpb24veC1qYXZhc2NyaXB0</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Last-Modified" index="3">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>TW9uLCAyNiBKdW4gMjAwMCAxNjowMDowMCBHTVQ=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Transfer-Encoding" index="4">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>Y2h1bmtlZA==</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Connection" index="5">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>a2VlcC1hbGl2ZQ==</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="ETag" index="6">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>Vy8iMzk1NzdlMDAtM2UxNjAi</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Expires" index="7">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>VGh1LCAzMSBEZWMgMjAzNyAyMzo1NTo1NSBHTVQ=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Cache-Control" index="8">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>bWF4LWFnZT0zMTUzNjAwMDA=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Strict-Transport-Security" index="9">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>bWF4LWFnZT00MzIwMDAwMDsgaW5jbHVkZVN1YkRvbWFpbnM7</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Cache-Control" index="10">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>cHVibGlj</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Access-Control-Allow-Origin" index="11">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>Kg==</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Timing-Allow-Origin" index="12">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>Kg==</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Content-Encoding" index="13">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>Z3ppcA==</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPAllHeaders>
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>SFRUUC8xLjEgMjAwIE9LDQpTZXJ2ZXI6IG5naW54LzEuOS40DQpEYXRlOiBGcmksIDEwIE1hciAyMDE3IDEyOjM2OjA0IEdNVA0KQ29udGVudC1UeXBlOiBhcHBsaWNhdGlvbi94LWphdmFzY3JpcHQNCkxhc3QtTW9kaWZpZWQ6IE1vbiwgMjYgSnVuIDIwMDAgMTY6MDA6MDAgR01UDQpUcmFuc2Zlci1FbmNvZGluZzogY2h1bmtlZA0KQ29ubmVjdGlvbjoga2VlcC1hbGl2ZQ0KRVRhZzogVy8iMzk1NzdlMDAtM2UxNjAiDQpFeHBpcmVzOiBUaHUsIDMxIERlYyAyMDM3IDIzOjU1OjU1IEdNVA0KQ2FjaGUtQ29udHJvbDogbWF4LWFnZT0zMTUzNjAwMDANClN0cmljdC1UcmFuc3BvcnQtU2VjdXJpdHk6IG1heC1hZ2U9NDMyMDAwMDA7IGluY2x1ZGVTdWJEb21haW5zOw0KQ2FjaGUtQ29udHJvbDogcHVibGljDQpBY2Nlc3MtQ29udHJvbC1BbGxvdy1PcmlnaW46ICoNClRpbWluZy1BbGxvdy1PcmlnaW46ICoNCkNvbnRlbnQtRW5jb2Rpbmc6IGd6aXANCg0K</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPAllHeaders>
      </HTTPHeaders>
      <HTTPBody>
        <HTTPDataSet>
          <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
            <ActualData>SmFuZS5tb2R1bGUoImphbmUubmFub2lzbGFuZHMuanMiLGZ1bmN0aW9uKCl7IWZ1bmN0aW9uKHQsZSl7IiQ6bm9tdW5nZSI7dmFyIGkscz10LmpRdWVyeXx8dC5Db3dib3l8fCh0LkNvd2JveT17fSk7cy50aHJvdHRsZT1pPWZ1bmN0aW9uKHQsaSxuLG8pe2Z1bmN0aW9uIGEoKXtmdW5jdGlvbiBzKCl7aD0rbmV3IERhdGU7bi5hcHBseShsLGMpfWZ1bmN0aW9uIGEoKXtyPWV9dmFyIGw9dGhpcyx1PStuZXcgRGF0ZS1oLGM9YXJndW1lbnRzO28mJiFyJiZzKCk7ciYmY2xlYXJUaW1lb3V0KHIpO289PT1lJiZ1PnQ/cygpOmkhPT0hMCYmKHI9c2V0VGltZW91dChvP2E6cyxvPT09ZT90LXU6dCkpfXZhciByLGg9MDtpZigiYm9vbGVhbiIhPXR5cGVvZiBpKXtvPW47bj1pO2k9ZX1zLmd1aWQmJihhLmd1aWQ9bi5ndWlkPW4uZ3VpZHx8cy5ndWlkKyspO3JldHVybiBhfTtzLmRlYm91bmNlPWZ1bmN0aW9uKHQscyxuKXtyZXR1cm4gbj09PWU/aSh0LHMsITEpOmkodCxuLHMhPT0hMSl9fSh0aGlzKTsKIWZ1bmN0aW9uKHQsZSl7ZnVuY3Rpb24gaShlLGkpe3ZhciBuLG8sYSxyPWUubm9kZU5hbWUudG9Mb3dlckNhc2UoKTtpZigiYXJlYSI9PT1yKXtuPWUucGFyZW50Tm9kZTtvPW4ubmFtZTtpZighZS5ocmVmfHwhb3x8Im1hcCIhPT1uLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCkpcmV0dXJuITE7YT10KCJpbWdbdXNlbWFwPSMiK28rIl0iKVswXTtyZXR1cm4hIWEmJnMoYSl9cmV0dXJuKC9pbnB1dHxzZWxlY3R8dGV4dGFyZWF8YnV0dG9ufG9iamVjdC8udGVzdChyKT8hZS5kaXNhYmxlZDoiYSI9PT1yP2UuaHJlZnx8aTppKSYmcyhlKX1mdW5jdGlvbiBzKGUpe3JldHVybiB0LmV4cHIuZmlsdGVycy52aXNpYmxlKGUpJiYhdChlKS5wYXJlbnRzKCkuYWRkQmFjaygpLmZpbHRlcihmdW5jdGlvbigpe3JldHVybiJoaWRkZW4iPT09dC5jc3ModGhpcywidmlzaWJpbGl0eSIpfSkubGVuZ3RofXZhciBuPTAsbz0vXnVpLWlkLVxkKyQvO3QudWk9dC51aXx8e307dC5leHRlbmQodC51aSx7dmVyc2lvbjoiMS4xMC40IixrZXlDb2RlOntCQUNLU1BBQ0U6OCxDT01NQToxODgsREVMRVRFOjQ2LERPV046NDAsRU5EOjM1LEVOVEVSOjEzLEVTQ0FQRToyNyxIT01FOjM2LExFRlQ6MzcsTlVNUEFEX0FERDoxMDcsTlVNUEFEX0RFQ0lNQUw6MTEwLE5VTVBBRF9ESVZJREU6MTExLE5VTVBBRF9FTlRFUjoxMDgsTlVNUEFEX01VTFRJUExZOjEwNixOVU1QQURfU1VCVFJBQ1Q6MTA5LFBBR0VfRE9XTjozNCxQQUdFX1VQOjMzLFBFUklPRDoxOTAsUklHSFQ6MzksU1BBQ0U6MzIsVEFCOjksVVA6Mzh9fSk7CnQuZm4uZXh0ZW5kKHtmb2N1czpmdW5jdGlvbihlKXtyZXR1cm4gZnVuY3Rpb24oaSxzKXtyZXR1cm4ibnVtYmVyIj09dHlwZW9mIGk/dGhpcy5lYWNoKGZ1bmN0aW9uKCl7dmFyIGU9dGhpcztzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7dChlKS5mb2N1cygpO3MmJnMuY2FsbChlKX0saSl9KTplLmFwcGx5KHRoaXMsYXJndW1lbnRzKX19KHQuZm4uZm9jdXMpLHNjcm9sbFBhcmVudDpmdW5jdGlvbigpe3ZhciBlO2U9dC51aS5pZSYmLyhzdGF0aWN8cmVsYXRpdmUpLy50ZXN0KHRoaXMuY3NzKCJwb3NpdGlvbiIpKXx8L2Fic29sdXRlLy50ZXN0KHRoaXMuY3NzKCJwb3NpdGlvbiIpKT90aGlzLnBhcmVudHMoKS5maWx0ZXIoZnVuY3Rpb24oKXtyZXR1cm4vKHJlbGF0aXZlfGFic29sdXRlfGZpeGVkKS8udGVzdCh0LmNzcyh0aGlzLCJwb3NpdGlvbiIpKSYmLyhhdXRvfHNjcm9sbCkvLnRlc3QodC5jc3ModGhpcywib3ZlcmZsb3ciKSt0LmNzcyh0aGlzLCJvdmVyZmxvdy15IikrdC5jc3ModGhpcywib3ZlcmZsb3cteCIpKQp9KS5lcSgwKTp0aGlzLnBhcmVudHMoKS5maWx0ZXIoZnVuY3Rpb24oKXtyZXR1cm4vKGF1dG98c2Nyb2xsKS8udGVzdCh0LmNzcyh0aGlzLCJvdmVyZmxvdyIpK3QuY3NzKHRoaXMsIm92ZXJmbG93LXkiKSt0LmNzcyh0aGlzLCJvdmVyZmxvdy14IikpfSkuZXEoMCk7cmV0dXJuL2ZpeGVkLy50ZXN0KHRoaXMuY3NzKCJwb3NpdGlvbiIpKXx8IWUubGVuZ3RoP3QoZG9jdW1lbnQpOmV9LHpJbmRleDpmdW5jdGlvbihpKXtpZihpIT09ZSlyZXR1cm4gdGhpcy5jc3MoInpJbmRleCIsaSk7aWYodGhpcy5sZW5ndGgpZm9yKHZhciBzLG4sbz10KHRoaXNbMF0pO28ubGVuZ3RoJiZvWzBdIT09ZG9jdW1lbnQ7KXtzPW8uY3NzKCJwb3NpdGlvbiIpO2lmKCJhYnNvbHV0ZSI9PT1zfHwicmVsYXRpdmUiPT09c3x8ImZpeGVkIj09PXMpe249cGFyc2VJbnQoby5jc3MoInpJbmRleCIpLDEwKTtpZighaXNOYU4obikmJjAhPT1uKXJldHVybiBufW89by5wYXJlbnQoKX1yZXR1cm4gMH0sdW5pcXVlSWQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKCl7dGhpcy5pZHx8KHRoaXMuaWQ9InVpLWlkLSIrICsrbikKfSl9LHJlbW92ZVVuaXF1ZUlkOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbigpe28udGVzdCh0aGlzLmlkKSYmdCh0aGlzKS5yZW1vdmVBdHRyKCJpZCIpfSl9fSk7dC5leHRlbmQodC5leHByWyI6Il0se2RhdGE6dC5leHByLmNyZWF0ZVBzZXVkbz90LmV4cHIuY3JlYXRlUHNldWRvKGZ1bmN0aW9uKGUpe3JldHVybiBmdW5jdGlvbihpKXtyZXR1cm4hIXQuZGF0YShpLGUpfX0pOmZ1bmN0aW9uKGUsaSxzKXtyZXR1cm4hIXQuZGF0YShlLHNbM10pfSxmb2N1c2FibGU6ZnVuY3Rpb24oZSl7cmV0dXJuIGkoZSwhaXNOYU4odC5hdHRyKGUsInRhYmluZGV4IikpKX0sdGFiYmFibGU6ZnVuY3Rpb24oZSl7dmFyIHM9dC5hdHRyKGUsInRhYmluZGV4Iiksbj1pc05hTihzKTtyZXR1cm4obnx8cz49MCkmJmkoZSwhbil9fSk7dCgiPGE+Iikub3V0ZXJXaWR0aCgxKS5qcXVlcnl8fHQuZWFjaChbIldpZHRoIiwiSGVpZ2h0Il0sZnVuY3Rpb24oaSxzKXtmdW5jdGlvbiBuKGUsaSxzLG4pe3QuZWFjaChvLGZ1bmN0aW9uKCl7aS09cGFyc2VGbG9hdCh0LmNzcyhlLCJwYWRkaW5nIit0aGlzKSl8fDA7CnMmJihpLT1wYXJzZUZsb2F0KHQuY3NzKGUsImJvcmRlciIrdGhpcysiV2lkdGgiKSl8fDApO24mJihpLT1wYXJzZUZsb2F0KHQuY3NzKGUsIm1hcmdpbiIrdGhpcykpfHwwKX0pO3JldHVybiBpfXZhciBvPSJXaWR0aCI9PT1zP1siTGVmdCIsIlJpZ2h0Il06WyJUb3AiLCJCb3R0b20iXSxhPXMudG9Mb3dlckNhc2UoKSxyPXtpbm5lcldpZHRoOnQuZm4uaW5uZXJXaWR0aCxpbm5lckhlaWdodDp0LmZuLmlubmVySGVpZ2h0LG91dGVyV2lkdGg6dC5mbi5vdXRlcldpZHRoLG91dGVySGVpZ2h0OnQuZm4ub3V0ZXJIZWlnaHR9O3QuZm5bImlubmVyIitzXT1mdW5jdGlvbihpKXtyZXR1cm4gaT09PWU/clsiaW5uZXIiK3NdLmNhbGwodGhpcyk6dGhpcy5lYWNoKGZ1bmN0aW9uKCl7dCh0aGlzKS5jc3MoYSxuKHRoaXMsaSkrInB4Iil9KX07dC5mblsib3V0ZXIiK3NdPWZ1bmN0aW9uKGUsaSl7cmV0dXJuIm51bWJlciIhPXR5cGVvZiBlP3JbIm91dGVyIitzXS5jYWxsKHRoaXMsZSk6dGhpcy5lYWNoKGZ1bmN0aW9uKCl7dCh0aGlzKS5jc3MoYSxuKHRoaXMsZSwhMCxpKSsicHgiKQp9KX19KTt0LmZuLmFkZEJhY2t8fCh0LmZuLmFkZEJhY2s9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuYWRkKG51bGw9PXQ/dGhpcy5wcmV2T2JqZWN0OnRoaXMucHJldk9iamVjdC5maWx0ZXIodCkpfSk7dCgiPGE+IikuZGF0YSgiYS1iIiwiYSIpLnJlbW92ZURhdGEoImEtYiIpLmRhdGEoImEtYiIpJiYodC5mbi5yZW1vdmVEYXRhPWZ1bmN0aW9uKGUpe3JldHVybiBmdW5jdGlvbihpKXtyZXR1cm4gYXJndW1lbnRzLmxlbmd0aD9lLmNhbGwodGhpcyx0LmNhbWVsQ2FzZShpKSk6ZS5jYWxsKHRoaXMpfX0odC5mbi5yZW1vdmVEYXRhKSk7dC51aS5pZT0hIS9tc2llIFtcdy5dKy8uZXhlYyhuYXZpZ2F0b3IudXNlckFnZW50LnRvTG93ZXJDYXNlKCkpO3Quc3VwcG9ydC5zZWxlY3RzdGFydD0ib25zZWxlY3RzdGFydCJpbiBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKTt0LmZuLmV4dGVuZCh7ZGlzYWJsZVNlbGVjdGlvbjpmdW5jdGlvbigpe3JldHVybiB0aGlzLmJpbmQoKHQuc3VwcG9ydC5zZWxlY3RzdGFydD8ic2VsZWN0c3RhcnQiOiJtb3VzZWRvd24iKSsiLnVpLWRpc2FibGVTZWxlY3Rpb24iLGZ1bmN0aW9uKHQpe3QucHJldmVudERlZmF1bHQoKQp9KX0sZW5hYmxlU2VsZWN0aW9uOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudW5iaW5kKCIudWktZGlzYWJsZVNlbGVjdGlvbiIpfX0pO3QuZXh0ZW5kKHQudWkse3BsdWdpbjp7YWRkOmZ1bmN0aW9uKGUsaSxzKXt2YXIgbixvPXQudWlbZV0ucHJvdG90eXBlO2ZvcihuIGluIHMpe28ucGx1Z2luc1tuXT1vLnBsdWdpbnNbbl18fFtdO28ucGx1Z2luc1tuXS5wdXNoKFtpLHNbbl1dKX19LGNhbGw6ZnVuY3Rpb24odCxlLGkpe3ZhciBzLG49dC5wbHVnaW5zW2VdO2lmKG4mJnQuZWxlbWVudFswXS5wYXJlbnROb2RlJiYxMSE9PXQuZWxlbWVudFswXS5wYXJlbnROb2RlLm5vZGVUeXBlKWZvcihzPTA7czxuLmxlbmd0aDtzKyspdC5vcHRpb25zW25bc11bMF1dJiZuW3NdWzFdLmFwcGx5KHQuZWxlbWVudCxpKX19LGhhc1Njcm9sbDpmdW5jdGlvbihlLGkpe2lmKCJoaWRkZW4iPT09dChlKS5jc3MoIm92ZXJmbG93IikpcmV0dXJuITE7dmFyIHM9aSYmImxlZnQiPT09aT8ic2Nyb2xsTGVmdCI6InNjcm9sbFRvcCIsbj0hMTsKaWYoZVtzXT4wKXJldHVybiEwO2Vbc109MTtuPWVbc10+MDtlW3NdPTA7cmV0dXJuIG59fSl9KGpRdWVyeSk7IWZ1bmN0aW9uKHQsZSl7dmFyIGk9MCxzPUFycmF5LnByb3RvdHlwZS5zbGljZSxuPXQuY2xlYW5EYXRhO3QuY2xlYW5EYXRhPWZ1bmN0aW9uKGUpe2Zvcih2YXIgaSxzPTA7bnVsbCE9KGk9ZVtzXSk7cysrKXRyeXt0KGkpLnRyaWdnZXJIYW5kbGVyKCJyZW1vdmUiKX1jYXRjaChvKXt9bihlKX07dC53aWRnZXQ9ZnVuY3Rpb24oZSxpLHMpe3ZhciBuLG8sYSxyLGg9e30sbD1lLnNwbGl0KCIuIilbMF07ZT1lLnNwbGl0KCIuIilbMV07bj1sKyItIitlO2lmKCFzKXtzPWk7aT10LldpZGdldH10LmV4cHJbIjoiXVtuLnRvTG93ZXJDYXNlKCldPWZ1bmN0aW9uKGUpe3JldHVybiEhdC5kYXRhKGUsbil9O3RbbF09dFtsXXx8e307bz10W2xdW2VdO2E9dFtsXVtlXT1mdW5jdGlvbih0LGUpe2lmKCF0aGlzLl9jcmVhdGVXaWRnZXQpcmV0dXJuIG5ldyBhKHQsZSk7YXJndW1lbnRzLmxlbmd0aCYmdGhpcy5fY3JlYXRlV2lkZ2V0KHQsZSk7CnJldHVybiB2b2lkIDB9O3QuZXh0ZW5kKGEsbyx7dmVyc2lvbjpzLnZlcnNpb24sX3Byb3RvOnQuZXh0ZW5kKHt9LHMpLF9jaGlsZENvbnN0cnVjdG9yczpbXX0pO3I9bmV3IGk7ci5vcHRpb25zPXQud2lkZ2V0LmV4dGVuZCh7fSxyLm9wdGlvbnMpO3QuZWFjaChzLGZ1bmN0aW9uKGUscyl7aFtlXT10LmlzRnVuY3Rpb24ocyk/ZnVuY3Rpb24oKXt2YXIgdD1mdW5jdGlvbigpe3JldHVybiBpLnByb3RvdHlwZVtlXS5hcHBseSh0aGlzLGFyZ3VtZW50cyl9LG49ZnVuY3Rpb24odCl7cmV0dXJuIGkucHJvdG90eXBlW2VdLmFwcGx5KHRoaXMsdCl9O3JldHVybiBmdW5jdGlvbigpe3ZhciBlLGk9dGhpcy5fc3VwZXIsbz10aGlzLl9zdXBlckFwcGx5O3RoaXMuX3N1cGVyPXQ7dGhpcy5fc3VwZXJBcHBseT1uO2U9cy5hcHBseSh0aGlzLGFyZ3VtZW50cyk7dGhpcy5fc3VwZXI9aTt0aGlzLl9zdXBlckFwcGx5PW87cmV0dXJuIGV9fSgpOnN9KTthLnByb3RvdHlwZT10LndpZGdldC5leHRlbmQocix7d2lkZ2V0RXZlbnRQcmVmaXg6bz9yLndpZGdldEV2ZW50UHJlZml4fHxlOmV9LGgse2NvbnN0cnVjdG9yOmEsbmFtZXNwYWNlOmwsd2lkZ2V0TmFtZTplLHdpZGdldEZ1bGxOYW1lOm59KTsKaWYobyl7dC5lYWNoKG8uX2NoaWxkQ29uc3RydWN0b3JzLGZ1bmN0aW9uKGUsaSl7dmFyIHM9aS5wcm90b3R5cGU7dC53aWRnZXQocy5uYW1lc3BhY2UrIi4iK3Mud2lkZ2V0TmFtZSxhLGkuX3Byb3RvKX0pO2RlbGV0ZSBvLl9jaGlsZENvbnN0cnVjdG9yc31lbHNlIGkuX2NoaWxkQ29uc3RydWN0b3JzLnB1c2goYSk7dC53aWRnZXQuYnJpZGdlKGUsYSl9O3Qud2lkZ2V0LmV4dGVuZD1mdW5jdGlvbihpKXtmb3IodmFyIG4sbyxhPXMuY2FsbChhcmd1bWVudHMsMSkscj0wLGg9YS5sZW5ndGg7aD5yO3IrKylmb3IobiBpbiBhW3JdKXtvPWFbcl1bbl07YVtyXS5oYXNPd25Qcm9wZXJ0eShuKSYmbyE9PWUmJihpW25dPXQuaXNQbGFpbk9iamVjdChvKT90LmlzUGxhaW5PYmplY3QoaVtuXSk/dC53aWRnZXQuZXh0ZW5kKHt9LGlbbl0sbyk6dC53aWRnZXQuZXh0ZW5kKHt9LG8pOm8pfXJldHVybiBpfTt0LndpZGdldC5icmlkZ2U9ZnVuY3Rpb24oaSxuKXt2YXIgbz1uLnByb3RvdHlwZS53aWRnZXRGdWxsTmFtZXx8aTsKdC5mbltpXT1mdW5jdGlvbihhKXt2YXIgcj0ic3RyaW5nIj09dHlwZW9mIGEsaD1zLmNhbGwoYXJndW1lbnRzLDEpLGw9dGhpczthPSFyJiZoLmxlbmd0aD90LndpZGdldC5leHRlbmQuYXBwbHkobnVsbCxbYV0uY29uY2F0KGgpKTphO3RoaXMuZWFjaChyP2Z1bmN0aW9uKCl7dmFyIHMsbj10LmRhdGEodGhpcyxvKTtpZighbilyZXR1cm4gdC5lcnJvcigiY2Fubm90IGNhbGwgbWV0aG9kcyBvbiAiK2krIiBwcmlvciB0byBpbml0aWFsaXphdGlvbjsgYXR0ZW1wdGVkIHRvIGNhbGwgbWV0aG9kICciK2ErIiciKTtpZighdC5pc0Z1bmN0aW9uKG5bYV0pfHwiXyI9PT1hLmNoYXJBdCgwKSlyZXR1cm4gdC5lcnJvcigibm8gc3VjaCBtZXRob2QgJyIrYSsiJyBmb3IgIitpKyIgd2lkZ2V0IGluc3RhbmNlIik7cz1uW2FdLmFwcGx5KG4saCk7aWYocyE9PW4mJnMhPT1lKXtsPXMmJnMuanF1ZXJ5P2wucHVzaFN0YWNrKHMuZ2V0KCkpOnM7cmV0dXJuITF9fTpmdW5jdGlvbigpe3ZhciBlPXQuZGF0YSh0aGlzLG8pOwplP2Uub3B0aW9uKGF8fHt9KS5faW5pdCgpOnQuZGF0YSh0aGlzLG8sbmV3IG4oYSx0aGlzKSl9KTtyZXR1cm4gbH19O3QuV2lkZ2V0PWZ1bmN0aW9uKCl7fTt0LldpZGdldC5fY2hpbGRDb25zdHJ1Y3RvcnM9W107dC5XaWRnZXQucHJvdG90eXBlPXt3aWRnZXROYW1lOiJ3aWRnZXQiLHdpZGdldEV2ZW50UHJlZml4OiIiLGRlZmF1bHRFbGVtZW50OiI8ZGl2PiIsb3B0aW9uczp7ZGlzYWJsZWQ6ITEsY3JlYXRlOm51bGx9LF9jcmVhdGVXaWRnZXQ6ZnVuY3Rpb24oZSxzKXtzPXQoc3x8dGhpcy5kZWZhdWx0RWxlbWVudHx8dGhpcylbMF07dGhpcy5lbGVtZW50PXQocyk7dGhpcy51dWlkPWkrKzt0aGlzLmV2ZW50TmFtZXNwYWNlPSIuIit0aGlzLndpZGdldE5hbWUrdGhpcy51dWlkO3RoaXMub3B0aW9ucz10LndpZGdldC5leHRlbmQoe30sdGhpcy5vcHRpb25zLHRoaXMuX2dldENyZWF0ZU9wdGlvbnMoKSxlKTt0aGlzLmJpbmRpbmdzPXQoKTt0aGlzLmhvdmVyYWJsZT10KCk7dGhpcy5mb2N1c2FibGU9dCgpOwppZihzIT09dGhpcyl7dC5kYXRhKHMsdGhpcy53aWRnZXRGdWxsTmFtZSx0aGlzKTt0aGlzLl9vbighMCx0aGlzLmVsZW1lbnQse3JlbW92ZTpmdW5jdGlvbih0KXt0LnRhcmdldD09PXMmJnRoaXMuZGVzdHJveSgpfX0pO3RoaXMuZG9jdW1lbnQ9dChzLnN0eWxlP3Mub3duZXJEb2N1bWVudDpzLmRvY3VtZW50fHxzKTt0aGlzLndpbmRvdz10KHRoaXMuZG9jdW1lbnRbMF0uZGVmYXVsdFZpZXd8fHRoaXMuZG9jdW1lbnRbMF0ucGFyZW50V2luZG93KX10aGlzLl9jcmVhdGUoKTt0aGlzLl90cmlnZ2VyKCJjcmVhdGUiLG51bGwsdGhpcy5fZ2V0Q3JlYXRlRXZlbnREYXRhKCkpO3RoaXMuX2luaXQoKX0sX2dldENyZWF0ZU9wdGlvbnM6dC5ub29wLF9nZXRDcmVhdGVFdmVudERhdGE6dC5ub29wLF9jcmVhdGU6dC5ub29wLF9pbml0OnQubm9vcCxkZXN0cm95OmZ1bmN0aW9uKCl7dGhpcy5fZGVzdHJveSgpO3RoaXMuZWxlbWVudC51bmJpbmQodGhpcy5ldmVudE5hbWVzcGFjZSkucmVtb3ZlRGF0YSh0aGlzLndpZGdldE5hbWUpLnJlbW92ZURhdGEodGhpcy53aWRnZXRGdWxsTmFtZSkucmVtb3ZlRGF0YSh0LmNhbWVsQ2FzZSh0aGlzLndpZGdldEZ1bGxOYW1lKSk7CnRoaXMud2lkZ2V0KCkudW5iaW5kKHRoaXMuZXZlbnROYW1lc3BhY2UpLnJlbW92ZUF0dHIoImFyaWEtZGlzYWJsZWQiKS5yZW1vdmVDbGFzcyh0aGlzLndpZGdldEZ1bGxOYW1lKyItZGlzYWJsZWQgdWktc3RhdGUtZGlzYWJsZWQiKTt0aGlzLmJpbmRpbmdzLnVuYmluZCh0aGlzLmV2ZW50TmFtZXNwYWNlKTt0aGlzLmhvdmVyYWJsZS5yZW1vdmVDbGFzcygidWktc3RhdGUtaG92ZXIiKTt0aGlzLmZvY3VzYWJsZS5yZW1vdmVDbGFzcygidWktc3RhdGUtZm9jdXMiKX0sX2Rlc3Ryb3k6dC5ub29wLHdpZGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmVsZW1lbnR9LG9wdGlvbjpmdW5jdGlvbihpLHMpe3ZhciBuLG8sYSxyPWk7aWYoMD09PWFyZ3VtZW50cy5sZW5ndGgpcmV0dXJuIHQud2lkZ2V0LmV4dGVuZCh7fSx0aGlzLm9wdGlvbnMpO2lmKCJzdHJpbmciPT10eXBlb2YgaSl7cj17fTtuPWkuc3BsaXQoIi4iKTtpPW4uc2hpZnQoKTtpZihuLmxlbmd0aCl7bz1yW2ldPXQud2lkZ2V0LmV4dGVuZCh7fSx0aGlzLm9wdGlvbnNbaV0pOwpmb3IoYT0wO2E8bi5sZW5ndGgtMTthKyspe29bblthXV09b1tuW2FdXXx8e307bz1vW25bYV1dfWk9bi5wb3AoKTtpZigxPT09YXJndW1lbnRzLmxlbmd0aClyZXR1cm4gb1tpXT09PWU/bnVsbDpvW2ldO29baV09c31lbHNle2lmKDE9PT1hcmd1bWVudHMubGVuZ3RoKXJldHVybiB0aGlzLm9wdGlvbnNbaV09PT1lP251bGw6dGhpcy5vcHRpb25zW2ldO3JbaV09c319dGhpcy5fc2V0T3B0aW9ucyhyKTtyZXR1cm4gdGhpc30sX3NldE9wdGlvbnM6ZnVuY3Rpb24odCl7dmFyIGU7Zm9yKGUgaW4gdCl0aGlzLl9zZXRPcHRpb24oZSx0W2VdKTtyZXR1cm4gdGhpc30sX3NldE9wdGlvbjpmdW5jdGlvbih0LGUpe3RoaXMub3B0aW9uc1t0XT1lO2lmKCJkaXNhYmxlZCI9PT10KXt0aGlzLndpZGdldCgpLnRvZ2dsZUNsYXNzKHRoaXMud2lkZ2V0RnVsbE5hbWUrIi1kaXNhYmxlZCB1aS1zdGF0ZS1kaXNhYmxlZCIsISFlKS5hdHRyKCJhcmlhLWRpc2FibGVkIixlKTt0aGlzLmhvdmVyYWJsZS5yZW1vdmVDbGFzcygidWktc3RhdGUtaG92ZXIiKTsKdGhpcy5mb2N1c2FibGUucmVtb3ZlQ2xhc3MoInVpLXN0YXRlLWZvY3VzIil9cmV0dXJuIHRoaXN9LGVuYWJsZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9zZXRPcHRpb24oImRpc2FibGVkIiwhMSl9LGRpc2FibGU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fc2V0T3B0aW9uKCJkaXNhYmxlZCIsITApfSxfb246ZnVuY3Rpb24oZSxpLHMpe3ZhciBuLG89dGhpcztpZigiYm9vbGVhbiIhPXR5cGVvZiBlKXtzPWk7aT1lO2U9ITF9aWYocyl7aT1uPXQoaSk7dGhpcy5iaW5kaW5ncz10aGlzLmJpbmRpbmdzLmFkZChpKX1lbHNle3M9aTtpPXRoaXMuZWxlbWVudDtuPXRoaXMud2lkZ2V0KCl9dC5lYWNoKHMsZnVuY3Rpb24ocyxhKXtmdW5jdGlvbiByKCl7cmV0dXJuIGV8fG8ub3B0aW9ucy5kaXNhYmxlZCE9PSEwJiYhdCh0aGlzKS5oYXNDbGFzcygidWktc3RhdGUtZGlzYWJsZWQiKT8oInN0cmluZyI9PXR5cGVvZiBhP29bYV06YSkuYXBwbHkobyxhcmd1bWVudHMpOnZvaWQgMH0ic3RyaW5nIiE9dHlwZW9mIGEmJihyLmd1aWQ9YS5ndWlkPWEuZ3VpZHx8ci5ndWlkfHx0Lmd1aWQrKyk7CnZhciBoPXMubWF0Y2goL14oXHcrKVxzKiguKikkLyksbD1oWzFdK28uZXZlbnROYW1lc3BhY2UsdT1oWzJdO3U/bi5kZWxlZ2F0ZSh1LGwscik6aS5iaW5kKGwscil9KX0sX29mZjpmdW5jdGlvbih0LGUpe2U9KGV8fCIiKS5zcGxpdCgiICIpLmpvaW4odGhpcy5ldmVudE5hbWVzcGFjZSsiICIpK3RoaXMuZXZlbnROYW1lc3BhY2U7dC51bmJpbmQoZSkudW5kZWxlZ2F0ZShlKX0sX2RlbGF5OmZ1bmN0aW9uKHQsZSl7ZnVuY3Rpb24gaSgpe3JldHVybigic3RyaW5nIj09dHlwZW9mIHQ/c1t0XTp0KS5hcHBseShzLGFyZ3VtZW50cyl9dmFyIHM9dGhpcztyZXR1cm4gc2V0VGltZW91dChpLGV8fDApfSxfaG92ZXJhYmxlOmZ1bmN0aW9uKGUpe3RoaXMuaG92ZXJhYmxlPXRoaXMuaG92ZXJhYmxlLmFkZChlKTt0aGlzLl9vbihlLHttb3VzZWVudGVyOmZ1bmN0aW9uKGUpe3QoZS5jdXJyZW50VGFyZ2V0KS5hZGRDbGFzcygidWktc3RhdGUtaG92ZXIiKX0sbW91c2VsZWF2ZTpmdW5jdGlvbihlKXt0KGUuY3VycmVudFRhcmdldCkucmVtb3ZlQ2xhc3MoInVpLXN0YXRlLWhvdmVyIikKfX0pfSxfZm9jdXNhYmxlOmZ1bmN0aW9uKGUpe3RoaXMuZm9jdXNhYmxlPXRoaXMuZm9jdXNhYmxlLmFkZChlKTt0aGlzLl9vbihlLHtmb2N1c2luOmZ1bmN0aW9uKGUpe3QoZS5jdXJyZW50VGFyZ2V0KS5hZGRDbGFzcygidWktc3RhdGUtZm9jdXMiKX0sZm9jdXNvdXQ6ZnVuY3Rpb24oZSl7dChlLmN1cnJlbnRUYXJnZXQpLnJlbW92ZUNsYXNzKCJ1aS1zdGF0ZS1mb2N1cyIpfX0pfSxfdHJpZ2dlcjpmdW5jdGlvbihlLGkscyl7dmFyIG4sbyxhPXRoaXMub3B0aW9uc1tlXTtzPXN8fHt9O2k9dC5FdmVudChpKTtpLnR5cGU9KGU9PT10aGlzLndpZGdldEV2ZW50UHJlZml4P2U6dGhpcy53aWRnZXRFdmVudFByZWZpeCtlKS50b0xvd2VyQ2FzZSgpO2kudGFyZ2V0PXRoaXMuZWxlbWVudFswXTtvPWkub3JpZ2luYWxFdmVudDtpZihvKWZvcihuIGluIG8pbiBpbiBpfHwoaVtuXT1vW25dKTt0aGlzLmVsZW1lbnQudHJpZ2dlcihpLHMpO3JldHVybiEodC5pc0Z1bmN0aW9uKGEpJiZhLmFwcGx5KHRoaXMuZWxlbWVudFswXSxbaV0uY29uY2F0KHMpKT09PSExfHxpLmlzRGVmYXVsdFByZXZlbnRlZCgpKQp9fTt0LmVhY2goe3Nob3c6ImZhZGVJbiIsaGlkZToiZmFkZU91dCJ9LGZ1bmN0aW9uKGUsaSl7dC5XaWRnZXQucHJvdG90eXBlWyJfIitlXT1mdW5jdGlvbihzLG4sbyl7InN0cmluZyI9PXR5cGVvZiBuJiYobj17ZWZmZWN0Om59KTt2YXIgYSxyPW4/bj09PSEwfHwibnVtYmVyIj09dHlwZW9mIG4/aTpuLmVmZmVjdHx8aTplO249bnx8e307Im51bWJlciI9PXR5cGVvZiBuJiYobj17ZHVyYXRpb246bn0pO2E9IXQuaXNFbXB0eU9iamVjdChuKTtuLmNvbXBsZXRlPW87bi5kZWxheSYmcy5kZWxheShuLmRlbGF5KTthJiZ0LmVmZmVjdHMmJnQuZWZmZWN0cy5lZmZlY3Rbcl0/c1tlXShuKTpyIT09ZSYmc1tyXT9zW3JdKG4uZHVyYXRpb24sbi5lYXNpbmcsbyk6cy5xdWV1ZShmdW5jdGlvbihpKXt0KHRoaXMpW2VdKCk7byYmby5jYWxsKHNbMF0pO2koKX0pfX0pfShqUXVlcnkpOyFmdW5jdGlvbih0KXt2YXIgZT0hMTt0KGRvY3VtZW50KS5tb3VzZXVwKGZ1bmN0aW9uKCl7ZT0hMX0pO3Qud2lkZ2V0KCJ1aS5tb3VzZSIse3ZlcnNpb246IjEuMTAuNCIsb3B0aW9uczp7Y2FuY2VsOiJpbnB1dCx0ZXh0YXJlYSxidXR0b24sc2VsZWN0LG9wdGlvbiIsZGlzdGFuY2U6MSxkZWxheTowfSxfbW91c2VJbml0OmZ1bmN0aW9uKCl7dmFyIGU9dGhpczsKdGhpcy5lbGVtZW50LmJpbmQoIm1vdXNlZG93bi4iK3RoaXMud2lkZ2V0TmFtZSxmdW5jdGlvbih0KXtyZXR1cm4gZS5fbW91c2VEb3duKHQpfSkuYmluZCgiY2xpY2suIit0aGlzLndpZGdldE5hbWUsZnVuY3Rpb24oaSl7aWYoITA9PT10LmRhdGEoaS50YXJnZXQsZS53aWRnZXROYW1lKyIucHJldmVudENsaWNrRXZlbnQiKSl7dC5yZW1vdmVEYXRhKGkudGFyZ2V0LGUud2lkZ2V0TmFtZSsiLnByZXZlbnRDbGlja0V2ZW50Iik7aS5zdG9wSW1tZWRpYXRlUHJvcGFnYXRpb24oKTtyZXR1cm4hMX19KTt0aGlzLnN0YXJ0ZWQ9ITF9LF9tb3VzZURlc3Ryb3k6ZnVuY3Rpb24oKXt0aGlzLmVsZW1lbnQudW5iaW5kKCIuIit0aGlzLndpZGdldE5hbWUpO3RoaXMuX21vdXNlTW92ZURlbGVnYXRlJiZ0KGRvY3VtZW50KS51bmJpbmQoIm1vdXNlbW92ZS4iK3RoaXMud2lkZ2V0TmFtZSx0aGlzLl9tb3VzZU1vdmVEZWxlZ2F0ZSkudW5iaW5kKCJtb3VzZXVwLiIrdGhpcy53aWRnZXROYW1lLHRoaXMuX21vdXNlVXBEZWxlZ2F0ZSkKfSxfbW91c2VEb3duOmZ1bmN0aW9uKGkpe2lmKCFlKXt0aGlzLl9tb3VzZVN0YXJ0ZWQmJnRoaXMuX21vdXNlVXAoaSk7dGhpcy5fbW91c2VEb3duRXZlbnQ9aTt2YXIgcz10aGlzLG49MT09PWkud2hpY2gsbz0ic3RyaW5nIj09dHlwZW9mIHRoaXMub3B0aW9ucy5jYW5jZWwmJmkudGFyZ2V0Lm5vZGVOYW1lP3QoaS50YXJnZXQpLmNsb3Nlc3QodGhpcy5vcHRpb25zLmNhbmNlbCkubGVuZ3RoOiExO2lmKCFufHxvfHwhdGhpcy5fbW91c2VDYXB0dXJlKGkpKXJldHVybiEwO3RoaXMubW91c2VEZWxheU1ldD0hdGhpcy5vcHRpb25zLmRlbGF5O3RoaXMubW91c2VEZWxheU1ldHx8KHRoaXMuX21vdXNlRGVsYXlUaW1lcj1zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7cy5tb3VzZURlbGF5TWV0PSEwfSx0aGlzLm9wdGlvbnMuZGVsYXkpKTtpZih0aGlzLl9tb3VzZURpc3RhbmNlTWV0KGkpJiZ0aGlzLl9tb3VzZURlbGF5TWV0KGkpKXt0aGlzLl9tb3VzZVN0YXJ0ZWQ9dGhpcy5fbW91c2VTdGFydChpKSE9PSExOwppZighdGhpcy5fbW91c2VTdGFydGVkKXtpLnByZXZlbnREZWZhdWx0KCk7cmV0dXJuITB9fSEwPT09dC5kYXRhKGkudGFyZ2V0LHRoaXMud2lkZ2V0TmFtZSsiLnByZXZlbnRDbGlja0V2ZW50IikmJnQucmVtb3ZlRGF0YShpLnRhcmdldCx0aGlzLndpZGdldE5hbWUrIi5wcmV2ZW50Q2xpY2tFdmVudCIpO3RoaXMuX21vdXNlTW92ZURlbGVnYXRlPWZ1bmN0aW9uKHQpe3JldHVybiBzLl9tb3VzZU1vdmUodCl9O3RoaXMuX21vdXNlVXBEZWxlZ2F0ZT1mdW5jdGlvbih0KXtyZXR1cm4gcy5fbW91c2VVcCh0KX07dChkb2N1bWVudCkuYmluZCgibW91c2Vtb3ZlLiIrdGhpcy53aWRnZXROYW1lLHRoaXMuX21vdXNlTW92ZURlbGVnYXRlKS5iaW5kKCJtb3VzZXVwLiIrdGhpcy53aWRnZXROYW1lLHRoaXMuX21vdXNlVXBEZWxlZ2F0ZSk7aS5wcmV2ZW50RGVmYXVsdCgpO2U9ITA7cmV0dXJuITB9fSxfbW91c2VNb3ZlOmZ1bmN0aW9uKGUpe2lmKHQudWkuaWUmJighZG9jdW1lbnQuZG9jdW1lbnRNb2RlfHxkb2N1bWVudC5kb2N1bWVudE1vZGU8OSkmJiFlLmJ1dHRvbilyZXR1cm4gdGhpcy5fbW91c2VVcChlKTsKaWYodGhpcy5fbW91c2VTdGFydGVkKXt0aGlzLl9tb3VzZURyYWcoZSk7cmV0dXJuIGUucHJldmVudERlZmF1bHQoKX1pZih0aGlzLl9tb3VzZURpc3RhbmNlTWV0KGUpJiZ0aGlzLl9tb3VzZURlbGF5TWV0KGUpKXt0aGlzLl9tb3VzZVN0YXJ0ZWQ9dGhpcy5fbW91c2VTdGFydCh0aGlzLl9tb3VzZURvd25FdmVudCxlKSE9PSExO3RoaXMuX21vdXNlU3RhcnRlZD90aGlzLl9tb3VzZURyYWcoZSk6dGhpcy5fbW91c2VVcChlKX1yZXR1cm4hdGhpcy5fbW91c2VTdGFydGVkfSxfbW91c2VVcDpmdW5jdGlvbihlKXt0KGRvY3VtZW50KS51bmJpbmQoIm1vdXNlbW92ZS4iK3RoaXMud2lkZ2V0TmFtZSx0aGlzLl9tb3VzZU1vdmVEZWxlZ2F0ZSkudW5iaW5kKCJtb3VzZXVwLiIrdGhpcy53aWRnZXROYW1lLHRoaXMuX21vdXNlVXBEZWxlZ2F0ZSk7aWYodGhpcy5fbW91c2VTdGFydGVkKXt0aGlzLl9tb3VzZVN0YXJ0ZWQ9ITE7ZS50YXJnZXQ9PT10aGlzLl9tb3VzZURvd25FdmVudC50YXJnZXQmJnQuZGF0YShlLnRhcmdldCx0aGlzLndpZGdldE5hbWUrIi5wcmV2ZW50Q2xpY2tFdmVudCIsITApOwp0aGlzLl9tb3VzZVN0b3AoZSl9cmV0dXJuITF9LF9tb3VzZURpc3RhbmNlTWV0OmZ1bmN0aW9uKHQpe3JldHVybiBNYXRoLm1heChNYXRoLmFicyh0aGlzLl9tb3VzZURvd25FdmVudC5wYWdlWC10LnBhZ2VYKSxNYXRoLmFicyh0aGlzLl9tb3VzZURvd25FdmVudC5wYWdlWS10LnBhZ2VZKSk+PXRoaXMub3B0aW9ucy5kaXN0YW5jZX0sX21vdXNlRGVsYXlNZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5tb3VzZURlbGF5TWV0fSxfbW91c2VTdGFydDpmdW5jdGlvbigpe30sX21vdXNlRHJhZzpmdW5jdGlvbigpe30sX21vdXNlU3RvcDpmdW5jdGlvbigpe30sX21vdXNlQ2FwdHVyZTpmdW5jdGlvbigpe3JldHVybiEwfX0pfShqUXVlcnkpOyFmdW5jdGlvbih0LGUpe2Z1bmN0aW9uIGkodCxlLGkpe3JldHVybltwYXJzZUZsb2F0KHRbMF0pKihwLnRlc3QodFswXSk/ZS8xMDA6MSkscGFyc2VGbG9hdCh0WzFdKSoocC50ZXN0KHRbMV0pP2kvMTAwOjEpXX1mdW5jdGlvbiBzKGUsaSl7cmV0dXJuIHBhcnNlSW50KHQuY3NzKGUsaSksMTApfHwwCn1mdW5jdGlvbiBuKGUpe3ZhciBpPWVbMF07cmV0dXJuIDk9PT1pLm5vZGVUeXBlP3t3aWR0aDplLndpZHRoKCksaGVpZ2h0OmUuaGVpZ2h0KCksb2Zmc2V0Ont0b3A6MCxsZWZ0OjB9fTp0LmlzV2luZG93KGkpP3t3aWR0aDplLndpZHRoKCksaGVpZ2h0OmUuaGVpZ2h0KCksb2Zmc2V0Ont0b3A6ZS5zY3JvbGxUb3AoKSxsZWZ0OmUuc2Nyb2xsTGVmdCgpfX06aS5wcmV2ZW50RGVmYXVsdD97d2lkdGg6MCxoZWlnaHQ6MCxvZmZzZXQ6e3RvcDppLnBhZ2VZLGxlZnQ6aS5wYWdlWH19Ont3aWR0aDplLm91dGVyV2lkdGgoKSxoZWlnaHQ6ZS5vdXRlckhlaWdodCgpLG9mZnNldDplLm9mZnNldCgpfX10LnVpPXQudWl8fHt9O3ZhciBvLGE9TWF0aC5tYXgscj1NYXRoLmFicyxoPU1hdGgucm91bmQsbD0vbGVmdHxjZW50ZXJ8cmlnaHQvLHU9L3RvcHxjZW50ZXJ8Ym90dG9tLyxjPS9bXCtcLV1cZCsoXC5bXGRdKyk/JT8vLGQ9L15cdysvLHA9LyUkLyxmPXQuZm4ucG9zaXRpb247dC5wb3NpdGlvbj17c2Nyb2xsYmFyV2lkdGg6ZnVuY3Rpb24oKXtpZihvIT09ZSlyZXR1cm4gbzsKdmFyIGkscyxuPXQoIjxkaXYgc3R5bGU9J2Rpc3BsYXk6YmxvY2s7cG9zaXRpb246YWJzb2x1dGU7d2lkdGg6NTBweDtoZWlnaHQ6NTBweDtvdmVyZmxvdzpoaWRkZW47Jz48ZGl2IHN0eWxlPSdoZWlnaHQ6MTAwcHg7d2lkdGg6YXV0bzsnPjwvZGl2PjwvZGl2PiIpLGE9bi5jaGlsZHJlbigpWzBdO3QoImJvZHkiKS5hcHBlbmQobik7aT1hLm9mZnNldFdpZHRoO24uY3NzKCJvdmVyZmxvdyIsInNjcm9sbCIpO3M9YS5vZmZzZXRXaWR0aDtpPT09cyYmKHM9blswXS5jbGllbnRXaWR0aCk7bi5yZW1vdmUoKTtyZXR1cm4gbz1pLXN9LGdldFNjcm9sbEluZm86ZnVuY3Rpb24oZSl7dmFyIGk9ZS5pc1dpbmRvd3x8ZS5pc0RvY3VtZW50PyIiOmUuZWxlbWVudC5jc3MoIm92ZXJmbG93LXgiKSxzPWUuaXNXaW5kb3d8fGUuaXNEb2N1bWVudD8iIjplLmVsZW1lbnQuY3NzKCJvdmVyZmxvdy15Iiksbj0ic2Nyb2xsIj09PWl8fCJhdXRvIj09PWkmJmUud2lkdGg8ZS5lbGVtZW50WzBdLnNjcm9sbFdpZHRoLG89InNjcm9sbCI9PT1zfHwiYXV0byI9PT1zJiZlLmhlaWdodDxlLmVsZW1lbnRbMF0uc2Nyb2xsSGVpZ2h0OwpyZXR1cm57d2lkdGg6bz90LnBvc2l0aW9uLnNjcm9sbGJhcldpZHRoKCk6MCxoZWlnaHQ6bj90LnBvc2l0aW9uLnNjcm9sbGJhcldpZHRoKCk6MH19LGdldFdpdGhpbkluZm86ZnVuY3Rpb24oZSl7dmFyIGk9dChlfHx3aW5kb3cpLHM9dC5pc1dpbmRvdyhpWzBdKSxuPSEhaVswXSYmOT09PWlbMF0ubm9kZVR5cGU7cmV0dXJue2VsZW1lbnQ6aSxpc1dpbmRvdzpzLGlzRG9jdW1lbnQ6bixvZmZzZXQ6aS5vZmZzZXQoKXx8e2xlZnQ6MCx0b3A6MH0sc2Nyb2xsTGVmdDppLnNjcm9sbExlZnQoKSxzY3JvbGxUb3A6aS5zY3JvbGxUb3AoKSx3aWR0aDpzP2kud2lkdGgoKTppLm91dGVyV2lkdGgoKSxoZWlnaHQ6cz9pLmhlaWdodCgpOmkub3V0ZXJIZWlnaHQoKX19fTt0LmZuLnBvc2l0aW9uPWZ1bmN0aW9uKGUpe2lmKCFlfHwhZS5vZilyZXR1cm4gZi5hcHBseSh0aGlzLGFyZ3VtZW50cyk7ZT10LmV4dGVuZCh7fSxlKTt2YXIgbyxwLGcsbSx2LGIsXz10KGUub2YpLHk9dC5wb3NpdGlvbi5nZXRXaXRoaW5JbmZvKGUud2l0aGluKSx3PXQucG9zaXRpb24uZ2V0U2Nyb2xsSW5mbyh5KSxrPShlLmNvbGxpc2lvbnx8ImZsaXAiKS5zcGxpdCgiICIpLHg9e307CmI9bihfKTtfWzBdLnByZXZlbnREZWZhdWx0JiYoZS5hdD0ibGVmdCB0b3AiKTtwPWIud2lkdGg7Zz1iLmhlaWdodDttPWIub2Zmc2V0O3Y9dC5leHRlbmQoe30sbSk7dC5lYWNoKFsibXkiLCJhdCJdLGZ1bmN0aW9uKCl7dmFyIHQsaSxzPShlW3RoaXNdfHwiIikuc3BsaXQoIiAiKTsxPT09cy5sZW5ndGgmJihzPWwudGVzdChzWzBdKT9zLmNvbmNhdChbImNlbnRlciJdKTp1LnRlc3Qoc1swXSk/WyJjZW50ZXIiXS5jb25jYXQocyk6WyJjZW50ZXIiLCJjZW50ZXIiXSk7c1swXT1sLnRlc3Qoc1swXSk/c1swXToiY2VudGVyIjtzWzFdPXUudGVzdChzWzFdKT9zWzFdOiJjZW50ZXIiO3Q9Yy5leGVjKHNbMF0pO2k9Yy5leGVjKHNbMV0pO3hbdGhpc109W3Q/dFswXTowLGk/aVswXTowXTtlW3RoaXNdPVtkLmV4ZWMoc1swXSlbMF0sZC5leGVjKHNbMV0pWzBdXX0pOzE9PT1rLmxlbmd0aCYmKGtbMV09a1swXSk7InJpZ2h0Ij09PWUuYXRbMF0/di5sZWZ0Kz1wOiJjZW50ZXIiPT09ZS5hdFswXSYmKHYubGVmdCs9cC8yKTsKImJvdHRvbSI9PT1lLmF0WzFdP3YudG9wKz1nOiJjZW50ZXIiPT09ZS5hdFsxXSYmKHYudG9wKz1nLzIpO289aSh4LmF0LHAsZyk7di5sZWZ0Kz1vWzBdO3YudG9wKz1vWzFdO3JldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oKXt2YXIgbixsLHU9dCh0aGlzKSxjPXUub3V0ZXJXaWR0aCgpLGQ9dS5vdXRlckhlaWdodCgpLGY9cyh0aGlzLCJtYXJnaW5MZWZ0IiksYj1zKHRoaXMsIm1hcmdpblRvcCIpLEM9YytmK3ModGhpcywibWFyZ2luUmlnaHQiKSt3LndpZHRoLEQ9ZCtiK3ModGhpcywibWFyZ2luQm90dG9tIikrdy5oZWlnaHQsST10LmV4dGVuZCh7fSx2KSwkPWkoeC5teSx1Lm91dGVyV2lkdGgoKSx1Lm91dGVySGVpZ2h0KCkpOyJyaWdodCI9PT1lLm15WzBdP0kubGVmdC09YzoiY2VudGVyIj09PWUubXlbMF0mJihJLmxlZnQtPWMvMik7ImJvdHRvbSI9PT1lLm15WzFdP0kudG9wLT1kOiJjZW50ZXIiPT09ZS5teVsxXSYmKEkudG9wLT1kLzIpO0kubGVmdCs9JFswXTtJLnRvcCs9JFsxXTsKaWYoIXQuc3VwcG9ydC5vZmZzZXRGcmFjdGlvbnMpe0kubGVmdD1oKEkubGVmdCk7SS50b3A9aChJLnRvcCl9bj17bWFyZ2luTGVmdDpmLG1hcmdpblRvcDpifTt0LmVhY2goWyJsZWZ0IiwidG9wIl0sZnVuY3Rpb24oaSxzKXt0LnVpLnBvc2l0aW9uW2tbaV1dJiZ0LnVpLnBvc2l0aW9uW2tbaV1dW3NdKEkse3RhcmdldFdpZHRoOnAsdGFyZ2V0SGVpZ2h0OmcsZWxlbVdpZHRoOmMsZWxlbUhlaWdodDpkLGNvbGxpc2lvblBvc2l0aW9uOm4sY29sbGlzaW9uV2lkdGg6Qyxjb2xsaXNpb25IZWlnaHQ6RCxvZmZzZXQ6W29bMF0rJFswXSxvWzFdKyRbMV1dLG15OmUubXksYXQ6ZS5hdCx3aXRoaW46eSxlbGVtOnV9KX0pO2UudXNpbmcmJihsPWZ1bmN0aW9uKHQpe3ZhciBpPW0ubGVmdC1JLmxlZnQscz1pK3AtYyxuPW0udG9wLUkudG9wLG89bitnLWQsaD17dGFyZ2V0OntlbGVtZW50Ol8sbGVmdDptLmxlZnQsdG9wOm0udG9wLHdpZHRoOnAsaGVpZ2h0Omd9LGVsZW1lbnQ6e2VsZW1lbnQ6dSxsZWZ0OkkubGVmdCx0b3A6SS50b3Asd2lkdGg6YyxoZWlnaHQ6ZH0saG9yaXpvbnRhbDowPnM/ImxlZnQiOmk+MD8icmlnaHQiOiJjZW50ZXIiLHZlcnRpY2FsOjA+bz8idG9wIjpuPjA/ImJvdHRvbSI6Im1pZGRsZSJ9OwpjPnAmJnIoaStzKTxwJiYoaC5ob3Jpem9udGFsPSJjZW50ZXIiKTtkPmcmJnIobitvKTxnJiYoaC52ZXJ0aWNhbD0ibWlkZGxlIik7aC5pbXBvcnRhbnQ9YShyKGkpLHIocykpPmEocihuKSxyKG8pKT8iaG9yaXpvbnRhbCI6InZlcnRpY2FsIjtlLnVzaW5nLmNhbGwodGhpcyx0LGgpfSk7dS5vZmZzZXQodC5leHRlbmQoSSx7dXNpbmc6bH0pKX0pfTt0LnVpLnBvc2l0aW9uPXtmaXQ6e2xlZnQ6ZnVuY3Rpb24odCxlKXt2YXIgaSxzPWUud2l0aGluLG49cy5pc1dpbmRvdz9zLnNjcm9sbExlZnQ6cy5vZmZzZXQubGVmdCxvPXMud2lkdGgscj10LmxlZnQtZS5jb2xsaXNpb25Qb3NpdGlvbi5tYXJnaW5MZWZ0LGg9bi1yLGw9citlLmNvbGxpc2lvbldpZHRoLW8tbjtpZihlLmNvbGxpc2lvbldpZHRoPm8paWYoaD4wJiYwPj1sKXtpPXQubGVmdCtoK2UuY29sbGlzaW9uV2lkdGgtby1uO3QubGVmdCs9aC1pfWVsc2UgdC5sZWZ0PWw+MCYmMD49aD9uOmg+bD9uK28tZS5jb2xsaXNpb25XaWR0aDpuOwplbHNlIGg+MD90LmxlZnQrPWg6bD4wP3QubGVmdC09bDp0LmxlZnQ9YSh0LmxlZnQtcix0LmxlZnQpfSx0b3A6ZnVuY3Rpb24odCxlKXt2YXIgaSxzPWUud2l0aGluLG49cy5pc1dpbmRvdz9zLnNjcm9sbFRvcDpzLm9mZnNldC50b3Asbz1lLndpdGhpbi5oZWlnaHQscj10LnRvcC1lLmNvbGxpc2lvblBvc2l0aW9uLm1hcmdpblRvcCxoPW4tcixsPXIrZS5jb2xsaXNpb25IZWlnaHQtby1uO2lmKGUuY29sbGlzaW9uSGVpZ2h0Pm8paWYoaD4wJiYwPj1sKXtpPXQudG9wK2grZS5jb2xsaXNpb25IZWlnaHQtby1uO3QudG9wKz1oLWl9ZWxzZSB0LnRvcD1sPjAmJjA+PWg/bjpoPmw/bitvLWUuY29sbGlzaW9uSGVpZ2h0Om47ZWxzZSBoPjA/dC50b3ArPWg6bD4wP3QudG9wLT1sOnQudG9wPWEodC50b3Atcix0LnRvcCl9fSxmbGlwOntsZWZ0OmZ1bmN0aW9uKHQsZSl7dmFyIGkscyxuPWUud2l0aGluLG89bi5vZmZzZXQubGVmdCtuLnNjcm9sbExlZnQsYT1uLndpZHRoLGg9bi5pc1dpbmRvdz9uLnNjcm9sbExlZnQ6bi5vZmZzZXQubGVmdCxsPXQubGVmdC1lLmNvbGxpc2lvblBvc2l0aW9uLm1hcmdpbkxlZnQsdT1sLWgsYz1sK2UuY29sbGlzaW9uV2lkdGgtYS1oLGQ9ImxlZnQiPT09ZS5teVswXT8tZS5lbGVtV2lkdGg6InJpZ2h0Ij09PWUubXlbMF0/ZS5lbGVtV2lkdGg6MCxwPSJsZWZ0Ij09PWUuYXRbMF0/ZS50YXJnZXRXaWR0aDoicmlnaHQiPT09ZS5hdFswXT8tZS50YXJnZXRXaWR0aDowLGY9LTIqZS5vZmZzZXRbMF07CmlmKDA+dSl7aT10LmxlZnQrZCtwK2YrZS5jb2xsaXNpb25XaWR0aC1hLW87KDA+aXx8aTxyKHUpKSYmKHQubGVmdCs9ZCtwK2YpfWVsc2UgaWYoYz4wKXtzPXQubGVmdC1lLmNvbGxpc2lvblBvc2l0aW9uLm1hcmdpbkxlZnQrZCtwK2YtaDsocz4wfHxyKHMpPGMpJiYodC5sZWZ0Kz1kK3ArZil9fSx0b3A6ZnVuY3Rpb24odCxlKXt2YXIgaSxzLG49ZS53aXRoaW4sbz1uLm9mZnNldC50b3Arbi5zY3JvbGxUb3AsYT1uLmhlaWdodCxoPW4uaXNXaW5kb3c/bi5zY3JvbGxUb3A6bi5vZmZzZXQudG9wLGw9dC50b3AtZS5jb2xsaXNpb25Qb3NpdGlvbi5tYXJnaW5Ub3AsdT1sLWgsYz1sK2UuY29sbGlzaW9uSGVpZ2h0LWEtaCxkPSJ0b3AiPT09ZS5teVsxXSxwPWQ/LWUuZWxlbUhlaWdodDoiYm90dG9tIj09PWUubXlbMV0/ZS5lbGVtSGVpZ2h0OjAsZj0idG9wIj09PWUuYXRbMV0/ZS50YXJnZXRIZWlnaHQ6ImJvdHRvbSI9PT1lLmF0WzFdPy1lLnRhcmdldEhlaWdodDowLGc9LTIqZS5vZmZzZXRbMV07CmlmKDA+dSl7cz10LnRvcCtwK2YrZytlLmNvbGxpc2lvbkhlaWdodC1hLW87dC50b3ArcCtmK2c+dSYmKDA+c3x8czxyKHUpKSYmKHQudG9wKz1wK2YrZyl9ZWxzZSBpZihjPjApe2k9dC50b3AtZS5jb2xsaXNpb25Qb3NpdGlvbi5tYXJnaW5Ub3ArcCtmK2ctaDt0LnRvcCtwK2YrZz5jJiYoaT4wfHxyKGkpPGMpJiYodC50b3ArPXArZitnKX19fSxmbGlwZml0OntsZWZ0OmZ1bmN0aW9uKCl7dC51aS5wb3NpdGlvbi5mbGlwLmxlZnQuYXBwbHkodGhpcyxhcmd1bWVudHMpO3QudWkucG9zaXRpb24uZml0LmxlZnQuYXBwbHkodGhpcyxhcmd1bWVudHMpfSx0b3A6ZnVuY3Rpb24oKXt0LnVpLnBvc2l0aW9uLmZsaXAudG9wLmFwcGx5KHRoaXMsYXJndW1lbnRzKTt0LnVpLnBvc2l0aW9uLmZpdC50b3AuYXBwbHkodGhpcyxhcmd1bWVudHMpfX19OyFmdW5jdGlvbigpe3ZhciBlLGkscyxuLG8sYT1kb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZSgiYm9keSIpWzBdLHI9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2Iik7CmU9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChhPyJkaXYiOiJib2R5Iik7cz17dmlzaWJpbGl0eToiaGlkZGVuIix3aWR0aDowLGhlaWdodDowLGJvcmRlcjowLG1hcmdpbjowLGJhY2tncm91bmQ6Im5vbmUifTthJiZ0LmV4dGVuZChzLHtwb3NpdGlvbjoiYWJzb2x1dGUiLGxlZnQ6Ii0xMDAwcHgiLHRvcDoiLTEwMDBweCJ9KTtmb3IobyBpbiBzKWUuc3R5bGVbb109c1tvXTtlLmFwcGVuZENoaWxkKHIpO2k9YXx8ZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50O2kuaW5zZXJ0QmVmb3JlKGUsaS5maXJzdENoaWxkKTtyLnN0eWxlLmNzc1RleHQ9InBvc2l0aW9uOiBhYnNvbHV0ZTsgbGVmdDogMTAuNzQzMjIyMnB4OyI7bj10KHIpLm9mZnNldCgpLmxlZnQ7dC5zdXBwb3J0Lm9mZnNldEZyYWN0aW9ucz1uPjEwJiYxMT5uO2UuaW5uZXJIVE1MPSIiO2kucmVtb3ZlQ2hpbGQoZSl9KCl9KGpRdWVyeSk7IWZ1bmN0aW9uKHQpe3Qud2lkZ2V0KCJ1aS5kcmFnZ2FibGUiLHQudWkubW91c2Use3ZlcnNpb246IjEuMTAuNCIsd2lkZ2V0RXZlbnRQcmVmaXg6ImRyYWciLG9wdGlvbnM6e2FkZENsYXNzZXM6ITAsYXBwZW5kVG86InBhcmVudCIsYXhpczohMSxjb25uZWN0VG9Tb3J0YWJsZTohMSxjb250YWlubWVudDohMSxjdXJzb3I6ImF1dG8iLGN1cnNvckF0OiExLGdyaWQ6ITEsaGFuZGxlOiExLGhlbHBlcjoib3JpZ2luYWwiLGlmcmFtZUZpeDohMSxvcGFjaXR5OiExLHJlZnJlc2hQb3NpdGlvbnM6ITEscmV2ZXJ0OiExLHJldmVydER1cmF0aW9uOjUwMCxzY29wZToiZGVmYXVsdCIsc2Nyb2xsOiEwLHNjcm9sbFNlbnNpdGl2aXR5OjIwLHNjcm9sbFNwZWVkOjIwLHNuYXA6ITEsc25hcE1vZGU6ImJvdGgiLHNuYXBUb2xlcmFuY2U6MjAsc3RhY2s6ITEsekluZGV4OiExLGRyYWc6bnVsbCxzdGFydDpudWxsLHN0b3A6bnVsbH0sX2NyZWF0ZTpmdW5jdGlvbigpeyJvcmlnaW5hbCIhPT10aGlzLm9wdGlvbnMuaGVscGVyfHwvXig/OnJ8YXxmKS8udGVzdCh0aGlzLmVsZW1lbnQuY3NzKCJwb3NpdGlvbiIpKXx8KHRoaXMuZWxlbWVudFswXS5zdHlsZS5wb3NpdGlvbj0icmVsYXRpdmUiKTsKdGhpcy5vcHRpb25zLmFkZENsYXNzZXMmJnRoaXMuZWxlbWVudC5hZGRDbGFzcygidWktZHJhZ2dhYmxlIik7dGhpcy5vcHRpb25zLmRpc2FibGVkJiZ0aGlzLmVsZW1lbnQuYWRkQ2xhc3MoInVpLWRyYWdnYWJsZS1kaXNhYmxlZCIpO3RoaXMuX21vdXNlSW5pdCgpfSxfZGVzdHJveTpmdW5jdGlvbigpe3RoaXMuZWxlbWVudC5yZW1vdmVDbGFzcygidWktZHJhZ2dhYmxlIHVpLWRyYWdnYWJsZS1kcmFnZ2luZyB1aS1kcmFnZ2FibGUtZGlzYWJsZWQiKTt0aGlzLl9tb3VzZURlc3Ryb3koKX0sX21vdXNlQ2FwdHVyZTpmdW5jdGlvbihlKXt2YXIgaT10aGlzLm9wdGlvbnM7aWYodGhpcy5oZWxwZXJ8fGkuZGlzYWJsZWR8fHQoZS50YXJnZXQpLmNsb3Nlc3QoIi51aS1yZXNpemFibGUtaGFuZGxlIikubGVuZ3RoPjApcmV0dXJuITE7dGhpcy5oYW5kbGU9dGhpcy5fZ2V0SGFuZGxlKGUpO2lmKCF0aGlzLmhhbmRsZSlyZXR1cm4hMTt0KGkuaWZyYW1lRml4PT09ITA/ImlmcmFtZSI6aS5pZnJhbWVGaXgpLmVhY2goZnVuY3Rpb24oKXt0KCI8ZGl2IGNsYXNzPSd1aS1kcmFnZ2FibGUtaWZyYW1lRml4JyBzdHlsZT0nYmFja2dyb3VuZDogI2ZmZjsnPjwvZGl2PiIpLmNzcyh7d2lkdGg6dGhpcy5vZmZzZXRXaWR0aCsicHgiLGhlaWdodDp0aGlzLm9mZnNldEhlaWdodCsicHgiLHBvc2l0aW9uOiJhYnNvbHV0ZSIsb3BhY2l0eToiMC4wMDEiLHpJbmRleDoxZTN9KS5jc3ModCh0aGlzKS5vZmZzZXQoKSkuYXBwZW5kVG8oImJvZHkiKQp9KTtyZXR1cm4hMH0sX21vdXNlU3RhcnQ6ZnVuY3Rpb24oZSl7dmFyIGk9dGhpcy5vcHRpb25zO3RoaXMuaGVscGVyPXRoaXMuX2NyZWF0ZUhlbHBlcihlKTt0aGlzLmhlbHBlci5hZGRDbGFzcygidWktZHJhZ2dhYmxlLWRyYWdnaW5nIik7dGhpcy5fY2FjaGVIZWxwZXJQcm9wb3J0aW9ucygpO3QudWkuZGRtYW5hZ2VyJiYodC51aS5kZG1hbmFnZXIuY3VycmVudD10aGlzKTt0aGlzLl9jYWNoZU1hcmdpbnMoKTt0aGlzLmNzc1Bvc2l0aW9uPXRoaXMuaGVscGVyLmNzcygicG9zaXRpb24iKTt0aGlzLnNjcm9sbFBhcmVudD10aGlzLmhlbHBlci5zY3JvbGxQYXJlbnQoKTt0aGlzLm9mZnNldFBhcmVudD10aGlzLmhlbHBlci5vZmZzZXRQYXJlbnQoKTt0aGlzLm9mZnNldFBhcmVudENzc1Bvc2l0aW9uPXRoaXMub2Zmc2V0UGFyZW50LmNzcygicG9zaXRpb24iKTt0aGlzLm9mZnNldD10aGlzLnBvc2l0aW9uQWJzPXRoaXMuZWxlbWVudC5vZmZzZXQoKTt0aGlzLm9mZnNldD17dG9wOnRoaXMub2Zmc2V0LnRvcC10aGlzLm1hcmdpbnMudG9wLGxlZnQ6dGhpcy5vZmZzZXQubGVmdC10aGlzLm1hcmdpbnMubGVmdH07CnRoaXMub2Zmc2V0LnNjcm9sbD0hMTt0LmV4dGVuZCh0aGlzLm9mZnNldCx7Y2xpY2s6e2xlZnQ6ZS5wYWdlWC10aGlzLm9mZnNldC5sZWZ0LHRvcDplLnBhZ2VZLXRoaXMub2Zmc2V0LnRvcH0scGFyZW50OnRoaXMuX2dldFBhcmVudE9mZnNldCgpLHJlbGF0aXZlOnRoaXMuX2dldFJlbGF0aXZlT2Zmc2V0KCl9KTt0aGlzLm9yaWdpbmFsUG9zaXRpb249dGhpcy5wb3NpdGlvbj10aGlzLl9nZW5lcmF0ZVBvc2l0aW9uKGUpO3RoaXMub3JpZ2luYWxQYWdlWD1lLnBhZ2VYO3RoaXMub3JpZ2luYWxQYWdlWT1lLnBhZ2VZO2kuY3Vyc29yQXQmJnRoaXMuX2FkanVzdE9mZnNldEZyb21IZWxwZXIoaS5jdXJzb3JBdCk7dGhpcy5fc2V0Q29udGFpbm1lbnQoKTtpZih0aGlzLl90cmlnZ2VyKCJzdGFydCIsZSk9PT0hMSl7dGhpcy5fY2xlYXIoKTtyZXR1cm4hMX10aGlzLl9jYWNoZUhlbHBlclByb3BvcnRpb25zKCk7dC51aS5kZG1hbmFnZXImJiFpLmRyb3BCZWhhdmlvdXImJnQudWkuZGRtYW5hZ2VyLnByZXBhcmVPZmZzZXRzKHRoaXMsZSk7CnRoaXMuX21vdXNlRHJhZyhlLCEwKTt0LnVpLmRkbWFuYWdlciYmdC51aS5kZG1hbmFnZXIuZHJhZ1N0YXJ0KHRoaXMsZSk7cmV0dXJuITB9LF9tb3VzZURyYWc6ZnVuY3Rpb24oZSxpKXsiZml4ZWQiPT09dGhpcy5vZmZzZXRQYXJlbnRDc3NQb3NpdGlvbiYmKHRoaXMub2Zmc2V0LnBhcmVudD10aGlzLl9nZXRQYXJlbnRPZmZzZXQoKSk7dGhpcy5wb3NpdGlvbj10aGlzLl9nZW5lcmF0ZVBvc2l0aW9uKGUpO3RoaXMucG9zaXRpb25BYnM9dGhpcy5fY29udmVydFBvc2l0aW9uVG8oImFic29sdXRlIik7aWYoIWkpe3ZhciBzPXRoaXMuX3VpSGFzaCgpO2lmKHRoaXMuX3RyaWdnZXIoImRyYWciLGUscyk9PT0hMSl7dGhpcy5fbW91c2VVcCh7fSk7cmV0dXJuITF9dGhpcy5wb3NpdGlvbj1zLnBvc2l0aW9ufXRoaXMub3B0aW9ucy5heGlzJiYieSI9PT10aGlzLm9wdGlvbnMuYXhpc3x8KHRoaXMuaGVscGVyWzBdLnN0eWxlLmxlZnQ9dGhpcy5wb3NpdGlvbi5sZWZ0KyJweCIpO3RoaXMub3B0aW9ucy5heGlzJiYieCI9PT10aGlzLm9wdGlvbnMuYXhpc3x8KHRoaXMuaGVscGVyWzBdLnN0eWxlLnRvcD10aGlzLnBvc2l0aW9uLnRvcCsicHgiKTsKdC51aS5kZG1hbmFnZXImJnQudWkuZGRtYW5hZ2VyLmRyYWcodGhpcyxlKTtyZXR1cm4hMX0sX21vdXNlU3RvcDpmdW5jdGlvbihlKXt2YXIgaT10aGlzLHM9ITE7dC51aS5kZG1hbmFnZXImJiF0aGlzLm9wdGlvbnMuZHJvcEJlaGF2aW91ciYmKHM9dC51aS5kZG1hbmFnZXIuZHJvcCh0aGlzLGUpKTtpZih0aGlzLmRyb3BwZWQpe3M9dGhpcy5kcm9wcGVkO3RoaXMuZHJvcHBlZD0hMX1pZigib3JpZ2luYWwiPT09dGhpcy5vcHRpb25zLmhlbHBlciYmIXQuY29udGFpbnModGhpcy5lbGVtZW50WzBdLm93bmVyRG9jdW1lbnQsdGhpcy5lbGVtZW50WzBdKSlyZXR1cm4hMTsiaW52YWxpZCI9PT10aGlzLm9wdGlvbnMucmV2ZXJ0JiYhc3x8InZhbGlkIj09PXRoaXMub3B0aW9ucy5yZXZlcnQmJnN8fHRoaXMub3B0aW9ucy5yZXZlcnQ9PT0hMHx8dC5pc0Z1bmN0aW9uKHRoaXMub3B0aW9ucy5yZXZlcnQpJiZ0aGlzLm9wdGlvbnMucmV2ZXJ0LmNhbGwodGhpcy5lbGVtZW50LHMpP3QodGhpcy5oZWxwZXIpLmFuaW1hdGUodGhpcy5vcmlnaW5hbFBvc2l0aW9uLHBhcnNlSW50KHRoaXMub3B0aW9ucy5yZXZlcnREdXJhdGlvbiwxMCksZnVuY3Rpb24oKXtpLl90cmlnZ2VyKCJzdG9wIixlKSE9PSExJiZpLl9jbGVhcigpCn0pOnRoaXMuX3RyaWdnZXIoInN0b3AiLGUpIT09ITEmJnRoaXMuX2NsZWFyKCk7cmV0dXJuITF9LF9tb3VzZVVwOmZ1bmN0aW9uKGUpe3QoImRpdi51aS1kcmFnZ2FibGUtaWZyYW1lRml4IikuZWFjaChmdW5jdGlvbigpe3RoaXMucGFyZW50Tm9kZS5yZW1vdmVDaGlsZCh0aGlzKX0pO3QudWkuZGRtYW5hZ2VyJiZ0LnVpLmRkbWFuYWdlci5kcmFnU3RvcCh0aGlzLGUpO3JldHVybiB0LnVpLm1vdXNlLnByb3RvdHlwZS5fbW91c2VVcC5jYWxsKHRoaXMsZSl9LGNhbmNlbDpmdW5jdGlvbigpe3RoaXMuaGVscGVyLmlzKCIudWktZHJhZ2dhYmxlLWRyYWdnaW5nIik/dGhpcy5fbW91c2VVcCh7fSk6dGhpcy5fY2xlYXIoKTtyZXR1cm4gdGhpc30sX2dldEhhbmRsZTpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5vcHRpb25zLmhhbmRsZT8hIXQoZS50YXJnZXQpLmNsb3Nlc3QodGhpcy5lbGVtZW50LmZpbmQodGhpcy5vcHRpb25zLmhhbmRsZSkpLmxlbmd0aDohMH0sX2NyZWF0ZUhlbHBlcjpmdW5jdGlvbihlKXt2YXIgaT10aGlzLm9wdGlvbnMscz10LmlzRnVuY3Rpb24oaS5oZWxwZXIpP3QoaS5oZWxwZXIuYXBwbHkodGhpcy5lbGVtZW50WzBdLFtlXSkpOiJjbG9uZSI9PT1pLmhlbHBlcj90aGlzLmVsZW1lbnQuY2xvbmUoKS5yZW1vdmVBdHRyKCJpZCIpOnRoaXMuZWxlbWVudDsKcy5wYXJlbnRzKCJib2R5IikubGVuZ3RofHxzLmFwcGVuZFRvKCJwYXJlbnQiPT09aS5hcHBlbmRUbz90aGlzLmVsZW1lbnRbMF0ucGFyZW50Tm9kZTppLmFwcGVuZFRvKTtzWzBdPT09dGhpcy5lbGVtZW50WzBdfHwvKGZpeGVkfGFic29sdXRlKS8udGVzdChzLmNzcygicG9zaXRpb24iKSl8fHMuY3NzKCJwb3NpdGlvbiIsImFic29sdXRlIik7cmV0dXJuIHN9LF9hZGp1c3RPZmZzZXRGcm9tSGVscGVyOmZ1bmN0aW9uKGUpeyJzdHJpbmciPT10eXBlb2YgZSYmKGU9ZS5zcGxpdCgiICIpKTt0LmlzQXJyYXkoZSkmJihlPXtsZWZ0OitlWzBdLHRvcDorZVsxXXx8MH0pOyJsZWZ0ImluIGUmJih0aGlzLm9mZnNldC5jbGljay5sZWZ0PWUubGVmdCt0aGlzLm1hcmdpbnMubGVmdCk7InJpZ2h0ImluIGUmJih0aGlzLm9mZnNldC5jbGljay5sZWZ0PXRoaXMuaGVscGVyUHJvcG9ydGlvbnMud2lkdGgtZS5yaWdodCt0aGlzLm1hcmdpbnMubGVmdCk7InRvcCJpbiBlJiYodGhpcy5vZmZzZXQuY2xpY2sudG9wPWUudG9wK3RoaXMubWFyZ2lucy50b3ApOwoiYm90dG9tImluIGUmJih0aGlzLm9mZnNldC5jbGljay50b3A9dGhpcy5oZWxwZXJQcm9wb3J0aW9ucy5oZWlnaHQtZS5ib3R0b20rdGhpcy5tYXJnaW5zLnRvcCl9LF9nZXRQYXJlbnRPZmZzZXQ6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLm9mZnNldFBhcmVudC5vZmZzZXQoKTtpZigiYWJzb2x1dGUiPT09dGhpcy5jc3NQb3NpdGlvbiYmdGhpcy5zY3JvbGxQYXJlbnRbMF0hPT1kb2N1bWVudCYmdC5jb250YWlucyh0aGlzLnNjcm9sbFBhcmVudFswXSx0aGlzLm9mZnNldFBhcmVudFswXSkpe2UubGVmdCs9dGhpcy5zY3JvbGxQYXJlbnQuc2Nyb2xsTGVmdCgpO2UudG9wKz10aGlzLnNjcm9sbFBhcmVudC5zY3JvbGxUb3AoKX0odGhpcy5vZmZzZXRQYXJlbnRbMF09PT1kb2N1bWVudC5ib2R5fHx0aGlzLm9mZnNldFBhcmVudFswXS50YWdOYW1lJiYiaHRtbCI9PT10aGlzLm9mZnNldFBhcmVudFswXS50YWdOYW1lLnRvTG93ZXJDYXNlKCkmJnQudWkuaWUpJiYoZT17dG9wOjAsbGVmdDowfSk7CnJldHVybnt0b3A6ZS50b3ArKHBhcnNlSW50KHRoaXMub2Zmc2V0UGFyZW50LmNzcygiYm9yZGVyVG9wV2lkdGgiKSwxMCl8fDApLGxlZnQ6ZS5sZWZ0KyhwYXJzZUludCh0aGlzLm9mZnNldFBhcmVudC5jc3MoImJvcmRlckxlZnRXaWR0aCIpLDEwKXx8MCl9fSxfZ2V0UmVsYXRpdmVPZmZzZXQ6ZnVuY3Rpb24oKXtpZigicmVsYXRpdmUiPT09dGhpcy5jc3NQb3NpdGlvbil7dmFyIHQ9dGhpcy5lbGVtZW50LnBvc2l0aW9uKCk7cmV0dXJue3RvcDp0LnRvcC0ocGFyc2VJbnQodGhpcy5oZWxwZXIuY3NzKCJ0b3AiKSwxMCl8fDApK3RoaXMuc2Nyb2xsUGFyZW50LnNjcm9sbFRvcCgpLGxlZnQ6dC5sZWZ0LShwYXJzZUludCh0aGlzLmhlbHBlci5jc3MoImxlZnQiKSwxMCl8fDApK3RoaXMuc2Nyb2xsUGFyZW50LnNjcm9sbExlZnQoKX19cmV0dXJue3RvcDowLGxlZnQ6MH19LF9jYWNoZU1hcmdpbnM6ZnVuY3Rpb24oKXt0aGlzLm1hcmdpbnM9e2xlZnQ6cGFyc2VJbnQodGhpcy5lbGVtZW50LmNzcygibWFyZ2luTGVmdCIpLDEwKXx8MCx0b3A6cGFyc2VJbnQodGhpcy5lbGVtZW50LmNzcygibWFyZ2luVG9wIiksMTApfHwwLHJpZ2h0OnBhcnNlSW50KHRoaXMuZWxlbWVudC5jc3MoIm1hcmdpblJpZ2h0IiksMTApfHwwLGJvdHRvbTpwYXJzZUludCh0aGlzLmVsZW1lbnQuY3NzKCJtYXJnaW5Cb3R0b20iKSwxMCl8fDB9Cn0sX2NhY2hlSGVscGVyUHJvcG9ydGlvbnM6ZnVuY3Rpb24oKXt0aGlzLmhlbHBlclByb3BvcnRpb25zPXt3aWR0aDp0aGlzLmhlbHBlci5vdXRlcldpZHRoKCksaGVpZ2h0OnRoaXMuaGVscGVyLm91dGVySGVpZ2h0KCl9fSxfc2V0Q29udGFpbm1lbnQ6ZnVuY3Rpb24oKXt2YXIgZSxpLHMsbj10aGlzLm9wdGlvbnM7aWYobi5jb250YWlubWVudClpZigid2luZG93IiE9PW4uY29udGFpbm1lbnQpaWYoImRvY3VtZW50IiE9PW4uY29udGFpbm1lbnQpaWYobi5jb250YWlubWVudC5jb25zdHJ1Y3RvciE9PUFycmF5KXsicGFyZW50Ij09PW4uY29udGFpbm1lbnQmJihuLmNvbnRhaW5tZW50PXRoaXMuaGVscGVyWzBdLnBhcmVudE5vZGUpO2k9dChuLmNvbnRhaW5tZW50KTtzPWlbMF07aWYocyl7ZT0iaGlkZGVuIiE9PWkuY3NzKCJvdmVyZmxvdyIpO3RoaXMuY29udGFpbm1lbnQ9WyhwYXJzZUludChpLmNzcygiYm9yZGVyTGVmdFdpZHRoIiksMTApfHwwKSsocGFyc2VJbnQoaS5jc3MoInBhZGRpbmdMZWZ0IiksMTApfHwwKSwocGFyc2VJbnQoaS5jc3MoImJvcmRlclRvcFdpZHRoIiksMTApfHwwKSsocGFyc2VJbnQoaS5jc3MoInBhZGRpbmdUb3AiKSwxMCl8fDApLChlP01hdGgubWF4KHMuc2Nyb2xsV2lkdGgscy5vZmZzZXRXaWR0aCk6cy5vZmZzZXRXaWR0aCktKHBhcnNlSW50KGkuY3NzKCJib3JkZXJSaWdodFdpZHRoIiksMTApfHwwKS0ocGFyc2VJbnQoaS5jc3MoInBhZGRpbmdSaWdodCIpLDEwKXx8MCktdGhpcy5oZWxwZXJQcm9wb3J0aW9ucy53aWR0aC10aGlzLm1hcmdpbnMubGVmdC10aGlzLm1hcmdpbnMucmlnaHQsKGU/TWF0aC5tYXgocy5zY3JvbGxIZWlnaHQscy5vZmZzZXRIZWlnaHQpOnMub2Zmc2V0SGVpZ2h0KS0ocGFyc2VJbnQoaS5jc3MoImJvcmRlckJvdHRvbVdpZHRoIiksMTApfHwwKS0ocGFyc2VJbnQoaS5jc3MoInBhZGRpbmdCb3R0b20iKSwxMCl8fDApLXRoaXMuaGVscGVyUHJvcG9ydGlvbnMuaGVpZ2h0LXRoaXMubWFyZ2lucy50b3AtdGhpcy5tYXJnaW5zLmJvdHRvbV07CnRoaXMucmVsYXRpdmVfY29udGFpbmVyPWl9fWVsc2UgdGhpcy5jb250YWlubWVudD1uLmNvbnRhaW5tZW50O2Vsc2UgdGhpcy5jb250YWlubWVudD1bMCwwLHQoZG9jdW1lbnQpLndpZHRoKCktdGhpcy5oZWxwZXJQcm9wb3J0aW9ucy53aWR0aC10aGlzLm1hcmdpbnMubGVmdCwodChkb2N1bWVudCkuaGVpZ2h0KCl8fGRvY3VtZW50LmJvZHkucGFyZW50Tm9kZS5zY3JvbGxIZWlnaHQpLXRoaXMuaGVscGVyUHJvcG9ydGlvbnMuaGVpZ2h0LXRoaXMubWFyZ2lucy50b3BdO2Vsc2UgdGhpcy5jb250YWlubWVudD1bdCh3aW5kb3cpLnNjcm9sbExlZnQoKS10aGlzLm9mZnNldC5yZWxhdGl2ZS5sZWZ0LXRoaXMub2Zmc2V0LnBhcmVudC5sZWZ0LHQod2luZG93KS5zY3JvbGxUb3AoKS10aGlzLm9mZnNldC5yZWxhdGl2ZS50b3AtdGhpcy5vZmZzZXQucGFyZW50LnRvcCx0KHdpbmRvdykuc2Nyb2xsTGVmdCgpK3Qod2luZG93KS53aWR0aCgpLXRoaXMuaGVscGVyUHJvcG9ydGlvbnMud2lkdGgtdGhpcy5tYXJnaW5zLmxlZnQsdCh3aW5kb3cpLnNjcm9sbFRvcCgpKyh0KHdpbmRvdykuaGVpZ2h0KCl8fGRvY3VtZW50LmJvZHkucGFyZW50Tm9kZS5zY3JvbGxIZWlnaHQpLXRoaXMuaGVscGVyUHJvcG9ydGlvbnMuaGVpZ2h0LXRoaXMubWFyZ2lucy50b3BdOwplbHNlIHRoaXMuY29udGFpbm1lbnQ9bnVsbH0sX2NvbnZlcnRQb3NpdGlvblRvOmZ1bmN0aW9uKGUsaSl7aXx8KGk9dGhpcy5wb3NpdGlvbik7dmFyIHM9ImFic29sdXRlIj09PWU/MTotMSxuPSJhYnNvbHV0ZSIhPT10aGlzLmNzc1Bvc2l0aW9ufHx0aGlzLnNjcm9sbFBhcmVudFswXSE9PWRvY3VtZW50JiZ0LmNvbnRhaW5zKHRoaXMuc2Nyb2xsUGFyZW50WzBdLHRoaXMub2Zmc2V0UGFyZW50WzBdKT90aGlzLnNjcm9sbFBhcmVudDp0aGlzLm9mZnNldFBhcmVudDt0aGlzLm9mZnNldC5zY3JvbGx8fCh0aGlzLm9mZnNldC5zY3JvbGw9e3RvcDpuLnNjcm9sbFRvcCgpLGxlZnQ6bi5zY3JvbGxMZWZ0KCl9KTtyZXR1cm57dG9wOmkudG9wK3RoaXMub2Zmc2V0LnJlbGF0aXZlLnRvcCpzK3RoaXMub2Zmc2V0LnBhcmVudC50b3Aqcy0oImZpeGVkIj09PXRoaXMuY3NzUG9zaXRpb24/LXRoaXMuc2Nyb2xsUGFyZW50LnNjcm9sbFRvcCgpOnRoaXMub2Zmc2V0LnNjcm9sbC50b3ApKnMsbGVmdDppLmxlZnQrdGhpcy5vZmZzZXQucmVsYXRpdmUubGVmdCpzK3RoaXMub2Zmc2V0LnBhcmVudC5sZWZ0KnMtKCJmaXhlZCI9PT10aGlzLmNzc1Bvc2l0aW9uPy10aGlzLnNjcm9sbFBhcmVudC5zY3JvbGxMZWZ0KCk6dGhpcy5vZmZzZXQuc2Nyb2xsLmxlZnQpKnN9Cn0sX2dlbmVyYXRlUG9zaXRpb246ZnVuY3Rpb24oZSl7dmFyIGkscyxuLG8sYT10aGlzLm9wdGlvbnMscj0iYWJzb2x1dGUiIT09dGhpcy5jc3NQb3NpdGlvbnx8dGhpcy5zY3JvbGxQYXJlbnRbMF0hPT1kb2N1bWVudCYmdC5jb250YWlucyh0aGlzLnNjcm9sbFBhcmVudFswXSx0aGlzLm9mZnNldFBhcmVudFswXSk/dGhpcy5zY3JvbGxQYXJlbnQ6dGhpcy5vZmZzZXRQYXJlbnQsaD1lLnBhZ2VYLGw9ZS5wYWdlWTt0aGlzLm9mZnNldC5zY3JvbGx8fCh0aGlzLm9mZnNldC5zY3JvbGw9e3RvcDpyLnNjcm9sbFRvcCgpLGxlZnQ6ci5zY3JvbGxMZWZ0KCl9KTtpZih0aGlzLm9yaWdpbmFsUG9zaXRpb24pe2lmKHRoaXMuY29udGFpbm1lbnQpe2lmKHRoaXMucmVsYXRpdmVfY29udGFpbmVyKXtzPXRoaXMucmVsYXRpdmVfY29udGFpbmVyLm9mZnNldCgpO2k9W3RoaXMuY29udGFpbm1lbnRbMF0rcy5sZWZ0LHRoaXMuY29udGFpbm1lbnRbMV0rcy50b3AsdGhpcy5jb250YWlubWVudFsyXStzLmxlZnQsdGhpcy5jb250YWlubWVudFszXStzLnRvcF0KfWVsc2UgaT10aGlzLmNvbnRhaW5tZW50O2UucGFnZVgtdGhpcy5vZmZzZXQuY2xpY2subGVmdDxpWzBdJiYoaD1pWzBdK3RoaXMub2Zmc2V0LmNsaWNrLmxlZnQpO2UucGFnZVktdGhpcy5vZmZzZXQuY2xpY2sudG9wPGlbMV0mJihsPWlbMV0rdGhpcy5vZmZzZXQuY2xpY2sudG9wKTtlLnBhZ2VYLXRoaXMub2Zmc2V0LmNsaWNrLmxlZnQ+aVsyXSYmKGg9aVsyXSt0aGlzLm9mZnNldC5jbGljay5sZWZ0KTtlLnBhZ2VZLXRoaXMub2Zmc2V0LmNsaWNrLnRvcD5pWzNdJiYobD1pWzNdK3RoaXMub2Zmc2V0LmNsaWNrLnRvcCl9aWYoYS5ncmlkKXtuPWEuZ3JpZFsxXT90aGlzLm9yaWdpbmFsUGFnZVkrTWF0aC5yb3VuZCgobC10aGlzLm9yaWdpbmFsUGFnZVkpL2EuZ3JpZFsxXSkqYS5ncmlkWzFdOnRoaXMub3JpZ2luYWxQYWdlWTtsPWk/bi10aGlzLm9mZnNldC5jbGljay50b3A+PWlbMV18fG4tdGhpcy5vZmZzZXQuY2xpY2sudG9wPmlbM10/bjpuLXRoaXMub2Zmc2V0LmNsaWNrLnRvcD49aVsxXT9uLWEuZ3JpZFsxXTpuK2EuZ3JpZFsxXTpuOwpvPWEuZ3JpZFswXT90aGlzLm9yaWdpbmFsUGFnZVgrTWF0aC5yb3VuZCgoaC10aGlzLm9yaWdpbmFsUGFnZVgpL2EuZ3JpZFswXSkqYS5ncmlkWzBdOnRoaXMub3JpZ2luYWxQYWdlWDtoPWk/by10aGlzLm9mZnNldC5jbGljay5sZWZ0Pj1pWzBdfHxvLXRoaXMub2Zmc2V0LmNsaWNrLmxlZnQ+aVsyXT9vOm8tdGhpcy5vZmZzZXQuY2xpY2subGVmdD49aVswXT9vLWEuZ3JpZFswXTpvK2EuZ3JpZFswXTpvfX1yZXR1cm57dG9wOmwtdGhpcy5vZmZzZXQuY2xpY2sudG9wLXRoaXMub2Zmc2V0LnJlbGF0aXZlLnRvcC10aGlzLm9mZnNldC5wYXJlbnQudG9wKygiZml4ZWQiPT09dGhpcy5jc3NQb3NpdGlvbj8tdGhpcy5zY3JvbGxQYXJlbnQuc2Nyb2xsVG9wKCk6dGhpcy5vZmZzZXQuc2Nyb2xsLnRvcCksbGVmdDpoLXRoaXMub2Zmc2V0LmNsaWNrLmxlZnQtdGhpcy5vZmZzZXQucmVsYXRpdmUubGVmdC10aGlzLm9mZnNldC5wYXJlbnQubGVmdCsoImZpeGVkIj09PXRoaXMuY3NzUG9zaXRpb24/LXRoaXMuc2Nyb2xsUGFyZW50LnNjcm9sbExlZnQoKTp0aGlzLm9mZnNldC5zY3JvbGwubGVmdCl9Cn0sX2NsZWFyOmZ1bmN0aW9uKCl7dGhpcy5oZWxwZXIucmVtb3ZlQ2xhc3MoInVpLWRyYWdnYWJsZS1kcmFnZ2luZyIpO3RoaXMuaGVscGVyWzBdPT09dGhpcy5lbGVtZW50WzBdfHx0aGlzLmNhbmNlbEhlbHBlclJlbW92YWx8fHRoaXMuaGVscGVyLnJlbW92ZSgpO3RoaXMuaGVscGVyPW51bGw7dGhpcy5jYW5jZWxIZWxwZXJSZW1vdmFsPSExfSxfdHJpZ2dlcjpmdW5jdGlvbihlLGkscyl7cz1zfHx0aGlzLl91aUhhc2goKTt0LnVpLnBsdWdpbi5jYWxsKHRoaXMsZSxbaSxzXSk7ImRyYWciPT09ZSYmKHRoaXMucG9zaXRpb25BYnM9dGhpcy5fY29udmVydFBvc2l0aW9uVG8oImFic29sdXRlIikpO3JldHVybiB0LldpZGdldC5wcm90b3R5cGUuX3RyaWdnZXIuY2FsbCh0aGlzLGUsaSxzKX0scGx1Z2luczp7fSxfdWlIYXNoOmZ1bmN0aW9uKCl7cmV0dXJue2hlbHBlcjp0aGlzLmhlbHBlcixwb3NpdGlvbjp0aGlzLnBvc2l0aW9uLG9yaWdpbmFsUG9zaXRpb246dGhpcy5vcmlnaW5hbFBvc2l0aW9uLG9mZnNldDp0aGlzLnBvc2l0aW9uQWJzfQp9fSk7dC51aS5wbHVnaW4uYWRkKCJkcmFnZ2FibGUiLCJjb25uZWN0VG9Tb3J0YWJsZSIse3N0YXJ0OmZ1bmN0aW9uKGUsaSl7dmFyIHM9dCh0aGlzKS5kYXRhKCJ1aS1kcmFnZ2FibGUiKSxuPXMub3B0aW9ucyxvPXQuZXh0ZW5kKHt9LGkse2l0ZW06cy5lbGVtZW50fSk7cy5zb3J0YWJsZXM9W107dChuLmNvbm5lY3RUb1NvcnRhYmxlKS5lYWNoKGZ1bmN0aW9uKCl7dmFyIGk9dC5kYXRhKHRoaXMsInVpLXNvcnRhYmxlIik7aWYoaSYmIWkub3B0aW9ucy5kaXNhYmxlZCl7cy5zb3J0YWJsZXMucHVzaCh7aW5zdGFuY2U6aSxzaG91bGRSZXZlcnQ6aS5vcHRpb25zLnJldmVydH0pO2kucmVmcmVzaFBvc2l0aW9ucygpO2kuX3RyaWdnZXIoImFjdGl2YXRlIixlLG8pfX0pfSxzdG9wOmZ1bmN0aW9uKGUsaSl7dmFyIHM9dCh0aGlzKS5kYXRhKCJ1aS1kcmFnZ2FibGUiKSxuPXQuZXh0ZW5kKHt9LGkse2l0ZW06cy5lbGVtZW50fSk7dC5lYWNoKHMuc29ydGFibGVzLGZ1bmN0aW9uKCl7aWYodGhpcy5pbnN0YW5jZS5pc092ZXIpe3RoaXMuaW5zdGFuY2UuaXNPdmVyPTA7CnMuY2FuY2VsSGVscGVyUmVtb3ZhbD0hMDt0aGlzLmluc3RhbmNlLmNhbmNlbEhlbHBlclJlbW92YWw9ITE7dGhpcy5zaG91bGRSZXZlcnQmJih0aGlzLmluc3RhbmNlLm9wdGlvbnMucmV2ZXJ0PXRoaXMuc2hvdWxkUmV2ZXJ0KTt0aGlzLmluc3RhbmNlLl9tb3VzZVN0b3AoZSk7dGhpcy5pbnN0YW5jZS5vcHRpb25zLmhlbHBlcj10aGlzLmluc3RhbmNlLm9wdGlvbnMuX2hlbHBlcjsib3JpZ2luYWwiPT09cy5vcHRpb25zLmhlbHBlciYmdGhpcy5pbnN0YW5jZS5jdXJyZW50SXRlbS5jc3Moe3RvcDoiYXV0byIsbGVmdDoiYXV0byJ9KX1lbHNle3RoaXMuaW5zdGFuY2UuY2FuY2VsSGVscGVyUmVtb3ZhbD0hMTt0aGlzLmluc3RhbmNlLl90cmlnZ2VyKCJkZWFjdGl2YXRlIixlLG4pfX0pfSxkcmFnOmZ1bmN0aW9uKGUsaSl7dmFyIHM9dCh0aGlzKS5kYXRhKCJ1aS1kcmFnZ2FibGUiKSxuPXRoaXM7dC5lYWNoKHMuc29ydGFibGVzLGZ1bmN0aW9uKCl7dmFyIG89ITEsYT10aGlzO3RoaXMuaW5zdGFuY2UucG9zaXRpb25BYnM9cy5wb3NpdGlvbkFiczsKdGhpcy5pbnN0YW5jZS5oZWxwZXJQcm9wb3J0aW9ucz1zLmhlbHBlclByb3BvcnRpb25zO3RoaXMuaW5zdGFuY2Uub2Zmc2V0LmNsaWNrPXMub2Zmc2V0LmNsaWNrO2lmKHRoaXMuaW5zdGFuY2UuX2ludGVyc2VjdHNXaXRoKHRoaXMuaW5zdGFuY2UuY29udGFpbmVyQ2FjaGUpKXtvPSEwO3QuZWFjaChzLnNvcnRhYmxlcyxmdW5jdGlvbigpe3RoaXMuaW5zdGFuY2UucG9zaXRpb25BYnM9cy5wb3NpdGlvbkFiczt0aGlzLmluc3RhbmNlLmhlbHBlclByb3BvcnRpb25zPXMuaGVscGVyUHJvcG9ydGlvbnM7dGhpcy5pbnN0YW5jZS5vZmZzZXQuY2xpY2s9cy5vZmZzZXQuY2xpY2s7dGhpcyE9PWEmJnRoaXMuaW5zdGFuY2UuX2ludGVyc2VjdHNXaXRoKHRoaXMuaW5zdGFuY2UuY29udGFpbmVyQ2FjaGUpJiZ0LmNvbnRhaW5zKGEuaW5zdGFuY2UuZWxlbWVudFswXSx0aGlzLmluc3RhbmNlLmVsZW1lbnRbMF0pJiYobz0hMSk7cmV0dXJuIG99KX1pZihvKXtpZighdGhpcy5pbnN0YW5jZS5pc092ZXIpe3RoaXMuaW5zdGFuY2UuaXNPdmVyPTE7CnRoaXMuaW5zdGFuY2UuY3VycmVudEl0ZW09dChuKS5jbG9uZSgpLnJlbW92ZUF0dHIoImlkIikuYXBwZW5kVG8odGhpcy5pbnN0YW5jZS5lbGVtZW50KS5kYXRhKCJ1aS1zb3J0YWJsZS1pdGVtIiwhMCk7dGhpcy5pbnN0YW5jZS5vcHRpb25zLl9oZWxwZXI9dGhpcy5pbnN0YW5jZS5vcHRpb25zLmhlbHBlcjt0aGlzLmluc3RhbmNlLm9wdGlvbnMuaGVscGVyPWZ1bmN0aW9uKCl7cmV0dXJuIGkuaGVscGVyWzBdfTtlLnRhcmdldD10aGlzLmluc3RhbmNlLmN1cnJlbnRJdGVtWzBdO3RoaXMuaW5zdGFuY2UuX21vdXNlQ2FwdHVyZShlLCEwKTt0aGlzLmluc3RhbmNlLl9tb3VzZVN0YXJ0KGUsITAsITApO3RoaXMuaW5zdGFuY2Uub2Zmc2V0LmNsaWNrLnRvcD1zLm9mZnNldC5jbGljay50b3A7dGhpcy5pbnN0YW5jZS5vZmZzZXQuY2xpY2subGVmdD1zLm9mZnNldC5jbGljay5sZWZ0O3RoaXMuaW5zdGFuY2Uub2Zmc2V0LnBhcmVudC5sZWZ0LT1zLm9mZnNldC5wYXJlbnQubGVmdC10aGlzLmluc3RhbmNlLm9mZnNldC5wYXJlbnQubGVmdDsKdGhpcy5pbnN0YW5jZS5vZmZzZXQucGFyZW50LnRvcC09cy5vZmZzZXQucGFyZW50LnRvcC10aGlzLmluc3RhbmNlLm9mZnNldC5wYXJlbnQudG9wO3MuX3RyaWdnZXIoInRvU29ydGFibGUiLGUpO3MuZHJvcHBlZD10aGlzLmluc3RhbmNlLmVsZW1lbnQ7cy5jdXJyZW50SXRlbT1zLmVsZW1lbnQ7dGhpcy5pbnN0YW5jZS5mcm9tT3V0c2lkZT1zfXRoaXMuaW5zdGFuY2UuY3VycmVudEl0ZW0mJnRoaXMuaW5zdGFuY2UuX21vdXNlRHJhZyhlKX1lbHNlIGlmKHRoaXMuaW5zdGFuY2UuaXNPdmVyKXt0aGlzLmluc3RhbmNlLmlzT3Zlcj0wO3RoaXMuaW5zdGFuY2UuY2FuY2VsSGVscGVyUmVtb3ZhbD0hMDt0aGlzLmluc3RhbmNlLm9wdGlvbnMucmV2ZXJ0PSExO3RoaXMuaW5zdGFuY2UuX3RyaWdnZXIoIm91dCIsZSx0aGlzLmluc3RhbmNlLl91aUhhc2godGhpcy5pbnN0YW5jZSkpO3RoaXMuaW5zdGFuY2UuX21vdXNlU3RvcChlLCEwKTt0aGlzLmluc3RhbmNlLm9wdGlvbnMuaGVscGVyPXRoaXMuaW5zdGFuY2Uub3B0aW9ucy5faGVscGVyOwp0aGlzLmluc3RhbmNlLmN1cnJlbnRJdGVtLnJlbW92ZSgpO3RoaXMuaW5zdGFuY2UucGxhY2Vob2xkZXImJnRoaXMuaW5zdGFuY2UucGxhY2Vob2xkZXIucmVtb3ZlKCk7cy5fdHJpZ2dlcigiZnJvbVNvcnRhYmxlIixlKTtzLmRyb3BwZWQ9ITF9fSl9fSk7dC51aS5wbHVnaW4uYWRkKCJkcmFnZ2FibGUiLCJjdXJzb3IiLHtzdGFydDpmdW5jdGlvbigpe3ZhciBlPXQoImJvZHkiKSxpPXQodGhpcykuZGF0YSgidWktZHJhZ2dhYmxlIikub3B0aW9ucztlLmNzcygiY3Vyc29yIikmJihpLl9jdXJzb3I9ZS5jc3MoImN1cnNvciIpKTtlLmNzcygiY3Vyc29yIixpLmN1cnNvcil9LHN0b3A6ZnVuY3Rpb24oKXt2YXIgZT10KHRoaXMpLmRhdGEoInVpLWRyYWdnYWJsZSIpLm9wdGlvbnM7ZS5fY3Vyc29yJiZ0KCJib2R5IikuY3NzKCJjdXJzb3IiLGUuX2N1cnNvcil9fSk7dC51aS5wbHVnaW4uYWRkKCJkcmFnZ2FibGUiLCJvcGFjaXR5Iix7c3RhcnQ6ZnVuY3Rpb24oZSxpKXt2YXIgcz10KGkuaGVscGVyKSxuPXQodGhpcykuZGF0YSgidWktZHJhZ2dhYmxlIikub3B0aW9uczsKcy5jc3MoIm9wYWNpdHkiKSYmKG4uX29wYWNpdHk9cy5jc3MoIm9wYWNpdHkiKSk7cy5jc3MoIm9wYWNpdHkiLG4ub3BhY2l0eSl9LHN0b3A6ZnVuY3Rpb24oZSxpKXt2YXIgcz10KHRoaXMpLmRhdGEoInVpLWRyYWdnYWJsZSIpLm9wdGlvbnM7cy5fb3BhY2l0eSYmdChpLmhlbHBlcikuY3NzKCJvcGFjaXR5IixzLl9vcGFjaXR5KX19KTt0LnVpLnBsdWdpbi5hZGQoImRyYWdnYWJsZSIsInNjcm9sbCIse3N0YXJ0OmZ1bmN0aW9uKCl7dmFyIGU9dCh0aGlzKS5kYXRhKCJ1aS1kcmFnZ2FibGUiKTtlLnNjcm9sbFBhcmVudFswXSE9PWRvY3VtZW50JiYiSFRNTCIhPT1lLnNjcm9sbFBhcmVudFswXS50YWdOYW1lJiYoZS5vdmVyZmxvd09mZnNldD1lLnNjcm9sbFBhcmVudC5vZmZzZXQoKSl9LGRyYWc6ZnVuY3Rpb24oZSl7dmFyIGk9dCh0aGlzKS5kYXRhKCJ1aS1kcmFnZ2FibGUiKSxzPWkub3B0aW9ucyxuPSExO2lmKGkuc2Nyb2xsUGFyZW50WzBdIT09ZG9jdW1lbnQmJiJIVE1MIiE9PWkuc2Nyb2xsUGFyZW50WzBdLnRhZ05hbWUpe3MuYXhpcyYmIngiPT09cy5heGlzfHwoaS5vdmVyZmxvd09mZnNldC50b3AraS5zY3JvbGxQYXJlbnRbMF0ub2Zmc2V0SGVpZ2h0LWUucGFnZVk8cy5zY3JvbGxTZW5zaXRpdml0eT9pLnNjcm9sbFBhcmVudFswXS5zY3JvbGxUb3A9bj1pLnNjcm9sbFBhcmVudFswXS5zY3JvbGxUb3Arcy5zY3JvbGxTcGVlZDplLnBhZ2VZLWkub3ZlcmZsb3dPZmZzZXQudG9wPHMuc2Nyb2xsU2Vuc2l0aXZpdHkmJihpLnNjcm9sbFBhcmVudFswXS5zY3JvbGxUb3A9bj1pLnNjcm9sbFBhcmVudFswXS5zY3JvbGxUb3Atcy5zY3JvbGxTcGVlZCkpOwpzLmF4aXMmJiJ5Ij09PXMuYXhpc3x8KGkub3ZlcmZsb3dPZmZzZXQubGVmdCtpLnNjcm9sbFBhcmVudFswXS5vZmZzZXRXaWR0aC1lLnBhZ2VYPHMuc2Nyb2xsU2Vuc2l0aXZpdHk/aS5zY3JvbGxQYXJlbnRbMF0uc2Nyb2xsTGVmdD1uPWkuc2Nyb2xsUGFyZW50WzBdLnNjcm9sbExlZnQrcy5zY3JvbGxTcGVlZDplLnBhZ2VYLWkub3ZlcmZsb3dPZmZzZXQubGVmdDxzLnNjcm9sbFNlbnNpdGl2aXR5JiYoaS5zY3JvbGxQYXJlbnRbMF0uc2Nyb2xsTGVmdD1uPWkuc2Nyb2xsUGFyZW50WzBdLnNjcm9sbExlZnQtcy5zY3JvbGxTcGVlZCkpfWVsc2V7cy5heGlzJiYieCI9PT1zLmF4aXN8fChlLnBhZ2VZLXQoZG9jdW1lbnQpLnNjcm9sbFRvcCgpPHMuc2Nyb2xsU2Vuc2l0aXZpdHk/bj10KGRvY3VtZW50KS5zY3JvbGxUb3AodChkb2N1bWVudCkuc2Nyb2xsVG9wKCktcy5zY3JvbGxTcGVlZCk6dCh3aW5kb3cpLmhlaWdodCgpLShlLnBhZ2VZLXQoZG9jdW1lbnQpLnNjcm9sbFRvcCgpKTxzLnNjcm9sbFNlbnNpdGl2aXR5JiYobj10KGRvY3VtZW50KS5zY3JvbGxUb3AodChkb2N1bWVudCkuc2Nyb2xsVG9wKCkrcy5zY3JvbGxTcGVlZCkpKTsKcy5heGlzJiYieSI9PT1zLmF4aXN8fChlLnBhZ2VYLXQoZG9jdW1lbnQpLnNjcm9sbExlZnQoKTxzLnNjcm9sbFNlbnNpdGl2aXR5P249dChkb2N1bWVudCkuc2Nyb2xsTGVmdCh0KGRvY3VtZW50KS5zY3JvbGxMZWZ0KCktcy5zY3JvbGxTcGVlZCk6dCh3aW5kb3cpLndpZHRoKCktKGUucGFnZVgtdChkb2N1bWVudCkuc2Nyb2xsTGVmdCgpKTxzLnNjcm9sbFNlbnNpdGl2aXR5JiYobj10KGRvY3VtZW50KS5zY3JvbGxMZWZ0KHQoZG9jdW1lbnQpLnNjcm9sbExlZnQoKStzLnNjcm9sbFNwZWVkKSkpfW4hPT0hMSYmdC51aS5kZG1hbmFnZXImJiFzLmRyb3BCZWhhdmlvdXImJnQudWkuZGRtYW5hZ2VyLnByZXBhcmVPZmZzZXRzKGksZSl9fSk7dC51aS5wbHVnaW4uYWRkKCJkcmFnZ2FibGUiLCJzbmFwIix7c3RhcnQ6ZnVuY3Rpb24oKXt2YXIgZT10KHRoaXMpLmRhdGEoInVpLWRyYWdnYWJsZSIpLGk9ZS5vcHRpb25zO2Uuc25hcEVsZW1lbnRzPVtdO3QoaS5zbmFwLmNvbnN0cnVjdG9yIT09U3RyaW5nP2kuc25hcC5pdGVtc3x8IjpkYXRhKHVpLWRyYWdnYWJsZSkiOmkuc25hcCkuZWFjaChmdW5jdGlvbigpe3ZhciBpPXQodGhpcykscz1pLm9mZnNldCgpOwp0aGlzIT09ZS5lbGVtZW50WzBdJiZlLnNuYXBFbGVtZW50cy5wdXNoKHtpdGVtOnRoaXMsd2lkdGg6aS5vdXRlcldpZHRoKCksaGVpZ2h0Omkub3V0ZXJIZWlnaHQoKSx0b3A6cy50b3AsbGVmdDpzLmxlZnR9KX0pfSxkcmFnOmZ1bmN0aW9uKGUsaSl7dmFyIHMsbixvLGEscixoLGwsdSxjLGQscD10KHRoaXMpLmRhdGEoInVpLWRyYWdnYWJsZSIpLGY9cC5vcHRpb25zLGc9Zi5zbmFwVG9sZXJhbmNlLG09aS5vZmZzZXQubGVmdCx2PW0rcC5oZWxwZXJQcm9wb3J0aW9ucy53aWR0aCxiPWkub2Zmc2V0LnRvcCxfPWIrcC5oZWxwZXJQcm9wb3J0aW9ucy5oZWlnaHQ7Zm9yKGM9cC5zbmFwRWxlbWVudHMubGVuZ3RoLTE7Yz49MDtjLS0pe3I9cC5zbmFwRWxlbWVudHNbY10ubGVmdDtoPXIrcC5zbmFwRWxlbWVudHNbY10ud2lkdGg7bD1wLnNuYXBFbGVtZW50c1tjXS50b3A7dT1sK3Auc25hcEVsZW1lbnRzW2NdLmhlaWdodDtpZihyLWc+dnx8bT5oK2d8fGwtZz5ffHxiPnUrZ3x8IXQuY29udGFpbnMocC5zbmFwRWxlbWVudHNbY10uaXRlbS5vd25lckRvY3VtZW50LHAuc25hcEVsZW1lbnRzW2NdLml0ZW0pKXtwLnNuYXBFbGVtZW50c1tjXS5zbmFwcGluZyYmcC5vcHRpb25zLnNuYXAucmVsZWFzZSYmcC5vcHRpb25zLnNuYXAucmVsZWFzZS5jYWxsKHAuZWxlbWVudCxlLHQuZXh0ZW5kKHAuX3VpSGFzaCgpLHtzbmFwSXRlbTpwLnNuYXBFbGVtZW50c1tjXS5pdGVtfSkpOwpwLnNuYXBFbGVtZW50c1tjXS5zbmFwcGluZz0hMX1lbHNle2lmKCJpbm5lciIhPT1mLnNuYXBNb2RlKXtzPU1hdGguYWJzKGwtXyk8PWc7bj1NYXRoLmFicyh1LWIpPD1nO289TWF0aC5hYnMoci12KTw9ZzthPU1hdGguYWJzKGgtbSk8PWc7cyYmKGkucG9zaXRpb24udG9wPXAuX2NvbnZlcnRQb3NpdGlvblRvKCJyZWxhdGl2ZSIse3RvcDpsLXAuaGVscGVyUHJvcG9ydGlvbnMuaGVpZ2h0LGxlZnQ6MH0pLnRvcC1wLm1hcmdpbnMudG9wKTtuJiYoaS5wb3NpdGlvbi50b3A9cC5fY29udmVydFBvc2l0aW9uVG8oInJlbGF0aXZlIix7dG9wOnUsbGVmdDowfSkudG9wLXAubWFyZ2lucy50b3ApO28mJihpLnBvc2l0aW9uLmxlZnQ9cC5fY29udmVydFBvc2l0aW9uVG8oInJlbGF0aXZlIix7dG9wOjAsbGVmdDpyLXAuaGVscGVyUHJvcG9ydGlvbnMud2lkdGh9KS5sZWZ0LXAubWFyZ2lucy5sZWZ0KTthJiYoaS5wb3NpdGlvbi5sZWZ0PXAuX2NvbnZlcnRQb3NpdGlvblRvKCJyZWxhdGl2ZSIse3RvcDowLGxlZnQ6aH0pLmxlZnQtcC5tYXJnaW5zLmxlZnQpCn1kPXN8fG58fG98fGE7aWYoIm91dGVyIiE9PWYuc25hcE1vZGUpe3M9TWF0aC5hYnMobC1iKTw9ZztuPU1hdGguYWJzKHUtXyk8PWc7bz1NYXRoLmFicyhyLW0pPD1nO2E9TWF0aC5hYnMoaC12KTw9ZztzJiYoaS5wb3NpdGlvbi50b3A9cC5fY29udmVydFBvc2l0aW9uVG8oInJlbGF0aXZlIix7dG9wOmwsbGVmdDowfSkudG9wLXAubWFyZ2lucy50b3ApO24mJihpLnBvc2l0aW9uLnRvcD1wLl9jb252ZXJ0UG9zaXRpb25UbygicmVsYXRpdmUiLHt0b3A6dS1wLmhlbHBlclByb3BvcnRpb25zLmhlaWdodCxsZWZ0OjB9KS50b3AtcC5tYXJnaW5zLnRvcCk7byYmKGkucG9zaXRpb24ubGVmdD1wLl9jb252ZXJ0UG9zaXRpb25UbygicmVsYXRpdmUiLHt0b3A6MCxsZWZ0OnJ9KS5sZWZ0LXAubWFyZ2lucy5sZWZ0KTthJiYoaS5wb3NpdGlvbi5sZWZ0PXAuX2NvbnZlcnRQb3NpdGlvblRvKCJyZWxhdGl2ZSIse3RvcDowLGxlZnQ6aC1wLmhlbHBlclByb3BvcnRpb25zLndpZHRofSkubGVmdC1wLm1hcmdpbnMubGVmdCkKfSFwLnNuYXBFbGVtZW50c1tjXS5zbmFwcGluZyYmKHN8fG58fG98fGF8fGQpJiZwLm9wdGlvbnMuc25hcC5zbmFwJiZwLm9wdGlvbnMuc25hcC5zbmFwLmNhbGwocC5lbGVtZW50LGUsdC5leHRlbmQocC5fdWlIYXNoKCkse3NuYXBJdGVtOnAuc25hcEVsZW1lbnRzW2NdLml0ZW19KSk7cC5zbmFwRWxlbWVudHNbY10uc25hcHBpbmc9c3x8bnx8b3x8YXx8ZH19fX0pO3QudWkucGx1Z2luLmFkZCgiZHJhZ2dhYmxlIiwic3RhY2siLHtzdGFydDpmdW5jdGlvbigpe3ZhciBlLGk9dGhpcy5kYXRhKCJ1aS1kcmFnZ2FibGUiKS5vcHRpb25zLHM9dC5tYWtlQXJyYXkodChpLnN0YWNrKSkuc29ydChmdW5jdGlvbihlLGkpe3JldHVybihwYXJzZUludCh0KGUpLmNzcygiekluZGV4IiksMTApfHwwKS0ocGFyc2VJbnQodChpKS5jc3MoInpJbmRleCIpLDEwKXx8MCl9KTtpZihzLmxlbmd0aCl7ZT1wYXJzZUludCh0KHNbMF0pLmNzcygiekluZGV4IiksMTApfHwwO3QocykuZWFjaChmdW5jdGlvbihpKXt0KHRoaXMpLmNzcygiekluZGV4IixlK2kpCn0pO3RoaXMuY3NzKCJ6SW5kZXgiLGUrcy5sZW5ndGgpfX19KTt0LnVpLnBsdWdpbi5hZGQoImRyYWdnYWJsZSIsInpJbmRleCIse3N0YXJ0OmZ1bmN0aW9uKGUsaSl7dmFyIHM9dChpLmhlbHBlciksbj10KHRoaXMpLmRhdGEoInVpLWRyYWdnYWJsZSIpLm9wdGlvbnM7cy5jc3MoInpJbmRleCIpJiYobi5fekluZGV4PXMuY3NzKCJ6SW5kZXgiKSk7cy5jc3MoInpJbmRleCIsbi56SW5kZXgpfSxzdG9wOmZ1bmN0aW9uKGUsaSl7dmFyIHM9dCh0aGlzKS5kYXRhKCJ1aS1kcmFnZ2FibGUiKS5vcHRpb25zO3MuX3pJbmRleCYmdChpLmhlbHBlcikuY3NzKCJ6SW5kZXgiLHMuX3pJbmRleCl9fSl9KGpRdWVyeSk7IWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUodCxlLGkpe3JldHVybiB0PmUmJmUraT50fXQud2lkZ2V0KCJ1aS5kcm9wcGFibGUiLHt2ZXJzaW9uOiIxLjEwLjQiLHdpZGdldEV2ZW50UHJlZml4OiJkcm9wIixvcHRpb25zOnthY2NlcHQ6IioiLGFjdGl2ZUNsYXNzOiExLGFkZENsYXNzZXM6ITAsZ3JlZWR5OiExLGhvdmVyQ2xhc3M6ITEsc2NvcGU6ImRlZmF1bHQiLHRvbGVyYW5jZToiaW50ZXJzZWN0IixhY3RpdmF0ZTpudWxsLGRlYWN0aXZhdGU6bnVsbCxkcm9wOm51bGwsb3V0Om51bGwsb3ZlcjpudWxsfSxfY3JlYXRlOmZ1bmN0aW9uKCl7dmFyIGUsaT10aGlzLm9wdGlvbnMscz1pLmFjY2VwdDsKdGhpcy5pc292ZXI9ITE7dGhpcy5pc291dD0hMDt0aGlzLmFjY2VwdD10LmlzRnVuY3Rpb24ocyk/czpmdW5jdGlvbih0KXtyZXR1cm4gdC5pcyhzKX07dGhpcy5wcm9wb3J0aW9ucz1mdW5jdGlvbigpe2lmKCFhcmd1bWVudHMubGVuZ3RoKXJldHVybiBlP2U6ZT17d2lkdGg6dGhpcy5lbGVtZW50WzBdLm9mZnNldFdpZHRoLGhlaWdodDp0aGlzLmVsZW1lbnRbMF0ub2Zmc2V0SGVpZ2h0fTtlPWFyZ3VtZW50c1swXTtyZXR1cm4gdm9pZCAwfTt0LnVpLmRkbWFuYWdlci5kcm9wcGFibGVzW2kuc2NvcGVdPXQudWkuZGRtYW5hZ2VyLmRyb3BwYWJsZXNbaS5zY29wZV18fFtdO3QudWkuZGRtYW5hZ2VyLmRyb3BwYWJsZXNbaS5zY29wZV0ucHVzaCh0aGlzKTtpLmFkZENsYXNzZXMmJnRoaXMuZWxlbWVudC5hZGRDbGFzcygidWktZHJvcHBhYmxlIil9LF9kZXN0cm95OmZ1bmN0aW9uKCl7Zm9yKHZhciBlPTAsaT10LnVpLmRkbWFuYWdlci5kcm9wcGFibGVzW3RoaXMub3B0aW9ucy5zY29wZV07ZTxpLmxlbmd0aDtlKyspaVtlXT09PXRoaXMmJmkuc3BsaWNlKGUsMSk7CnRoaXMuZWxlbWVudC5yZW1vdmVDbGFzcygidWktZHJvcHBhYmxlIHVpLWRyb3BwYWJsZS1kaXNhYmxlZCIpfSxfc2V0T3B0aW9uOmZ1bmN0aW9uKGUsaSl7ImFjY2VwdCI9PT1lJiYodGhpcy5hY2NlcHQ9dC5pc0Z1bmN0aW9uKGkpP2k6ZnVuY3Rpb24odCl7cmV0dXJuIHQuaXMoaSl9KTt0LldpZGdldC5wcm90b3R5cGUuX3NldE9wdGlvbi5hcHBseSh0aGlzLGFyZ3VtZW50cyl9LF9hY3RpdmF0ZTpmdW5jdGlvbihlKXt2YXIgaT10LnVpLmRkbWFuYWdlci5jdXJyZW50O3RoaXMub3B0aW9ucy5hY3RpdmVDbGFzcyYmdGhpcy5lbGVtZW50LmFkZENsYXNzKHRoaXMub3B0aW9ucy5hY3RpdmVDbGFzcyk7aSYmdGhpcy5fdHJpZ2dlcigiYWN0aXZhdGUiLGUsdGhpcy51aShpKSl9LF9kZWFjdGl2YXRlOmZ1bmN0aW9uKGUpe3ZhciBpPXQudWkuZGRtYW5hZ2VyLmN1cnJlbnQ7dGhpcy5vcHRpb25zLmFjdGl2ZUNsYXNzJiZ0aGlzLmVsZW1lbnQucmVtb3ZlQ2xhc3ModGhpcy5vcHRpb25zLmFjdGl2ZUNsYXNzKTsKaSYmdGhpcy5fdHJpZ2dlcigiZGVhY3RpdmF0ZSIsZSx0aGlzLnVpKGkpKX0sX292ZXI6ZnVuY3Rpb24oZSl7dmFyIGk9dC51aS5kZG1hbmFnZXIuY3VycmVudDtpZihpJiYoaS5jdXJyZW50SXRlbXx8aS5lbGVtZW50KVswXSE9PXRoaXMuZWxlbWVudFswXSYmdGhpcy5hY2NlcHQuY2FsbCh0aGlzLmVsZW1lbnRbMF0saS5jdXJyZW50SXRlbXx8aS5lbGVtZW50KSl7dGhpcy5vcHRpb25zLmhvdmVyQ2xhc3MmJnRoaXMuZWxlbWVudC5hZGRDbGFzcyh0aGlzLm9wdGlvbnMuaG92ZXJDbGFzcyk7dGhpcy5fdHJpZ2dlcigib3ZlciIsZSx0aGlzLnVpKGkpKX19LF9vdXQ6ZnVuY3Rpb24oZSl7dmFyIGk9dC51aS5kZG1hbmFnZXIuY3VycmVudDtpZihpJiYoaS5jdXJyZW50SXRlbXx8aS5lbGVtZW50KVswXSE9PXRoaXMuZWxlbWVudFswXSYmdGhpcy5hY2NlcHQuY2FsbCh0aGlzLmVsZW1lbnRbMF0saS5jdXJyZW50SXRlbXx8aS5lbGVtZW50KSl7dGhpcy5vcHRpb25zLmhvdmVyQ2xhc3MmJnRoaXMuZWxlbWVudC5yZW1vdmVDbGFzcyh0aGlzLm9wdGlvbnMuaG92ZXJDbGFzcyk7CnRoaXMuX3RyaWdnZXIoIm91dCIsZSx0aGlzLnVpKGkpKX19LF9kcm9wOmZ1bmN0aW9uKGUsaSl7dmFyIHM9aXx8dC51aS5kZG1hbmFnZXIuY3VycmVudCxuPSExO2lmKCFzfHwocy5jdXJyZW50SXRlbXx8cy5lbGVtZW50KVswXT09PXRoaXMuZWxlbWVudFswXSlyZXR1cm4hMTt0aGlzLmVsZW1lbnQuZmluZCgiOmRhdGEodWktZHJvcHBhYmxlKSIpLm5vdCgiLnVpLWRyYWdnYWJsZS1kcmFnZ2luZyIpLmVhY2goZnVuY3Rpb24oKXt2YXIgZT10LmRhdGEodGhpcywidWktZHJvcHBhYmxlIik7aWYoZS5vcHRpb25zLmdyZWVkeSYmIWUub3B0aW9ucy5kaXNhYmxlZCYmZS5vcHRpb25zLnNjb3BlPT09cy5vcHRpb25zLnNjb3BlJiZlLmFjY2VwdC5jYWxsKGUuZWxlbWVudFswXSxzLmN1cnJlbnRJdGVtfHxzLmVsZW1lbnQpJiZ0LnVpLmludGVyc2VjdChzLHQuZXh0ZW5kKGUse29mZnNldDplLmVsZW1lbnQub2Zmc2V0KCl9KSxlLm9wdGlvbnMudG9sZXJhbmNlKSl7bj0hMDtyZXR1cm4hMQp9fSk7aWYobilyZXR1cm4hMTtpZih0aGlzLmFjY2VwdC5jYWxsKHRoaXMuZWxlbWVudFswXSxzLmN1cnJlbnRJdGVtfHxzLmVsZW1lbnQpKXt0aGlzLm9wdGlvbnMuYWN0aXZlQ2xhc3MmJnRoaXMuZWxlbWVudC5yZW1vdmVDbGFzcyh0aGlzLm9wdGlvbnMuYWN0aXZlQ2xhc3MpO3RoaXMub3B0aW9ucy5ob3ZlckNsYXNzJiZ0aGlzLmVsZW1lbnQucmVtb3ZlQ2xhc3ModGhpcy5vcHRpb25zLmhvdmVyQ2xhc3MpO3RoaXMuX3RyaWdnZXIoImRyb3AiLGUsdGhpcy51aShzKSk7cmV0dXJuIHRoaXMuZWxlbWVudH1yZXR1cm4hMX0sdWk6ZnVuY3Rpb24odCl7cmV0dXJue2RyYWdnYWJsZTp0LmN1cnJlbnRJdGVtfHx0LmVsZW1lbnQsaGVscGVyOnQuaGVscGVyLHBvc2l0aW9uOnQucG9zaXRpb24sb2Zmc2V0OnQucG9zaXRpb25BYnN9fX0pO3QudWkuaW50ZXJzZWN0PWZ1bmN0aW9uKHQsaSxzKXtpZighaS5vZmZzZXQpcmV0dXJuITE7dmFyIG4sbyxhPSh0LnBvc2l0aW9uQWJzfHx0LnBvc2l0aW9uLmFic29sdXRlKS5sZWZ0LHI9KHQucG9zaXRpb25BYnN8fHQucG9zaXRpb24uYWJzb2x1dGUpLnRvcCxoPWErdC5oZWxwZXJQcm9wb3J0aW9ucy53aWR0aCxsPXIrdC5oZWxwZXJQcm9wb3J0aW9ucy5oZWlnaHQsdT1pLm9mZnNldC5sZWZ0LGM9aS5vZmZzZXQudG9wLGQ9dStpLnByb3BvcnRpb25zKCkud2lkdGgscD1jK2kucHJvcG9ydGlvbnMoKS5oZWlnaHQ7CnN3aXRjaChzKXtjYXNlImZpdCI6cmV0dXJuIGE+PXUmJmQ+PWgmJnI+PWMmJnA+PWw7Y2FzZSJpbnRlcnNlY3QiOnJldHVybiB1PGErdC5oZWxwZXJQcm9wb3J0aW9ucy53aWR0aC8yJiZoLXQuaGVscGVyUHJvcG9ydGlvbnMud2lkdGgvMjxkJiZjPHIrdC5oZWxwZXJQcm9wb3J0aW9ucy5oZWlnaHQvMiYmbC10LmhlbHBlclByb3BvcnRpb25zLmhlaWdodC8yPHA7Y2FzZSJwb2ludGVyIjpuPSh0LnBvc2l0aW9uQWJzfHx0LnBvc2l0aW9uLmFic29sdXRlKS5sZWZ0Kyh0LmNsaWNrT2Zmc2V0fHx0Lm9mZnNldC5jbGljaykubGVmdDtvPSh0LnBvc2l0aW9uQWJzfHx0LnBvc2l0aW9uLmFic29sdXRlKS50b3ArKHQuY2xpY2tPZmZzZXR8fHQub2Zmc2V0LmNsaWNrKS50b3A7cmV0dXJuIGUobyxjLGkucHJvcG9ydGlvbnMoKS5oZWlnaHQpJiZlKG4sdSxpLnByb3BvcnRpb25zKCkud2lkdGgpO2Nhc2UidG91Y2giOnJldHVybihyPj1jJiZwPj1yfHxsPj1jJiZwPj1sfHxjPnImJmw+cCkmJihhPj11JiZkPj1hfHxoPj11JiZkPj1ofHx1PmEmJmg+ZCk7CmRlZmF1bHQ6cmV0dXJuITF9fTt0LnVpLmRkbWFuYWdlcj17Y3VycmVudDpudWxsLGRyb3BwYWJsZXM6eyJkZWZhdWx0IjpbXX0scHJlcGFyZU9mZnNldHM6ZnVuY3Rpb24oZSxpKXt2YXIgcyxuLG89dC51aS5kZG1hbmFnZXIuZHJvcHBhYmxlc1tlLm9wdGlvbnMuc2NvcGVdfHxbXSxhPWk/aS50eXBlOm51bGwscj0oZS5jdXJyZW50SXRlbXx8ZS5lbGVtZW50KS5maW5kKCI6ZGF0YSh1aS1kcm9wcGFibGUpIikuYWRkQmFjaygpO3Q6Zm9yKHM9MDtzPG8ubGVuZ3RoO3MrKylpZighKG9bc10ub3B0aW9ucy5kaXNhYmxlZHx8ZSYmIW9bc10uYWNjZXB0LmNhbGwob1tzXS5lbGVtZW50WzBdLGUuY3VycmVudEl0ZW18fGUuZWxlbWVudCkpKXtmb3Iobj0wO248ci5sZW5ndGg7bisrKWlmKHJbbl09PT1vW3NdLmVsZW1lbnRbMF0pe29bc10ucHJvcG9ydGlvbnMoKS5oZWlnaHQ9MDtjb250aW51ZSB0fW9bc10udmlzaWJsZT0ibm9uZSIhPT1vW3NdLmVsZW1lbnQuY3NzKCJkaXNwbGF5Iik7aWYob1tzXS52aXNpYmxlKXsibW91c2Vkb3duIj09PWEmJm9bc10uX2FjdGl2YXRlLmNhbGwob1tzXSxpKTsKb1tzXS5vZmZzZXQ9b1tzXS5lbGVtZW50Lm9mZnNldCgpO29bc10ucHJvcG9ydGlvbnMoe3dpZHRoOm9bc10uZWxlbWVudFswXS5vZmZzZXRXaWR0aCxoZWlnaHQ6b1tzXS5lbGVtZW50WzBdLm9mZnNldEhlaWdodH0pfX19LGRyb3A6ZnVuY3Rpb24oZSxpKXt2YXIgcz0hMTt0LmVhY2goKHQudWkuZGRtYW5hZ2VyLmRyb3BwYWJsZXNbZS5vcHRpb25zLnNjb3BlXXx8W10pLnNsaWNlKCksZnVuY3Rpb24oKXtpZih0aGlzLm9wdGlvbnMpeyF0aGlzLm9wdGlvbnMuZGlzYWJsZWQmJnRoaXMudmlzaWJsZSYmdC51aS5pbnRlcnNlY3QoZSx0aGlzLHRoaXMub3B0aW9ucy50b2xlcmFuY2UpJiYocz10aGlzLl9kcm9wLmNhbGwodGhpcyxpKXx8cyk7aWYoIXRoaXMub3B0aW9ucy5kaXNhYmxlZCYmdGhpcy52aXNpYmxlJiZ0aGlzLmFjY2VwdC5jYWxsKHRoaXMuZWxlbWVudFswXSxlLmN1cnJlbnRJdGVtfHxlLmVsZW1lbnQpKXt0aGlzLmlzb3V0PSEwO3RoaXMuaXNvdmVyPSExO3RoaXMuX2RlYWN0aXZhdGUuY2FsbCh0aGlzLGkpCn19fSk7cmV0dXJuIHN9LGRyYWdTdGFydDpmdW5jdGlvbihlLGkpe2UuZWxlbWVudC5wYXJlbnRzVW50aWwoImJvZHkiKS5iaW5kKCJzY3JvbGwuZHJvcHBhYmxlIixmdW5jdGlvbigpe2Uub3B0aW9ucy5yZWZyZXNoUG9zaXRpb25zfHx0LnVpLmRkbWFuYWdlci5wcmVwYXJlT2Zmc2V0cyhlLGkpfSl9LGRyYWc6ZnVuY3Rpb24oZSxpKXtlLm9wdGlvbnMucmVmcmVzaFBvc2l0aW9ucyYmdC51aS5kZG1hbmFnZXIucHJlcGFyZU9mZnNldHMoZSxpKTt0LmVhY2godC51aS5kZG1hbmFnZXIuZHJvcHBhYmxlc1tlLm9wdGlvbnMuc2NvcGVdfHxbXSxmdW5jdGlvbigpe2lmKCF0aGlzLm9wdGlvbnMuZGlzYWJsZWQmJiF0aGlzLmdyZWVkeUNoaWxkJiZ0aGlzLnZpc2libGUpe3ZhciBzLG4sbyxhPXQudWkuaW50ZXJzZWN0KGUsdGhpcyx0aGlzLm9wdGlvbnMudG9sZXJhbmNlKSxyPSFhJiZ0aGlzLmlzb3Zlcj8iaXNvdXQiOmEmJiF0aGlzLmlzb3Zlcj8iaXNvdmVyIjpudWxsO2lmKHIpe2lmKHRoaXMub3B0aW9ucy5ncmVlZHkpe249dGhpcy5vcHRpb25zLnNjb3BlOwpvPXRoaXMuZWxlbWVudC5wYXJlbnRzKCI6ZGF0YSh1aS1kcm9wcGFibGUpIikuZmlsdGVyKGZ1bmN0aW9uKCl7cmV0dXJuIHQuZGF0YSh0aGlzLCJ1aS1kcm9wcGFibGUiKS5vcHRpb25zLnNjb3BlPT09bn0pO2lmKG8ubGVuZ3RoKXtzPXQuZGF0YShvWzBdLCJ1aS1kcm9wcGFibGUiKTtzLmdyZWVkeUNoaWxkPSJpc292ZXIiPT09cn19aWYocyYmImlzb3ZlciI9PT1yKXtzLmlzb3Zlcj0hMTtzLmlzb3V0PSEwO3MuX291dC5jYWxsKHMsaSl9dGhpc1tyXT0hMDt0aGlzWyJpc291dCI9PT1yPyJpc292ZXIiOiJpc291dCJdPSExO3RoaXNbImlzb3ZlciI9PT1yPyJfb3ZlciI6Il9vdXQiXS5jYWxsKHRoaXMsaSk7aWYocyYmImlzb3V0Ij09PXIpe3MuaXNvdXQ9ITE7cy5pc292ZXI9ITA7cy5fb3Zlci5jYWxsKHMsaSl9fX19KX0sZHJhZ1N0b3A6ZnVuY3Rpb24oZSxpKXtlLmVsZW1lbnQucGFyZW50c1VudGlsKCJib2R5IikudW5iaW5kKCJzY3JvbGwuZHJvcHBhYmxlIik7ZS5vcHRpb25zLnJlZnJlc2hQb3NpdGlvbnN8fHQudWkuZGRtYW5hZ2VyLnByZXBhcmVPZmZzZXRzKGUsaSkKfX19KGpRdWVyeSk7IWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUodCl7cmV0dXJuIHBhcnNlSW50KHQsMTApfHwwfWZ1bmN0aW9uIGkodCl7cmV0dXJuIWlzTmFOKHBhcnNlSW50KHQsMTApKX10LndpZGdldCgidWkucmVzaXphYmxlIix0LnVpLm1vdXNlLHt2ZXJzaW9uOiIxLjEwLjQiLHdpZGdldEV2ZW50UHJlZml4OiJyZXNpemUiLG9wdGlvbnM6e2Fsc29SZXNpemU6ITEsYW5pbWF0ZTohMSxhbmltYXRlRHVyYXRpb246InNsb3ciLGFuaW1hdGVFYXNpbmc6InN3aW5nIixhc3BlY3RSYXRpbzohMSxhdXRvSGlkZTohMSxjb250YWlubWVudDohMSxnaG9zdDohMSxncmlkOiExLGhhbmRsZXM6ImUscyxzZSIsaGVscGVyOiExLG1heEhlaWdodDpudWxsLG1heFdpZHRoOm51bGwsbWluSGVpZ2h0OjEwLG1pbldpZHRoOjEwLHpJbmRleDo5MCxyZXNpemU6bnVsbCxzdGFydDpudWxsLHN0b3A6bnVsbH0sX2NyZWF0ZTpmdW5jdGlvbigpe3ZhciBlLGkscyxuLG8sYT10aGlzLHI9dGhpcy5vcHRpb25zOwp0aGlzLmVsZW1lbnQuYWRkQ2xhc3MoInVpLXJlc2l6YWJsZSIpO3QuZXh0ZW5kKHRoaXMse19hc3BlY3RSYXRpbzohIXIuYXNwZWN0UmF0aW8sYXNwZWN0UmF0aW86ci5hc3BlY3RSYXRpbyxvcmlnaW5hbEVsZW1lbnQ6dGhpcy5lbGVtZW50LF9wcm9wb3J0aW9uYWxseVJlc2l6ZUVsZW1lbnRzOltdLF9oZWxwZXI6ci5oZWxwZXJ8fHIuZ2hvc3R8fHIuYW5pbWF0ZT9yLmhlbHBlcnx8InVpLXJlc2l6YWJsZS1oZWxwZXIiOm51bGx9KTtpZih0aGlzLmVsZW1lbnRbMF0ubm9kZU5hbWUubWF0Y2goL2NhbnZhc3x0ZXh0YXJlYXxpbnB1dHxzZWxlY3R8YnV0dG9ufGltZy9pKSl7dGhpcy5lbGVtZW50LndyYXAodCgiPGRpdiBjbGFzcz0ndWktd3JhcHBlcicgc3R5bGU9J292ZXJmbG93OiBoaWRkZW47Jz48L2Rpdj4iKS5jc3Moe3Bvc2l0aW9uOnRoaXMuZWxlbWVudC5jc3MoInBvc2l0aW9uIiksd2lkdGg6dGhpcy5lbGVtZW50Lm91dGVyV2lkdGgoKSxoZWlnaHQ6dGhpcy5lbGVtZW50Lm91dGVySGVpZ2h0KCksdG9wOnRoaXMuZWxlbWVudC5jc3MoInRvcCIpLGxlZnQ6dGhpcy5lbGVtZW50LmNzcygibGVmdCIpfSkpOwp0aGlzLmVsZW1lbnQ9dGhpcy5lbGVtZW50LnBhcmVudCgpLmRhdGEoInVpLXJlc2l6YWJsZSIsdGhpcy5lbGVtZW50LmRhdGEoInVpLXJlc2l6YWJsZSIpKTt0aGlzLmVsZW1lbnRJc1dyYXBwZXI9ITA7dGhpcy5lbGVtZW50LmNzcyh7bWFyZ2luTGVmdDp0aGlzLm9yaWdpbmFsRWxlbWVudC5jc3MoIm1hcmdpbkxlZnQiKSxtYXJnaW5Ub3A6dGhpcy5vcmlnaW5hbEVsZW1lbnQuY3NzKCJtYXJnaW5Ub3AiKSxtYXJnaW5SaWdodDp0aGlzLm9yaWdpbmFsRWxlbWVudC5jc3MoIm1hcmdpblJpZ2h0IiksbWFyZ2luQm90dG9tOnRoaXMub3JpZ2luYWxFbGVtZW50LmNzcygibWFyZ2luQm90dG9tIil9KTt0aGlzLm9yaWdpbmFsRWxlbWVudC5jc3Moe21hcmdpbkxlZnQ6MCxtYXJnaW5Ub3A6MCxtYXJnaW5SaWdodDowLG1hcmdpbkJvdHRvbTowfSk7dGhpcy5vcmlnaW5hbFJlc2l6ZVN0eWxlPXRoaXMub3JpZ2luYWxFbGVtZW50LmNzcygicmVzaXplIik7dGhpcy5vcmlnaW5hbEVsZW1lbnQuY3NzKCJyZXNpemUiLCJub25lIik7CnRoaXMuX3Byb3BvcnRpb25hbGx5UmVzaXplRWxlbWVudHMucHVzaCh0aGlzLm9yaWdpbmFsRWxlbWVudC5jc3Moe3Bvc2l0aW9uOiJzdGF0aWMiLHpvb206MSxkaXNwbGF5OiJibG9jayJ9KSk7dGhpcy5vcmlnaW5hbEVsZW1lbnQuY3NzKHttYXJnaW46dGhpcy5vcmlnaW5hbEVsZW1lbnQuY3NzKCJtYXJnaW4iKX0pO3RoaXMuX3Byb3BvcnRpb25hbGx5UmVzaXplKCl9dGhpcy5oYW5kbGVzPXIuaGFuZGxlc3x8KHQoIi51aS1yZXNpemFibGUtaGFuZGxlIix0aGlzLmVsZW1lbnQpLmxlbmd0aD97bjoiLnVpLXJlc2l6YWJsZS1uIixlOiIudWktcmVzaXphYmxlLWUiLHM6Ii51aS1yZXNpemFibGUtcyIsdzoiLnVpLXJlc2l6YWJsZS13IixzZToiLnVpLXJlc2l6YWJsZS1zZSIsc3c6Ii51aS1yZXNpemFibGUtc3ciLG5lOiIudWktcmVzaXphYmxlLW5lIixudzoiLnVpLXJlc2l6YWJsZS1udyJ9OiJlLHMsc2UiKTtpZih0aGlzLmhhbmRsZXMuY29uc3RydWN0b3I9PT1TdHJpbmcpeyJhbGwiPT09dGhpcy5oYW5kbGVzJiYodGhpcy5oYW5kbGVzPSJuLGUscyx3LHNlLHN3LG5lLG53Iik7CmU9dGhpcy5oYW5kbGVzLnNwbGl0KCIsIik7dGhpcy5oYW5kbGVzPXt9O2ZvcihpPTA7aTxlLmxlbmd0aDtpKyspe3M9dC50cmltKGVbaV0pO289InVpLXJlc2l6YWJsZS0iK3M7bj10KCI8ZGl2IGNsYXNzPSd1aS1yZXNpemFibGUtaGFuZGxlICIrbysiJz48L2Rpdj4iKTtuLmNzcyh7ekluZGV4OnIuekluZGV4fSk7InNlIj09PXMmJm4uYWRkQ2xhc3MoInVpLWljb24gdWktaWNvbi1ncmlwc21hbGwtZGlhZ29uYWwtc2UiKTt0aGlzLmhhbmRsZXNbc109Ii51aS1yZXNpemFibGUtIitzO3RoaXMuZWxlbWVudC5hcHBlbmQobil9fXRoaXMuX3JlbmRlckF4aXM9ZnVuY3Rpb24oZSl7dmFyIGkscyxuLG87ZT1lfHx0aGlzLmVsZW1lbnQ7Zm9yKGkgaW4gdGhpcy5oYW5kbGVzKXt0aGlzLmhhbmRsZXNbaV0uY29uc3RydWN0b3I9PT1TdHJpbmcmJih0aGlzLmhhbmRsZXNbaV09dCh0aGlzLmhhbmRsZXNbaV0sdGhpcy5lbGVtZW50KS5zaG93KCkpO2lmKHRoaXMuZWxlbWVudElzV3JhcHBlciYmdGhpcy5vcmlnaW5hbEVsZW1lbnRbMF0ubm9kZU5hbWUubWF0Y2goL3RleHRhcmVhfGlucHV0fHNlbGVjdHxidXR0b24vaSkpe3M9dCh0aGlzLmhhbmRsZXNbaV0sdGhpcy5lbGVtZW50KTsKbz0vc3d8bmV8bnd8c2V8bnxzLy50ZXN0KGkpP3Mub3V0ZXJIZWlnaHQoKTpzLm91dGVyV2lkdGgoKTtuPVsicGFkZGluZyIsL25lfG53fG4vLnRlc3QoaSk/IlRvcCI6L3NlfHN3fHMvLnRlc3QoaSk/IkJvdHRvbSI6L15lJC8udGVzdChpKT8iUmlnaHQiOiJMZWZ0Il0uam9pbigiIik7ZS5jc3MobixvKTt0aGlzLl9wcm9wb3J0aW9uYWxseVJlc2l6ZSgpfXQodGhpcy5oYW5kbGVzW2ldKS5sZW5ndGh9fTt0aGlzLl9yZW5kZXJBeGlzKHRoaXMuZWxlbWVudCk7dGhpcy5faGFuZGxlcz10KCIudWktcmVzaXphYmxlLWhhbmRsZSIsdGhpcy5lbGVtZW50KS5kaXNhYmxlU2VsZWN0aW9uKCk7dGhpcy5faGFuZGxlcy5tb3VzZW92ZXIoZnVuY3Rpb24oKXtpZighYS5yZXNpemluZyl7dGhpcy5jbGFzc05hbWUmJihuPXRoaXMuY2xhc3NOYW1lLm1hdGNoKC91aS1yZXNpemFibGUtKHNlfHN3fG5lfG53fG58ZXxzfHcpL2kpKTthLmF4aXM9biYmblsxXT9uWzFdOiJzZSJ9fSk7aWYoci5hdXRvSGlkZSl7dGhpcy5faGFuZGxlcy5oaWRlKCk7CnQodGhpcy5lbGVtZW50KS5hZGRDbGFzcygidWktcmVzaXphYmxlLWF1dG9oaWRlIikubW91c2VlbnRlcihmdW5jdGlvbigpe2lmKCFyLmRpc2FibGVkKXt0KHRoaXMpLnJlbW92ZUNsYXNzKCJ1aS1yZXNpemFibGUtYXV0b2hpZGUiKTthLl9oYW5kbGVzLnNob3coKX19KS5tb3VzZWxlYXZlKGZ1bmN0aW9uKCl7aWYoIXIuZGlzYWJsZWQmJiFhLnJlc2l6aW5nKXt0KHRoaXMpLmFkZENsYXNzKCJ1aS1yZXNpemFibGUtYXV0b2hpZGUiKTthLl9oYW5kbGVzLmhpZGUoKX19KX10aGlzLl9tb3VzZUluaXQoKX0sX2Rlc3Ryb3k6ZnVuY3Rpb24oKXt0aGlzLl9tb3VzZURlc3Ryb3koKTt2YXIgZSxpPWZ1bmN0aW9uKGUpe3QoZSkucmVtb3ZlQ2xhc3MoInVpLXJlc2l6YWJsZSB1aS1yZXNpemFibGUtZGlzYWJsZWQgdWktcmVzaXphYmxlLXJlc2l6aW5nIikucmVtb3ZlRGF0YSgicmVzaXphYmxlIikucmVtb3ZlRGF0YSgidWktcmVzaXphYmxlIikudW5iaW5kKCIucmVzaXphYmxlIikuZmluZCgiLnVpLXJlc2l6YWJsZS1oYW5kbGUiKS5yZW1vdmUoKQp9O2lmKHRoaXMuZWxlbWVudElzV3JhcHBlcil7aSh0aGlzLmVsZW1lbnQpO2U9dGhpcy5lbGVtZW50O3RoaXMub3JpZ2luYWxFbGVtZW50LmNzcyh7cG9zaXRpb246ZS5jc3MoInBvc2l0aW9uIiksd2lkdGg6ZS5vdXRlcldpZHRoKCksaGVpZ2h0OmUub3V0ZXJIZWlnaHQoKSx0b3A6ZS5jc3MoInRvcCIpLGxlZnQ6ZS5jc3MoImxlZnQiKX0pLmluc2VydEFmdGVyKGUpO2UucmVtb3ZlKCl9dGhpcy5vcmlnaW5hbEVsZW1lbnQuY3NzKCJyZXNpemUiLHRoaXMub3JpZ2luYWxSZXNpemVTdHlsZSk7aSh0aGlzLm9yaWdpbmFsRWxlbWVudCk7cmV0dXJuIHRoaXN9LF9tb3VzZUNhcHR1cmU6ZnVuY3Rpb24oZSl7dmFyIGkscyxuPSExO2ZvcihpIGluIHRoaXMuaGFuZGxlcyl7cz10KHRoaXMuaGFuZGxlc1tpXSlbMF07KHM9PT1lLnRhcmdldHx8dC5jb250YWlucyhzLGUudGFyZ2V0KSkmJihuPSEwKX1yZXR1cm4hdGhpcy5vcHRpb25zLmRpc2FibGVkJiZufSxfbW91c2VTdGFydDpmdW5jdGlvbihpKXt2YXIgcyxuLG8sYT10aGlzLm9wdGlvbnMscj10aGlzLmVsZW1lbnQucG9zaXRpb24oKSxoPXRoaXMuZWxlbWVudDsKdGhpcy5yZXNpemluZz0hMDsvYWJzb2x1dGUvLnRlc3QoaC5jc3MoInBvc2l0aW9uIikpP2guY3NzKHtwb3NpdGlvbjoiYWJzb2x1dGUiLHRvcDpoLmNzcygidG9wIiksbGVmdDpoLmNzcygibGVmdCIpfSk6aC5pcygiLnVpLWRyYWdnYWJsZSIpJiZoLmNzcyh7cG9zaXRpb246ImFic29sdXRlIix0b3A6ci50b3AsbGVmdDpyLmxlZnR9KTt0aGlzLl9yZW5kZXJQcm94eSgpO3M9ZSh0aGlzLmhlbHBlci5jc3MoImxlZnQiKSk7bj1lKHRoaXMuaGVscGVyLmNzcygidG9wIikpO2lmKGEuY29udGFpbm1lbnQpe3MrPXQoYS5jb250YWlubWVudCkuc2Nyb2xsTGVmdCgpfHwwO24rPXQoYS5jb250YWlubWVudCkuc2Nyb2xsVG9wKCl8fDB9dGhpcy5vZmZzZXQ9dGhpcy5oZWxwZXIub2Zmc2V0KCk7dGhpcy5wb3NpdGlvbj17bGVmdDpzLHRvcDpufTt0aGlzLnNpemU9dGhpcy5faGVscGVyP3t3aWR0aDp0aGlzLmhlbHBlci53aWR0aCgpLGhlaWdodDp0aGlzLmhlbHBlci5oZWlnaHQoKX06e3dpZHRoOmgud2lkdGgoKSxoZWlnaHQ6aC5oZWlnaHQoKX07CnRoaXMub3JpZ2luYWxTaXplPXRoaXMuX2hlbHBlcj97d2lkdGg6aC5vdXRlcldpZHRoKCksaGVpZ2h0Omgub3V0ZXJIZWlnaHQoKX06e3dpZHRoOmgud2lkdGgoKSxoZWlnaHQ6aC5oZWlnaHQoKX07dGhpcy5vcmlnaW5hbFBvc2l0aW9uPXtsZWZ0OnMsdG9wOm59O3RoaXMuc2l6ZURpZmY9e3dpZHRoOmgub3V0ZXJXaWR0aCgpLWgud2lkdGgoKSxoZWlnaHQ6aC5vdXRlckhlaWdodCgpLWguaGVpZ2h0KCl9O3RoaXMub3JpZ2luYWxNb3VzZVBvc2l0aW9uPXtsZWZ0OmkucGFnZVgsdG9wOmkucGFnZVl9O3RoaXMuYXNwZWN0UmF0aW89Im51bWJlciI9PXR5cGVvZiBhLmFzcGVjdFJhdGlvP2EuYXNwZWN0UmF0aW86dGhpcy5vcmlnaW5hbFNpemUud2lkdGgvdGhpcy5vcmlnaW5hbFNpemUuaGVpZ2h0fHwxO289dCgiLnVpLXJlc2l6YWJsZS0iK3RoaXMuYXhpcykuY3NzKCJjdXJzb3IiKTt0KCJib2R5IikuY3NzKCJjdXJzb3IiLCJhdXRvIj09PW8/dGhpcy5heGlzKyItcmVzaXplIjpvKTsKaC5hZGRDbGFzcygidWktcmVzaXphYmxlLXJlc2l6aW5nIik7dGhpcy5fcHJvcGFnYXRlKCJzdGFydCIsaSk7cmV0dXJuITB9LF9tb3VzZURyYWc6ZnVuY3Rpb24oZSl7dmFyIGkscz10aGlzLmhlbHBlcixuPXt9LG89dGhpcy5vcmlnaW5hbE1vdXNlUG9zaXRpb24sYT10aGlzLmF4aXMscj10aGlzLnBvc2l0aW9uLnRvcCxoPXRoaXMucG9zaXRpb24ubGVmdCxsPXRoaXMuc2l6ZS53aWR0aCx1PXRoaXMuc2l6ZS5oZWlnaHQsYz1lLnBhZ2VYLW8ubGVmdHx8MCxkPWUucGFnZVktby50b3B8fDAscD10aGlzLl9jaGFuZ2VbYV07aWYoIXApcmV0dXJuITE7aT1wLmFwcGx5KHRoaXMsW2UsYyxkXSk7dGhpcy5fdXBkYXRlVmlydHVhbEJvdW5kYXJpZXMoZS5zaGlmdEtleSk7KHRoaXMuX2FzcGVjdFJhdGlvfHxlLnNoaWZ0S2V5KSYmKGk9dGhpcy5fdXBkYXRlUmF0aW8oaSxlKSk7aT10aGlzLl9yZXNwZWN0U2l6ZShpLGUpO3RoaXMuX3VwZGF0ZUNhY2hlKGkpO3RoaXMuX3Byb3BhZ2F0ZSgicmVzaXplIixlKTsKdGhpcy5wb3NpdGlvbi50b3AhPT1yJiYobi50b3A9dGhpcy5wb3NpdGlvbi50b3ArInB4Iik7dGhpcy5wb3NpdGlvbi5sZWZ0IT09aCYmKG4ubGVmdD10aGlzLnBvc2l0aW9uLmxlZnQrInB4Iik7dGhpcy5zaXplLndpZHRoIT09bCYmKG4ud2lkdGg9dGhpcy5zaXplLndpZHRoKyJweCIpO3RoaXMuc2l6ZS5oZWlnaHQhPT11JiYobi5oZWlnaHQ9dGhpcy5zaXplLmhlaWdodCsicHgiKTtzLmNzcyhuKTshdGhpcy5faGVscGVyJiZ0aGlzLl9wcm9wb3J0aW9uYWxseVJlc2l6ZUVsZW1lbnRzLmxlbmd0aCYmdGhpcy5fcHJvcG9ydGlvbmFsbHlSZXNpemUoKTt0LmlzRW1wdHlPYmplY3Qobil8fHRoaXMuX3RyaWdnZXIoInJlc2l6ZSIsZSx0aGlzLnVpKCkpO3JldHVybiExfSxfbW91c2VTdG9wOmZ1bmN0aW9uKGUpe3RoaXMucmVzaXppbmc9ITE7dmFyIGkscyxuLG8sYSxyLGgsbD10aGlzLm9wdGlvbnMsdT10aGlzO2lmKHRoaXMuX2hlbHBlcil7aT10aGlzLl9wcm9wb3J0aW9uYWxseVJlc2l6ZUVsZW1lbnRzOwpzPWkubGVuZ3RoJiYvdGV4dGFyZWEvaS50ZXN0KGlbMF0ubm9kZU5hbWUpO249cyYmdC51aS5oYXNTY3JvbGwoaVswXSwibGVmdCIpPzA6dS5zaXplRGlmZi5oZWlnaHQ7bz1zPzA6dS5zaXplRGlmZi53aWR0aDthPXt3aWR0aDp1LmhlbHBlci53aWR0aCgpLW8saGVpZ2h0OnUuaGVscGVyLmhlaWdodCgpLW59O3I9cGFyc2VJbnQodS5lbGVtZW50LmNzcygibGVmdCIpLDEwKSsodS5wb3NpdGlvbi5sZWZ0LXUub3JpZ2luYWxQb3NpdGlvbi5sZWZ0KXx8bnVsbDtoPXBhcnNlSW50KHUuZWxlbWVudC5jc3MoInRvcCIpLDEwKSsodS5wb3NpdGlvbi50b3AtdS5vcmlnaW5hbFBvc2l0aW9uLnRvcCl8fG51bGw7bC5hbmltYXRlfHx0aGlzLmVsZW1lbnQuY3NzKHQuZXh0ZW5kKGEse3RvcDpoLGxlZnQ6cn0pKTt1LmhlbHBlci5oZWlnaHQodS5zaXplLmhlaWdodCk7dS5oZWxwZXIud2lkdGgodS5zaXplLndpZHRoKTt0aGlzLl9oZWxwZXImJiFsLmFuaW1hdGUmJnRoaXMuX3Byb3BvcnRpb25hbGx5UmVzaXplKCkKfXQoImJvZHkiKS5jc3MoImN1cnNvciIsImF1dG8iKTt0aGlzLmVsZW1lbnQucmVtb3ZlQ2xhc3MoInVpLXJlc2l6YWJsZS1yZXNpemluZyIpO3RoaXMuX3Byb3BhZ2F0ZSgic3RvcCIsZSk7dGhpcy5faGVscGVyJiZ0aGlzLmhlbHBlci5yZW1vdmUoKTtyZXR1cm4hMX0sX3VwZGF0ZVZpcnR1YWxCb3VuZGFyaWVzOmZ1bmN0aW9uKHQpe3ZhciBlLHMsbixvLGEscj10aGlzLm9wdGlvbnM7YT17bWluV2lkdGg6aShyLm1pbldpZHRoKT9yLm1pbldpZHRoOjAsbWF4V2lkdGg6aShyLm1heFdpZHRoKT9yLm1heFdpZHRoOjEvMCxtaW5IZWlnaHQ6aShyLm1pbkhlaWdodCk/ci5taW5IZWlnaHQ6MCxtYXhIZWlnaHQ6aShyLm1heEhlaWdodCk/ci5tYXhIZWlnaHQ6MS8wfTtpZih0aGlzLl9hc3BlY3RSYXRpb3x8dCl7ZT1hLm1pbkhlaWdodCp0aGlzLmFzcGVjdFJhdGlvO249YS5taW5XaWR0aC90aGlzLmFzcGVjdFJhdGlvO3M9YS5tYXhIZWlnaHQqdGhpcy5hc3BlY3RSYXRpbztvPWEubWF4V2lkdGgvdGhpcy5hc3BlY3RSYXRpbzsKZT5hLm1pbldpZHRoJiYoYS5taW5XaWR0aD1lKTtuPmEubWluSGVpZ2h0JiYoYS5taW5IZWlnaHQ9bik7czxhLm1heFdpZHRoJiYoYS5tYXhXaWR0aD1zKTtvPGEubWF4SGVpZ2h0JiYoYS5tYXhIZWlnaHQ9byl9dGhpcy5fdkJvdW5kYXJpZXM9YX0sX3VwZGF0ZUNhY2hlOmZ1bmN0aW9uKHQpe3RoaXMub2Zmc2V0PXRoaXMuaGVscGVyLm9mZnNldCgpO2kodC5sZWZ0KSYmKHRoaXMucG9zaXRpb24ubGVmdD10LmxlZnQpO2kodC50b3ApJiYodGhpcy5wb3NpdGlvbi50b3A9dC50b3ApO2kodC5oZWlnaHQpJiYodGhpcy5zaXplLmhlaWdodD10LmhlaWdodCk7aSh0LndpZHRoKSYmKHRoaXMuc2l6ZS53aWR0aD10LndpZHRoKX0sX3VwZGF0ZVJhdGlvOmZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMucG9zaXRpb24scz10aGlzLnNpemUsbj10aGlzLmF4aXM7aSh0LmhlaWdodCk/dC53aWR0aD10LmhlaWdodCp0aGlzLmFzcGVjdFJhdGlvOmkodC53aWR0aCkmJih0LmhlaWdodD10LndpZHRoL3RoaXMuYXNwZWN0UmF0aW8pOwppZigic3ciPT09bil7dC5sZWZ0PWUubGVmdCsocy53aWR0aC10LndpZHRoKTt0LnRvcD1udWxsfWlmKCJudyI9PT1uKXt0LnRvcD1lLnRvcCsocy5oZWlnaHQtdC5oZWlnaHQpO3QubGVmdD1lLmxlZnQrKHMud2lkdGgtdC53aWR0aCl9cmV0dXJuIHR9LF9yZXNwZWN0U2l6ZTpmdW5jdGlvbih0KXt2YXIgZT10aGlzLl92Qm91bmRhcmllcyxzPXRoaXMuYXhpcyxuPWkodC53aWR0aCkmJmUubWF4V2lkdGgmJmUubWF4V2lkdGg8dC53aWR0aCxvPWkodC5oZWlnaHQpJiZlLm1heEhlaWdodCYmZS5tYXhIZWlnaHQ8dC5oZWlnaHQsYT1pKHQud2lkdGgpJiZlLm1pbldpZHRoJiZlLm1pbldpZHRoPnQud2lkdGgscj1pKHQuaGVpZ2h0KSYmZS5taW5IZWlnaHQmJmUubWluSGVpZ2h0PnQuaGVpZ2h0LGg9dGhpcy5vcmlnaW5hbFBvc2l0aW9uLmxlZnQrdGhpcy5vcmlnaW5hbFNpemUud2lkdGgsbD10aGlzLnBvc2l0aW9uLnRvcCt0aGlzLnNpemUuaGVpZ2h0LHU9L3N3fG53fHcvLnRlc3QocyksYz0vbnd8bmV8bi8udGVzdChzKTsKYSYmKHQud2lkdGg9ZS5taW5XaWR0aCk7ciYmKHQuaGVpZ2h0PWUubWluSGVpZ2h0KTtuJiYodC53aWR0aD1lLm1heFdpZHRoKTtvJiYodC5oZWlnaHQ9ZS5tYXhIZWlnaHQpO2EmJnUmJih0LmxlZnQ9aC1lLm1pbldpZHRoKTtuJiZ1JiYodC5sZWZ0PWgtZS5tYXhXaWR0aCk7ciYmYyYmKHQudG9wPWwtZS5taW5IZWlnaHQpO28mJmMmJih0LnRvcD1sLWUubWF4SGVpZ2h0KTt0LndpZHRofHx0LmhlaWdodHx8dC5sZWZ0fHwhdC50b3A/dC53aWR0aHx8dC5oZWlnaHR8fHQudG9wfHwhdC5sZWZ0fHwodC5sZWZ0PW51bGwpOnQudG9wPW51bGw7cmV0dXJuIHR9LF9wcm9wb3J0aW9uYWxseVJlc2l6ZTpmdW5jdGlvbigpe2lmKHRoaXMuX3Byb3BvcnRpb25hbGx5UmVzaXplRWxlbWVudHMubGVuZ3RoKXt2YXIgdCxlLGkscyxuLG89dGhpcy5oZWxwZXJ8fHRoaXMuZWxlbWVudDtmb3IodD0wO3Q8dGhpcy5fcHJvcG9ydGlvbmFsbHlSZXNpemVFbGVtZW50cy5sZW5ndGg7dCsrKXtuPXRoaXMuX3Byb3BvcnRpb25hbGx5UmVzaXplRWxlbWVudHNbdF07CmlmKCF0aGlzLmJvcmRlckRpZil7dGhpcy5ib3JkZXJEaWY9W107aT1bbi5jc3MoImJvcmRlclRvcFdpZHRoIiksbi5jc3MoImJvcmRlclJpZ2h0V2lkdGgiKSxuLmNzcygiYm9yZGVyQm90dG9tV2lkdGgiKSxuLmNzcygiYm9yZGVyTGVmdFdpZHRoIildO3M9W24uY3NzKCJwYWRkaW5nVG9wIiksbi5jc3MoInBhZGRpbmdSaWdodCIpLG4uY3NzKCJwYWRkaW5nQm90dG9tIiksbi5jc3MoInBhZGRpbmdMZWZ0IildO2ZvcihlPTA7ZTxpLmxlbmd0aDtlKyspdGhpcy5ib3JkZXJEaWZbZV09KHBhcnNlSW50KGlbZV0sMTApfHwwKSsocGFyc2VJbnQoc1tlXSwxMCl8fDApfW4uY3NzKHtoZWlnaHQ6by5oZWlnaHQoKS10aGlzLmJvcmRlckRpZlswXS10aGlzLmJvcmRlckRpZlsyXXx8MCx3aWR0aDpvLndpZHRoKCktdGhpcy5ib3JkZXJEaWZbMV0tdGhpcy5ib3JkZXJEaWZbM118fDB9KX19fSxfcmVuZGVyUHJveHk6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLmVsZW1lbnQsaT10aGlzLm9wdGlvbnM7CnRoaXMuZWxlbWVudE9mZnNldD1lLm9mZnNldCgpO2lmKHRoaXMuX2hlbHBlcil7dGhpcy5oZWxwZXI9dGhpcy5oZWxwZXJ8fHQoIjxkaXYgc3R5bGU9J292ZXJmbG93OmhpZGRlbjsnPjwvZGl2PiIpO3RoaXMuaGVscGVyLmFkZENsYXNzKHRoaXMuX2hlbHBlcikuY3NzKHt3aWR0aDp0aGlzLmVsZW1lbnQub3V0ZXJXaWR0aCgpLTEsaGVpZ2h0OnRoaXMuZWxlbWVudC5vdXRlckhlaWdodCgpLTEscG9zaXRpb246ImFic29sdXRlIixsZWZ0OnRoaXMuZWxlbWVudE9mZnNldC5sZWZ0KyJweCIsdG9wOnRoaXMuZWxlbWVudE9mZnNldC50b3ArInB4Iix6SW5kZXg6KytpLnpJbmRleH0pO3RoaXMuaGVscGVyLmFwcGVuZFRvKCJib2R5IikuZGlzYWJsZVNlbGVjdGlvbigpfWVsc2UgdGhpcy5oZWxwZXI9dGhpcy5lbGVtZW50fSxfY2hhbmdlOntlOmZ1bmN0aW9uKHQsZSl7cmV0dXJue3dpZHRoOnRoaXMub3JpZ2luYWxTaXplLndpZHRoK2V9fSx3OmZ1bmN0aW9uKHQsZSl7dmFyIGk9dGhpcy5vcmlnaW5hbFNpemUscz10aGlzLm9yaWdpbmFsUG9zaXRpb247CnJldHVybntsZWZ0OnMubGVmdCtlLHdpZHRoOmkud2lkdGgtZX19LG46ZnVuY3Rpb24odCxlLGkpe3ZhciBzPXRoaXMub3JpZ2luYWxTaXplLG49dGhpcy5vcmlnaW5hbFBvc2l0aW9uO3JldHVybnt0b3A6bi50b3AraSxoZWlnaHQ6cy5oZWlnaHQtaX19LHM6ZnVuY3Rpb24odCxlLGkpe3JldHVybntoZWlnaHQ6dGhpcy5vcmlnaW5hbFNpemUuaGVpZ2h0K2l9fSxzZTpmdW5jdGlvbihlLGkscyl7cmV0dXJuIHQuZXh0ZW5kKHRoaXMuX2NoYW5nZS5zLmFwcGx5KHRoaXMsYXJndW1lbnRzKSx0aGlzLl9jaGFuZ2UuZS5hcHBseSh0aGlzLFtlLGksc10pKX0sc3c6ZnVuY3Rpb24oZSxpLHMpe3JldHVybiB0LmV4dGVuZCh0aGlzLl9jaGFuZ2Uucy5hcHBseSh0aGlzLGFyZ3VtZW50cyksdGhpcy5fY2hhbmdlLncuYXBwbHkodGhpcyxbZSxpLHNdKSl9LG5lOmZ1bmN0aW9uKGUsaSxzKXtyZXR1cm4gdC5leHRlbmQodGhpcy5fY2hhbmdlLm4uYXBwbHkodGhpcyxhcmd1bWVudHMpLHRoaXMuX2NoYW5nZS5lLmFwcGx5KHRoaXMsW2UsaSxzXSkpCn0sbnc6ZnVuY3Rpb24oZSxpLHMpe3JldHVybiB0LmV4dGVuZCh0aGlzLl9jaGFuZ2Uubi5hcHBseSh0aGlzLGFyZ3VtZW50cyksdGhpcy5fY2hhbmdlLncuYXBwbHkodGhpcyxbZSxpLHNdKSl9fSxfcHJvcGFnYXRlOmZ1bmN0aW9uKGUsaSl7dC51aS5wbHVnaW4uY2FsbCh0aGlzLGUsW2ksdGhpcy51aSgpXSk7InJlc2l6ZSIhPT1lJiZ0aGlzLl90cmlnZ2VyKGUsaSx0aGlzLnVpKCkpfSxwbHVnaW5zOnt9LHVpOmZ1bmN0aW9uKCl7cmV0dXJue29yaWdpbmFsRWxlbWVudDp0aGlzLm9yaWdpbmFsRWxlbWVudCxlbGVtZW50OnRoaXMuZWxlbWVudCxoZWxwZXI6dGhpcy5oZWxwZXIscG9zaXRpb246dGhpcy5wb3NpdGlvbixzaXplOnRoaXMuc2l6ZSxvcmlnaW5hbFNpemU6dGhpcy5vcmlnaW5hbFNpemUsb3JpZ2luYWxQb3NpdGlvbjp0aGlzLm9yaWdpbmFsUG9zaXRpb259fX0pO3QudWkucGx1Z2luLmFkZCgicmVzaXphYmxlIiwiYW5pbWF0ZSIse3N0b3A6ZnVuY3Rpb24oZSl7dmFyIGk9dCh0aGlzKS5kYXRhKCJ1aS1yZXNpemFibGUiKSxzPWkub3B0aW9ucyxuPWkuX3Byb3BvcnRpb25hbGx5UmVzaXplRWxlbWVudHMsbz1uLmxlbmd0aCYmL3RleHRhcmVhL2kudGVzdChuWzBdLm5vZGVOYW1lKSxhPW8mJnQudWkuaGFzU2Nyb2xsKG5bMF0sImxlZnQiKT8wOmkuc2l6ZURpZmYuaGVpZ2h0LHI9bz8wOmkuc2l6ZURpZmYud2lkdGgsaD17d2lkdGg6aS5zaXplLndpZHRoLXIsaGVpZ2h0Omkuc2l6ZS5oZWlnaHQtYX0sbD1wYXJzZUludChpLmVsZW1lbnQuY3NzKCJsZWZ0IiksMTApKyhpLnBvc2l0aW9uLmxlZnQtaS5vcmlnaW5hbFBvc2l0aW9uLmxlZnQpfHxudWxsLHU9cGFyc2VJbnQoaS5lbGVtZW50LmNzcygidG9wIiksMTApKyhpLnBvc2l0aW9uLnRvcC1pLm9yaWdpbmFsUG9zaXRpb24udG9wKXx8bnVsbDsKaS5lbGVtZW50LmFuaW1hdGUodC5leHRlbmQoaCx1JiZsP3t0b3A6dSxsZWZ0Omx9Ont9KSx7ZHVyYXRpb246cy5hbmltYXRlRHVyYXRpb24sZWFzaW5nOnMuYW5pbWF0ZUVhc2luZyxzdGVwOmZ1bmN0aW9uKCl7dmFyIHM9e3dpZHRoOnBhcnNlSW50KGkuZWxlbWVudC5jc3MoIndpZHRoIiksMTApLGhlaWdodDpwYXJzZUludChpLmVsZW1lbnQuY3NzKCJoZWlnaHQiKSwxMCksdG9wOnBhcnNlSW50KGkuZWxlbWVudC5jc3MoInRvcCIpLDEwKSxsZWZ0OnBhcnNlSW50KGkuZWxlbWVudC5jc3MoImxlZnQiKSwxMCl9O24mJm4ubGVuZ3RoJiZ0KG5bMF0pLmNzcyh7d2lkdGg6cy53aWR0aCxoZWlnaHQ6cy5oZWlnaHR9KTtpLl91cGRhdGVDYWNoZShzKTtpLl9wcm9wYWdhdGUoInJlc2l6ZSIsZSl9fSl9fSk7dC51aS5wbHVnaW4uYWRkKCJyZXNpemFibGUiLCJjb250YWlubWVudCIse3N0YXJ0OmZ1bmN0aW9uKCl7dmFyIGkscyxuLG8sYSxyLGgsbD10KHRoaXMpLmRhdGEoInVpLXJlc2l6YWJsZSIpLHU9bC5vcHRpb25zLGM9bC5lbGVtZW50LGQ9dS5jb250YWlubWVudCxwPWQgaW5zdGFuY2VvZiB0P2QuZ2V0KDApOi9wYXJlbnQvLnRlc3QoZCk/Yy5wYXJlbnQoKS5nZXQoMCk6ZDsKaWYocCl7bC5jb250YWluZXJFbGVtZW50PXQocCk7aWYoL2RvY3VtZW50Ly50ZXN0KGQpfHxkPT09ZG9jdW1lbnQpe2wuY29udGFpbmVyT2Zmc2V0PXtsZWZ0OjAsdG9wOjB9O2wuY29udGFpbmVyUG9zaXRpb249e2xlZnQ6MCx0b3A6MH07bC5wYXJlbnREYXRhPXtlbGVtZW50OnQoZG9jdW1lbnQpLGxlZnQ6MCx0b3A6MCx3aWR0aDp0KGRvY3VtZW50KS53aWR0aCgpLGhlaWdodDp0KGRvY3VtZW50KS5oZWlnaHQoKXx8ZG9jdW1lbnQuYm9keS5wYXJlbnROb2RlLnNjcm9sbEhlaWdodH19ZWxzZXtpPXQocCk7cz1bXTt0KFsiVG9wIiwiUmlnaHQiLCJMZWZ0IiwiQm90dG9tIl0pLmVhY2goZnVuY3Rpb24odCxuKXtzW3RdPWUoaS5jc3MoInBhZGRpbmciK24pKX0pO2wuY29udGFpbmVyT2Zmc2V0PWkub2Zmc2V0KCk7bC5jb250YWluZXJQb3NpdGlvbj1pLnBvc2l0aW9uKCk7bC5jb250YWluZXJTaXplPXtoZWlnaHQ6aS5pbm5lckhlaWdodCgpLXNbM10sd2lkdGg6aS5pbm5lcldpZHRoKCktc1sxXX07Cm49bC5jb250YWluZXJPZmZzZXQ7bz1sLmNvbnRhaW5lclNpemUuaGVpZ2h0O2E9bC5jb250YWluZXJTaXplLndpZHRoO3I9dC51aS5oYXNTY3JvbGwocCwibGVmdCIpP3Auc2Nyb2xsV2lkdGg6YTtoPXQudWkuaGFzU2Nyb2xsKHApP3Auc2Nyb2xsSGVpZ2h0Om87bC5wYXJlbnREYXRhPXtlbGVtZW50OnAsbGVmdDpuLmxlZnQsdG9wOm4udG9wLHdpZHRoOnIsaGVpZ2h0Omh9fX19LHJlc2l6ZTpmdW5jdGlvbihlKXt2YXIgaSxzLG4sbyxhPXQodGhpcykuZGF0YSgidWktcmVzaXphYmxlIikscj1hLm9wdGlvbnMsaD1hLmNvbnRhaW5lck9mZnNldCxsPWEucG9zaXRpb24sdT1hLl9hc3BlY3RSYXRpb3x8ZS5zaGlmdEtleSxjPXt0b3A6MCxsZWZ0OjB9LGQ9YS5jb250YWluZXJFbGVtZW50O2RbMF0hPT1kb2N1bWVudCYmL3N0YXRpYy8udGVzdChkLmNzcygicG9zaXRpb24iKSkmJihjPWgpO2lmKGwubGVmdDwoYS5faGVscGVyP2gubGVmdDowKSl7YS5zaXplLndpZHRoPWEuc2l6ZS53aWR0aCsoYS5faGVscGVyP2EucG9zaXRpb24ubGVmdC1oLmxlZnQ6YS5wb3NpdGlvbi5sZWZ0LWMubGVmdCk7CnUmJihhLnNpemUuaGVpZ2h0PWEuc2l6ZS53aWR0aC9hLmFzcGVjdFJhdGlvKTthLnBvc2l0aW9uLmxlZnQ9ci5oZWxwZXI/aC5sZWZ0OjB9aWYobC50b3A8KGEuX2hlbHBlcj9oLnRvcDowKSl7YS5zaXplLmhlaWdodD1hLnNpemUuaGVpZ2h0KyhhLl9oZWxwZXI/YS5wb3NpdGlvbi50b3AtaC50b3A6YS5wb3NpdGlvbi50b3ApO3UmJihhLnNpemUud2lkdGg9YS5zaXplLmhlaWdodCphLmFzcGVjdFJhdGlvKTthLnBvc2l0aW9uLnRvcD1hLl9oZWxwZXI/aC50b3A6MH1hLm9mZnNldC5sZWZ0PWEucGFyZW50RGF0YS5sZWZ0K2EucG9zaXRpb24ubGVmdDthLm9mZnNldC50b3A9YS5wYXJlbnREYXRhLnRvcCthLnBvc2l0aW9uLnRvcDtpPU1hdGguYWJzKChhLl9oZWxwZXI/YS5vZmZzZXQubGVmdC1jLmxlZnQ6YS5vZmZzZXQubGVmdC1jLmxlZnQpK2Euc2l6ZURpZmYud2lkdGgpO3M9TWF0aC5hYnMoKGEuX2hlbHBlcj9hLm9mZnNldC50b3AtYy50b3A6YS5vZmZzZXQudG9wLWgudG9wKSthLnNpemVEaWZmLmhlaWdodCk7Cm49YS5jb250YWluZXJFbGVtZW50LmdldCgwKT09PWEuZWxlbWVudC5wYXJlbnQoKS5nZXQoMCk7bz0vcmVsYXRpdmV8YWJzb2x1dGUvLnRlc3QoYS5jb250YWluZXJFbGVtZW50LmNzcygicG9zaXRpb24iKSk7biYmbyYmKGktPU1hdGguYWJzKGEucGFyZW50RGF0YS5sZWZ0KSk7aWYoaSthLnNpemUud2lkdGg+PWEucGFyZW50RGF0YS53aWR0aCl7YS5zaXplLndpZHRoPWEucGFyZW50RGF0YS53aWR0aC1pO3UmJihhLnNpemUuaGVpZ2h0PWEuc2l6ZS53aWR0aC9hLmFzcGVjdFJhdGlvKX1pZihzK2Euc2l6ZS5oZWlnaHQ+PWEucGFyZW50RGF0YS5oZWlnaHQpe2Euc2l6ZS5oZWlnaHQ9YS5wYXJlbnREYXRhLmhlaWdodC1zO3UmJihhLnNpemUud2lkdGg9YS5zaXplLmhlaWdodCphLmFzcGVjdFJhdGlvKX19LHN0b3A6ZnVuY3Rpb24oKXt2YXIgZT10KHRoaXMpLmRhdGEoInVpLXJlc2l6YWJsZSIpLGk9ZS5vcHRpb25zLHM9ZS5jb250YWluZXJPZmZzZXQsbj1lLmNvbnRhaW5lclBvc2l0aW9uLG89ZS5jb250YWluZXJFbGVtZW50LGE9dChlLmhlbHBlcikscj1hLm9mZnNldCgpLGg9YS5vdXRlcldpZHRoKCktZS5zaXplRGlmZi53aWR0aCxsPWEub3V0ZXJIZWlnaHQoKS1lLnNpemVEaWZmLmhlaWdodDsKZS5faGVscGVyJiYhaS5hbmltYXRlJiYvcmVsYXRpdmUvLnRlc3Qoby5jc3MoInBvc2l0aW9uIikpJiZ0KHRoaXMpLmNzcyh7bGVmdDpyLmxlZnQtbi5sZWZ0LXMubGVmdCx3aWR0aDpoLGhlaWdodDpsfSk7ZS5faGVscGVyJiYhaS5hbmltYXRlJiYvc3RhdGljLy50ZXN0KG8uY3NzKCJwb3NpdGlvbiIpKSYmdCh0aGlzKS5jc3Moe2xlZnQ6ci5sZWZ0LW4ubGVmdC1zLmxlZnQsd2lkdGg6aCxoZWlnaHQ6bH0pfX0pO3QudWkucGx1Z2luLmFkZCgicmVzaXphYmxlIiwiYWxzb1Jlc2l6ZSIse3N0YXJ0OmZ1bmN0aW9uKCl7dmFyIGU9dCh0aGlzKS5kYXRhKCJ1aS1yZXNpemFibGUiKSxpPWUub3B0aW9ucyxzPWZ1bmN0aW9uKGUpe3QoZSkuZWFjaChmdW5jdGlvbigpe3ZhciBlPXQodGhpcyk7ZS5kYXRhKCJ1aS1yZXNpemFibGUtYWxzb3Jlc2l6ZSIse3dpZHRoOnBhcnNlSW50KGUud2lkdGgoKSwxMCksaGVpZ2h0OnBhcnNlSW50KGUuaGVpZ2h0KCksMTApLGxlZnQ6cGFyc2VJbnQoZS5jc3MoImxlZnQiKSwxMCksdG9wOnBhcnNlSW50KGUuY3NzKCJ0b3AiKSwxMCl9KQp9KX07aWYoIm9iamVjdCIhPXR5cGVvZiBpLmFsc29SZXNpemV8fGkuYWxzb1Jlc2l6ZS5wYXJlbnROb2RlKXMoaS5hbHNvUmVzaXplKTtlbHNlIGlmKGkuYWxzb1Jlc2l6ZS5sZW5ndGgpe2kuYWxzb1Jlc2l6ZT1pLmFsc29SZXNpemVbMF07cyhpLmFsc29SZXNpemUpfWVsc2UgdC5lYWNoKGkuYWxzb1Jlc2l6ZSxmdW5jdGlvbih0KXtzKHQpfSl9LHJlc2l6ZTpmdW5jdGlvbihlLGkpe3ZhciBzPXQodGhpcykuZGF0YSgidWktcmVzaXphYmxlIiksbj1zLm9wdGlvbnMsbz1zLm9yaWdpbmFsU2l6ZSxhPXMub3JpZ2luYWxQb3NpdGlvbixyPXtoZWlnaHQ6cy5zaXplLmhlaWdodC1vLmhlaWdodHx8MCx3aWR0aDpzLnNpemUud2lkdGgtby53aWR0aHx8MCx0b3A6cy5wb3NpdGlvbi50b3AtYS50b3B8fDAsbGVmdDpzLnBvc2l0aW9uLmxlZnQtYS5sZWZ0fHwwfSxoPWZ1bmN0aW9uKGUscyl7dChlKS5lYWNoKGZ1bmN0aW9uKCl7dmFyIGU9dCh0aGlzKSxuPXQodGhpcykuZGF0YSgidWktcmVzaXphYmxlLWFsc29yZXNpemUiKSxvPXt9LGE9cyYmcy5sZW5ndGg/czplLnBhcmVudHMoaS5vcmlnaW5hbEVsZW1lbnRbMF0pLmxlbmd0aD9bIndpZHRoIiwiaGVpZ2h0Il06WyJ3aWR0aCIsImhlaWdodCIsInRvcCIsImxlZnQiXTsKdC5lYWNoKGEsZnVuY3Rpb24odCxlKXt2YXIgaT0obltlXXx8MCkrKHJbZV18fDApO2kmJmk+PTAmJihvW2VdPWl8fG51bGwpfSk7ZS5jc3Mobyl9KX07Im9iamVjdCIhPXR5cGVvZiBuLmFsc29SZXNpemV8fG4uYWxzb1Jlc2l6ZS5ub2RlVHlwZT9oKG4uYWxzb1Jlc2l6ZSk6dC5lYWNoKG4uYWxzb1Jlc2l6ZSxmdW5jdGlvbih0LGUpe2godCxlKX0pfSxzdG9wOmZ1bmN0aW9uKCl7dCh0aGlzKS5yZW1vdmVEYXRhKCJyZXNpemFibGUtYWxzb3Jlc2l6ZSIpfX0pO3QudWkucGx1Z2luLmFkZCgicmVzaXphYmxlIiwiZ2hvc3QiLHtzdGFydDpmdW5jdGlvbigpe3ZhciBlPXQodGhpcykuZGF0YSgidWktcmVzaXphYmxlIiksaT1lLm9wdGlvbnMscz1lLnNpemU7ZS5naG9zdD1lLm9yaWdpbmFsRWxlbWVudC5jbG9uZSgpO2UuZ2hvc3QuY3NzKHtvcGFjaXR5Oi4yNSxkaXNwbGF5OiJibG9jayIscG9zaXRpb246InJlbGF0aXZlIixoZWlnaHQ6cy5oZWlnaHQsd2lkdGg6cy53aWR0aCxtYXJnaW46MCxsZWZ0OjAsdG9wOjB9KS5hZGRDbGFzcygidWktcmVzaXphYmxlLWdob3N0IikuYWRkQ2xhc3MoInN0cmluZyI9PXR5cGVvZiBpLmdob3N0P2kuZ2hvc3Q6IiIpOwplLmdob3N0LmFwcGVuZFRvKGUuaGVscGVyKX0scmVzaXplOmZ1bmN0aW9uKCl7dmFyIGU9dCh0aGlzKS5kYXRhKCJ1aS1yZXNpemFibGUiKTtlLmdob3N0JiZlLmdob3N0LmNzcyh7cG9zaXRpb246InJlbGF0aXZlIixoZWlnaHQ6ZS5zaXplLmhlaWdodCx3aWR0aDplLnNpemUud2lkdGh9KX0sc3RvcDpmdW5jdGlvbigpe3ZhciBlPXQodGhpcykuZGF0YSgidWktcmVzaXphYmxlIik7ZS5naG9zdCYmZS5oZWxwZXImJmUuaGVscGVyLmdldCgwKS5yZW1vdmVDaGlsZChlLmdob3N0LmdldCgwKSl9fSk7dC51aS5wbHVnaW4uYWRkKCJyZXNpemFibGUiLCJncmlkIix7cmVzaXplOmZ1bmN0aW9uKCl7dmFyIGU9dCh0aGlzKS5kYXRhKCJ1aS1yZXNpemFibGUiKSxpPWUub3B0aW9ucyxzPWUuc2l6ZSxuPWUub3JpZ2luYWxTaXplLG89ZS5vcmlnaW5hbFBvc2l0aW9uLGE9ZS5heGlzLHI9Im51bWJlciI9PXR5cGVvZiBpLmdyaWQ/W2kuZ3JpZCxpLmdyaWRdOmkuZ3JpZCxoPXJbMF18fDEsbD1yWzFdfHwxLHU9TWF0aC5yb3VuZCgocy53aWR0aC1uLndpZHRoKS9oKSpoLGM9TWF0aC5yb3VuZCgocy5oZWlnaHQtbi5oZWlnaHQpL2wpKmwsZD1uLndpZHRoK3UscD1uLmhlaWdodCtjLGY9aS5tYXhXaWR0aCYmaS5tYXhXaWR0aDxkLGc9aS5tYXhIZWlnaHQmJmkubWF4SGVpZ2h0PHAsbT1pLm1pbldpZHRoJiZpLm1pbldpZHRoPmQsdj1pLm1pbkhlaWdodCYmaS5taW5IZWlnaHQ+cDsKaS5ncmlkPXI7bSYmKGQrPWgpO3YmJihwKz1sKTtmJiYoZC09aCk7ZyYmKHAtPWwpO2lmKC9eKHNlfHN8ZSkkLy50ZXN0KGEpKXtlLnNpemUud2lkdGg9ZDtlLnNpemUuaGVpZ2h0PXB9ZWxzZSBpZigvXihuZSkkLy50ZXN0KGEpKXtlLnNpemUud2lkdGg9ZDtlLnNpemUuaGVpZ2h0PXA7ZS5wb3NpdGlvbi50b3A9by50b3AtY31lbHNlIGlmKC9eKHN3KSQvLnRlc3QoYSkpe2Uuc2l6ZS53aWR0aD1kO2Uuc2l6ZS5oZWlnaHQ9cDtlLnBvc2l0aW9uLmxlZnQ9by5sZWZ0LXV9ZWxzZXtpZihwLWw+MCl7ZS5zaXplLmhlaWdodD1wO2UucG9zaXRpb24udG9wPW8udG9wLWN9ZWxzZXtlLnNpemUuaGVpZ2h0PWw7ZS5wb3NpdGlvbi50b3A9by50b3Arbi5oZWlnaHQtbH1pZihkLWg+MCl7ZS5zaXplLndpZHRoPWQ7ZS5wb3NpdGlvbi5sZWZ0PW8ubGVmdC11fWVsc2V7ZS5zaXplLndpZHRoPWg7ZS5wb3NpdGlvbi5sZWZ0PW8ubGVmdCtuLndpZHRoLWh9fX19KX0oalF1ZXJ5KTshZnVuY3Rpb24odCl7dC53aWRnZXQoInVpLnNlbGVjdGFibGUiLHQudWkubW91c2Use3ZlcnNpb246IjEuMTAuNCIsb3B0aW9uczp7YXBwZW5kVG86ImJvZHkiLGF1dG9SZWZyZXNoOiEwLGRpc3RhbmNlOjAsZmlsdGVyOiIqIix0b2xlcmFuY2U6InRvdWNoIixzZWxlY3RlZDpudWxsLHNlbGVjdGluZzpudWxsLHN0YXJ0Om51bGwsc3RvcDpudWxsLHVuc2VsZWN0ZWQ6bnVsbCx1bnNlbGVjdGluZzpudWxsfSxfY3JlYXRlOmZ1bmN0aW9uKCl7dmFyIGUsaT10aGlzOwp0aGlzLmVsZW1lbnQuYWRkQ2xhc3MoInVpLXNlbGVjdGFibGUiKTt0aGlzLmRyYWdnZWQ9ITE7dGhpcy5yZWZyZXNoPWZ1bmN0aW9uKCl7ZT10KGkub3B0aW9ucy5maWx0ZXIsaS5lbGVtZW50WzBdKTtlLmFkZENsYXNzKCJ1aS1zZWxlY3RlZSIpO2UuZWFjaChmdW5jdGlvbigpe3ZhciBlPXQodGhpcyksaT1lLm9mZnNldCgpO3QuZGF0YSh0aGlzLCJzZWxlY3RhYmxlLWl0ZW0iLHtlbGVtZW50OnRoaXMsJGVsZW1lbnQ6ZSxsZWZ0OmkubGVmdCx0b3A6aS50b3AscmlnaHQ6aS5sZWZ0K2Uub3V0ZXJXaWR0aCgpLGJvdHRvbTppLnRvcCtlLm91dGVySGVpZ2h0KCksc3RhcnRzZWxlY3RlZDohMSxzZWxlY3RlZDplLmhhc0NsYXNzKCJ1aS1zZWxlY3RlZCIpLHNlbGVjdGluZzplLmhhc0NsYXNzKCJ1aS1zZWxlY3RpbmciKSx1bnNlbGVjdGluZzplLmhhc0NsYXNzKCJ1aS11bnNlbGVjdGluZyIpfSl9KX07dGhpcy5yZWZyZXNoKCk7dGhpcy5zZWxlY3RlZXM9ZS5hZGRDbGFzcygidWktc2VsZWN0ZWUiKTsKdGhpcy5fbW91c2VJbml0KCk7dGhpcy5oZWxwZXI9dCgiPGRpdiBjbGFzcz0ndWktc2VsZWN0YWJsZS1oZWxwZXInPjwvZGl2PiIpfSxfZGVzdHJveTpmdW5jdGlvbigpe3RoaXMuc2VsZWN0ZWVzLnJlbW92ZUNsYXNzKCJ1aS1zZWxlY3RlZSIpLnJlbW92ZURhdGEoInNlbGVjdGFibGUtaXRlbSIpO3RoaXMuZWxlbWVudC5yZW1vdmVDbGFzcygidWktc2VsZWN0YWJsZSB1aS1zZWxlY3RhYmxlLWRpc2FibGVkIik7dGhpcy5fbW91c2VEZXN0cm95KCl9LF9tb3VzZVN0YXJ0OmZ1bmN0aW9uKGUpe3ZhciBpPXRoaXMscz10aGlzLm9wdGlvbnM7dGhpcy5vcG9zPVtlLnBhZ2VYLGUucGFnZVldO2lmKCF0aGlzLm9wdGlvbnMuZGlzYWJsZWQpe3RoaXMuc2VsZWN0ZWVzPXQocy5maWx0ZXIsdGhpcy5lbGVtZW50WzBdKTt0aGlzLl90cmlnZ2VyKCJzdGFydCIsZSk7dChzLmFwcGVuZFRvKS5hcHBlbmQodGhpcy5oZWxwZXIpO3RoaXMuaGVscGVyLmNzcyh7bGVmdDplLnBhZ2VYLHRvcDplLnBhZ2VZLHdpZHRoOjAsaGVpZ2h0OjB9KTsKcy5hdXRvUmVmcmVzaCYmdGhpcy5yZWZyZXNoKCk7dGhpcy5zZWxlY3RlZXMuZmlsdGVyKCIudWktc2VsZWN0ZWQiKS5lYWNoKGZ1bmN0aW9uKCl7dmFyIHM9dC5kYXRhKHRoaXMsInNlbGVjdGFibGUtaXRlbSIpO3Muc3RhcnRzZWxlY3RlZD0hMDtpZighZS5tZXRhS2V5JiYhZS5jdHJsS2V5KXtzLiRlbGVtZW50LnJlbW92ZUNsYXNzKCJ1aS1zZWxlY3RlZCIpO3Muc2VsZWN0ZWQ9ITE7cy4kZWxlbWVudC5hZGRDbGFzcygidWktdW5zZWxlY3RpbmciKTtzLnVuc2VsZWN0aW5nPSEwO2kuX3RyaWdnZXIoInVuc2VsZWN0aW5nIixlLHt1bnNlbGVjdGluZzpzLmVsZW1lbnR9KX19KTt0KGUudGFyZ2V0KS5wYXJlbnRzKCkuYWRkQmFjaygpLmVhY2goZnVuY3Rpb24oKXt2YXIgcyxuPXQuZGF0YSh0aGlzLCJzZWxlY3RhYmxlLWl0ZW0iKTtpZihuKXtzPSFlLm1ldGFLZXkmJiFlLmN0cmxLZXl8fCFuLiRlbGVtZW50Lmhhc0NsYXNzKCJ1aS1zZWxlY3RlZCIpO24uJGVsZW1lbnQucmVtb3ZlQ2xhc3Mocz8idWktdW5zZWxlY3RpbmciOiJ1aS1zZWxlY3RlZCIpLmFkZENsYXNzKHM/InVpLXNlbGVjdGluZyI6InVpLXVuc2VsZWN0aW5nIik7Cm4udW5zZWxlY3Rpbmc9IXM7bi5zZWxlY3Rpbmc9cztuLnNlbGVjdGVkPXM7cz9pLl90cmlnZ2VyKCJzZWxlY3RpbmciLGUse3NlbGVjdGluZzpuLmVsZW1lbnR9KTppLl90cmlnZ2VyKCJ1bnNlbGVjdGluZyIsZSx7dW5zZWxlY3Rpbmc6bi5lbGVtZW50fSk7cmV0dXJuITF9fSl9fSxfbW91c2VEcmFnOmZ1bmN0aW9uKGUpe3RoaXMuZHJhZ2dlZD0hMDtpZighdGhpcy5vcHRpb25zLmRpc2FibGVkKXt2YXIgaSxzPXRoaXMsbj10aGlzLm9wdGlvbnMsbz10aGlzLm9wb3NbMF0sYT10aGlzLm9wb3NbMV0scj1lLnBhZ2VYLGg9ZS5wYWdlWTtpZihvPnIpe2k9cjtyPW87bz1pfWlmKGE+aCl7aT1oO2g9YTthPWl9dGhpcy5oZWxwZXIuY3NzKHtsZWZ0Om8sdG9wOmEsd2lkdGg6ci1vLGhlaWdodDpoLWF9KTt0aGlzLnNlbGVjdGVlcy5lYWNoKGZ1bmN0aW9uKCl7dmFyIGk9dC5kYXRhKHRoaXMsInNlbGVjdGFibGUtaXRlbSIpLGw9ITE7aWYoaSYmaS5lbGVtZW50IT09cy5lbGVtZW50WzBdKXsidG91Y2giPT09bi50b2xlcmFuY2U/bD0hKGkubGVmdD5yfHxpLnJpZ2h0PG98fGkudG9wPmh8fGkuYm90dG9tPGEpOiJmaXQiPT09bi50b2xlcmFuY2UmJihsPWkubGVmdD5vJiZpLnJpZ2h0PHImJmkudG9wPmEmJmkuYm90dG9tPGgpOwppZihsKXtpZihpLnNlbGVjdGVkKXtpLiRlbGVtZW50LnJlbW92ZUNsYXNzKCJ1aS1zZWxlY3RlZCIpO2kuc2VsZWN0ZWQ9ITF9aWYoaS51bnNlbGVjdGluZyl7aS4kZWxlbWVudC5yZW1vdmVDbGFzcygidWktdW5zZWxlY3RpbmciKTtpLnVuc2VsZWN0aW5nPSExfWlmKCFpLnNlbGVjdGluZyl7aS4kZWxlbWVudC5hZGRDbGFzcygidWktc2VsZWN0aW5nIik7aS5zZWxlY3Rpbmc9ITA7cy5fdHJpZ2dlcigic2VsZWN0aW5nIixlLHtzZWxlY3Rpbmc6aS5lbGVtZW50fSl9fWVsc2V7aWYoaS5zZWxlY3RpbmcpaWYoKGUubWV0YUtleXx8ZS5jdHJsS2V5KSYmaS5zdGFydHNlbGVjdGVkKXtpLiRlbGVtZW50LnJlbW92ZUNsYXNzKCJ1aS1zZWxlY3RpbmciKTtpLnNlbGVjdGluZz0hMTtpLiRlbGVtZW50LmFkZENsYXNzKCJ1aS1zZWxlY3RlZCIpO2kuc2VsZWN0ZWQ9ITB9ZWxzZXtpLiRlbGVtZW50LnJlbW92ZUNsYXNzKCJ1aS1zZWxlY3RpbmciKTtpLnNlbGVjdGluZz0hMTtpZihpLnN0YXJ0c2VsZWN0ZWQpe2kuJGVsZW1lbnQuYWRkQ2xhc3MoInVpLXVuc2VsZWN0aW5nIik7CmkudW5zZWxlY3Rpbmc9ITB9cy5fdHJpZ2dlcigidW5zZWxlY3RpbmciLGUse3Vuc2VsZWN0aW5nOmkuZWxlbWVudH0pfWlmKGkuc2VsZWN0ZWQmJiFlLm1ldGFLZXkmJiFlLmN0cmxLZXkmJiFpLnN0YXJ0c2VsZWN0ZWQpe2kuJGVsZW1lbnQucmVtb3ZlQ2xhc3MoInVpLXNlbGVjdGVkIik7aS5zZWxlY3RlZD0hMTtpLiRlbGVtZW50LmFkZENsYXNzKCJ1aS11bnNlbGVjdGluZyIpO2kudW5zZWxlY3Rpbmc9ITA7cy5fdHJpZ2dlcigidW5zZWxlY3RpbmciLGUse3Vuc2VsZWN0aW5nOmkuZWxlbWVudH0pfX19fSk7cmV0dXJuITF9fSxfbW91c2VTdG9wOmZ1bmN0aW9uKGUpe3ZhciBpPXRoaXM7dGhpcy5kcmFnZ2VkPSExO3QoIi51aS11bnNlbGVjdGluZyIsdGhpcy5lbGVtZW50WzBdKS5lYWNoKGZ1bmN0aW9uKCl7dmFyIHM9dC5kYXRhKHRoaXMsInNlbGVjdGFibGUtaXRlbSIpO3MuJGVsZW1lbnQucmVtb3ZlQ2xhc3MoInVpLXVuc2VsZWN0aW5nIik7cy51bnNlbGVjdGluZz0hMTtzLnN0YXJ0c2VsZWN0ZWQ9ITE7CmkuX3RyaWdnZXIoInVuc2VsZWN0ZWQiLGUse3Vuc2VsZWN0ZWQ6cy5lbGVtZW50fSl9KTt0KCIudWktc2VsZWN0aW5nIix0aGlzLmVsZW1lbnRbMF0pLmVhY2goZnVuY3Rpb24oKXt2YXIgcz10LmRhdGEodGhpcywic2VsZWN0YWJsZS1pdGVtIik7cy4kZWxlbWVudC5yZW1vdmVDbGFzcygidWktc2VsZWN0aW5nIikuYWRkQ2xhc3MoInVpLXNlbGVjdGVkIik7cy5zZWxlY3Rpbmc9ITE7cy5zZWxlY3RlZD0hMDtzLnN0YXJ0c2VsZWN0ZWQ9ITA7aS5fdHJpZ2dlcigic2VsZWN0ZWQiLGUse3NlbGVjdGVkOnMuZWxlbWVudH0pfSk7dGhpcy5fdHJpZ2dlcigic3RvcCIsZSk7dGhpcy5oZWxwZXIucmVtb3ZlKCk7cmV0dXJuITF9fSl9KGpRdWVyeSk7IWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUodCxlLGkpe3JldHVybiB0PmUmJmUraT50fWZ1bmN0aW9uIGkodCl7cmV0dXJuL2xlZnR8cmlnaHQvLnRlc3QodC5jc3MoImZsb2F0IikpfHwvaW5saW5lfHRhYmxlLWNlbGwvLnRlc3QodC5jc3MoImRpc3BsYXkiKSkKfXQud2lkZ2V0KCJ1aS5zb3J0YWJsZSIsdC51aS5tb3VzZSx7dmVyc2lvbjoiMS4xMC40Iix3aWRnZXRFdmVudFByZWZpeDoic29ydCIscmVhZHk6ITEsb3B0aW9uczp7YXBwZW5kVG86InBhcmVudCIsYXhpczohMSxjb25uZWN0V2l0aDohMSxjb250YWlubWVudDohMSxjdXJzb3I6ImF1dG8iLGN1cnNvckF0OiExLGRyb3BPbkVtcHR5OiEwLGZvcmNlUGxhY2Vob2xkZXJTaXplOiExLGZvcmNlSGVscGVyU2l6ZTohMSxncmlkOiExLGhhbmRsZTohMSxoZWxwZXI6Im9yaWdpbmFsIixpdGVtczoiPiAqIixvcGFjaXR5OiExLHBsYWNlaG9sZGVyOiExLHJldmVydDohMSxzY3JvbGw6ITAsc2Nyb2xsU2Vuc2l0aXZpdHk6MjAsc2Nyb2xsU3BlZWQ6MjAsc2NvcGU6ImRlZmF1bHQiLHRvbGVyYW5jZToiaW50ZXJzZWN0Iix6SW5kZXg6MWUzLGFjdGl2YXRlOm51bGwsYmVmb3JlU3RvcDpudWxsLGNoYW5nZTpudWxsLGRlYWN0aXZhdGU6bnVsbCxvdXQ6bnVsbCxvdmVyOm51bGwscmVjZWl2ZTpudWxsLHJlbW92ZTpudWxsLHNvcnQ6bnVsbCxzdGFydDpudWxsLHN0b3A6bnVsbCx1cGRhdGU6bnVsbH0sX2NyZWF0ZTpmdW5jdGlvbigpe3ZhciB0PXRoaXMub3B0aW9uczsKdGhpcy5jb250YWluZXJDYWNoZT17fTt0aGlzLmVsZW1lbnQuYWRkQ2xhc3MoInVpLXNvcnRhYmxlIik7dGhpcy5yZWZyZXNoKCk7dGhpcy5mbG9hdGluZz10aGlzLml0ZW1zLmxlbmd0aD8ieCI9PT10LmF4aXN8fGkodGhpcy5pdGVtc1swXS5pdGVtKTohMTt0aGlzLm9mZnNldD10aGlzLmVsZW1lbnQub2Zmc2V0KCk7dGhpcy5fbW91c2VJbml0KCk7dGhpcy5yZWFkeT0hMH0sX2Rlc3Ryb3k6ZnVuY3Rpb24oKXt0aGlzLmVsZW1lbnQucmVtb3ZlQ2xhc3MoInVpLXNvcnRhYmxlIHVpLXNvcnRhYmxlLWRpc2FibGVkIik7dGhpcy5fbW91c2VEZXN0cm95KCk7Zm9yKHZhciB0PXRoaXMuaXRlbXMubGVuZ3RoLTE7dD49MDt0LS0pdGhpcy5pdGVtc1t0XS5pdGVtLnJlbW92ZURhdGEodGhpcy53aWRnZXROYW1lKyItaXRlbSIpO3JldHVybiB0aGlzfSxfc2V0T3B0aW9uOmZ1bmN0aW9uKGUsaSl7aWYoImRpc2FibGVkIj09PWUpe3RoaXMub3B0aW9uc1tlXT1pO3RoaXMud2lkZ2V0KCkudG9nZ2xlQ2xhc3MoInVpLXNvcnRhYmxlLWRpc2FibGVkIiwhIWkpCn1lbHNlIHQuV2lkZ2V0LnByb3RvdHlwZS5fc2V0T3B0aW9uLmFwcGx5KHRoaXMsYXJndW1lbnRzKX0sX21vdXNlQ2FwdHVyZTpmdW5jdGlvbihlLGkpe3ZhciBzPW51bGwsbj0hMSxvPXRoaXM7aWYodGhpcy5yZXZlcnRpbmcpcmV0dXJuITE7aWYodGhpcy5vcHRpb25zLmRpc2FibGVkfHwic3RhdGljIj09PXRoaXMub3B0aW9ucy50eXBlKXJldHVybiExO3RoaXMuX3JlZnJlc2hJdGVtcyhlKTt0KGUudGFyZ2V0KS5wYXJlbnRzKCkuZWFjaChmdW5jdGlvbigpe2lmKHQuZGF0YSh0aGlzLG8ud2lkZ2V0TmFtZSsiLWl0ZW0iKT09PW8pe3M9dCh0aGlzKTtyZXR1cm4hMX19KTt0LmRhdGEoZS50YXJnZXQsby53aWRnZXROYW1lKyItaXRlbSIpPT09byYmKHM9dChlLnRhcmdldCkpO2lmKCFzKXJldHVybiExO2lmKHRoaXMub3B0aW9ucy5oYW5kbGUmJiFpKXt0KHRoaXMub3B0aW9ucy5oYW5kbGUscykuZmluZCgiKiIpLmFkZEJhY2soKS5lYWNoKGZ1bmN0aW9uKCl7dGhpcz09PWUudGFyZ2V0JiYobj0hMCkKfSk7aWYoIW4pcmV0dXJuITF9dGhpcy5jdXJyZW50SXRlbT1zO3RoaXMuX3JlbW92ZUN1cnJlbnRzRnJvbUl0ZW1zKCk7cmV0dXJuITB9LF9tb3VzZVN0YXJ0OmZ1bmN0aW9uKGUsaSxzKXt2YXIgbixvLGE9dGhpcy5vcHRpb25zO3RoaXMuY3VycmVudENvbnRhaW5lcj10aGlzO3RoaXMucmVmcmVzaFBvc2l0aW9ucygpO3RoaXMuaGVscGVyPXRoaXMuX2NyZWF0ZUhlbHBlcihlKTt0aGlzLl9jYWNoZUhlbHBlclByb3BvcnRpb25zKCk7dGhpcy5fY2FjaGVNYXJnaW5zKCk7dGhpcy5zY3JvbGxQYXJlbnQ9dGhpcy5oZWxwZXIuc2Nyb2xsUGFyZW50KCk7dGhpcy5vZmZzZXQ9dGhpcy5jdXJyZW50SXRlbS5vZmZzZXQoKTt0aGlzLm9mZnNldD17dG9wOnRoaXMub2Zmc2V0LnRvcC10aGlzLm1hcmdpbnMudG9wLGxlZnQ6dGhpcy5vZmZzZXQubGVmdC10aGlzLm1hcmdpbnMubGVmdH07dC5leHRlbmQodGhpcy5vZmZzZXQse2NsaWNrOntsZWZ0OmUucGFnZVgtdGhpcy5vZmZzZXQubGVmdCx0b3A6ZS5wYWdlWS10aGlzLm9mZnNldC50b3B9LHBhcmVudDp0aGlzLl9nZXRQYXJlbnRPZmZzZXQoKSxyZWxhdGl2ZTp0aGlzLl9nZXRSZWxhdGl2ZU9mZnNldCgpfSk7CnRoaXMuaGVscGVyLmNzcygicG9zaXRpb24iLCJhYnNvbHV0ZSIpO3RoaXMuY3NzUG9zaXRpb249dGhpcy5oZWxwZXIuY3NzKCJwb3NpdGlvbiIpO3RoaXMub3JpZ2luYWxQb3NpdGlvbj10aGlzLl9nZW5lcmF0ZVBvc2l0aW9uKGUpO3RoaXMub3JpZ2luYWxQYWdlWD1lLnBhZ2VYO3RoaXMub3JpZ2luYWxQYWdlWT1lLnBhZ2VZO2EuY3Vyc29yQXQmJnRoaXMuX2FkanVzdE9mZnNldEZyb21IZWxwZXIoYS5jdXJzb3JBdCk7dGhpcy5kb21Qb3NpdGlvbj17cHJldjp0aGlzLmN1cnJlbnRJdGVtLnByZXYoKVswXSxwYXJlbnQ6dGhpcy5jdXJyZW50SXRlbS5wYXJlbnQoKVswXX07dGhpcy5oZWxwZXJbMF0hPT10aGlzLmN1cnJlbnRJdGVtWzBdJiZ0aGlzLmN1cnJlbnRJdGVtLmhpZGUoKTt0aGlzLl9jcmVhdGVQbGFjZWhvbGRlcigpO2EuY29udGFpbm1lbnQmJnRoaXMuX3NldENvbnRhaW5tZW50KCk7aWYoYS5jdXJzb3ImJiJhdXRvIiE9PWEuY3Vyc29yKXtvPXRoaXMuZG9jdW1lbnQuZmluZCgiYm9keSIpOwp0aGlzLnN0b3JlZEN1cnNvcj1vLmNzcygiY3Vyc29yIik7by5jc3MoImN1cnNvciIsYS5jdXJzb3IpO3RoaXMuc3RvcmVkU3R5bGVzaGVldD10KCI8c3R5bGU+KnsgY3Vyc29yOiAiK2EuY3Vyc29yKyIgIWltcG9ydGFudDsgfTwvc3R5bGU+IikuYXBwZW5kVG8obyl9aWYoYS5vcGFjaXR5KXt0aGlzLmhlbHBlci5jc3MoIm9wYWNpdHkiKSYmKHRoaXMuX3N0b3JlZE9wYWNpdHk9dGhpcy5oZWxwZXIuY3NzKCJvcGFjaXR5IikpO3RoaXMuaGVscGVyLmNzcygib3BhY2l0eSIsYS5vcGFjaXR5KX1pZihhLnpJbmRleCl7dGhpcy5oZWxwZXIuY3NzKCJ6SW5kZXgiKSYmKHRoaXMuX3N0b3JlZFpJbmRleD10aGlzLmhlbHBlci5jc3MoInpJbmRleCIpKTt0aGlzLmhlbHBlci5jc3MoInpJbmRleCIsYS56SW5kZXgpfXRoaXMuc2Nyb2xsUGFyZW50WzBdIT09ZG9jdW1lbnQmJiJIVE1MIiE9PXRoaXMuc2Nyb2xsUGFyZW50WzBdLnRhZ05hbWUmJih0aGlzLm92ZXJmbG93T2Zmc2V0PXRoaXMuc2Nyb2xsUGFyZW50Lm9mZnNldCgpKTsKdGhpcy5fdHJpZ2dlcigic3RhcnQiLGUsdGhpcy5fdWlIYXNoKCkpO3RoaXMuX3ByZXNlcnZlSGVscGVyUHJvcG9ydGlvbnN8fHRoaXMuX2NhY2hlSGVscGVyUHJvcG9ydGlvbnMoKTtpZighcylmb3Iobj10aGlzLmNvbnRhaW5lcnMubGVuZ3RoLTE7bj49MDtuLS0pdGhpcy5jb250YWluZXJzW25dLl90cmlnZ2VyKCJhY3RpdmF0ZSIsZSx0aGlzLl91aUhhc2godGhpcykpO3QudWkuZGRtYW5hZ2VyJiYodC51aS5kZG1hbmFnZXIuY3VycmVudD10aGlzKTt0LnVpLmRkbWFuYWdlciYmIWEuZHJvcEJlaGF2aW91ciYmdC51aS5kZG1hbmFnZXIucHJlcGFyZU9mZnNldHModGhpcyxlKTt0aGlzLmRyYWdnaW5nPSEwO3RoaXMuaGVscGVyLmFkZENsYXNzKCJ1aS1zb3J0YWJsZS1oZWxwZXIiKTt0aGlzLl9tb3VzZURyYWcoZSk7cmV0dXJuITB9LF9tb3VzZURyYWc6ZnVuY3Rpb24oZSl7dmFyIGkscyxuLG8sYT10aGlzLm9wdGlvbnMscj0hMTt0aGlzLnBvc2l0aW9uPXRoaXMuX2dlbmVyYXRlUG9zaXRpb24oZSk7CnRoaXMucG9zaXRpb25BYnM9dGhpcy5fY29udmVydFBvc2l0aW9uVG8oImFic29sdXRlIik7dGhpcy5sYXN0UG9zaXRpb25BYnN8fCh0aGlzLmxhc3RQb3NpdGlvbkFicz10aGlzLnBvc2l0aW9uQWJzKTtpZih0aGlzLm9wdGlvbnMuc2Nyb2xsKXtpZih0aGlzLnNjcm9sbFBhcmVudFswXSE9PWRvY3VtZW50JiYiSFRNTCIhPT10aGlzLnNjcm9sbFBhcmVudFswXS50YWdOYW1lKXt0aGlzLm92ZXJmbG93T2Zmc2V0LnRvcCt0aGlzLnNjcm9sbFBhcmVudFswXS5vZmZzZXRIZWlnaHQtZS5wYWdlWTxhLnNjcm9sbFNlbnNpdGl2aXR5P3RoaXMuc2Nyb2xsUGFyZW50WzBdLnNjcm9sbFRvcD1yPXRoaXMuc2Nyb2xsUGFyZW50WzBdLnNjcm9sbFRvcCthLnNjcm9sbFNwZWVkOmUucGFnZVktdGhpcy5vdmVyZmxvd09mZnNldC50b3A8YS5zY3JvbGxTZW5zaXRpdml0eSYmKHRoaXMuc2Nyb2xsUGFyZW50WzBdLnNjcm9sbFRvcD1yPXRoaXMuc2Nyb2xsUGFyZW50WzBdLnNjcm9sbFRvcC1hLnNjcm9sbFNwZWVkKTsKdGhpcy5vdmVyZmxvd09mZnNldC5sZWZ0K3RoaXMuc2Nyb2xsUGFyZW50WzBdLm9mZnNldFdpZHRoLWUucGFnZVg8YS5zY3JvbGxTZW5zaXRpdml0eT90aGlzLnNjcm9sbFBhcmVudFswXS5zY3JvbGxMZWZ0PXI9dGhpcy5zY3JvbGxQYXJlbnRbMF0uc2Nyb2xsTGVmdCthLnNjcm9sbFNwZWVkOmUucGFnZVgtdGhpcy5vdmVyZmxvd09mZnNldC5sZWZ0PGEuc2Nyb2xsU2Vuc2l0aXZpdHkmJih0aGlzLnNjcm9sbFBhcmVudFswXS5zY3JvbGxMZWZ0PXI9dGhpcy5zY3JvbGxQYXJlbnRbMF0uc2Nyb2xsTGVmdC1hLnNjcm9sbFNwZWVkKX1lbHNle2UucGFnZVktdChkb2N1bWVudCkuc2Nyb2xsVG9wKCk8YS5zY3JvbGxTZW5zaXRpdml0eT9yPXQoZG9jdW1lbnQpLnNjcm9sbFRvcCh0KGRvY3VtZW50KS5zY3JvbGxUb3AoKS1hLnNjcm9sbFNwZWVkKTp0KHdpbmRvdykuaGVpZ2h0KCktKGUucGFnZVktdChkb2N1bWVudCkuc2Nyb2xsVG9wKCkpPGEuc2Nyb2xsU2Vuc2l0aXZpdHkmJihyPXQoZG9jdW1lbnQpLnNjcm9sbFRvcCh0KGRvY3VtZW50KS5zY3JvbGxUb3AoKSthLnNjcm9sbFNwZWVkKSk7CmUucGFnZVgtdChkb2N1bWVudCkuc2Nyb2xsTGVmdCgpPGEuc2Nyb2xsU2Vuc2l0aXZpdHk/cj10KGRvY3VtZW50KS5zY3JvbGxMZWZ0KHQoZG9jdW1lbnQpLnNjcm9sbExlZnQoKS1hLnNjcm9sbFNwZWVkKTp0KHdpbmRvdykud2lkdGgoKS0oZS5wYWdlWC10KGRvY3VtZW50KS5zY3JvbGxMZWZ0KCkpPGEuc2Nyb2xsU2Vuc2l0aXZpdHkmJihyPXQoZG9jdW1lbnQpLnNjcm9sbExlZnQodChkb2N1bWVudCkuc2Nyb2xsTGVmdCgpK2Euc2Nyb2xsU3BlZWQpKX1yIT09ITEmJnQudWkuZGRtYW5hZ2VyJiYhYS5kcm9wQmVoYXZpb3VyJiZ0LnVpLmRkbWFuYWdlci5wcmVwYXJlT2Zmc2V0cyh0aGlzLGUpfXRoaXMucG9zaXRpb25BYnM9dGhpcy5fY29udmVydFBvc2l0aW9uVG8oImFic29sdXRlIik7dGhpcy5vcHRpb25zLmF4aXMmJiJ5Ij09PXRoaXMub3B0aW9ucy5heGlzfHwodGhpcy5oZWxwZXJbMF0uc3R5bGUubGVmdD10aGlzLnBvc2l0aW9uLmxlZnQrInB4Iik7dGhpcy5vcHRpb25zLmF4aXMmJiJ4Ij09PXRoaXMub3B0aW9ucy5heGlzfHwodGhpcy5oZWxwZXJbMF0uc3R5bGUudG9wPXRoaXMucG9zaXRpb24udG9wKyJweCIpOwpmb3IoaT10aGlzLml0ZW1zLmxlbmd0aC0xO2k+PTA7aS0tKXtzPXRoaXMuaXRlbXNbaV07bj1zLml0ZW1bMF07bz10aGlzLl9pbnRlcnNlY3RzV2l0aFBvaW50ZXIocyk7aWYobyYmcy5pbnN0YW5jZT09PXRoaXMuY3VycmVudENvbnRhaW5lciYmbiE9PXRoaXMuY3VycmVudEl0ZW1bMF0mJnRoaXMucGxhY2Vob2xkZXJbMT09PW8/Im5leHQiOiJwcmV2Il0oKVswXSE9PW4mJiF0LmNvbnRhaW5zKHRoaXMucGxhY2Vob2xkZXJbMF0sbikmJigic2VtaS1keW5hbWljIj09PXRoaXMub3B0aW9ucy50eXBlPyF0LmNvbnRhaW5zKHRoaXMuZWxlbWVudFswXSxuKTohMCkpe3RoaXMuZGlyZWN0aW9uPTE9PT1vPyJkb3duIjoidXAiO2lmKCJwb2ludGVyIiE9PXRoaXMub3B0aW9ucy50b2xlcmFuY2UmJiF0aGlzLl9pbnRlcnNlY3RzV2l0aFNpZGVzKHMpKWJyZWFrO3RoaXMuX3JlYXJyYW5nZShlLHMpO3RoaXMuX3RyaWdnZXIoImNoYW5nZSIsZSx0aGlzLl91aUhhc2goKSk7YnJlYWt9fXRoaXMuX2NvbnRhY3RDb250YWluZXJzKGUpOwp0LnVpLmRkbWFuYWdlciYmdC51aS5kZG1hbmFnZXIuZHJhZyh0aGlzLGUpO3RoaXMuX3RyaWdnZXIoInNvcnQiLGUsdGhpcy5fdWlIYXNoKCkpO3RoaXMubGFzdFBvc2l0aW9uQWJzPXRoaXMucG9zaXRpb25BYnM7cmV0dXJuITF9LF9tb3VzZVN0b3A6ZnVuY3Rpb24oZSxpKXtpZihlKXt0LnVpLmRkbWFuYWdlciYmIXRoaXMub3B0aW9ucy5kcm9wQmVoYXZpb3VyJiZ0LnVpLmRkbWFuYWdlci5kcm9wKHRoaXMsZSk7aWYodGhpcy5vcHRpb25zLnJldmVydCl7dmFyIHM9dGhpcyxuPXRoaXMucGxhY2Vob2xkZXIub2Zmc2V0KCksbz10aGlzLm9wdGlvbnMuYXhpcyxhPXt9O28mJiJ4IiE9PW98fChhLmxlZnQ9bi5sZWZ0LXRoaXMub2Zmc2V0LnBhcmVudC5sZWZ0LXRoaXMubWFyZ2lucy5sZWZ0Kyh0aGlzLm9mZnNldFBhcmVudFswXT09PWRvY3VtZW50LmJvZHk/MDp0aGlzLm9mZnNldFBhcmVudFswXS5zY3JvbGxMZWZ0KSk7byYmInkiIT09b3x8KGEudG9wPW4udG9wLXRoaXMub2Zmc2V0LnBhcmVudC50b3AtdGhpcy5tYXJnaW5zLnRvcCsodGhpcy5vZmZzZXRQYXJlbnRbMF09PT1kb2N1bWVudC5ib2R5PzA6dGhpcy5vZmZzZXRQYXJlbnRbMF0uc2Nyb2xsVG9wKSk7CnRoaXMucmV2ZXJ0aW5nPSEwO3QodGhpcy5oZWxwZXIpLmFuaW1hdGUoYSxwYXJzZUludCh0aGlzLm9wdGlvbnMucmV2ZXJ0LDEwKXx8NTAwLGZ1bmN0aW9uKCl7cy5fY2xlYXIoZSl9KX1lbHNlIHRoaXMuX2NsZWFyKGUsaSk7cmV0dXJuITF9fSxjYW5jZWw6ZnVuY3Rpb24oKXtpZih0aGlzLmRyYWdnaW5nKXt0aGlzLl9tb3VzZVVwKHt0YXJnZXQ6bnVsbH0pOyJvcmlnaW5hbCI9PT10aGlzLm9wdGlvbnMuaGVscGVyP3RoaXMuY3VycmVudEl0ZW0uY3NzKHRoaXMuX3N0b3JlZENTUykucmVtb3ZlQ2xhc3MoInVpLXNvcnRhYmxlLWhlbHBlciIpOnRoaXMuY3VycmVudEl0ZW0uc2hvdygpO2Zvcih2YXIgZT10aGlzLmNvbnRhaW5lcnMubGVuZ3RoLTE7ZT49MDtlLS0pe3RoaXMuY29udGFpbmVyc1tlXS5fdHJpZ2dlcigiZGVhY3RpdmF0ZSIsbnVsbCx0aGlzLl91aUhhc2godGhpcykpO2lmKHRoaXMuY29udGFpbmVyc1tlXS5jb250YWluZXJDYWNoZS5vdmVyKXt0aGlzLmNvbnRhaW5lcnNbZV0uX3RyaWdnZXIoIm91dCIsbnVsbCx0aGlzLl91aUhhc2godGhpcykpOwp0aGlzLmNvbnRhaW5lcnNbZV0uY29udGFpbmVyQ2FjaGUub3Zlcj0wfX19aWYodGhpcy5wbGFjZWhvbGRlcil7dGhpcy5wbGFjZWhvbGRlclswXS5wYXJlbnROb2RlJiZ0aGlzLnBsYWNlaG9sZGVyWzBdLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQodGhpcy5wbGFjZWhvbGRlclswXSk7Im9yaWdpbmFsIiE9PXRoaXMub3B0aW9ucy5oZWxwZXImJnRoaXMuaGVscGVyJiZ0aGlzLmhlbHBlclswXS5wYXJlbnROb2RlJiZ0aGlzLmhlbHBlci5yZW1vdmUoKTt0LmV4dGVuZCh0aGlzLHtoZWxwZXI6bnVsbCxkcmFnZ2luZzohMSxyZXZlcnRpbmc6ITEsX25vRmluYWxTb3J0Om51bGx9KTt0aGlzLmRvbVBvc2l0aW9uLnByZXY/dCh0aGlzLmRvbVBvc2l0aW9uLnByZXYpLmFmdGVyKHRoaXMuY3VycmVudEl0ZW0pOnQodGhpcy5kb21Qb3NpdGlvbi5wYXJlbnQpLnByZXBlbmQodGhpcy5jdXJyZW50SXRlbSl9cmV0dXJuIHRoaXN9LHNlcmlhbGl6ZTpmdW5jdGlvbihlKXt2YXIgaT10aGlzLl9nZXRJdGVtc0FzalF1ZXJ5KGUmJmUuY29ubmVjdGVkKSxzPVtdOwplPWV8fHt9O3QoaSkuZWFjaChmdW5jdGlvbigpe3ZhciBpPSh0KGUuaXRlbXx8dGhpcykuYXR0cihlLmF0dHJpYnV0ZXx8ImlkIil8fCIiKS5tYXRjaChlLmV4cHJlc3Npb258fC8oLispW1wtPV9dKC4rKS8pO2kmJnMucHVzaCgoZS5rZXl8fGlbMV0rIltdIikrIj0iKyhlLmtleSYmZS5leHByZXNzaW9uP2lbMV06aVsyXSkpfSk7IXMubGVuZ3RoJiZlLmtleSYmcy5wdXNoKGUua2V5KyI9Iik7cmV0dXJuIHMuam9pbigiJiIpfSx0b0FycmF5OmZ1bmN0aW9uKGUpe3ZhciBpPXRoaXMuX2dldEl0ZW1zQXNqUXVlcnkoZSYmZS5jb25uZWN0ZWQpLHM9W107ZT1lfHx7fTtpLmVhY2goZnVuY3Rpb24oKXtzLnB1c2godChlLml0ZW18fHRoaXMpLmF0dHIoZS5hdHRyaWJ1dGV8fCJpZCIpfHwiIil9KTtyZXR1cm4gc30sX2ludGVyc2VjdHNXaXRoOmZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMucG9zaXRpb25BYnMubGVmdCxpPWUrdGhpcy5oZWxwZXJQcm9wb3J0aW9ucy53aWR0aCxzPXRoaXMucG9zaXRpb25BYnMudG9wLG49cyt0aGlzLmhlbHBlclByb3BvcnRpb25zLmhlaWdodCxvPXQubGVmdCxhPW8rdC53aWR0aCxyPXQudG9wLGg9cit0LmhlaWdodCxsPXRoaXMub2Zmc2V0LmNsaWNrLnRvcCx1PXRoaXMub2Zmc2V0LmNsaWNrLmxlZnQsYz0ieCI9PT10aGlzLm9wdGlvbnMuYXhpc3x8cytsPnImJmg+cytsLGQ9InkiPT09dGhpcy5vcHRpb25zLmF4aXN8fGUrdT5vJiZhPmUrdSxwPWMmJmQ7CnJldHVybiJwb2ludGVyIj09PXRoaXMub3B0aW9ucy50b2xlcmFuY2V8fHRoaXMub3B0aW9ucy5mb3JjZVBvaW50ZXJGb3JDb250YWluZXJzfHwicG9pbnRlciIhPT10aGlzLm9wdGlvbnMudG9sZXJhbmNlJiZ0aGlzLmhlbHBlclByb3BvcnRpb25zW3RoaXMuZmxvYXRpbmc/IndpZHRoIjoiaGVpZ2h0Il0+dFt0aGlzLmZsb2F0aW5nPyJ3aWR0aCI6ImhlaWdodCJdP3A6bzxlK3RoaXMuaGVscGVyUHJvcG9ydGlvbnMud2lkdGgvMiYmaS10aGlzLmhlbHBlclByb3BvcnRpb25zLndpZHRoLzI8YSYmcjxzK3RoaXMuaGVscGVyUHJvcG9ydGlvbnMuaGVpZ2h0LzImJm4tdGhpcy5oZWxwZXJQcm9wb3J0aW9ucy5oZWlnaHQvMjxofSxfaW50ZXJzZWN0c1dpdGhQb2ludGVyOmZ1bmN0aW9uKHQpe3ZhciBpPSJ4Ij09PXRoaXMub3B0aW9ucy5heGlzfHxlKHRoaXMucG9zaXRpb25BYnMudG9wK3RoaXMub2Zmc2V0LmNsaWNrLnRvcCx0LnRvcCx0LmhlaWdodCkscz0ieSI9PT10aGlzLm9wdGlvbnMuYXhpc3x8ZSh0aGlzLnBvc2l0aW9uQWJzLmxlZnQrdGhpcy5vZmZzZXQuY2xpY2subGVmdCx0LmxlZnQsdC53aWR0aCksbj1pJiZzLG89dGhpcy5fZ2V0RHJhZ1ZlcnRpY2FsRGlyZWN0aW9uKCksYT10aGlzLl9nZXREcmFnSG9yaXpvbnRhbERpcmVjdGlvbigpOwpyZXR1cm4gbj90aGlzLmZsb2F0aW5nP2EmJiJyaWdodCI9PT1hfHwiZG93biI9PT1vPzI6MTpvJiYoImRvd24iPT09bz8yOjEpOiExfSxfaW50ZXJzZWN0c1dpdGhTaWRlczpmdW5jdGlvbih0KXt2YXIgaT1lKHRoaXMucG9zaXRpb25BYnMudG9wK3RoaXMub2Zmc2V0LmNsaWNrLnRvcCx0LnRvcCt0LmhlaWdodC8yLHQuaGVpZ2h0KSxzPWUodGhpcy5wb3NpdGlvbkFicy5sZWZ0K3RoaXMub2Zmc2V0LmNsaWNrLmxlZnQsdC5sZWZ0K3Qud2lkdGgvMix0LndpZHRoKSxuPXRoaXMuX2dldERyYWdWZXJ0aWNhbERpcmVjdGlvbigpLG89dGhpcy5fZ2V0RHJhZ0hvcml6b250YWxEaXJlY3Rpb24oKTtyZXR1cm4gdGhpcy5mbG9hdGluZyYmbz8icmlnaHQiPT09byYmc3x8ImxlZnQiPT09byYmIXM6biYmKCJkb3duIj09PW4mJml8fCJ1cCI9PT1uJiYhaSl9LF9nZXREcmFnVmVydGljYWxEaXJlY3Rpb246ZnVuY3Rpb24oKXt2YXIgdD10aGlzLnBvc2l0aW9uQWJzLnRvcC10aGlzLmxhc3RQb3NpdGlvbkFicy50b3A7CnJldHVybiAwIT09dCYmKHQ+MD8iZG93biI6InVwIil9LF9nZXREcmFnSG9yaXpvbnRhbERpcmVjdGlvbjpmdW5jdGlvbigpe3ZhciB0PXRoaXMucG9zaXRpb25BYnMubGVmdC10aGlzLmxhc3RQb3NpdGlvbkFicy5sZWZ0O3JldHVybiAwIT09dCYmKHQ+MD8icmlnaHQiOiJsZWZ0Iil9LHJlZnJlc2g6ZnVuY3Rpb24odCl7dGhpcy5fcmVmcmVzaEl0ZW1zKHQpO3RoaXMucmVmcmVzaFBvc2l0aW9ucygpO3JldHVybiB0aGlzfSxfY29ubmVjdFdpdGg6ZnVuY3Rpb24oKXt2YXIgdD10aGlzLm9wdGlvbnM7cmV0dXJuIHQuY29ubmVjdFdpdGguY29uc3RydWN0b3I9PT1TdHJpbmc/W3QuY29ubmVjdFdpdGhdOnQuY29ubmVjdFdpdGh9LF9nZXRJdGVtc0FzalF1ZXJ5OmZ1bmN0aW9uKGUpe2Z1bmN0aW9uIGkoKXtyLnB1c2godGhpcyl9dmFyIHMsbixvLGEscj1bXSxoPVtdLGw9dGhpcy5fY29ubmVjdFdpdGgoKTtpZihsJiZlKWZvcihzPWwubGVuZ3RoLTE7cz49MDtzLS0pe289dChsW3NdKTsKZm9yKG49by5sZW5ndGgtMTtuPj0wO24tLSl7YT10LmRhdGEob1tuXSx0aGlzLndpZGdldEZ1bGxOYW1lKTthJiZhIT09dGhpcyYmIWEub3B0aW9ucy5kaXNhYmxlZCYmaC5wdXNoKFt0LmlzRnVuY3Rpb24oYS5vcHRpb25zLml0ZW1zKT9hLm9wdGlvbnMuaXRlbXMuY2FsbChhLmVsZW1lbnQpOnQoYS5vcHRpb25zLml0ZW1zLGEuZWxlbWVudCkubm90KCIudWktc29ydGFibGUtaGVscGVyIikubm90KCIudWktc29ydGFibGUtcGxhY2Vob2xkZXIiKSxhXSl9fWgucHVzaChbdC5pc0Z1bmN0aW9uKHRoaXMub3B0aW9ucy5pdGVtcyk/dGhpcy5vcHRpb25zLml0ZW1zLmNhbGwodGhpcy5lbGVtZW50LG51bGwse29wdGlvbnM6dGhpcy5vcHRpb25zLGl0ZW06dGhpcy5jdXJyZW50SXRlbX0pOnQodGhpcy5vcHRpb25zLml0ZW1zLHRoaXMuZWxlbWVudCkubm90KCIudWktc29ydGFibGUtaGVscGVyIikubm90KCIudWktc29ydGFibGUtcGxhY2Vob2xkZXIiKSx0aGlzXSk7Zm9yKHM9aC5sZW5ndGgtMTtzPj0wO3MtLSloW3NdWzBdLmVhY2goaSk7CnJldHVybiB0KHIpfSxfcmVtb3ZlQ3VycmVudHNGcm9tSXRlbXM6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLmN1cnJlbnRJdGVtLmZpbmQoIjpkYXRhKCIrdGhpcy53aWRnZXROYW1lKyItaXRlbSkiKTt0aGlzLml0ZW1zPXQuZ3JlcCh0aGlzLml0ZW1zLGZ1bmN0aW9uKHQpe2Zvcih2YXIgaT0wO2k8ZS5sZW5ndGg7aSsrKWlmKGVbaV09PT10Lml0ZW1bMF0pcmV0dXJuITE7cmV0dXJuITB9KX0sX3JlZnJlc2hJdGVtczpmdW5jdGlvbihlKXt0aGlzLml0ZW1zPVtdO3RoaXMuY29udGFpbmVycz1bdGhpc107dmFyIGkscyxuLG8sYSxyLGgsbCx1PXRoaXMuaXRlbXMsYz1bW3QuaXNGdW5jdGlvbih0aGlzLm9wdGlvbnMuaXRlbXMpP3RoaXMub3B0aW9ucy5pdGVtcy5jYWxsKHRoaXMuZWxlbWVudFswXSxlLHtpdGVtOnRoaXMuY3VycmVudEl0ZW19KTp0KHRoaXMub3B0aW9ucy5pdGVtcyx0aGlzLmVsZW1lbnQpLHRoaXNdXSxkPXRoaXMuX2Nvbm5lY3RXaXRoKCk7aWYoZCYmdGhpcy5yZWFkeSlmb3IoaT1kLmxlbmd0aC0xO2k+PTA7aS0tKXtuPXQoZFtpXSk7CmZvcihzPW4ubGVuZ3RoLTE7cz49MDtzLS0pe289dC5kYXRhKG5bc10sdGhpcy53aWRnZXRGdWxsTmFtZSk7aWYobyYmbyE9PXRoaXMmJiFvLm9wdGlvbnMuZGlzYWJsZWQpe2MucHVzaChbdC5pc0Z1bmN0aW9uKG8ub3B0aW9ucy5pdGVtcyk/by5vcHRpb25zLml0ZW1zLmNhbGwoby5lbGVtZW50WzBdLGUse2l0ZW06dGhpcy5jdXJyZW50SXRlbX0pOnQoby5vcHRpb25zLml0ZW1zLG8uZWxlbWVudCksb10pO3RoaXMuY29udGFpbmVycy5wdXNoKG8pfX19Zm9yKGk9Yy5sZW5ndGgtMTtpPj0wO2ktLSl7YT1jW2ldWzFdO3I9Y1tpXVswXTtmb3Iocz0wLGw9ci5sZW5ndGg7bD5zO3MrKyl7aD10KHJbc10pO2guZGF0YSh0aGlzLndpZGdldE5hbWUrIi1pdGVtIixhKTt1LnB1c2goe2l0ZW06aCxpbnN0YW5jZTphLHdpZHRoOjAsaGVpZ2h0OjAsbGVmdDowLHRvcDowfSl9fX0scmVmcmVzaFBvc2l0aW9uczpmdW5jdGlvbihlKXt0aGlzLm9mZnNldFBhcmVudCYmdGhpcy5oZWxwZXImJih0aGlzLm9mZnNldC5wYXJlbnQ9dGhpcy5fZ2V0UGFyZW50T2Zmc2V0KCkpOwp2YXIgaSxzLG4sbztmb3IoaT10aGlzLml0ZW1zLmxlbmd0aC0xO2k+PTA7aS0tKXtzPXRoaXMuaXRlbXNbaV07aWYocy5pbnN0YW5jZT09PXRoaXMuY3VycmVudENvbnRhaW5lcnx8IXRoaXMuY3VycmVudENvbnRhaW5lcnx8cy5pdGVtWzBdPT09dGhpcy5jdXJyZW50SXRlbVswXSl7bj10aGlzLm9wdGlvbnMudG9sZXJhbmNlRWxlbWVudD90KHRoaXMub3B0aW9ucy50b2xlcmFuY2VFbGVtZW50LHMuaXRlbSk6cy5pdGVtO2lmKCFlKXtzLndpZHRoPW4ub3V0ZXJXaWR0aCgpO3MuaGVpZ2h0PW4ub3V0ZXJIZWlnaHQoKX1vPW4ub2Zmc2V0KCk7cy5sZWZ0PW8ubGVmdDtzLnRvcD1vLnRvcH19aWYodGhpcy5vcHRpb25zLmN1c3RvbSYmdGhpcy5vcHRpb25zLmN1c3RvbS5yZWZyZXNoQ29udGFpbmVycyl0aGlzLm9wdGlvbnMuY3VzdG9tLnJlZnJlc2hDb250YWluZXJzLmNhbGwodGhpcyk7ZWxzZSBmb3IoaT10aGlzLmNvbnRhaW5lcnMubGVuZ3RoLTE7aT49MDtpLS0pe289dGhpcy5jb250YWluZXJzW2ldLmVsZW1lbnQub2Zmc2V0KCk7CnRoaXMuY29udGFpbmVyc1tpXS5jb250YWluZXJDYWNoZS5sZWZ0PW8ubGVmdDt0aGlzLmNvbnRhaW5lcnNbaV0uY29udGFpbmVyQ2FjaGUudG9wPW8udG9wO3RoaXMuY29udGFpbmVyc1tpXS5jb250YWluZXJDYWNoZS53aWR0aD10aGlzLmNvbnRhaW5lcnNbaV0uZWxlbWVudC5vdXRlcldpZHRoKCk7dGhpcy5jb250YWluZXJzW2ldLmNvbnRhaW5lckNhY2hlLmhlaWdodD10aGlzLmNvbnRhaW5lcnNbaV0uZWxlbWVudC5vdXRlckhlaWdodCgpfXJldHVybiB0aGlzfSxfY3JlYXRlUGxhY2Vob2xkZXI6ZnVuY3Rpb24oZSl7ZT1lfHx0aGlzO3ZhciBpLHM9ZS5vcHRpb25zO2lmKCFzLnBsYWNlaG9sZGVyfHxzLnBsYWNlaG9sZGVyLmNvbnN0cnVjdG9yPT09U3RyaW5nKXtpPXMucGxhY2Vob2xkZXI7cy5wbGFjZWhvbGRlcj17ZWxlbWVudDpmdW5jdGlvbigpe3ZhciBzPWUuY3VycmVudEl0ZW1bMF0ubm9kZU5hbWUudG9Mb3dlckNhc2UoKSxuPXQoIjwiK3MrIj4iLGUuZG9jdW1lbnRbMF0pLmFkZENsYXNzKGl8fGUuY3VycmVudEl0ZW1bMF0uY2xhc3NOYW1lKyIgdWktc29ydGFibGUtcGxhY2Vob2xkZXIiKS5yZW1vdmVDbGFzcygidWktc29ydGFibGUtaGVscGVyIik7CiJ0ciI9PT1zP2UuY3VycmVudEl0ZW0uY2hpbGRyZW4oKS5lYWNoKGZ1bmN0aW9uKCl7dCgiPHRkPiYjMTYwOzwvdGQ+IixlLmRvY3VtZW50WzBdKS5hdHRyKCJjb2xzcGFuIix0KHRoaXMpLmF0dHIoImNvbHNwYW4iKXx8MSkuYXBwZW5kVG8obil9KToiaW1nIj09PXMmJm4uYXR0cigic3JjIixlLmN1cnJlbnRJdGVtLmF0dHIoInNyYyIpKTtpfHxuLmNzcygidmlzaWJpbGl0eSIsImhpZGRlbiIpO3JldHVybiBufSx1cGRhdGU6ZnVuY3Rpb24odCxuKXtpZighaXx8cy5mb3JjZVBsYWNlaG9sZGVyU2l6ZSl7bi5oZWlnaHQoKXx8bi5oZWlnaHQoZS5jdXJyZW50SXRlbS5pbm5lckhlaWdodCgpLXBhcnNlSW50KGUuY3VycmVudEl0ZW0uY3NzKCJwYWRkaW5nVG9wIil8fDAsMTApLXBhcnNlSW50KGUuY3VycmVudEl0ZW0uY3NzKCJwYWRkaW5nQm90dG9tIil8fDAsMTApKTtuLndpZHRoKCl8fG4ud2lkdGgoZS5jdXJyZW50SXRlbS5pbm5lcldpZHRoKCktcGFyc2VJbnQoZS5jdXJyZW50SXRlbS5jc3MoInBhZGRpbmdMZWZ0Iil8fDAsMTApLXBhcnNlSW50KGUuY3VycmVudEl0ZW0uY3NzKCJwYWRkaW5nUmlnaHQiKXx8MCwxMCkpCn19fX1lLnBsYWNlaG9sZGVyPXQocy5wbGFjZWhvbGRlci5lbGVtZW50LmNhbGwoZS5lbGVtZW50LGUuY3VycmVudEl0ZW0pKTtlLmN1cnJlbnRJdGVtLmFmdGVyKGUucGxhY2Vob2xkZXIpO3MucGxhY2Vob2xkZXIudXBkYXRlKGUsZS5wbGFjZWhvbGRlcil9LF9jb250YWN0Q29udGFpbmVyczpmdW5jdGlvbihzKXt2YXIgbixvLGEscixoLGwsdSxjLGQscCxmPW51bGwsZz1udWxsO2ZvcihuPXRoaXMuY29udGFpbmVycy5sZW5ndGgtMTtuPj0wO24tLSlpZighdC5jb250YWlucyh0aGlzLmN1cnJlbnRJdGVtWzBdLHRoaXMuY29udGFpbmVyc1tuXS5lbGVtZW50WzBdKSlpZih0aGlzLl9pbnRlcnNlY3RzV2l0aCh0aGlzLmNvbnRhaW5lcnNbbl0uY29udGFpbmVyQ2FjaGUpKXtpZihmJiZ0LmNvbnRhaW5zKHRoaXMuY29udGFpbmVyc1tuXS5lbGVtZW50WzBdLGYuZWxlbWVudFswXSkpY29udGludWU7Zj10aGlzLmNvbnRhaW5lcnNbbl07Zz1ufWVsc2UgaWYodGhpcy5jb250YWluZXJzW25dLmNvbnRhaW5lckNhY2hlLm92ZXIpe3RoaXMuY29udGFpbmVyc1tuXS5fdHJpZ2dlcigib3V0IixzLHRoaXMuX3VpSGFzaCh0aGlzKSk7CnRoaXMuY29udGFpbmVyc1tuXS5jb250YWluZXJDYWNoZS5vdmVyPTB9aWYoZilpZigxPT09dGhpcy5jb250YWluZXJzLmxlbmd0aCl7aWYoIXRoaXMuY29udGFpbmVyc1tnXS5jb250YWluZXJDYWNoZS5vdmVyKXt0aGlzLmNvbnRhaW5lcnNbZ10uX3RyaWdnZXIoIm92ZXIiLHMsdGhpcy5fdWlIYXNoKHRoaXMpKTt0aGlzLmNvbnRhaW5lcnNbZ10uY29udGFpbmVyQ2FjaGUub3Zlcj0xfX1lbHNle2E9MWU0O3I9bnVsbDtwPWYuZmxvYXRpbmd8fGkodGhpcy5jdXJyZW50SXRlbSk7aD1wPyJsZWZ0IjoidG9wIjtsPXA/IndpZHRoIjoiaGVpZ2h0Ijt1PXRoaXMucG9zaXRpb25BYnNbaF0rdGhpcy5vZmZzZXQuY2xpY2tbaF07Zm9yKG89dGhpcy5pdGVtcy5sZW5ndGgtMTtvPj0wO28tLSlpZih0LmNvbnRhaW5zKHRoaXMuY29udGFpbmVyc1tnXS5lbGVtZW50WzBdLHRoaXMuaXRlbXNbb10uaXRlbVswXSkmJnRoaXMuaXRlbXNbb10uaXRlbVswXSE9PXRoaXMuY3VycmVudEl0ZW1bMF0mJighcHx8ZSh0aGlzLnBvc2l0aW9uQWJzLnRvcCt0aGlzLm9mZnNldC5jbGljay50b3AsdGhpcy5pdGVtc1tvXS50b3AsdGhpcy5pdGVtc1tvXS5oZWlnaHQpKSl7Yz10aGlzLml0ZW1zW29dLml0ZW0ub2Zmc2V0KClbaF07CmQ9ITE7aWYoTWF0aC5hYnMoYy11KT5NYXRoLmFicyhjK3RoaXMuaXRlbXNbb11bbF0tdSkpe2Q9ITA7Yys9dGhpcy5pdGVtc1tvXVtsXX1pZihNYXRoLmFicyhjLXUpPGEpe2E9TWF0aC5hYnMoYy11KTtyPXRoaXMuaXRlbXNbb107dGhpcy5kaXJlY3Rpb249ZD8idXAiOiJkb3duIn19aWYoIXImJiF0aGlzLm9wdGlvbnMuZHJvcE9uRW1wdHkpcmV0dXJuO2lmKHRoaXMuY3VycmVudENvbnRhaW5lcj09PXRoaXMuY29udGFpbmVyc1tnXSlyZXR1cm47cj90aGlzLl9yZWFycmFuZ2UocyxyLG51bGwsITApOnRoaXMuX3JlYXJyYW5nZShzLG51bGwsdGhpcy5jb250YWluZXJzW2ddLmVsZW1lbnQsITApO3RoaXMuX3RyaWdnZXIoImNoYW5nZSIscyx0aGlzLl91aUhhc2goKSk7dGhpcy5jb250YWluZXJzW2ddLl90cmlnZ2VyKCJjaGFuZ2UiLHMsdGhpcy5fdWlIYXNoKHRoaXMpKTt0aGlzLmN1cnJlbnRDb250YWluZXI9dGhpcy5jb250YWluZXJzW2ddO3RoaXMub3B0aW9ucy5wbGFjZWhvbGRlci51cGRhdGUodGhpcy5jdXJyZW50Q29udGFpbmVyLHRoaXMucGxhY2Vob2xkZXIpOwp0aGlzLmNvbnRhaW5lcnNbZ10uX3RyaWdnZXIoIm92ZXIiLHMsdGhpcy5fdWlIYXNoKHRoaXMpKTt0aGlzLmNvbnRhaW5lcnNbZ10uY29udGFpbmVyQ2FjaGUub3Zlcj0xfX0sX2NyZWF0ZUhlbHBlcjpmdW5jdGlvbihlKXt2YXIgaT10aGlzLm9wdGlvbnMscz10LmlzRnVuY3Rpb24oaS5oZWxwZXIpP3QoaS5oZWxwZXIuYXBwbHkodGhpcy5lbGVtZW50WzBdLFtlLHRoaXMuY3VycmVudEl0ZW1dKSk6ImNsb25lIj09PWkuaGVscGVyP3RoaXMuY3VycmVudEl0ZW0uY2xvbmUoKTp0aGlzLmN1cnJlbnRJdGVtO3MucGFyZW50cygiYm9keSIpLmxlbmd0aHx8dCgicGFyZW50IiE9PWkuYXBwZW5kVG8/aS5hcHBlbmRUbzp0aGlzLmN1cnJlbnRJdGVtWzBdLnBhcmVudE5vZGUpWzBdLmFwcGVuZENoaWxkKHNbMF0pO3NbMF09PT10aGlzLmN1cnJlbnRJdGVtWzBdJiYodGhpcy5fc3RvcmVkQ1NTPXt3aWR0aDp0aGlzLmN1cnJlbnRJdGVtWzBdLnN0eWxlLndpZHRoLGhlaWdodDp0aGlzLmN1cnJlbnRJdGVtWzBdLnN0eWxlLmhlaWdodCxwb3NpdGlvbjp0aGlzLmN1cnJlbnRJdGVtLmNzcygicG9zaXRpb24iKSx0b3A6dGhpcy5jdXJyZW50SXRlbS5jc3MoInRvcCIpLGxlZnQ6dGhpcy5jdXJyZW50SXRlbS5jc3MoImxlZnQiKX0pOwooIXNbMF0uc3R5bGUud2lkdGh8fGkuZm9yY2VIZWxwZXJTaXplKSYmcy53aWR0aCh0aGlzLmN1cnJlbnRJdGVtLndpZHRoKCkpOyghc1swXS5zdHlsZS5oZWlnaHR8fGkuZm9yY2VIZWxwZXJTaXplKSYmcy5oZWlnaHQodGhpcy5jdXJyZW50SXRlbS5oZWlnaHQoKSk7cmV0dXJuIHN9LF9hZGp1c3RPZmZzZXRGcm9tSGVscGVyOmZ1bmN0aW9uKGUpeyJzdHJpbmciPT10eXBlb2YgZSYmKGU9ZS5zcGxpdCgiICIpKTt0LmlzQXJyYXkoZSkmJihlPXtsZWZ0OitlWzBdLHRvcDorZVsxXXx8MH0pOyJsZWZ0ImluIGUmJih0aGlzLm9mZnNldC5jbGljay5sZWZ0PWUubGVmdCt0aGlzLm1hcmdpbnMubGVmdCk7InJpZ2h0ImluIGUmJih0aGlzLm9mZnNldC5jbGljay5sZWZ0PXRoaXMuaGVscGVyUHJvcG9ydGlvbnMud2lkdGgtZS5yaWdodCt0aGlzLm1hcmdpbnMubGVmdCk7InRvcCJpbiBlJiYodGhpcy5vZmZzZXQuY2xpY2sudG9wPWUudG9wK3RoaXMubWFyZ2lucy50b3ApOyJib3R0b20iaW4gZSYmKHRoaXMub2Zmc2V0LmNsaWNrLnRvcD10aGlzLmhlbHBlclByb3BvcnRpb25zLmhlaWdodC1lLmJvdHRvbSt0aGlzLm1hcmdpbnMudG9wKQp9LF9nZXRQYXJlbnRPZmZzZXQ6ZnVuY3Rpb24oKXt0aGlzLm9mZnNldFBhcmVudD10aGlzLmhlbHBlci5vZmZzZXRQYXJlbnQoKTt2YXIgZT10aGlzLm9mZnNldFBhcmVudC5vZmZzZXQoKTtpZigiYWJzb2x1dGUiPT09dGhpcy5jc3NQb3NpdGlvbiYmdGhpcy5zY3JvbGxQYXJlbnRbMF0hPT1kb2N1bWVudCYmdC5jb250YWlucyh0aGlzLnNjcm9sbFBhcmVudFswXSx0aGlzLm9mZnNldFBhcmVudFswXSkpe2UubGVmdCs9dGhpcy5zY3JvbGxQYXJlbnQuc2Nyb2xsTGVmdCgpO2UudG9wKz10aGlzLnNjcm9sbFBhcmVudC5zY3JvbGxUb3AoKX0odGhpcy5vZmZzZXRQYXJlbnRbMF09PT1kb2N1bWVudC5ib2R5fHx0aGlzLm9mZnNldFBhcmVudFswXS50YWdOYW1lJiYiaHRtbCI9PT10aGlzLm9mZnNldFBhcmVudFswXS50YWdOYW1lLnRvTG93ZXJDYXNlKCkmJnQudWkuaWUpJiYoZT17dG9wOjAsbGVmdDowfSk7cmV0dXJue3RvcDplLnRvcCsocGFyc2VJbnQodGhpcy5vZmZzZXRQYXJlbnQuY3NzKCJib3JkZXJUb3BXaWR0aCIpLDEwKXx8MCksbGVmdDplLmxlZnQrKHBhcnNlSW50KHRoaXMub2Zmc2V0UGFyZW50LmNzcygiYm9yZGVyTGVmdFdpZHRoIiksMTApfHwwKX0KfSxfZ2V0UmVsYXRpdmVPZmZzZXQ6ZnVuY3Rpb24oKXtpZigicmVsYXRpdmUiPT09dGhpcy5jc3NQb3NpdGlvbil7dmFyIHQ9dGhpcy5jdXJyZW50SXRlbS5wb3NpdGlvbigpO3JldHVybnt0b3A6dC50b3AtKHBhcnNlSW50KHRoaXMuaGVscGVyLmNzcygidG9wIiksMTApfHwwKSt0aGlzLnNjcm9sbFBhcmVudC5zY3JvbGxUb3AoKSxsZWZ0OnQubGVmdC0ocGFyc2VJbnQodGhpcy5oZWxwZXIuY3NzKCJsZWZ0IiksMTApfHwwKSt0aGlzLnNjcm9sbFBhcmVudC5zY3JvbGxMZWZ0KCl9fXJldHVybnt0b3A6MCxsZWZ0OjB9fSxfY2FjaGVNYXJnaW5zOmZ1bmN0aW9uKCl7dGhpcy5tYXJnaW5zPXtsZWZ0OnBhcnNlSW50KHRoaXMuY3VycmVudEl0ZW0uY3NzKCJtYXJnaW5MZWZ0IiksMTApfHwwLHRvcDpwYXJzZUludCh0aGlzLmN1cnJlbnRJdGVtLmNzcygibWFyZ2luVG9wIiksMTApfHwwfX0sX2NhY2hlSGVscGVyUHJvcG9ydGlvbnM6ZnVuY3Rpb24oKXt0aGlzLmhlbHBlclByb3BvcnRpb25zPXt3aWR0aDp0aGlzLmhlbHBlci5vdXRlcldpZHRoKCksaGVpZ2h0OnRoaXMuaGVscGVyLm91dGVySGVpZ2h0KCl9Cn0sX3NldENvbnRhaW5tZW50OmZ1bmN0aW9uKCl7dmFyIGUsaSxzLG49dGhpcy5vcHRpb25zOyJwYXJlbnQiPT09bi5jb250YWlubWVudCYmKG4uY29udGFpbm1lbnQ9dGhpcy5oZWxwZXJbMF0ucGFyZW50Tm9kZSk7KCJkb2N1bWVudCI9PT1uLmNvbnRhaW5tZW50fHwid2luZG93Ij09PW4uY29udGFpbm1lbnQpJiYodGhpcy5jb250YWlubWVudD1bMC10aGlzLm9mZnNldC5yZWxhdGl2ZS5sZWZ0LXRoaXMub2Zmc2V0LnBhcmVudC5sZWZ0LDAtdGhpcy5vZmZzZXQucmVsYXRpdmUudG9wLXRoaXMub2Zmc2V0LnBhcmVudC50b3AsdCgiZG9jdW1lbnQiPT09bi5jb250YWlubWVudD9kb2N1bWVudDp3aW5kb3cpLndpZHRoKCktdGhpcy5oZWxwZXJQcm9wb3J0aW9ucy53aWR0aC10aGlzLm1hcmdpbnMubGVmdCwodCgiZG9jdW1lbnQiPT09bi5jb250YWlubWVudD9kb2N1bWVudDp3aW5kb3cpLmhlaWdodCgpfHxkb2N1bWVudC5ib2R5LnBhcmVudE5vZGUuc2Nyb2xsSGVpZ2h0KS10aGlzLmhlbHBlclByb3BvcnRpb25zLmhlaWdodC10aGlzLm1hcmdpbnMudG9wXSk7CmlmKCEvXihkb2N1bWVudHx3aW5kb3d8cGFyZW50KSQvLnRlc3Qobi5jb250YWlubWVudCkpe2U9dChuLmNvbnRhaW5tZW50KVswXTtpPXQobi5jb250YWlubWVudCkub2Zmc2V0KCk7cz0iaGlkZGVuIiE9PXQoZSkuY3NzKCJvdmVyZmxvdyIpO3RoaXMuY29udGFpbm1lbnQ9W2kubGVmdCsocGFyc2VJbnQodChlKS5jc3MoImJvcmRlckxlZnRXaWR0aCIpLDEwKXx8MCkrKHBhcnNlSW50KHQoZSkuY3NzKCJwYWRkaW5nTGVmdCIpLDEwKXx8MCktdGhpcy5tYXJnaW5zLmxlZnQsaS50b3ArKHBhcnNlSW50KHQoZSkuY3NzKCJib3JkZXJUb3BXaWR0aCIpLDEwKXx8MCkrKHBhcnNlSW50KHQoZSkuY3NzKCJwYWRkaW5nVG9wIiksMTApfHwwKS10aGlzLm1hcmdpbnMudG9wLGkubGVmdCsocz9NYXRoLm1heChlLnNjcm9sbFdpZHRoLGUub2Zmc2V0V2lkdGgpOmUub2Zmc2V0V2lkdGgpLShwYXJzZUludCh0KGUpLmNzcygiYm9yZGVyTGVmdFdpZHRoIiksMTApfHwwKS0ocGFyc2VJbnQodChlKS5jc3MoInBhZGRpbmdSaWdodCIpLDEwKXx8MCktdGhpcy5oZWxwZXJQcm9wb3J0aW9ucy53aWR0aC10aGlzLm1hcmdpbnMubGVmdCxpLnRvcCsocz9NYXRoLm1heChlLnNjcm9sbEhlaWdodCxlLm9mZnNldEhlaWdodCk6ZS5vZmZzZXRIZWlnaHQpLShwYXJzZUludCh0KGUpLmNzcygiYm9yZGVyVG9wV2lkdGgiKSwxMCl8fDApLShwYXJzZUludCh0KGUpLmNzcygicGFkZGluZ0JvdHRvbSIpLDEwKXx8MCktdGhpcy5oZWxwZXJQcm9wb3J0aW9ucy5oZWlnaHQtdGhpcy5tYXJnaW5zLnRvcF0KfX0sX2NvbnZlcnRQb3NpdGlvblRvOmZ1bmN0aW9uKGUsaSl7aXx8KGk9dGhpcy5wb3NpdGlvbik7dmFyIHM9ImFic29sdXRlIj09PWU/MTotMSxuPSJhYnNvbHV0ZSIhPT10aGlzLmNzc1Bvc2l0aW9ufHx0aGlzLnNjcm9sbFBhcmVudFswXSE9PWRvY3VtZW50JiZ0LmNvbnRhaW5zKHRoaXMuc2Nyb2xsUGFyZW50WzBdLHRoaXMub2Zmc2V0UGFyZW50WzBdKT90aGlzLnNjcm9sbFBhcmVudDp0aGlzLm9mZnNldFBhcmVudCxvPS8oaHRtbHxib2R5KS9pLnRlc3QoblswXS50YWdOYW1lKTtyZXR1cm57dG9wOmkudG9wK3RoaXMub2Zmc2V0LnJlbGF0aXZlLnRvcCpzK3RoaXMub2Zmc2V0LnBhcmVudC50b3Aqcy0oImZpeGVkIj09PXRoaXMuY3NzUG9zaXRpb24/LXRoaXMuc2Nyb2xsUGFyZW50LnNjcm9sbFRvcCgpOm8/MDpuLnNjcm9sbFRvcCgpKSpzLGxlZnQ6aS5sZWZ0K3RoaXMub2Zmc2V0LnJlbGF0aXZlLmxlZnQqcyt0aGlzLm9mZnNldC5wYXJlbnQubGVmdCpzLSgiZml4ZWQiPT09dGhpcy5jc3NQb3NpdGlvbj8tdGhpcy5zY3JvbGxQYXJlbnQuc2Nyb2xsTGVmdCgpOm8/MDpuLnNjcm9sbExlZnQoKSkqc30KfSxfZ2VuZXJhdGVQb3NpdGlvbjpmdW5jdGlvbihlKXt2YXIgaSxzLG49dGhpcy5vcHRpb25zLG89ZS5wYWdlWCxhPWUucGFnZVkscj0iYWJzb2x1dGUiIT09dGhpcy5jc3NQb3NpdGlvbnx8dGhpcy5zY3JvbGxQYXJlbnRbMF0hPT1kb2N1bWVudCYmdC5jb250YWlucyh0aGlzLnNjcm9sbFBhcmVudFswXSx0aGlzLm9mZnNldFBhcmVudFswXSk/dGhpcy5zY3JvbGxQYXJlbnQ6dGhpcy5vZmZzZXRQYXJlbnQsaD0vKGh0bWx8Ym9keSkvaS50ZXN0KHJbMF0udGFnTmFtZSk7InJlbGF0aXZlIiE9PXRoaXMuY3NzUG9zaXRpb258fHRoaXMuc2Nyb2xsUGFyZW50WzBdIT09ZG9jdW1lbnQmJnRoaXMuc2Nyb2xsUGFyZW50WzBdIT09dGhpcy5vZmZzZXRQYXJlbnRbMF18fCh0aGlzLm9mZnNldC5yZWxhdGl2ZT10aGlzLl9nZXRSZWxhdGl2ZU9mZnNldCgpKTtpZih0aGlzLm9yaWdpbmFsUG9zaXRpb24pe2lmKHRoaXMuY29udGFpbm1lbnQpe2UucGFnZVgtdGhpcy5vZmZzZXQuY2xpY2subGVmdDx0aGlzLmNvbnRhaW5tZW50WzBdJiYobz10aGlzLmNvbnRhaW5tZW50WzBdK3RoaXMub2Zmc2V0LmNsaWNrLmxlZnQpOwplLnBhZ2VZLXRoaXMub2Zmc2V0LmNsaWNrLnRvcDx0aGlzLmNvbnRhaW5tZW50WzFdJiYoYT10aGlzLmNvbnRhaW5tZW50WzFdK3RoaXMub2Zmc2V0LmNsaWNrLnRvcCk7ZS5wYWdlWC10aGlzLm9mZnNldC5jbGljay5sZWZ0PnRoaXMuY29udGFpbm1lbnRbMl0mJihvPXRoaXMuY29udGFpbm1lbnRbMl0rdGhpcy5vZmZzZXQuY2xpY2subGVmdCk7ZS5wYWdlWS10aGlzLm9mZnNldC5jbGljay50b3A+dGhpcy5jb250YWlubWVudFszXSYmKGE9dGhpcy5jb250YWlubWVudFszXSt0aGlzLm9mZnNldC5jbGljay50b3ApfWlmKG4uZ3JpZCl7aT10aGlzLm9yaWdpbmFsUGFnZVkrTWF0aC5yb3VuZCgoYS10aGlzLm9yaWdpbmFsUGFnZVkpL24uZ3JpZFsxXSkqbi5ncmlkWzFdO2E9dGhpcy5jb250YWlubWVudD9pLXRoaXMub2Zmc2V0LmNsaWNrLnRvcD49dGhpcy5jb250YWlubWVudFsxXSYmaS10aGlzLm9mZnNldC5jbGljay50b3A8PXRoaXMuY29udGFpbm1lbnRbM10/aTppLXRoaXMub2Zmc2V0LmNsaWNrLnRvcD49dGhpcy5jb250YWlubWVudFsxXT9pLW4uZ3JpZFsxXTppK24uZ3JpZFsxXTppOwpzPXRoaXMub3JpZ2luYWxQYWdlWCtNYXRoLnJvdW5kKChvLXRoaXMub3JpZ2luYWxQYWdlWCkvbi5ncmlkWzBdKSpuLmdyaWRbMF07bz10aGlzLmNvbnRhaW5tZW50P3MtdGhpcy5vZmZzZXQuY2xpY2subGVmdD49dGhpcy5jb250YWlubWVudFswXSYmcy10aGlzLm9mZnNldC5jbGljay5sZWZ0PD10aGlzLmNvbnRhaW5tZW50WzJdP3M6cy10aGlzLm9mZnNldC5jbGljay5sZWZ0Pj10aGlzLmNvbnRhaW5tZW50WzBdP3Mtbi5ncmlkWzBdOnMrbi5ncmlkWzBdOnN9fXJldHVybnt0b3A6YS10aGlzLm9mZnNldC5jbGljay50b3AtdGhpcy5vZmZzZXQucmVsYXRpdmUudG9wLXRoaXMub2Zmc2V0LnBhcmVudC50b3ArKCJmaXhlZCI9PT10aGlzLmNzc1Bvc2l0aW9uPy10aGlzLnNjcm9sbFBhcmVudC5zY3JvbGxUb3AoKTpoPzA6ci5zY3JvbGxUb3AoKSksbGVmdDpvLXRoaXMub2Zmc2V0LmNsaWNrLmxlZnQtdGhpcy5vZmZzZXQucmVsYXRpdmUubGVmdC10aGlzLm9mZnNldC5wYXJlbnQubGVmdCsoImZpeGVkIj09PXRoaXMuY3NzUG9zaXRpb24/LXRoaXMuc2Nyb2xsUGFyZW50LnNjcm9sbExlZnQoKTpoPzA6ci5zY3JvbGxMZWZ0KCkpfQp9LF9yZWFycmFuZ2U6ZnVuY3Rpb24odCxlLGkscyl7aT9pWzBdLmFwcGVuZENoaWxkKHRoaXMucGxhY2Vob2xkZXJbMF0pOmUuaXRlbVswXS5wYXJlbnROb2RlLmluc2VydEJlZm9yZSh0aGlzLnBsYWNlaG9sZGVyWzBdLCJkb3duIj09PXRoaXMuZGlyZWN0aW9uP2UuaXRlbVswXTplLml0ZW1bMF0ubmV4dFNpYmxpbmcpO3RoaXMuY291bnRlcj10aGlzLmNvdW50ZXI/Kyt0aGlzLmNvdW50ZXI6MTt2YXIgbj10aGlzLmNvdW50ZXI7dGhpcy5fZGVsYXkoZnVuY3Rpb24oKXtuPT09dGhpcy5jb3VudGVyJiZ0aGlzLnJlZnJlc2hQb3NpdGlvbnMoIXMpfSl9LF9jbGVhcjpmdW5jdGlvbih0LGUpe2Z1bmN0aW9uIGkodCxlLGkpe3JldHVybiBmdW5jdGlvbihzKXtpLl90cmlnZ2VyKHQscyxlLl91aUhhc2goZSkpfX10aGlzLnJldmVydGluZz0hMTt2YXIgcyxuPVtdOyF0aGlzLl9ub0ZpbmFsU29ydCYmdGhpcy5jdXJyZW50SXRlbS5wYXJlbnQoKS5sZW5ndGgmJnRoaXMucGxhY2Vob2xkZXIuYmVmb3JlKHRoaXMuY3VycmVudEl0ZW0pOwp0aGlzLl9ub0ZpbmFsU29ydD1udWxsO2lmKHRoaXMuaGVscGVyWzBdPT09dGhpcy5jdXJyZW50SXRlbVswXSl7Zm9yKHMgaW4gdGhpcy5fc3RvcmVkQ1NTKSgiYXV0byI9PT10aGlzLl9zdG9yZWRDU1Nbc118fCJzdGF0aWMiPT09dGhpcy5fc3RvcmVkQ1NTW3NdKSYmKHRoaXMuX3N0b3JlZENTU1tzXT0iIik7dGhpcy5jdXJyZW50SXRlbS5jc3ModGhpcy5fc3RvcmVkQ1NTKS5yZW1vdmVDbGFzcygidWktc29ydGFibGUtaGVscGVyIil9ZWxzZSB0aGlzLmN1cnJlbnRJdGVtLnNob3coKTt0aGlzLmZyb21PdXRzaWRlJiYhZSYmbi5wdXNoKGZ1bmN0aW9uKHQpe3RoaXMuX3RyaWdnZXIoInJlY2VpdmUiLHQsdGhpcy5fdWlIYXNoKHRoaXMuZnJvbU91dHNpZGUpKX0pOyF0aGlzLmZyb21PdXRzaWRlJiZ0aGlzLmRvbVBvc2l0aW9uLnByZXY9PT10aGlzLmN1cnJlbnRJdGVtLnByZXYoKS5ub3QoIi51aS1zb3J0YWJsZS1oZWxwZXIiKVswXSYmdGhpcy5kb21Qb3NpdGlvbi5wYXJlbnQ9PT10aGlzLmN1cnJlbnRJdGVtLnBhcmVudCgpWzBdfHxlfHxuLnB1c2goZnVuY3Rpb24odCl7dGhpcy5fdHJpZ2dlcigidXBkYXRlIix0LHRoaXMuX3VpSGFzaCgpKQp9KTtpZih0aGlzIT09dGhpcy5jdXJyZW50Q29udGFpbmVyJiYhZSl7bi5wdXNoKGZ1bmN0aW9uKHQpe3RoaXMuX3RyaWdnZXIoInJlbW92ZSIsdCx0aGlzLl91aUhhc2goKSl9KTtuLnB1c2goZnVuY3Rpb24odCl7cmV0dXJuIGZ1bmN0aW9uKGUpe3QuX3RyaWdnZXIoInJlY2VpdmUiLGUsdGhpcy5fdWlIYXNoKHRoaXMpKX19LmNhbGwodGhpcyx0aGlzLmN1cnJlbnRDb250YWluZXIpKTtuLnB1c2goZnVuY3Rpb24odCl7cmV0dXJuIGZ1bmN0aW9uKGUpe3QuX3RyaWdnZXIoInVwZGF0ZSIsZSx0aGlzLl91aUhhc2godGhpcykpfX0uY2FsbCh0aGlzLHRoaXMuY3VycmVudENvbnRhaW5lcikpfWZvcihzPXRoaXMuY29udGFpbmVycy5sZW5ndGgtMTtzPj0wO3MtLSl7ZXx8bi5wdXNoKGkoImRlYWN0aXZhdGUiLHRoaXMsdGhpcy5jb250YWluZXJzW3NdKSk7aWYodGhpcy5jb250YWluZXJzW3NdLmNvbnRhaW5lckNhY2hlLm92ZXIpe24ucHVzaChpKCJvdXQiLHRoaXMsdGhpcy5jb250YWluZXJzW3NdKSk7CnRoaXMuY29udGFpbmVyc1tzXS5jb250YWluZXJDYWNoZS5vdmVyPTB9fWlmKHRoaXMuc3RvcmVkQ3Vyc29yKXt0aGlzLmRvY3VtZW50LmZpbmQoImJvZHkiKS5jc3MoImN1cnNvciIsdGhpcy5zdG9yZWRDdXJzb3IpO3RoaXMuc3RvcmVkU3R5bGVzaGVldC5yZW1vdmUoKX10aGlzLl9zdG9yZWRPcGFjaXR5JiZ0aGlzLmhlbHBlci5jc3MoIm9wYWNpdHkiLHRoaXMuX3N0b3JlZE9wYWNpdHkpO3RoaXMuX3N0b3JlZFpJbmRleCYmdGhpcy5oZWxwZXIuY3NzKCJ6SW5kZXgiLCJhdXRvIj09PXRoaXMuX3N0b3JlZFpJbmRleD8iIjp0aGlzLl9zdG9yZWRaSW5kZXgpO3RoaXMuZHJhZ2dpbmc9ITE7aWYodGhpcy5jYW5jZWxIZWxwZXJSZW1vdmFsKXtpZighZSl7dGhpcy5fdHJpZ2dlcigiYmVmb3JlU3RvcCIsdCx0aGlzLl91aUhhc2goKSk7Zm9yKHM9MDtzPG4ubGVuZ3RoO3MrKyluW3NdLmNhbGwodGhpcyx0KTt0aGlzLl90cmlnZ2VyKCJzdG9wIix0LHRoaXMuX3VpSGFzaCgpKX10aGlzLmZyb21PdXRzaWRlPSExOwpyZXR1cm4hMX1lfHx0aGlzLl90cmlnZ2VyKCJiZWZvcmVTdG9wIix0LHRoaXMuX3VpSGFzaCgpKTt0aGlzLnBsYWNlaG9sZGVyWzBdLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQodGhpcy5wbGFjZWhvbGRlclswXSk7dGhpcy5oZWxwZXJbMF0hPT10aGlzLmN1cnJlbnRJdGVtWzBdJiZ0aGlzLmhlbHBlci5yZW1vdmUoKTt0aGlzLmhlbHBlcj1udWxsO2lmKCFlKXtmb3Iocz0wO3M8bi5sZW5ndGg7cysrKW5bc10uY2FsbCh0aGlzLHQpO3RoaXMuX3RyaWdnZXIoInN0b3AiLHQsdGhpcy5fdWlIYXNoKCkpfXRoaXMuZnJvbU91dHNpZGU9ITE7cmV0dXJuITB9LF90cmlnZ2VyOmZ1bmN0aW9uKCl7dC5XaWRnZXQucHJvdG90eXBlLl90cmlnZ2VyLmFwcGx5KHRoaXMsYXJndW1lbnRzKT09PSExJiZ0aGlzLmNhbmNlbCgpfSxfdWlIYXNoOmZ1bmN0aW9uKGUpe3ZhciBpPWV8fHRoaXM7cmV0dXJue2hlbHBlcjppLmhlbHBlcixwbGFjZWhvbGRlcjppLnBsYWNlaG9sZGVyfHx0KFtdKSxwb3NpdGlvbjppLnBvc2l0aW9uLG9yaWdpbmFsUG9zaXRpb246aS5vcmlnaW5hbFBvc2l0aW9uLG9mZnNldDppLnBvc2l0aW9uQWJzLGl0ZW06aS5jdXJyZW50SXRlbSxzZW5kZXI6ZT9lLmVsZW1lbnQ6bnVsbH0KfX0pfShqUXVlcnkpOyFmdW5jdGlvbih0KXt0LndpZGdldCgidWkuYXV0b2NvbXBsZXRlIix7dmVyc2lvbjoiMS4xMC40IixkZWZhdWx0RWxlbWVudDoiPGlucHV0PiIsb3B0aW9uczp7YXBwZW5kVG86bnVsbCxhdXRvRm9jdXM6ITEsZGVsYXk6MzAwLG1pbkxlbmd0aDoxLHBvc2l0aW9uOntteToibGVmdCB0b3AiLGF0OiJsZWZ0IGJvdHRvbSIsY29sbGlzaW9uOiJub25lIn0sc291cmNlOm51bGwsY2hhbmdlOm51bGwsY2xvc2U6bnVsbCxmb2N1czpudWxsLG9wZW46bnVsbCxyZXNwb25zZTpudWxsLHNlYXJjaDpudWxsLHNlbGVjdDpudWxsfSxyZXF1ZXN0SW5kZXg6MCxwZW5kaW5nOjAsX2NyZWF0ZTpmdW5jdGlvbigpe3ZhciBlLGkscyxuPXRoaXMuZWxlbWVudFswXS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpLG89InRleHRhcmVhIj09PW4sYT0iaW5wdXQiPT09bjt0aGlzLmlzTXVsdGlMaW5lPW8/ITA6YT8hMTp0aGlzLmVsZW1lbnQucHJvcCgiaXNDb250ZW50RWRpdGFibGUiKTt0aGlzLnZhbHVlTWV0aG9kPXRoaXMuZWxlbWVudFtvfHxhPyJ2YWwiOiJ0ZXh0Il07CnRoaXMuaXNOZXdNZW51PSEwO3RoaXMuZWxlbWVudC5hZGRDbGFzcygidWktYXV0b2NvbXBsZXRlLWlucHV0IikuYXR0cigiYXV0b2NvbXBsZXRlIiwib2ZmIik7dGhpcy5fb24odGhpcy5lbGVtZW50LHtrZXlkb3duOmZ1bmN0aW9uKG4pe2lmKHRoaXMuZWxlbWVudC5wcm9wKCJyZWFkT25seSIpKXtlPSEwO3M9ITA7aT0hMH1lbHNle2U9ITE7cz0hMTtpPSExO3ZhciBvPXQudWkua2V5Q29kZTtzd2l0Y2gobi5rZXlDb2RlKXtjYXNlIG8uUEFHRV9VUDplPSEwO3RoaXMuX21vdmUoInByZXZpb3VzUGFnZSIsbik7YnJlYWs7Y2FzZSBvLlBBR0VfRE9XTjplPSEwO3RoaXMuX21vdmUoIm5leHRQYWdlIixuKTticmVhaztjYXNlIG8uVVA6ZT0hMDt0aGlzLl9rZXlFdmVudCgicHJldmlvdXMiLG4pO2JyZWFrO2Nhc2Ugby5ET1dOOmU9ITA7dGhpcy5fa2V5RXZlbnQoIm5leHQiLG4pO2JyZWFrO2Nhc2Ugby5FTlRFUjpjYXNlIG8uTlVNUEFEX0VOVEVSOmlmKHRoaXMubWVudS5hY3RpdmUpe2U9ITA7Cm4ucHJldmVudERlZmF1bHQoKTt0aGlzLm1lbnUuc2VsZWN0KG4pfWJyZWFrO2Nhc2Ugby5UQUI6dGhpcy5tZW51LmFjdGl2ZSYmdGhpcy5tZW51LnNlbGVjdChuKTticmVhaztjYXNlIG8uRVNDQVBFOmlmKHRoaXMubWVudS5lbGVtZW50LmlzKCI6dmlzaWJsZSIpKXt0aGlzLl92YWx1ZSh0aGlzLnRlcm0pO3RoaXMuY2xvc2Uobik7bi5wcmV2ZW50RGVmYXVsdCgpfWJyZWFrO2RlZmF1bHQ6aT0hMDt0aGlzLl9zZWFyY2hUaW1lb3V0KG4pfX19LGtleXByZXNzOmZ1bmN0aW9uKHMpe2lmKGUpe2U9ITE7KCF0aGlzLmlzTXVsdGlMaW5lfHx0aGlzLm1lbnUuZWxlbWVudC5pcygiOnZpc2libGUiKSkmJnMucHJldmVudERlZmF1bHQoKX1lbHNlIGlmKCFpKXt2YXIgbj10LnVpLmtleUNvZGU7c3dpdGNoKHMua2V5Q29kZSl7Y2FzZSBuLlBBR0VfVVA6dGhpcy5fbW92ZSgicHJldmlvdXNQYWdlIixzKTticmVhaztjYXNlIG4uUEFHRV9ET1dOOnRoaXMuX21vdmUoIm5leHRQYWdlIixzKTticmVhazsKY2FzZSBuLlVQOnRoaXMuX2tleUV2ZW50KCJwcmV2aW91cyIscyk7YnJlYWs7Y2FzZSBuLkRPV046dGhpcy5fa2V5RXZlbnQoIm5leHQiLHMpfX19LGlucHV0OmZ1bmN0aW9uKHQpe2lmKHMpe3M9ITE7dC5wcmV2ZW50RGVmYXVsdCgpfWVsc2UgdGhpcy5fc2VhcmNoVGltZW91dCh0KX0sZm9jdXM6ZnVuY3Rpb24oKXt0aGlzLnNlbGVjdGVkSXRlbT1udWxsO3RoaXMucHJldmlvdXM9dGhpcy5fdmFsdWUoKX0sYmx1cjpmdW5jdGlvbih0KXtpZih0aGlzLmNhbmNlbEJsdXIpZGVsZXRlIHRoaXMuY2FuY2VsQmx1cjtlbHNle2NsZWFyVGltZW91dCh0aGlzLnNlYXJjaGluZyk7dGhpcy5jbG9zZSh0KTt0aGlzLl9jaGFuZ2UodCl9fX0pO3RoaXMuX2luaXRTb3VyY2UoKTt0aGlzLm1lbnU9dCgiPHVsPiIpLmFkZENsYXNzKCJ1aS1hdXRvY29tcGxldGUgdWktZnJvbnQiKS5hcHBlbmRUbyh0aGlzLl9hcHBlbmRUbygpKS5tZW51KHtyb2xlOm51bGx9KS5oaWRlKCkuZGF0YSgidWktbWVudSIpOwp0aGlzLl9vbih0aGlzLm1lbnUuZWxlbWVudCx7bW91c2Vkb3duOmZ1bmN0aW9uKGUpe2UucHJldmVudERlZmF1bHQoKTt0aGlzLmNhbmNlbEJsdXI9ITA7dGhpcy5fZGVsYXkoZnVuY3Rpb24oKXtkZWxldGUgdGhpcy5jYW5jZWxCbHVyfSk7dmFyIGk9dGhpcy5tZW51LmVsZW1lbnRbMF07dChlLnRhcmdldCkuY2xvc2VzdCgiLnVpLW1lbnUtaXRlbSIpLmxlbmd0aHx8dGhpcy5fZGVsYXkoZnVuY3Rpb24oKXt2YXIgZT10aGlzO3RoaXMuZG9jdW1lbnQub25lKCJtb3VzZWRvd24iLGZ1bmN0aW9uKHMpe3MudGFyZ2V0PT09ZS5lbGVtZW50WzBdfHxzLnRhcmdldD09PWl8fHQuY29udGFpbnMoaSxzLnRhcmdldCl8fGUuY2xvc2UoKX0pfSl9LG1lbnVmb2N1czpmdW5jdGlvbihlLGkpe2lmKHRoaXMuaXNOZXdNZW51KXt0aGlzLmlzTmV3TWVudT0hMTtpZihlLm9yaWdpbmFsRXZlbnQmJi9ebW91c2UvLnRlc3QoZS5vcmlnaW5hbEV2ZW50LnR5cGUpKXt0aGlzLm1lbnUuYmx1cigpO3RoaXMuZG9jdW1lbnQub25lKCJtb3VzZW1vdmUiLGZ1bmN0aW9uKCl7dChlLnRhcmdldCkudHJpZ2dlcihlLm9yaWdpbmFsRXZlbnQpCn0pO3JldHVybn19dmFyIHM9aS5pdGVtLmRhdGEoInVpLWF1dG9jb21wbGV0ZS1pdGVtIik7ITEhPT10aGlzLl90cmlnZ2VyKCJmb2N1cyIsZSx7aXRlbTpzfSk/ZS5vcmlnaW5hbEV2ZW50JiYvXmtleS8udGVzdChlLm9yaWdpbmFsRXZlbnQudHlwZSkmJnRoaXMuX3ZhbHVlKHMudmFsdWUpOnRoaXMubGl2ZVJlZ2lvbi50ZXh0KHMudmFsdWUpfSxtZW51c2VsZWN0OmZ1bmN0aW9uKHQsZSl7dmFyIGk9ZS5pdGVtLmRhdGEoInVpLWF1dG9jb21wbGV0ZS1pdGVtIikscz10aGlzLnByZXZpb3VzO2lmKHRoaXMuZWxlbWVudFswXSE9PXRoaXMuZG9jdW1lbnRbMF0uYWN0aXZlRWxlbWVudCl7dGhpcy5lbGVtZW50LmZvY3VzKCk7dGhpcy5wcmV2aW91cz1zO3RoaXMuX2RlbGF5KGZ1bmN0aW9uKCl7dGhpcy5wcmV2aW91cz1zO3RoaXMuc2VsZWN0ZWRJdGVtPWl9KX0hMSE9PXRoaXMuX3RyaWdnZXIoInNlbGVjdCIsdCx7aXRlbTppfSkmJnRoaXMuX3ZhbHVlKGkudmFsdWUpO3RoaXMudGVybT10aGlzLl92YWx1ZSgpOwp0aGlzLmNsb3NlKHQpO3RoaXMuc2VsZWN0ZWRJdGVtPWl9fSk7dGhpcy5saXZlUmVnaW9uPXQoIjxzcGFuPiIse3JvbGU6InN0YXR1cyIsImFyaWEtbGl2ZSI6InBvbGl0ZSJ9KS5hZGRDbGFzcygidWktaGVscGVyLWhpZGRlbi1hY2Nlc3NpYmxlIikuaW5zZXJ0QmVmb3JlKHRoaXMuZWxlbWVudCk7dGhpcy5fb24odGhpcy53aW5kb3cse2JlZm9yZXVubG9hZDpmdW5jdGlvbigpe3RoaXMuZWxlbWVudC5yZW1vdmVBdHRyKCJhdXRvY29tcGxldGUiKX19KX0sX2Rlc3Ryb3k6ZnVuY3Rpb24oKXtjbGVhclRpbWVvdXQodGhpcy5zZWFyY2hpbmcpO3RoaXMuZWxlbWVudC5yZW1vdmVDbGFzcygidWktYXV0b2NvbXBsZXRlLWlucHV0IikucmVtb3ZlQXR0cigiYXV0b2NvbXBsZXRlIik7dGhpcy5tZW51LmVsZW1lbnQucmVtb3ZlKCk7dGhpcy5saXZlUmVnaW9uLnJlbW92ZSgpfSxfc2V0T3B0aW9uOmZ1bmN0aW9uKHQsZSl7dGhpcy5fc3VwZXIodCxlKTsic291cmNlIj09PXQmJnRoaXMuX2luaXRTb3VyY2UoKTsKImFwcGVuZFRvIj09PXQmJnRoaXMubWVudS5lbGVtZW50LmFwcGVuZFRvKHRoaXMuX2FwcGVuZFRvKCkpOyJkaXNhYmxlZCI9PT10JiZlJiZ0aGlzLnhociYmdGhpcy54aHIuYWJvcnQoKX0sX2FwcGVuZFRvOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5vcHRpb25zLmFwcGVuZFRvO2UmJihlPWUuanF1ZXJ5fHxlLm5vZGVUeXBlP3QoZSk6dGhpcy5kb2N1bWVudC5maW5kKGUpLmVxKDApKTtlfHwoZT10aGlzLmVsZW1lbnQuY2xvc2VzdCgiLnVpLWZyb250IikpO2UubGVuZ3RofHwoZT10aGlzLmRvY3VtZW50WzBdLmJvZHkpO3JldHVybiBlfSxfaW5pdFNvdXJjZTpmdW5jdGlvbigpe3ZhciBlLGkscz10aGlzO2lmKHQuaXNBcnJheSh0aGlzLm9wdGlvbnMuc291cmNlKSl7ZT10aGlzLm9wdGlvbnMuc291cmNlO3RoaXMuc291cmNlPWZ1bmN0aW9uKGkscyl7cyh0LnVpLmF1dG9jb21wbGV0ZS5maWx0ZXIoZSxpLnRlcm0pKX19ZWxzZSBpZigic3RyaW5nIj09dHlwZW9mIHRoaXMub3B0aW9ucy5zb3VyY2Upe2k9dGhpcy5vcHRpb25zLnNvdXJjZTsKdGhpcy5zb3VyY2U9ZnVuY3Rpb24oZSxuKXtzLnhociYmcy54aHIuYWJvcnQoKTtzLnhocj10LmFqYXgoe3VybDppLGRhdGE6ZSxkYXRhVHlwZToianNvbiIsc3VjY2VzczpmdW5jdGlvbih0KXtuKHQpfSxlcnJvcjpmdW5jdGlvbigpe24oW10pfX0pfX1lbHNlIHRoaXMuc291cmNlPXRoaXMub3B0aW9ucy5zb3VyY2V9LF9zZWFyY2hUaW1lb3V0OmZ1bmN0aW9uKHQpe2NsZWFyVGltZW91dCh0aGlzLnNlYXJjaGluZyk7dGhpcy5zZWFyY2hpbmc9dGhpcy5fZGVsYXkoZnVuY3Rpb24oKXtpZih0aGlzLnRlcm0hPT10aGlzLl92YWx1ZSgpKXt0aGlzLnNlbGVjdGVkSXRlbT1udWxsO3RoaXMuc2VhcmNoKG51bGwsdCl9fSx0aGlzLm9wdGlvbnMuZGVsYXkpfSxzZWFyY2g6ZnVuY3Rpb24odCxlKXt0PW51bGwhPXQ/dDp0aGlzLl92YWx1ZSgpO3RoaXMudGVybT10aGlzLl92YWx1ZSgpO3JldHVybiB0Lmxlbmd0aDx0aGlzLm9wdGlvbnMubWluTGVuZ3RoP3RoaXMuY2xvc2UoZSk6dGhpcy5fdHJpZ2dlcigic2VhcmNoIixlKSE9PSExP3RoaXMuX3NlYXJjaCh0KTp2b2lkIDAKfSxfc2VhcmNoOmZ1bmN0aW9uKHQpe3RoaXMucGVuZGluZysrO3RoaXMuZWxlbWVudC5hZGRDbGFzcygidWktYXV0b2NvbXBsZXRlLWxvYWRpbmciKTt0aGlzLmNhbmNlbFNlYXJjaD0hMTt0aGlzLnNvdXJjZSh7dGVybTp0fSx0aGlzLl9yZXNwb25zZSgpKX0sX3Jlc3BvbnNlOmZ1bmN0aW9uKCl7dmFyIGU9Kyt0aGlzLnJlcXVlc3RJbmRleDtyZXR1cm4gdC5wcm94eShmdW5jdGlvbih0KXtlPT09dGhpcy5yZXF1ZXN0SW5kZXgmJnRoaXMuX19yZXNwb25zZSh0KTt0aGlzLnBlbmRpbmctLTt0aGlzLnBlbmRpbmd8fHRoaXMuZWxlbWVudC5yZW1vdmVDbGFzcygidWktYXV0b2NvbXBsZXRlLWxvYWRpbmciKX0sdGhpcyl9LF9fcmVzcG9uc2U6ZnVuY3Rpb24odCl7dCYmKHQ9dGhpcy5fbm9ybWFsaXplKHQpKTt0aGlzLl90cmlnZ2VyKCJyZXNwb25zZSIsbnVsbCx7Y29udGVudDp0fSk7aWYoIXRoaXMub3B0aW9ucy5kaXNhYmxlZCYmdCYmdC5sZW5ndGgmJiF0aGlzLmNhbmNlbFNlYXJjaCl7dGhpcy5fc3VnZ2VzdCh0KTsKdGhpcy5fdHJpZ2dlcigib3BlbiIpfWVsc2UgdGhpcy5fY2xvc2UoKX0sY2xvc2U6ZnVuY3Rpb24odCl7dGhpcy5jYW5jZWxTZWFyY2g9ITA7dGhpcy5fY2xvc2UodCl9LF9jbG9zZTpmdW5jdGlvbih0KXtpZih0aGlzLm1lbnUuZWxlbWVudC5pcygiOnZpc2libGUiKSl7dGhpcy5tZW51LmVsZW1lbnQuaGlkZSgpO3RoaXMubWVudS5ibHVyKCk7dGhpcy5pc05ld01lbnU9ITA7dGhpcy5fdHJpZ2dlcigiY2xvc2UiLHQpfX0sX2NoYW5nZTpmdW5jdGlvbih0KXt0aGlzLnByZXZpb3VzIT09dGhpcy5fdmFsdWUoKSYmdGhpcy5fdHJpZ2dlcigiY2hhbmdlIix0LHtpdGVtOnRoaXMuc2VsZWN0ZWRJdGVtfSl9LF9ub3JtYWxpemU6ZnVuY3Rpb24oZSl7cmV0dXJuIGUubGVuZ3RoJiZlWzBdLmxhYmVsJiZlWzBdLnZhbHVlP2U6dC5tYXAoZSxmdW5jdGlvbihlKXtyZXR1cm4ic3RyaW5nIj09dHlwZW9mIGU/e2xhYmVsOmUsdmFsdWU6ZX06dC5leHRlbmQoe2xhYmVsOmUubGFiZWx8fGUudmFsdWUsdmFsdWU6ZS52YWx1ZXx8ZS5sYWJlbH0sZSkKfSl9LF9zdWdnZXN0OmZ1bmN0aW9uKGUpe3ZhciBpPXRoaXMubWVudS5lbGVtZW50LmVtcHR5KCk7dGhpcy5fcmVuZGVyTWVudShpLGUpO3RoaXMuaXNOZXdNZW51PSEwO3RoaXMubWVudS5yZWZyZXNoKCk7aS5zaG93KCk7dGhpcy5fcmVzaXplTWVudSgpO2kucG9zaXRpb24odC5leHRlbmQoe29mOnRoaXMuZWxlbWVudH0sdGhpcy5vcHRpb25zLnBvc2l0aW9uKSk7dGhpcy5vcHRpb25zLmF1dG9Gb2N1cyYmdGhpcy5tZW51Lm5leHQoKX0sX3Jlc2l6ZU1lbnU6ZnVuY3Rpb24oKXt2YXIgdD10aGlzLm1lbnUuZWxlbWVudDt0Lm91dGVyV2lkdGgoTWF0aC5tYXgodC53aWR0aCgiIikub3V0ZXJXaWR0aCgpKzEsdGhpcy5lbGVtZW50Lm91dGVyV2lkdGgoKSkpfSxfcmVuZGVyTWVudTpmdW5jdGlvbihlLGkpe3ZhciBzPXRoaXM7dC5lYWNoKGksZnVuY3Rpb24odCxpKXtzLl9yZW5kZXJJdGVtRGF0YShlLGkpfSl9LF9yZW5kZXJJdGVtRGF0YTpmdW5jdGlvbih0LGUpe3JldHVybiB0aGlzLl9yZW5kZXJJdGVtKHQsZSkuZGF0YSgidWktYXV0b2NvbXBsZXRlLWl0ZW0iLGUpCn0sX3JlbmRlckl0ZW06ZnVuY3Rpb24oZSxpKXtyZXR1cm4gdCgiPGxpPiIpLmFwcGVuZCh0KCI8YT4iKS50ZXh0KGkubGFiZWwpKS5hcHBlbmRUbyhlKX0sX21vdmU6ZnVuY3Rpb24odCxlKXtpZih0aGlzLm1lbnUuZWxlbWVudC5pcygiOnZpc2libGUiKSlpZih0aGlzLm1lbnUuaXNGaXJzdEl0ZW0oKSYmL15wcmV2aW91cy8udGVzdCh0KXx8dGhpcy5tZW51LmlzTGFzdEl0ZW0oKSYmL15uZXh0Ly50ZXN0KHQpKXt0aGlzLl92YWx1ZSh0aGlzLnRlcm0pO3RoaXMubWVudS5ibHVyKCl9ZWxzZSB0aGlzLm1lbnVbdF0oZSk7ZWxzZSB0aGlzLnNlYXJjaChudWxsLGUpfSx3aWRnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5tZW51LmVsZW1lbnR9LF92YWx1ZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLnZhbHVlTWV0aG9kLmFwcGx5KHRoaXMuZWxlbWVudCxhcmd1bWVudHMpfSxfa2V5RXZlbnQ6ZnVuY3Rpb24odCxlKXtpZighdGhpcy5pc011bHRpTGluZXx8dGhpcy5tZW51LmVsZW1lbnQuaXMoIjp2aXNpYmxlIikpe3RoaXMuX21vdmUodCxlKTsKZS5wcmV2ZW50RGVmYXVsdCgpfX19KTt0LmV4dGVuZCh0LnVpLmF1dG9jb21wbGV0ZSx7ZXNjYXBlUmVnZXg6ZnVuY3Rpb24odCl7cmV0dXJuIHQucmVwbGFjZSgvW1wtXFtcXXt9KCkqKz8uLFxcXF4kfCNcc10vZywiXFwkJiIpfSxmaWx0ZXI6ZnVuY3Rpb24oZSxpKXt2YXIgcz1uZXcgUmVnRXhwKHQudWkuYXV0b2NvbXBsZXRlLmVzY2FwZVJlZ2V4KGkpLCJpIik7cmV0dXJuIHQuZ3JlcChlLGZ1bmN0aW9uKHQpe3JldHVybiBzLnRlc3QodC5sYWJlbHx8dC52YWx1ZXx8dCl9KX19KTt0LndpZGdldCgidWkuYXV0b2NvbXBsZXRlIix0LnVpLmF1dG9jb21wbGV0ZSx7b3B0aW9uczp7bWVzc2FnZXM6e25vUmVzdWx0czoiTm8gc2VhcmNoIHJlc3VsdHMuIixyZXN1bHRzOmZ1bmN0aW9uKHQpe3JldHVybiB0Kyh0PjE/IiByZXN1bHRzIGFyZSI6IiByZXN1bHQgaXMiKSsiIGF2YWlsYWJsZSwgdXNlIHVwIGFuZCBkb3duIGFycm93IGtleXMgdG8gbmF2aWdhdGUuIn19fSxfX3Jlc3BvbnNlOmZ1bmN0aW9uKHQpe3ZhciBlOwp0aGlzLl9zdXBlckFwcGx5KGFyZ3VtZW50cyk7aWYoIXRoaXMub3B0aW9ucy5kaXNhYmxlZCYmIXRoaXMuY2FuY2VsU2VhcmNoKXtlPXQmJnQubGVuZ3RoP3RoaXMub3B0aW9ucy5tZXNzYWdlcy5yZXN1bHRzKHQubGVuZ3RoKTp0aGlzLm9wdGlvbnMubWVzc2FnZXMubm9SZXN1bHRzO3RoaXMubGl2ZVJlZ2lvbi50ZXh0KGUpfX19KX0oalF1ZXJ5KTshZnVuY3Rpb24odCl7dmFyIGUsaT0idWktYnV0dG9uIHVpLXdpZGdldCB1aS1zdGF0ZS1kZWZhdWx0IHVpLWNvcm5lci1hbGwiLHM9InVpLWJ1dHRvbi1pY29ucy1vbmx5IHVpLWJ1dHRvbi1pY29uLW9ubHkgdWktYnV0dG9uLXRleHQtaWNvbnMgdWktYnV0dG9uLXRleHQtaWNvbi1wcmltYXJ5IHVpLWJ1dHRvbi10ZXh0LWljb24tc2Vjb25kYXJ5IHVpLWJ1dHRvbi10ZXh0LW9ubHkiLG49ZnVuY3Rpb24oKXt2YXIgZT10KHRoaXMpO3NldFRpbWVvdXQoZnVuY3Rpb24oKXtlLmZpbmQoIjp1aS1idXR0b24iKS5idXR0b24oInJlZnJlc2giKQp9LDEpfSxvPWZ1bmN0aW9uKGUpe3ZhciBpPWUubmFtZSxzPWUuZm9ybSxuPXQoW10pO2lmKGkpe2k9aS5yZXBsYWNlKC8nL2csIlxcJyIpO249cz90KHMpLmZpbmQoIltuYW1lPSciK2krIiddIik6dCgiW25hbWU9JyIraSsiJ10iLGUub3duZXJEb2N1bWVudCkuZmlsdGVyKGZ1bmN0aW9uKCl7cmV0dXJuIXRoaXMuZm9ybX0pfXJldHVybiBufTt0LndpZGdldCgidWkuYnV0dG9uIix7dmVyc2lvbjoiMS4xMC40IixkZWZhdWx0RWxlbWVudDoiPGJ1dHRvbj4iLG9wdGlvbnM6e2Rpc2FibGVkOm51bGwsdGV4dDohMCxsYWJlbDpudWxsLGljb25zOntwcmltYXJ5Om51bGwsc2Vjb25kYXJ5Om51bGx9fSxfY3JlYXRlOmZ1bmN0aW9uKCl7dGhpcy5lbGVtZW50LmNsb3Nlc3QoImZvcm0iKS51bmJpbmQoInJlc2V0Iit0aGlzLmV2ZW50TmFtZXNwYWNlKS5iaW5kKCJyZXNldCIrdGhpcy5ldmVudE5hbWVzcGFjZSxuKTsiYm9vbGVhbiIhPXR5cGVvZiB0aGlzLm9wdGlvbnMuZGlzYWJsZWQ/dGhpcy5vcHRpb25zLmRpc2FibGVkPSEhdGhpcy5lbGVtZW50LnByb3AoImRpc2FibGVkIik6dGhpcy5lbGVtZW50LnByb3AoImRpc2FibGVkIix0aGlzLm9wdGlvbnMuZGlzYWJsZWQpOwp0aGlzLl9kZXRlcm1pbmVCdXR0b25UeXBlKCk7dGhpcy5oYXNUaXRsZT0hIXRoaXMuYnV0dG9uRWxlbWVudC5hdHRyKCJ0aXRsZSIpO3ZhciBzPXRoaXMsYT10aGlzLm9wdGlvbnMscj0iY2hlY2tib3giPT09dGhpcy50eXBlfHwicmFkaW8iPT09dGhpcy50eXBlLGg9cj8iIjoidWktc3RhdGUtYWN0aXZlIjtudWxsPT09YS5sYWJlbCYmKGEubGFiZWw9ImlucHV0Ij09PXRoaXMudHlwZT90aGlzLmJ1dHRvbkVsZW1lbnQudmFsKCk6dGhpcy5idXR0b25FbGVtZW50Lmh0bWwoKSk7dGhpcy5faG92ZXJhYmxlKHRoaXMuYnV0dG9uRWxlbWVudCk7dGhpcy5idXR0b25FbGVtZW50LmFkZENsYXNzKGkpLmF0dHIoInJvbGUiLCJidXR0b24iKS5iaW5kKCJtb3VzZWVudGVyIit0aGlzLmV2ZW50TmFtZXNwYWNlLGZ1bmN0aW9uKCl7YS5kaXNhYmxlZHx8dGhpcz09PWUmJnQodGhpcykuYWRkQ2xhc3MoInVpLXN0YXRlLWFjdGl2ZSIpfSkuYmluZCgibW91c2VsZWF2ZSIrdGhpcy5ldmVudE5hbWVzcGFjZSxmdW5jdGlvbigpe2EuZGlzYWJsZWR8fHQodGhpcykucmVtb3ZlQ2xhc3MoaCkKfSkuYmluZCgiY2xpY2siK3RoaXMuZXZlbnROYW1lc3BhY2UsZnVuY3Rpb24odCl7aWYoYS5kaXNhYmxlZCl7dC5wcmV2ZW50RGVmYXVsdCgpO3Quc3RvcEltbWVkaWF0ZVByb3BhZ2F0aW9uKCl9fSk7dGhpcy5fb24oe2ZvY3VzOmZ1bmN0aW9uKCl7dGhpcy5idXR0b25FbGVtZW50LmFkZENsYXNzKCJ1aS1zdGF0ZS1mb2N1cyIpfSxibHVyOmZ1bmN0aW9uKCl7dGhpcy5idXR0b25FbGVtZW50LnJlbW92ZUNsYXNzKCJ1aS1zdGF0ZS1mb2N1cyIpfX0pO3ImJnRoaXMuZWxlbWVudC5iaW5kKCJjaGFuZ2UiK3RoaXMuZXZlbnROYW1lc3BhY2UsZnVuY3Rpb24oKXtzLnJlZnJlc2goKX0pO2lmKCJjaGVja2JveCI9PT10aGlzLnR5cGUpdGhpcy5idXR0b25FbGVtZW50LmJpbmQoImNsaWNrIit0aGlzLmV2ZW50TmFtZXNwYWNlLGZ1bmN0aW9uKCl7cmV0dXJuIGEuZGlzYWJsZWQ/ITE6dm9pZCAwfSk7ZWxzZSBpZigicmFkaW8iPT09dGhpcy50eXBlKXRoaXMuYnV0dG9uRWxlbWVudC5iaW5kKCJjbGljayIrdGhpcy5ldmVudE5hbWVzcGFjZSxmdW5jdGlvbigpe2lmKGEuZGlzYWJsZWQpcmV0dXJuITE7CnQodGhpcykuYWRkQ2xhc3MoInVpLXN0YXRlLWFjdGl2ZSIpO3MuYnV0dG9uRWxlbWVudC5hdHRyKCJhcmlhLXByZXNzZWQiLCJ0cnVlIik7dmFyIGU9cy5lbGVtZW50WzBdO28oZSkubm90KGUpLm1hcChmdW5jdGlvbigpe3JldHVybiB0KHRoaXMpLmJ1dHRvbigid2lkZ2V0IilbMF19KS5yZW1vdmVDbGFzcygidWktc3RhdGUtYWN0aXZlIikuYXR0cigiYXJpYS1wcmVzc2VkIiwiZmFsc2UiKX0pO2Vsc2V7dGhpcy5idXR0b25FbGVtZW50LmJpbmQoIm1vdXNlZG93biIrdGhpcy5ldmVudE5hbWVzcGFjZSxmdW5jdGlvbigpe2lmKGEuZGlzYWJsZWQpcmV0dXJuITE7dCh0aGlzKS5hZGRDbGFzcygidWktc3RhdGUtYWN0aXZlIik7ZT10aGlzO3MuZG9jdW1lbnQub25lKCJtb3VzZXVwIixmdW5jdGlvbigpe2U9bnVsbH0pfSkuYmluZCgibW91c2V1cCIrdGhpcy5ldmVudE5hbWVzcGFjZSxmdW5jdGlvbigpe2lmKGEuZGlzYWJsZWQpcmV0dXJuITE7dCh0aGlzKS5yZW1vdmVDbGFzcygidWktc3RhdGUtYWN0aXZlIik7CnJldHVybiB2b2lkIDB9KS5iaW5kKCJrZXlkb3duIit0aGlzLmV2ZW50TmFtZXNwYWNlLGZ1bmN0aW9uKGUpe2lmKGEuZGlzYWJsZWQpcmV0dXJuITE7KGUua2V5Q29kZT09PXQudWkua2V5Q29kZS5TUEFDRXx8ZS5rZXlDb2RlPT09dC51aS5rZXlDb2RlLkVOVEVSKSYmdCh0aGlzKS5hZGRDbGFzcygidWktc3RhdGUtYWN0aXZlIik7cmV0dXJuIHZvaWQgMH0pLmJpbmQoImtleXVwIit0aGlzLmV2ZW50TmFtZXNwYWNlKyIgYmx1ciIrdGhpcy5ldmVudE5hbWVzcGFjZSxmdW5jdGlvbigpe3QodGhpcykucmVtb3ZlQ2xhc3MoInVpLXN0YXRlLWFjdGl2ZSIpfSk7dGhpcy5idXR0b25FbGVtZW50LmlzKCJhIikmJnRoaXMuYnV0dG9uRWxlbWVudC5rZXl1cChmdW5jdGlvbihlKXtlLmtleUNvZGU9PT10LnVpLmtleUNvZGUuU1BBQ0UmJnQodGhpcykuY2xpY2soKX0pfXRoaXMuX3NldE9wdGlvbigiZGlzYWJsZWQiLGEuZGlzYWJsZWQpO3RoaXMuX3Jlc2V0QnV0dG9uKCl9LF9kZXRlcm1pbmVCdXR0b25UeXBlOmZ1bmN0aW9uKCl7dmFyIHQsZSxpOwp0aGlzLnR5cGU9dGhpcy5lbGVtZW50LmlzKCJbdHlwZT1jaGVja2JveF0iKT8iY2hlY2tib3giOnRoaXMuZWxlbWVudC5pcygiW3R5cGU9cmFkaW9dIik/InJhZGlvIjp0aGlzLmVsZW1lbnQuaXMoImlucHV0Iik/ImlucHV0IjoiYnV0dG9uIjtpZigiY2hlY2tib3giPT09dGhpcy50eXBlfHwicmFkaW8iPT09dGhpcy50eXBlKXt0PXRoaXMuZWxlbWVudC5wYXJlbnRzKCkubGFzdCgpO2U9ImxhYmVsW2Zvcj0nIit0aGlzLmVsZW1lbnQuYXR0cigiaWQiKSsiJ10iO3RoaXMuYnV0dG9uRWxlbWVudD10LmZpbmQoZSk7aWYoIXRoaXMuYnV0dG9uRWxlbWVudC5sZW5ndGgpe3Q9dC5sZW5ndGg/dC5zaWJsaW5ncygpOnRoaXMuZWxlbWVudC5zaWJsaW5ncygpO3RoaXMuYnV0dG9uRWxlbWVudD10LmZpbHRlcihlKTt0aGlzLmJ1dHRvbkVsZW1lbnQubGVuZ3RofHwodGhpcy5idXR0b25FbGVtZW50PXQuZmluZChlKSl9dGhpcy5lbGVtZW50LmFkZENsYXNzKCJ1aS1oZWxwZXItaGlkZGVuLWFjY2Vzc2libGUiKTsKaT10aGlzLmVsZW1lbnQuaXMoIjpjaGVja2VkIik7aSYmdGhpcy5idXR0b25FbGVtZW50LmFkZENsYXNzKCJ1aS1zdGF0ZS1hY3RpdmUiKTt0aGlzLmJ1dHRvbkVsZW1lbnQucHJvcCgiYXJpYS1wcmVzc2VkIixpKX1lbHNlIHRoaXMuYnV0dG9uRWxlbWVudD10aGlzLmVsZW1lbnR9LHdpZGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmJ1dHRvbkVsZW1lbnR9LF9kZXN0cm95OmZ1bmN0aW9uKCl7dGhpcy5lbGVtZW50LnJlbW92ZUNsYXNzKCJ1aS1oZWxwZXItaGlkZGVuLWFjY2Vzc2libGUiKTt0aGlzLmJ1dHRvbkVsZW1lbnQucmVtb3ZlQ2xhc3MoaSsiIHVpLXN0YXRlLWFjdGl2ZSAiK3MpLnJlbW92ZUF0dHIoInJvbGUiKS5yZW1vdmVBdHRyKCJhcmlhLXByZXNzZWQiKS5odG1sKHRoaXMuYnV0dG9uRWxlbWVudC5maW5kKCIudWktYnV0dG9uLXRleHQiKS5odG1sKCkpO3RoaXMuaGFzVGl0bGV8fHRoaXMuYnV0dG9uRWxlbWVudC5yZW1vdmVBdHRyKCJ0aXRsZSIpfSxfc2V0T3B0aW9uOmZ1bmN0aW9uKHQsZSl7dGhpcy5fc3VwZXIodCxlKTsKaWYoImRpc2FibGVkIiE9PXQpdGhpcy5fcmVzZXRCdXR0b24oKTtlbHNle3RoaXMuZWxlbWVudC5wcm9wKCJkaXNhYmxlZCIsISFlKTtlJiZ0aGlzLmJ1dHRvbkVsZW1lbnQucmVtb3ZlQ2xhc3MoInVpLXN0YXRlLWZvY3VzIil9fSxyZWZyZXNoOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5lbGVtZW50LmlzKCJpbnB1dCwgYnV0dG9uIik/dGhpcy5lbGVtZW50LmlzKCI6ZGlzYWJsZWQiKTp0aGlzLmVsZW1lbnQuaGFzQ2xhc3MoInVpLWJ1dHRvbi1kaXNhYmxlZCIpO2UhPT10aGlzLm9wdGlvbnMuZGlzYWJsZWQmJnRoaXMuX3NldE9wdGlvbigiZGlzYWJsZWQiLGUpOyJyYWRpbyI9PT10aGlzLnR5cGU/byh0aGlzLmVsZW1lbnRbMF0pLmVhY2goZnVuY3Rpb24oKXt0KHRoaXMpLmlzKCI6Y2hlY2tlZCIpP3QodGhpcykuYnV0dG9uKCJ3aWRnZXQiKS5hZGRDbGFzcygidWktc3RhdGUtYWN0aXZlIikuYXR0cigiYXJpYS1wcmVzc2VkIiwidHJ1ZSIpOnQodGhpcykuYnV0dG9uKCJ3aWRnZXQiKS5yZW1vdmVDbGFzcygidWktc3RhdGUtYWN0aXZlIikuYXR0cigiYXJpYS1wcmVzc2VkIiwiZmFsc2UiKQp9KToiY2hlY2tib3giPT09dGhpcy50eXBlJiYodGhpcy5lbGVtZW50LmlzKCI6Y2hlY2tlZCIpP3RoaXMuYnV0dG9uRWxlbWVudC5hZGRDbGFzcygidWktc3RhdGUtYWN0aXZlIikuYXR0cigiYXJpYS1wcmVzc2VkIiwidHJ1ZSIpOnRoaXMuYnV0dG9uRWxlbWVudC5yZW1vdmVDbGFzcygidWktc3RhdGUtYWN0aXZlIikuYXR0cigiYXJpYS1wcmVzc2VkIiwiZmFsc2UiKSl9LF9yZXNldEJ1dHRvbjpmdW5jdGlvbigpe2lmKCJpbnB1dCIhPT10aGlzLnR5cGUpe3ZhciBlPXRoaXMuYnV0dG9uRWxlbWVudC5yZW1vdmVDbGFzcyhzKSxpPXQoIjxzcGFuPjwvc3Bhbj4iLHRoaXMuZG9jdW1lbnRbMF0pLmFkZENsYXNzKCJ1aS1idXR0b24tdGV4dCIpLmh0bWwodGhpcy5vcHRpb25zLmxhYmVsKS5hcHBlbmRUbyhlLmVtcHR5KCkpLnRleHQoKSxuPXRoaXMub3B0aW9ucy5pY29ucyxvPW4ucHJpbWFyeSYmbi5zZWNvbmRhcnksYT1bXTtpZihuLnByaW1hcnl8fG4uc2Vjb25kYXJ5KXt0aGlzLm9wdGlvbnMudGV4dCYmYS5wdXNoKCJ1aS1idXR0b24tdGV4dC1pY29uIisobz8icyI6bi5wcmltYXJ5PyItcHJpbWFyeSI6Ii1zZWNvbmRhcnkiKSk7Cm4ucHJpbWFyeSYmZS5wcmVwZW5kKCI8c3BhbiBjbGFzcz0ndWktYnV0dG9uLWljb24tcHJpbWFyeSB1aS1pY29uICIrbi5wcmltYXJ5KyInPjwvc3Bhbj4iKTtuLnNlY29uZGFyeSYmZS5hcHBlbmQoIjxzcGFuIGNsYXNzPSd1aS1idXR0b24taWNvbi1zZWNvbmRhcnkgdWktaWNvbiAiK24uc2Vjb25kYXJ5KyInPjwvc3Bhbj4iKTtpZighdGhpcy5vcHRpb25zLnRleHQpe2EucHVzaChvPyJ1aS1idXR0b24taWNvbnMtb25seSI6InVpLWJ1dHRvbi1pY29uLW9ubHkiKTt0aGlzLmhhc1RpdGxlfHxlLmF0dHIoInRpdGxlIix0LnRyaW0oaSkpfX1lbHNlIGEucHVzaCgidWktYnV0dG9uLXRleHQtb25seSIpO2UuYWRkQ2xhc3MoYS5qb2luKCIgIikpfWVsc2UgdGhpcy5vcHRpb25zLmxhYmVsJiZ0aGlzLmVsZW1lbnQudmFsKHRoaXMub3B0aW9ucy5sYWJlbCl9fSk7dC53aWRnZXQoInVpLmJ1dHRvbnNldCIse3ZlcnNpb246IjEuMTAuNCIsb3B0aW9uczp7aXRlbXM6ImJ1dHRvbiwgaW5wdXRbdHlwZT1idXR0b25dLCBpbnB1dFt0eXBlPXN1Ym1pdF0sIGlucHV0W3R5cGU9cmVzZXRdLCBpbnB1dFt0eXBlPWNoZWNrYm94XSwgaW5wdXRbdHlwZT1yYWRpb10sIGEsIDpkYXRhKHVpLWJ1dHRvbikifSxfY3JlYXRlOmZ1bmN0aW9uKCl7dGhpcy5lbGVtZW50LmFkZENsYXNzKCJ1aS1idXR0b25zZXQiKQp9LF9pbml0OmZ1bmN0aW9uKCl7dGhpcy5yZWZyZXNoKCl9LF9zZXRPcHRpb246ZnVuY3Rpb24odCxlKXsiZGlzYWJsZWQiPT09dCYmdGhpcy5idXR0b25zLmJ1dHRvbigib3B0aW9uIix0LGUpO3RoaXMuX3N1cGVyKHQsZSl9LHJlZnJlc2g6ZnVuY3Rpb24oKXt2YXIgZT0icnRsIj09PXRoaXMuZWxlbWVudC5jc3MoImRpcmVjdGlvbiIpO3RoaXMuYnV0dG9ucz10aGlzLmVsZW1lbnQuZmluZCh0aGlzLm9wdGlvbnMuaXRlbXMpLmZpbHRlcigiOnVpLWJ1dHRvbiIpLmJ1dHRvbigicmVmcmVzaCIpLmVuZCgpLm5vdCgiOnVpLWJ1dHRvbiIpLmJ1dHRvbigpLmVuZCgpLm1hcChmdW5jdGlvbigpe3JldHVybiB0KHRoaXMpLmJ1dHRvbigid2lkZ2V0IilbMF19KS5yZW1vdmVDbGFzcygidWktY29ybmVyLWFsbCB1aS1jb3JuZXItbGVmdCB1aS1jb3JuZXItcmlnaHQiKS5maWx0ZXIoIjpmaXJzdCIpLmFkZENsYXNzKGU/InVpLWNvcm5lci1yaWdodCI6InVpLWNvcm5lci1sZWZ0IikuZW5kKCkuZmlsdGVyKCI6bGFzdCIpLmFkZENsYXNzKGU/InVpLWNvcm5lci1sZWZ0IjoidWktY29ybmVyLXJpZ2h0IikuZW5kKCkuZW5kKCkKfSxfZGVzdHJveTpmdW5jdGlvbigpe3RoaXMuZWxlbWVudC5yZW1vdmVDbGFzcygidWktYnV0dG9uc2V0Iik7dGhpcy5idXR0b25zLm1hcChmdW5jdGlvbigpe3JldHVybiB0KHRoaXMpLmJ1dHRvbigid2lkZ2V0IilbMF19KS5yZW1vdmVDbGFzcygidWktY29ybmVyLWxlZnQgdWktY29ybmVyLXJpZ2h0IikuZW5kKCkuYnV0dG9uKCJkZXN0cm95Iil9fSl9KGpRdWVyeSk7IWZ1bmN0aW9uKHQsZSl7ZnVuY3Rpb24gaSgpe3RoaXMuX2N1ckluc3Q9bnVsbDt0aGlzLl9rZXlFdmVudD0hMTt0aGlzLl9kaXNhYmxlZElucHV0cz1bXTt0aGlzLl9kYXRlcGlja2VyU2hvd2luZz0hMTt0aGlzLl9pbkRpYWxvZz0hMTt0aGlzLl9tYWluRGl2SWQ9InVpLWRhdGVwaWNrZXItZGl2Ijt0aGlzLl9pbmxpbmVDbGFzcz0idWktZGF0ZXBpY2tlci1pbmxpbmUiO3RoaXMuX2FwcGVuZENsYXNzPSJ1aS1kYXRlcGlja2VyLWFwcGVuZCI7dGhpcy5fdHJpZ2dlckNsYXNzPSJ1aS1kYXRlcGlja2VyLXRyaWdnZXIiOwp0aGlzLl9kaWFsb2dDbGFzcz0idWktZGF0ZXBpY2tlci1kaWFsb2ciO3RoaXMuX2Rpc2FibGVDbGFzcz0idWktZGF0ZXBpY2tlci1kaXNhYmxlZCI7dGhpcy5fdW5zZWxlY3RhYmxlQ2xhc3M9InVpLWRhdGVwaWNrZXItdW5zZWxlY3RhYmxlIjt0aGlzLl9jdXJyZW50Q2xhc3M9InVpLWRhdGVwaWNrZXItY3VycmVudC1kYXkiO3RoaXMuX2RheU92ZXJDbGFzcz0idWktZGF0ZXBpY2tlci1kYXlzLWNlbGwtb3ZlciI7dGhpcy5yZWdpb25hbD1bXTt0aGlzLnJlZ2lvbmFsWyIiXT17Y2xvc2VUZXh0OiJEb25lIixwcmV2VGV4dDoiUHJldiIsbmV4dFRleHQ6Ik5leHQiLGN1cnJlbnRUZXh0OiJUb2RheSIsbW9udGhOYW1lczpbIkphbnVhcnkiLCJGZWJydWFyeSIsIk1hcmNoIiwiQXByaWwiLCJNYXkiLCJKdW5lIiwiSnVseSIsIkF1Z3VzdCIsIlNlcHRlbWJlciIsIk9jdG9iZXIiLCJOb3ZlbWJlciIsIkRlY2VtYmVyIl0sbW9udGhOYW1lc1Nob3J0OlsiSmFuIiwiRmViIiwiTWFyIiwiQXByIiwiTWF5IiwiSnVuIiwiSnVsIiwiQXVnIiwiU2VwIiwiT2N0IiwiTm92IiwiRGVjIl0sZGF5TmFtZXM6WyJTdW5kYXkiLCJNb25kYXkiLCJUdWVzZGF5IiwiV2VkbmVzZGF5IiwiVGh1cnNkYXkiLCJGcmlkYXkiLCJTYXR1cmRheSJdLGRheU5hbWVzU2hvcnQ6WyJTdW4iLCJNb24iLCJUdWUiLCJXZWQiLCJUaHUiLCJGcmkiLCJTYXQiXSxkYXlOYW1lc01pbjpbIlN1IiwiTW8iLCJUdSIsIldlIiwiVGgiLCJGciIsIlNhIl0sd2Vla0hlYWRlcjoiV2siLGRhdGVGb3JtYXQ6Im1tL2RkL3l5IixmaXJzdERheTowLGlzUlRMOiExLHNob3dNb250aEFmdGVyWWVhcjohMSx5ZWFyU3VmZml4OiIifTsKdGhpcy5fZGVmYXVsdHM9e3Nob3dPbjoiZm9jdXMiLHNob3dBbmltOiJmYWRlSW4iLHNob3dPcHRpb25zOnt9LGRlZmF1bHREYXRlOm51bGwsYXBwZW5kVGV4dDoiIixidXR0b25UZXh0OiIuLi4iLGJ1dHRvbkltYWdlOiIiLGJ1dHRvbkltYWdlT25seTohMSxoaWRlSWZOb1ByZXZOZXh0OiExLG5hdmlnYXRpb25Bc0RhdGVGb3JtYXQ6ITEsZ290b0N1cnJlbnQ6ITEsY2hhbmdlTW9udGg6ITEsY2hhbmdlWWVhcjohMSx5ZWFyUmFuZ2U6ImMtMTA6YysxMCIsc2hvd090aGVyTW9udGhzOiExLHNlbGVjdE90aGVyTW9udGhzOiExLHNob3dXZWVrOiExLGNhbGN1bGF0ZVdlZWs6dGhpcy5pc284NjAxV2VlayxzaG9ydFllYXJDdXRvZmY6IisxMCIsbWluRGF0ZTpudWxsLG1heERhdGU6bnVsbCxkdXJhdGlvbjoiZmFzdCIsYmVmb3JlU2hvd0RheTpudWxsLGJlZm9yZVNob3c6bnVsbCxvblNlbGVjdDpudWxsLG9uQ2hhbmdlTW9udGhZZWFyOm51bGwsb25DbG9zZTpudWxsLG51bWJlck9mTW9udGhzOjEsc2hvd0N1cnJlbnRBdFBvczowLHN0ZXBNb250aHM6MSxzdGVwQmlnTW9udGhzOjEyLGFsdEZpZWxkOiIiLGFsdEZvcm1hdDoiIixjb25zdHJhaW5JbnB1dDohMCxzaG93QnV0dG9uUGFuZWw6ITEsYXV0b1NpemU6ITEsZGlzYWJsZWQ6ITF9Owp0LmV4dGVuZCh0aGlzLl9kZWZhdWx0cyx0aGlzLnJlZ2lvbmFsWyIiXSk7dGhpcy5kcERpdj1zKHQoIjxkaXYgaWQ9JyIrdGhpcy5fbWFpbkRpdklkKyInIGNsYXNzPSd1aS1kYXRlcGlja2VyIHVpLXdpZGdldCB1aS13aWRnZXQtY29udGVudCB1aS1oZWxwZXItY2xlYXJmaXggdWktY29ybmVyLWFsbCc+PC9kaXY+IikpfWZ1bmN0aW9uIHMoZSl7dmFyIGk9ImJ1dHRvbiwgLnVpLWRhdGVwaWNrZXItcHJldiwgLnVpLWRhdGVwaWNrZXItbmV4dCwgLnVpLWRhdGVwaWNrZXItY2FsZW5kYXIgdGQgYSI7cmV0dXJuIGUuZGVsZWdhdGUoaSwibW91c2VvdXQiLGZ1bmN0aW9uKCl7dCh0aGlzKS5yZW1vdmVDbGFzcygidWktc3RhdGUtaG92ZXIiKTstMSE9PXRoaXMuY2xhc3NOYW1lLmluZGV4T2YoInVpLWRhdGVwaWNrZXItcHJldiIpJiZ0KHRoaXMpLnJlbW92ZUNsYXNzKCJ1aS1kYXRlcGlja2VyLXByZXYtaG92ZXIiKTstMSE9PXRoaXMuY2xhc3NOYW1lLmluZGV4T2YoInVpLWRhdGVwaWNrZXItbmV4dCIpJiZ0KHRoaXMpLnJlbW92ZUNsYXNzKCJ1aS1kYXRlcGlja2VyLW5leHQtaG92ZXIiKQp9KS5kZWxlZ2F0ZShpLCJtb3VzZW92ZXIiLGZ1bmN0aW9uKCl7aWYoIXQuZGF0ZXBpY2tlci5faXNEaXNhYmxlZERhdGVwaWNrZXIoby5pbmxpbmU/ZS5wYXJlbnQoKVswXTpvLmlucHV0WzBdKSl7dCh0aGlzKS5wYXJlbnRzKCIudWktZGF0ZXBpY2tlci1jYWxlbmRhciIpLmZpbmQoImEiKS5yZW1vdmVDbGFzcygidWktc3RhdGUtaG92ZXIiKTt0KHRoaXMpLmFkZENsYXNzKCJ1aS1zdGF0ZS1ob3ZlciIpOy0xIT09dGhpcy5jbGFzc05hbWUuaW5kZXhPZigidWktZGF0ZXBpY2tlci1wcmV2IikmJnQodGhpcykuYWRkQ2xhc3MoInVpLWRhdGVwaWNrZXItcHJldi1ob3ZlciIpOy0xIT09dGhpcy5jbGFzc05hbWUuaW5kZXhPZigidWktZGF0ZXBpY2tlci1uZXh0IikmJnQodGhpcykuYWRkQ2xhc3MoInVpLWRhdGVwaWNrZXItbmV4dC1ob3ZlciIpfX0pfWZ1bmN0aW9uIG4oZSxpKXt0LmV4dGVuZChlLGkpO2Zvcih2YXIgcyBpbiBpKW51bGw9PWlbc10mJihlW3NdPWlbc10pO3JldHVybiBlCn10LmV4dGVuZCh0LnVpLHtkYXRlcGlja2VyOnt2ZXJzaW9uOiIxLjEwLjQifX0pO3ZhciBvLGE9ImRhdGVwaWNrZXIiO3QuZXh0ZW5kKGkucHJvdG90eXBlLHttYXJrZXJDbGFzc05hbWU6Imhhc0RhdGVwaWNrZXIiLG1heFJvd3M6NCxfd2lkZ2V0RGF0ZXBpY2tlcjpmdW5jdGlvbigpe3JldHVybiB0aGlzLmRwRGl2fSxzZXREZWZhdWx0czpmdW5jdGlvbih0KXtuKHRoaXMuX2RlZmF1bHRzLHR8fHt9KTtyZXR1cm4gdGhpc30sX2F0dGFjaERhdGVwaWNrZXI6ZnVuY3Rpb24oZSxpKXt2YXIgcyxuLG87cz1lLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCk7bj0iZGl2Ij09PXN8fCJzcGFuIj09PXM7aWYoIWUuaWQpe3RoaXMudXVpZCs9MTtlLmlkPSJkcCIrdGhpcy51dWlkfW89dGhpcy5fbmV3SW5zdCh0KGUpLG4pO28uc2V0dGluZ3M9dC5leHRlbmQoe30saXx8e30pOyJpbnB1dCI9PT1zP3RoaXMuX2Nvbm5lY3REYXRlcGlja2VyKGUsbyk6biYmdGhpcy5faW5saW5lRGF0ZXBpY2tlcihlLG8pCn0sX25ld0luc3Q6ZnVuY3Rpb24oZSxpKXt2YXIgbj1lWzBdLmlkLnJlcGxhY2UoLyhbXkEtWmEtejAtOV9cLV0pL2csIlxcXFwkMSIpO3JldHVybntpZDpuLGlucHV0OmUsc2VsZWN0ZWREYXk6MCxzZWxlY3RlZE1vbnRoOjAsc2VsZWN0ZWRZZWFyOjAsZHJhd01vbnRoOjAsZHJhd1llYXI6MCxpbmxpbmU6aSxkcERpdjppP3ModCgiPGRpdiBjbGFzcz0nIit0aGlzLl9pbmxpbmVDbGFzcysiIHVpLWRhdGVwaWNrZXIgdWktd2lkZ2V0IHVpLXdpZGdldC1jb250ZW50IHVpLWhlbHBlci1jbGVhcmZpeCB1aS1jb3JuZXItYWxsJz48L2Rpdj4iKSk6dGhpcy5kcERpdn19LF9jb25uZWN0RGF0ZXBpY2tlcjpmdW5jdGlvbihlLGkpe3ZhciBzPXQoZSk7aS5hcHBlbmQ9dChbXSk7aS50cmlnZ2VyPXQoW10pO2lmKCFzLmhhc0NsYXNzKHRoaXMubWFya2VyQ2xhc3NOYW1lKSl7dGhpcy5fYXR0YWNobWVudHMocyxpKTtzLmFkZENsYXNzKHRoaXMubWFya2VyQ2xhc3NOYW1lKS5rZXlkb3duKHRoaXMuX2RvS2V5RG93bikua2V5cHJlc3ModGhpcy5fZG9LZXlQcmVzcykua2V5dXAodGhpcy5fZG9LZXlVcCk7CnRoaXMuX2F1dG9TaXplKGkpO3QuZGF0YShlLGEsaSk7aS5zZXR0aW5ncy5kaXNhYmxlZCYmdGhpcy5fZGlzYWJsZURhdGVwaWNrZXIoZSl9fSxfYXR0YWNobWVudHM6ZnVuY3Rpb24oZSxpKXt2YXIgcyxuLG8sYT10aGlzLl9nZXQoaSwiYXBwZW5kVGV4dCIpLHI9dGhpcy5fZ2V0KGksImlzUlRMIik7aS5hcHBlbmQmJmkuYXBwZW5kLnJlbW92ZSgpO2lmKGEpe2kuYXBwZW5kPXQoIjxzcGFuIGNsYXNzPSciK3RoaXMuX2FwcGVuZENsYXNzKyInPiIrYSsiPC9zcGFuPiIpO2Vbcj8iYmVmb3JlIjoiYWZ0ZXIiXShpLmFwcGVuZCl9ZS51bmJpbmQoImZvY3VzIix0aGlzLl9zaG93RGF0ZXBpY2tlcik7aS50cmlnZ2VyJiZpLnRyaWdnZXIucmVtb3ZlKCk7cz10aGlzLl9nZXQoaSwic2hvd09uIik7KCJmb2N1cyI9PT1zfHwiYm90aCI9PT1zKSYmZS5mb2N1cyh0aGlzLl9zaG93RGF0ZXBpY2tlcik7aWYoImJ1dHRvbiI9PT1zfHwiYm90aCI9PT1zKXtuPXRoaXMuX2dldChpLCJidXR0b25UZXh0Iik7Cm89dGhpcy5fZ2V0KGksImJ1dHRvbkltYWdlIik7aS50cmlnZ2VyPXQodGhpcy5fZ2V0KGksImJ1dHRvbkltYWdlT25seSIpP3QoIjxpbWcvPiIpLmFkZENsYXNzKHRoaXMuX3RyaWdnZXJDbGFzcykuYXR0cih7c3JjOm8sYWx0Om4sdGl0bGU6bn0pOnQoIjxidXR0b24gdHlwZT0nYnV0dG9uJz48L2J1dHRvbj4iKS5hZGRDbGFzcyh0aGlzLl90cmlnZ2VyQ2xhc3MpLmh0bWwobz90KCI8aW1nLz4iKS5hdHRyKHtzcmM6byxhbHQ6bix0aXRsZTpufSk6bikpO2Vbcj8iYmVmb3JlIjoiYWZ0ZXIiXShpLnRyaWdnZXIpO2kudHJpZ2dlci5jbGljayhmdW5jdGlvbigpe2lmKHQuZGF0ZXBpY2tlci5fZGF0ZXBpY2tlclNob3dpbmcmJnQuZGF0ZXBpY2tlci5fbGFzdElucHV0PT09ZVswXSl0LmRhdGVwaWNrZXIuX2hpZGVEYXRlcGlja2VyKCk7ZWxzZSBpZih0LmRhdGVwaWNrZXIuX2RhdGVwaWNrZXJTaG93aW5nJiZ0LmRhdGVwaWNrZXIuX2xhc3RJbnB1dCE9PWVbMF0pe3QuZGF0ZXBpY2tlci5faGlkZURhdGVwaWNrZXIoKTsKdC5kYXRlcGlja2VyLl9zaG93RGF0ZXBpY2tlcihlWzBdKX1lbHNlIHQuZGF0ZXBpY2tlci5fc2hvd0RhdGVwaWNrZXIoZVswXSk7cmV0dXJuITF9KX19LF9hdXRvU2l6ZTpmdW5jdGlvbih0KXtpZih0aGlzLl9nZXQodCwiYXV0b1NpemUiKSYmIXQuaW5saW5lKXt2YXIgZSxpLHMsbixvPW5ldyBEYXRlKDIwMDksMTEsMjApLGE9dGhpcy5fZ2V0KHQsImRhdGVGb3JtYXQiKTtpZihhLm1hdGNoKC9bRE1dLykpe2U9ZnVuY3Rpb24odCl7aT0wO3M9MDtmb3Iobj0wO248dC5sZW5ndGg7bisrKWlmKHRbbl0ubGVuZ3RoPmkpe2k9dFtuXS5sZW5ndGg7cz1ufXJldHVybiBzfTtvLnNldE1vbnRoKGUodGhpcy5fZ2V0KHQsYS5tYXRjaCgvTU0vKT8ibW9udGhOYW1lcyI6Im1vbnRoTmFtZXNTaG9ydCIpKSk7by5zZXREYXRlKGUodGhpcy5fZ2V0KHQsYS5tYXRjaCgvREQvKT8iZGF5TmFtZXMiOiJkYXlOYW1lc1Nob3J0IikpKzIwLW8uZ2V0RGF5KCkpfXQuaW5wdXQuYXR0cigic2l6ZSIsdGhpcy5fZm9ybWF0RGF0ZSh0LG8pLmxlbmd0aCkKfX0sX2lubGluZURhdGVwaWNrZXI6ZnVuY3Rpb24oZSxpKXt2YXIgcz10KGUpO2lmKCFzLmhhc0NsYXNzKHRoaXMubWFya2VyQ2xhc3NOYW1lKSl7cy5hZGRDbGFzcyh0aGlzLm1hcmtlckNsYXNzTmFtZSkuYXBwZW5kKGkuZHBEaXYpO3QuZGF0YShlLGEsaSk7dGhpcy5fc2V0RGF0ZShpLHRoaXMuX2dldERlZmF1bHREYXRlKGkpLCEwKTt0aGlzLl91cGRhdGVEYXRlcGlja2VyKGkpO3RoaXMuX3VwZGF0ZUFsdGVybmF0ZShpKTtpLnNldHRpbmdzLmRpc2FibGVkJiZ0aGlzLl9kaXNhYmxlRGF0ZXBpY2tlcihlKTtpLmRwRGl2LmNzcygiZGlzcGxheSIsImJsb2NrIil9fSxfZGlhbG9nRGF0ZXBpY2tlcjpmdW5jdGlvbihlLGkscyxvLHIpe3ZhciBoLGwsdSxjLGQscD10aGlzLl9kaWFsb2dJbnN0O2lmKCFwKXt0aGlzLnV1aWQrPTE7aD0iZHAiK3RoaXMudXVpZDt0aGlzLl9kaWFsb2dJbnB1dD10KCI8aW5wdXQgdHlwZT0ndGV4dCcgaWQ9JyIraCsiJyBzdHlsZT0ncG9zaXRpb246IGFic29sdXRlOyB0b3A6IC0xMDBweDsgd2lkdGg6IDBweDsnLz4iKTsKdGhpcy5fZGlhbG9nSW5wdXQua2V5ZG93bih0aGlzLl9kb0tleURvd24pO3QoImJvZHkiKS5hcHBlbmQodGhpcy5fZGlhbG9nSW5wdXQpO3A9dGhpcy5fZGlhbG9nSW5zdD10aGlzLl9uZXdJbnN0KHRoaXMuX2RpYWxvZ0lucHV0LCExKTtwLnNldHRpbmdzPXt9O3QuZGF0YSh0aGlzLl9kaWFsb2dJbnB1dFswXSxhLHApfW4ocC5zZXR0aW5ncyxvfHx7fSk7aT1pJiZpLmNvbnN0cnVjdG9yPT09RGF0ZT90aGlzLl9mb3JtYXREYXRlKHAsaSk6aTt0aGlzLl9kaWFsb2dJbnB1dC52YWwoaSk7dGhpcy5fcG9zPXI/ci5sZW5ndGg/cjpbci5wYWdlWCxyLnBhZ2VZXTpudWxsO2lmKCF0aGlzLl9wb3Mpe2w9ZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmNsaWVudFdpZHRoO3U9ZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmNsaWVudEhlaWdodDtjPWRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zY3JvbGxMZWZ0fHxkb2N1bWVudC5ib2R5LnNjcm9sbExlZnQ7ZD1kb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc2Nyb2xsVG9wfHxkb2N1bWVudC5ib2R5LnNjcm9sbFRvcDsKdGhpcy5fcG9zPVtsLzItMTAwK2MsdS8yLTE1MCtkXX10aGlzLl9kaWFsb2dJbnB1dC5jc3MoImxlZnQiLHRoaXMuX3Bvc1swXSsyMCsicHgiKS5jc3MoInRvcCIsdGhpcy5fcG9zWzFdKyJweCIpO3Auc2V0dGluZ3Mub25TZWxlY3Q9czt0aGlzLl9pbkRpYWxvZz0hMDt0aGlzLmRwRGl2LmFkZENsYXNzKHRoaXMuX2RpYWxvZ0NsYXNzKTt0aGlzLl9zaG93RGF0ZXBpY2tlcih0aGlzLl9kaWFsb2dJbnB1dFswXSk7dC5ibG9ja1VJJiZ0LmJsb2NrVUkodGhpcy5kcERpdik7dC5kYXRhKHRoaXMuX2RpYWxvZ0lucHV0WzBdLGEscCk7cmV0dXJuIHRoaXN9LF9kZXN0cm95RGF0ZXBpY2tlcjpmdW5jdGlvbihlKXt2YXIgaSxzPXQoZSksbj10LmRhdGEoZSxhKTtpZihzLmhhc0NsYXNzKHRoaXMubWFya2VyQ2xhc3NOYW1lKSl7aT1lLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCk7dC5yZW1vdmVEYXRhKGUsYSk7aWYoImlucHV0Ij09PWkpe24uYXBwZW5kLnJlbW92ZSgpO24udHJpZ2dlci5yZW1vdmUoKTsKcy5yZW1vdmVDbGFzcyh0aGlzLm1hcmtlckNsYXNzTmFtZSkudW5iaW5kKCJmb2N1cyIsdGhpcy5fc2hvd0RhdGVwaWNrZXIpLnVuYmluZCgia2V5ZG93biIsdGhpcy5fZG9LZXlEb3duKS51bmJpbmQoImtleXByZXNzIix0aGlzLl9kb0tleVByZXNzKS51bmJpbmQoImtleXVwIix0aGlzLl9kb0tleVVwKX1lbHNlKCJkaXYiPT09aXx8InNwYW4iPT09aSkmJnMucmVtb3ZlQ2xhc3ModGhpcy5tYXJrZXJDbGFzc05hbWUpLmVtcHR5KCl9fSxfZW5hYmxlRGF0ZXBpY2tlcjpmdW5jdGlvbihlKXt2YXIgaSxzLG49dChlKSxvPXQuZGF0YShlLGEpO2lmKG4uaGFzQ2xhc3ModGhpcy5tYXJrZXJDbGFzc05hbWUpKXtpPWUubm9kZU5hbWUudG9Mb3dlckNhc2UoKTtpZigiaW5wdXQiPT09aSl7ZS5kaXNhYmxlZD0hMTtvLnRyaWdnZXIuZmlsdGVyKCJidXR0b24iKS5lYWNoKGZ1bmN0aW9uKCl7dGhpcy5kaXNhYmxlZD0hMX0pLmVuZCgpLmZpbHRlcigiaW1nIikuY3NzKHtvcGFjaXR5OiIxLjAiLGN1cnNvcjoiIn0pCn1lbHNlIGlmKCJkaXYiPT09aXx8InNwYW4iPT09aSl7cz1uLmNoaWxkcmVuKCIuIit0aGlzLl9pbmxpbmVDbGFzcyk7cy5jaGlsZHJlbigpLnJlbW92ZUNsYXNzKCJ1aS1zdGF0ZS1kaXNhYmxlZCIpO3MuZmluZCgic2VsZWN0LnVpLWRhdGVwaWNrZXItbW9udGgsIHNlbGVjdC51aS1kYXRlcGlja2VyLXllYXIiKS5wcm9wKCJkaXNhYmxlZCIsITEpfXRoaXMuX2Rpc2FibGVkSW5wdXRzPXQubWFwKHRoaXMuX2Rpc2FibGVkSW5wdXRzLGZ1bmN0aW9uKHQpe3JldHVybiB0PT09ZT9udWxsOnR9KX19LF9kaXNhYmxlRGF0ZXBpY2tlcjpmdW5jdGlvbihlKXt2YXIgaSxzLG49dChlKSxvPXQuZGF0YShlLGEpO2lmKG4uaGFzQ2xhc3ModGhpcy5tYXJrZXJDbGFzc05hbWUpKXtpPWUubm9kZU5hbWUudG9Mb3dlckNhc2UoKTtpZigiaW5wdXQiPT09aSl7ZS5kaXNhYmxlZD0hMDtvLnRyaWdnZXIuZmlsdGVyKCJidXR0b24iKS5lYWNoKGZ1bmN0aW9uKCl7dGhpcy5kaXNhYmxlZD0hMH0pLmVuZCgpLmZpbHRlcigiaW1nIikuY3NzKHtvcGFjaXR5OiIwLjUiLGN1cnNvcjoiZGVmYXVsdCJ9KQp9ZWxzZSBpZigiZGl2Ij09PWl8fCJzcGFuIj09PWkpe3M9bi5jaGlsZHJlbigiLiIrdGhpcy5faW5saW5lQ2xhc3MpO3MuY2hpbGRyZW4oKS5hZGRDbGFzcygidWktc3RhdGUtZGlzYWJsZWQiKTtzLmZpbmQoInNlbGVjdC51aS1kYXRlcGlja2VyLW1vbnRoLCBzZWxlY3QudWktZGF0ZXBpY2tlci15ZWFyIikucHJvcCgiZGlzYWJsZWQiLCEwKX10aGlzLl9kaXNhYmxlZElucHV0cz10Lm1hcCh0aGlzLl9kaXNhYmxlZElucHV0cyxmdW5jdGlvbih0KXtyZXR1cm4gdD09PWU/bnVsbDp0fSk7dGhpcy5fZGlzYWJsZWRJbnB1dHNbdGhpcy5fZGlzYWJsZWRJbnB1dHMubGVuZ3RoXT1lfX0sX2lzRGlzYWJsZWREYXRlcGlja2VyOmZ1bmN0aW9uKHQpe2lmKCF0KXJldHVybiExO2Zvcih2YXIgZT0wO2U8dGhpcy5fZGlzYWJsZWRJbnB1dHMubGVuZ3RoO2UrKylpZih0aGlzLl9kaXNhYmxlZElucHV0c1tlXT09PXQpcmV0dXJuITA7cmV0dXJuITF9LF9nZXRJbnN0OmZ1bmN0aW9uKGUpe3RyeXtyZXR1cm4gdC5kYXRhKGUsYSkKfWNhdGNoKGkpe3Rocm93Ik1pc3NpbmcgaW5zdGFuY2UgZGF0YSBmb3IgdGhpcyBkYXRlcGlja2VyIn19LF9vcHRpb25EYXRlcGlja2VyOmZ1bmN0aW9uKGkscyxvKXt2YXIgYSxyLGgsbCx1PXRoaXMuX2dldEluc3QoaSk7aWYoMj09PWFyZ3VtZW50cy5sZW5ndGgmJiJzdHJpbmciPT10eXBlb2YgcylyZXR1cm4iZGVmYXVsdHMiPT09cz90LmV4dGVuZCh7fSx0LmRhdGVwaWNrZXIuX2RlZmF1bHRzKTp1PyJhbGwiPT09cz90LmV4dGVuZCh7fSx1LnNldHRpbmdzKTp0aGlzLl9nZXQodSxzKTpudWxsO2E9c3x8e307aWYoInN0cmluZyI9PXR5cGVvZiBzKXthPXt9O2Fbc109b31pZih1KXt0aGlzLl9jdXJJbnN0PT09dSYmdGhpcy5faGlkZURhdGVwaWNrZXIoKTtyPXRoaXMuX2dldERhdGVEYXRlcGlja2VyKGksITApO2g9dGhpcy5fZ2V0TWluTWF4RGF0ZSh1LCJtaW4iKTtsPXRoaXMuX2dldE1pbk1heERhdGUodSwibWF4Iik7bih1LnNldHRpbmdzLGEpO251bGwhPT1oJiZhLmRhdGVGb3JtYXQhPT1lJiZhLm1pbkRhdGU9PT1lJiYodS5zZXR0aW5ncy5taW5EYXRlPXRoaXMuX2Zvcm1hdERhdGUodSxoKSk7Cm51bGwhPT1sJiZhLmRhdGVGb3JtYXQhPT1lJiZhLm1heERhdGU9PT1lJiYodS5zZXR0aW5ncy5tYXhEYXRlPXRoaXMuX2Zvcm1hdERhdGUodSxsKSk7ImRpc2FibGVkImluIGEmJihhLmRpc2FibGVkP3RoaXMuX2Rpc2FibGVEYXRlcGlja2VyKGkpOnRoaXMuX2VuYWJsZURhdGVwaWNrZXIoaSkpO3RoaXMuX2F0dGFjaG1lbnRzKHQoaSksdSk7dGhpcy5fYXV0b1NpemUodSk7dGhpcy5fc2V0RGF0ZSh1LHIpO3RoaXMuX3VwZGF0ZUFsdGVybmF0ZSh1KTt0aGlzLl91cGRhdGVEYXRlcGlja2VyKHUpfX0sX2NoYW5nZURhdGVwaWNrZXI6ZnVuY3Rpb24odCxlLGkpe3RoaXMuX29wdGlvbkRhdGVwaWNrZXIodCxlLGkpfSxfcmVmcmVzaERhdGVwaWNrZXI6ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy5fZ2V0SW5zdCh0KTtlJiZ0aGlzLl91cGRhdGVEYXRlcGlja2VyKGUpfSxfc2V0RGF0ZURhdGVwaWNrZXI6ZnVuY3Rpb24odCxlKXt2YXIgaT10aGlzLl9nZXRJbnN0KHQpO2lmKGkpe3RoaXMuX3NldERhdGUoaSxlKTsKdGhpcy5fdXBkYXRlRGF0ZXBpY2tlcihpKTt0aGlzLl91cGRhdGVBbHRlcm5hdGUoaSl9fSxfZ2V0RGF0ZURhdGVwaWNrZXI6ZnVuY3Rpb24odCxlKXt2YXIgaT10aGlzLl9nZXRJbnN0KHQpO2kmJiFpLmlubGluZSYmdGhpcy5fc2V0RGF0ZUZyb21GaWVsZChpLGUpO3JldHVybiBpP3RoaXMuX2dldERhdGUoaSk6bnVsbH0sX2RvS2V5RG93bjpmdW5jdGlvbihlKXt2YXIgaSxzLG4sbz10LmRhdGVwaWNrZXIuX2dldEluc3QoZS50YXJnZXQpLGE9ITAscj1vLmRwRGl2LmlzKCIudWktZGF0ZXBpY2tlci1ydGwiKTtvLl9rZXlFdmVudD0hMDtpZih0LmRhdGVwaWNrZXIuX2RhdGVwaWNrZXJTaG93aW5nKXN3aXRjaChlLmtleUNvZGUpe2Nhc2UgOTp0LmRhdGVwaWNrZXIuX2hpZGVEYXRlcGlja2VyKCk7YT0hMTticmVhaztjYXNlIDEzOm49dCgidGQuIit0LmRhdGVwaWNrZXIuX2RheU92ZXJDbGFzcysiOm5vdCguIit0LmRhdGVwaWNrZXIuX2N1cnJlbnRDbGFzcysiKSIsby5kcERpdik7Cm5bMF0mJnQuZGF0ZXBpY2tlci5fc2VsZWN0RGF5KGUudGFyZ2V0LG8uc2VsZWN0ZWRNb250aCxvLnNlbGVjdGVkWWVhcixuWzBdKTtpPXQuZGF0ZXBpY2tlci5fZ2V0KG8sIm9uU2VsZWN0Iik7aWYoaSl7cz10LmRhdGVwaWNrZXIuX2Zvcm1hdERhdGUobyk7aS5hcHBseShvLmlucHV0P28uaW5wdXRbMF06bnVsbCxbcyxvXSl9ZWxzZSB0LmRhdGVwaWNrZXIuX2hpZGVEYXRlcGlja2VyKCk7cmV0dXJuITE7Y2FzZSAyNzp0LmRhdGVwaWNrZXIuX2hpZGVEYXRlcGlja2VyKCk7YnJlYWs7Y2FzZSAzMzp0LmRhdGVwaWNrZXIuX2FkanVzdERhdGUoZS50YXJnZXQsZS5jdHJsS2V5Py10LmRhdGVwaWNrZXIuX2dldChvLCJzdGVwQmlnTW9udGhzIik6LXQuZGF0ZXBpY2tlci5fZ2V0KG8sInN0ZXBNb250aHMiKSwiTSIpO2JyZWFrO2Nhc2UgMzQ6dC5kYXRlcGlja2VyLl9hZGp1c3REYXRlKGUudGFyZ2V0LGUuY3RybEtleT8rdC5kYXRlcGlja2VyLl9nZXQobywic3RlcEJpZ01vbnRocyIpOit0LmRhdGVwaWNrZXIuX2dldChvLCJzdGVwTW9udGhzIiksIk0iKTsKYnJlYWs7Y2FzZSAzNTooZS5jdHJsS2V5fHxlLm1ldGFLZXkpJiZ0LmRhdGVwaWNrZXIuX2NsZWFyRGF0ZShlLnRhcmdldCk7YT1lLmN0cmxLZXl8fGUubWV0YUtleTticmVhaztjYXNlIDM2OihlLmN0cmxLZXl8fGUubWV0YUtleSkmJnQuZGF0ZXBpY2tlci5fZ290b1RvZGF5KGUudGFyZ2V0KTthPWUuY3RybEtleXx8ZS5tZXRhS2V5O2JyZWFrO2Nhc2UgMzc6KGUuY3RybEtleXx8ZS5tZXRhS2V5KSYmdC5kYXRlcGlja2VyLl9hZGp1c3REYXRlKGUudGFyZ2V0LHI/MTotMSwiRCIpO2E9ZS5jdHJsS2V5fHxlLm1ldGFLZXk7ZS5vcmlnaW5hbEV2ZW50LmFsdEtleSYmdC5kYXRlcGlja2VyLl9hZGp1c3REYXRlKGUudGFyZ2V0LGUuY3RybEtleT8tdC5kYXRlcGlja2VyLl9nZXQobywic3RlcEJpZ01vbnRocyIpOi10LmRhdGVwaWNrZXIuX2dldChvLCJzdGVwTW9udGhzIiksIk0iKTticmVhaztjYXNlIDM4OihlLmN0cmxLZXl8fGUubWV0YUtleSkmJnQuZGF0ZXBpY2tlci5fYWRqdXN0RGF0ZShlLnRhcmdldCwtNywiRCIpOwphPWUuY3RybEtleXx8ZS5tZXRhS2V5O2JyZWFrO2Nhc2UgMzk6KGUuY3RybEtleXx8ZS5tZXRhS2V5KSYmdC5kYXRlcGlja2VyLl9hZGp1c3REYXRlKGUudGFyZ2V0LHI/LTE6MSwiRCIpO2E9ZS5jdHJsS2V5fHxlLm1ldGFLZXk7ZS5vcmlnaW5hbEV2ZW50LmFsdEtleSYmdC5kYXRlcGlja2VyLl9hZGp1c3REYXRlKGUudGFyZ2V0LGUuY3RybEtleT8rdC5kYXRlcGlja2VyLl9nZXQobywic3RlcEJpZ01vbnRocyIpOit0LmRhdGVwaWNrZXIuX2dldChvLCJzdGVwTW9udGhzIiksIk0iKTticmVhaztjYXNlIDQwOihlLmN0cmxLZXl8fGUubWV0YUtleSkmJnQuZGF0ZXBpY2tlci5fYWRqdXN0RGF0ZShlLnRhcmdldCw3LCJEIik7YT1lLmN0cmxLZXl8fGUubWV0YUtleTticmVhaztkZWZhdWx0OmE9ITF9ZWxzZSAzNj09PWUua2V5Q29kZSYmZS5jdHJsS2V5P3QuZGF0ZXBpY2tlci5fc2hvd0RhdGVwaWNrZXIodGhpcyk6YT0hMTtpZihhKXtlLnByZXZlbnREZWZhdWx0KCk7ZS5zdG9wUHJvcGFnYXRpb24oKQp9fSxfZG9LZXlQcmVzczpmdW5jdGlvbihlKXt2YXIgaSxzLG49dC5kYXRlcGlja2VyLl9nZXRJbnN0KGUudGFyZ2V0KTtpZih0LmRhdGVwaWNrZXIuX2dldChuLCJjb25zdHJhaW5JbnB1dCIpKXtpPXQuZGF0ZXBpY2tlci5fcG9zc2libGVDaGFycyh0LmRhdGVwaWNrZXIuX2dldChuLCJkYXRlRm9ybWF0IikpO3M9U3RyaW5nLmZyb21DaGFyQ29kZShudWxsPT1lLmNoYXJDb2RlP2Uua2V5Q29kZTplLmNoYXJDb2RlKTtyZXR1cm4gZS5jdHJsS2V5fHxlLm1ldGFLZXl8fCIgIj5zfHwhaXx8aS5pbmRleE9mKHMpPi0xfX0sX2RvS2V5VXA6ZnVuY3Rpb24oZSl7dmFyIGkscz10LmRhdGVwaWNrZXIuX2dldEluc3QoZS50YXJnZXQpO2lmKHMuaW5wdXQudmFsKCkhPT1zLmxhc3RWYWwpdHJ5e2k9dC5kYXRlcGlja2VyLnBhcnNlRGF0ZSh0LmRhdGVwaWNrZXIuX2dldChzLCJkYXRlRm9ybWF0Iikscy5pbnB1dD9zLmlucHV0LnZhbCgpOm51bGwsdC5kYXRlcGlja2VyLl9nZXRGb3JtYXRDb25maWcocykpOwppZihpKXt0LmRhdGVwaWNrZXIuX3NldERhdGVGcm9tRmllbGQocyk7dC5kYXRlcGlja2VyLl91cGRhdGVBbHRlcm5hdGUocyk7dC5kYXRlcGlja2VyLl91cGRhdGVEYXRlcGlja2VyKHMpfX1jYXRjaChuKXt9cmV0dXJuITB9LF9zaG93RGF0ZXBpY2tlcjpmdW5jdGlvbihlKXtlPWUudGFyZ2V0fHxlOyJpbnB1dCIhPT1lLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCkmJihlPXQoImlucHV0IixlLnBhcmVudE5vZGUpWzBdKTtpZighdC5kYXRlcGlja2VyLl9pc0Rpc2FibGVkRGF0ZXBpY2tlcihlKSYmdC5kYXRlcGlja2VyLl9sYXN0SW5wdXQhPT1lKXt2YXIgaSxzLG8sYSxyLGgsbDtpPXQuZGF0ZXBpY2tlci5fZ2V0SW5zdChlKTtpZih0LmRhdGVwaWNrZXIuX2N1ckluc3QmJnQuZGF0ZXBpY2tlci5fY3VySW5zdCE9PWkpe3QuZGF0ZXBpY2tlci5fY3VySW5zdC5kcERpdi5zdG9wKCEwLCEwKTtpJiZ0LmRhdGVwaWNrZXIuX2RhdGVwaWNrZXJTaG93aW5nJiZ0LmRhdGVwaWNrZXIuX2hpZGVEYXRlcGlja2VyKHQuZGF0ZXBpY2tlci5fY3VySW5zdC5pbnB1dFswXSkKfXM9dC5kYXRlcGlja2VyLl9nZXQoaSwiYmVmb3JlU2hvdyIpO289cz9zLmFwcGx5KGUsW2UsaV0pOnt9O2lmKG8hPT0hMSl7bihpLnNldHRpbmdzLG8pO2kubGFzdFZhbD1udWxsO3QuZGF0ZXBpY2tlci5fbGFzdElucHV0PWU7dC5kYXRlcGlja2VyLl9zZXREYXRlRnJvbUZpZWxkKGkpO3QuZGF0ZXBpY2tlci5faW5EaWFsb2cmJihlLnZhbHVlPSIiKTtpZighdC5kYXRlcGlja2VyLl9wb3Mpe3QuZGF0ZXBpY2tlci5fcG9zPXQuZGF0ZXBpY2tlci5fZmluZFBvcyhlKTt0LmRhdGVwaWNrZXIuX3Bvc1sxXSs9ZS5vZmZzZXRIZWlnaHR9YT0hMTt0KGUpLnBhcmVudHMoKS5lYWNoKGZ1bmN0aW9uKCl7YXw9ImZpeGVkIj09PXQodGhpcykuY3NzKCJwb3NpdGlvbiIpO3JldHVybiFhfSk7cj17bGVmdDp0LmRhdGVwaWNrZXIuX3Bvc1swXSx0b3A6dC5kYXRlcGlja2VyLl9wb3NbMV19O3QuZGF0ZXBpY2tlci5fcG9zPW51bGw7aS5kcERpdi5lbXB0eSgpO2kuZHBEaXYuY3NzKHtwb3NpdGlvbjoiYWJzb2x1dGUiLGRpc3BsYXk6ImJsb2NrIix0b3A6Ii0xMDAwcHgifSk7CnQuZGF0ZXBpY2tlci5fdXBkYXRlRGF0ZXBpY2tlcihpKTtyPXQuZGF0ZXBpY2tlci5fY2hlY2tPZmZzZXQoaSxyLGEpO2kuZHBEaXYuY3NzKHtwb3NpdGlvbjp0LmRhdGVwaWNrZXIuX2luRGlhbG9nJiZ0LmJsb2NrVUk/InN0YXRpYyI6YT8iZml4ZWQiOiJhYnNvbHV0ZSIsZGlzcGxheToibm9uZSIsbGVmdDpyLmxlZnQrInB4Iix0b3A6ci50b3ArInB4In0pO2lmKCFpLmlubGluZSl7aD10LmRhdGVwaWNrZXIuX2dldChpLCJzaG93QW5pbSIpO2w9dC5kYXRlcGlja2VyLl9nZXQoaSwiZHVyYXRpb24iKTtpLmRwRGl2LnpJbmRleCh0KGUpLnpJbmRleCgpKzEpO3QuZGF0ZXBpY2tlci5fZGF0ZXBpY2tlclNob3dpbmc9ITA7dC5lZmZlY3RzJiZ0LmVmZmVjdHMuZWZmZWN0W2hdP2kuZHBEaXYuc2hvdyhoLHQuZGF0ZXBpY2tlci5fZ2V0KGksInNob3dPcHRpb25zIiksbCk6aS5kcERpdltofHwic2hvdyJdKGg/bDpudWxsKTt0LmRhdGVwaWNrZXIuX3Nob3VsZEZvY3VzSW5wdXQoaSkmJmkuaW5wdXQuZm9jdXMoKTsKdC5kYXRlcGlja2VyLl9jdXJJbnN0PWl9fX19LF91cGRhdGVEYXRlcGlja2VyOmZ1bmN0aW9uKGUpe3RoaXMubWF4Um93cz00O289ZTtlLmRwRGl2LmVtcHR5KCkuYXBwZW5kKHRoaXMuX2dlbmVyYXRlSFRNTChlKSk7dGhpcy5fYXR0YWNoSGFuZGxlcnMoZSk7ZS5kcERpdi5maW5kKCIuIit0aGlzLl9kYXlPdmVyQ2xhc3MrIiBhIikubW91c2VvdmVyKCk7dmFyIGkscz10aGlzLl9nZXROdW1iZXJPZk1vbnRocyhlKSxuPXNbMV0sYT0xNztlLmRwRGl2LnJlbW92ZUNsYXNzKCJ1aS1kYXRlcGlja2VyLW11bHRpLTIgdWktZGF0ZXBpY2tlci1tdWx0aS0zIHVpLWRhdGVwaWNrZXItbXVsdGktNCIpLndpZHRoKCIiKTtuPjEmJmUuZHBEaXYuYWRkQ2xhc3MoInVpLWRhdGVwaWNrZXItbXVsdGktIituKS5jc3MoIndpZHRoIixhKm4rImVtIik7ZS5kcERpdlsoMSE9PXNbMF18fDEhPT1zWzFdPyJhZGQiOiJyZW1vdmUiKSsiQ2xhc3MiXSgidWktZGF0ZXBpY2tlci1tdWx0aSIpO2UuZHBEaXZbKHRoaXMuX2dldChlLCJpc1JUTCIpPyJhZGQiOiJyZW1vdmUiKSsiQ2xhc3MiXSgidWktZGF0ZXBpY2tlci1ydGwiKTsKZT09PXQuZGF0ZXBpY2tlci5fY3VySW5zdCYmdC5kYXRlcGlja2VyLl9kYXRlcGlja2VyU2hvd2luZyYmdC5kYXRlcGlja2VyLl9zaG91bGRGb2N1c0lucHV0KGUpJiZlLmlucHV0LmZvY3VzKCk7aWYoZS55ZWFyc2h0bWwpe2k9ZS55ZWFyc2h0bWw7c2V0VGltZW91dChmdW5jdGlvbigpe2k9PT1lLnllYXJzaHRtbCYmZS55ZWFyc2h0bWwmJmUuZHBEaXYuZmluZCgic2VsZWN0LnVpLWRhdGVwaWNrZXIteWVhcjpmaXJzdCIpLnJlcGxhY2VXaXRoKGUueWVhcnNodG1sKTtpPWUueWVhcnNodG1sPW51bGx9LDApfX0sX3Nob3VsZEZvY3VzSW5wdXQ6ZnVuY3Rpb24odCl7cmV0dXJuIHQuaW5wdXQmJnQuaW5wdXQuaXMoIjp2aXNpYmxlIikmJiF0LmlucHV0LmlzKCI6ZGlzYWJsZWQiKSYmIXQuaW5wdXQuaXMoIjpmb2N1cyIpfSxfY2hlY2tPZmZzZXQ6ZnVuY3Rpb24oZSxpLHMpe3ZhciBuPWUuZHBEaXYub3V0ZXJXaWR0aCgpLG89ZS5kcERpdi5vdXRlckhlaWdodCgpLGE9ZS5pbnB1dD9lLmlucHV0Lm91dGVyV2lkdGgoKTowLHI9ZS5pbnB1dD9lLmlucHV0Lm91dGVySGVpZ2h0KCk6MCxoPWRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5jbGllbnRXaWR0aCsocz8wOnQoZG9jdW1lbnQpLnNjcm9sbExlZnQoKSksbD1kb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuY2xpZW50SGVpZ2h0KyhzPzA6dChkb2N1bWVudCkuc2Nyb2xsVG9wKCkpOwppLmxlZnQtPXRoaXMuX2dldChlLCJpc1JUTCIpP24tYTowO2kubGVmdC09cyYmaS5sZWZ0PT09ZS5pbnB1dC5vZmZzZXQoKS5sZWZ0P3QoZG9jdW1lbnQpLnNjcm9sbExlZnQoKTowO2kudG9wLT1zJiZpLnRvcD09PWUuaW5wdXQub2Zmc2V0KCkudG9wK3I/dChkb2N1bWVudCkuc2Nyb2xsVG9wKCk6MDtpLmxlZnQtPU1hdGgubWluKGkubGVmdCxpLmxlZnQrbj5oJiZoPm4/TWF0aC5hYnMoaS5sZWZ0K24taCk6MCk7aS50b3AtPU1hdGgubWluKGkudG9wLGkudG9wK28+bCYmbD5vP01hdGguYWJzKG8rcik6MCk7cmV0dXJuIGl9LF9maW5kUG9zOmZ1bmN0aW9uKGUpe2Zvcih2YXIgaSxzPXRoaXMuX2dldEluc3QoZSksbj10aGlzLl9nZXQocywiaXNSVEwiKTtlJiYoImhpZGRlbiI9PT1lLnR5cGV8fDEhPT1lLm5vZGVUeXBlfHx0LmV4cHIuZmlsdGVycy5oaWRkZW4oZSkpOyllPWVbbj8icHJldmlvdXNTaWJsaW5nIjoibmV4dFNpYmxpbmciXTtpPXQoZSkub2Zmc2V0KCk7cmV0dXJuW2kubGVmdCxpLnRvcF0KfSxfaGlkZURhdGVwaWNrZXI6ZnVuY3Rpb24oZSl7dmFyIGkscyxuLG8scj10aGlzLl9jdXJJbnN0O2lmKHImJighZXx8cj09PXQuZGF0YShlLGEpKSYmdGhpcy5fZGF0ZXBpY2tlclNob3dpbmcpe2k9dGhpcy5fZ2V0KHIsInNob3dBbmltIik7cz10aGlzLl9nZXQociwiZHVyYXRpb24iKTtuPWZ1bmN0aW9uKCl7dC5kYXRlcGlja2VyLl90aWR5RGlhbG9nKHIpfTt0LmVmZmVjdHMmJih0LmVmZmVjdHMuZWZmZWN0W2ldfHx0LmVmZmVjdHNbaV0pP3IuZHBEaXYuaGlkZShpLHQuZGF0ZXBpY2tlci5fZ2V0KHIsInNob3dPcHRpb25zIikscyxuKTpyLmRwRGl2WyJzbGlkZURvd24iPT09aT8ic2xpZGVVcCI6ImZhZGVJbiI9PT1pPyJmYWRlT3V0IjoiaGlkZSJdKGk/czpudWxsLG4pO2l8fG4oKTt0aGlzLl9kYXRlcGlja2VyU2hvd2luZz0hMTtvPXRoaXMuX2dldChyLCJvbkNsb3NlIik7byYmby5hcHBseShyLmlucHV0P3IuaW5wdXRbMF06bnVsbCxbci5pbnB1dD9yLmlucHV0LnZhbCgpOiIiLHJdKTsKdGhpcy5fbGFzdElucHV0PW51bGw7aWYodGhpcy5faW5EaWFsb2cpe3RoaXMuX2RpYWxvZ0lucHV0LmNzcyh7cG9zaXRpb246ImFic29sdXRlIixsZWZ0OiIwIix0b3A6Ii0xMDBweCJ9KTtpZih0LmJsb2NrVUkpe3QudW5ibG9ja1VJKCk7dCgiYm9keSIpLmFwcGVuZCh0aGlzLmRwRGl2KX19dGhpcy5faW5EaWFsb2c9ITF9fSxfdGlkeURpYWxvZzpmdW5jdGlvbih0KXt0LmRwRGl2LnJlbW92ZUNsYXNzKHRoaXMuX2RpYWxvZ0NsYXNzKS51bmJpbmQoIi51aS1kYXRlcGlja2VyLWNhbGVuZGFyIil9LF9jaGVja0V4dGVybmFsQ2xpY2s6ZnVuY3Rpb24oZSl7aWYodC5kYXRlcGlja2VyLl9jdXJJbnN0KXt2YXIgaT10KGUudGFyZ2V0KSxzPXQuZGF0ZXBpY2tlci5fZ2V0SW5zdChpWzBdKTsoaVswXS5pZCE9PXQuZGF0ZXBpY2tlci5fbWFpbkRpdklkJiYwPT09aS5wYXJlbnRzKCIjIit0LmRhdGVwaWNrZXIuX21haW5EaXZJZCkubGVuZ3RoJiYhaS5oYXNDbGFzcyh0LmRhdGVwaWNrZXIubWFya2VyQ2xhc3NOYW1lKSYmIWkuY2xvc2VzdCgiLiIrdC5kYXRlcGlja2VyLl90cmlnZ2VyQ2xhc3MpLmxlbmd0aCYmdC5kYXRlcGlja2VyLl9kYXRlcGlja2VyU2hvd2luZyYmKCF0LmRhdGVwaWNrZXIuX2luRGlhbG9nfHwhdC5ibG9ja1VJKXx8aS5oYXNDbGFzcyh0LmRhdGVwaWNrZXIubWFya2VyQ2xhc3NOYW1lKSYmdC5kYXRlcGlja2VyLl9jdXJJbnN0IT09cykmJnQuZGF0ZXBpY2tlci5faGlkZURhdGVwaWNrZXIoKQp9fSxfYWRqdXN0RGF0ZTpmdW5jdGlvbihlLGkscyl7dmFyIG49dChlKSxvPXRoaXMuX2dldEluc3QoblswXSk7aWYoIXRoaXMuX2lzRGlzYWJsZWREYXRlcGlja2VyKG5bMF0pKXt0aGlzLl9hZGp1c3RJbnN0RGF0ZShvLGkrKCJNIj09PXM/dGhpcy5fZ2V0KG8sInNob3dDdXJyZW50QXRQb3MiKTowKSxzKTt0aGlzLl91cGRhdGVEYXRlcGlja2VyKG8pfX0sX2dvdG9Ub2RheTpmdW5jdGlvbihlKXt2YXIgaSxzPXQoZSksbj10aGlzLl9nZXRJbnN0KHNbMF0pO2lmKHRoaXMuX2dldChuLCJnb3RvQ3VycmVudCIpJiZuLmN1cnJlbnREYXkpe24uc2VsZWN0ZWREYXk9bi5jdXJyZW50RGF5O24uZHJhd01vbnRoPW4uc2VsZWN0ZWRNb250aD1uLmN1cnJlbnRNb250aDtuLmRyYXdZZWFyPW4uc2VsZWN0ZWRZZWFyPW4uY3VycmVudFllYXJ9ZWxzZXtpPW5ldyBEYXRlO24uc2VsZWN0ZWREYXk9aS5nZXREYXRlKCk7bi5kcmF3TW9udGg9bi5zZWxlY3RlZE1vbnRoPWkuZ2V0TW9udGgoKTtuLmRyYXdZZWFyPW4uc2VsZWN0ZWRZZWFyPWkuZ2V0RnVsbFllYXIoKQp9dGhpcy5fbm90aWZ5Q2hhbmdlKG4pO3RoaXMuX2FkanVzdERhdGUocyl9LF9zZWxlY3RNb250aFllYXI6ZnVuY3Rpb24oZSxpLHMpe3ZhciBuPXQoZSksbz10aGlzLl9nZXRJbnN0KG5bMF0pO29bInNlbGVjdGVkIisoIk0iPT09cz8iTW9udGgiOiJZZWFyIildPW9bImRyYXciKygiTSI9PT1zPyJNb250aCI6IlllYXIiKV09cGFyc2VJbnQoaS5vcHRpb25zW2kuc2VsZWN0ZWRJbmRleF0udmFsdWUsMTApO3RoaXMuX25vdGlmeUNoYW5nZShvKTt0aGlzLl9hZGp1c3REYXRlKG4pfSxfc2VsZWN0RGF5OmZ1bmN0aW9uKGUsaSxzLG4pe3ZhciBvLGE9dChlKTtpZighdChuKS5oYXNDbGFzcyh0aGlzLl91bnNlbGVjdGFibGVDbGFzcykmJiF0aGlzLl9pc0Rpc2FibGVkRGF0ZXBpY2tlcihhWzBdKSl7bz10aGlzLl9nZXRJbnN0KGFbMF0pO28uc2VsZWN0ZWREYXk9by5jdXJyZW50RGF5PXQoImEiLG4pLmh0bWwoKTtvLnNlbGVjdGVkTW9udGg9by5jdXJyZW50TW9udGg9aTtvLnNlbGVjdGVkWWVhcj1vLmN1cnJlbnRZZWFyPXM7CnRoaXMuX3NlbGVjdERhdGUoZSx0aGlzLl9mb3JtYXREYXRlKG8sby5jdXJyZW50RGF5LG8uY3VycmVudE1vbnRoLG8uY3VycmVudFllYXIpKX19LF9jbGVhckRhdGU6ZnVuY3Rpb24oZSl7dmFyIGk9dChlKTt0aGlzLl9zZWxlY3REYXRlKGksIiIpfSxfc2VsZWN0RGF0ZTpmdW5jdGlvbihlLGkpe3ZhciBzLG49dChlKSxvPXRoaXMuX2dldEluc3QoblswXSk7aT1udWxsIT1pP2k6dGhpcy5fZm9ybWF0RGF0ZShvKTtvLmlucHV0JiZvLmlucHV0LnZhbChpKTt0aGlzLl91cGRhdGVBbHRlcm5hdGUobyk7cz10aGlzLl9nZXQobywib25TZWxlY3QiKTtzP3MuYXBwbHkoby5pbnB1dD9vLmlucHV0WzBdOm51bGwsW2ksb10pOm8uaW5wdXQmJm8uaW5wdXQudHJpZ2dlcigiY2hhbmdlIik7aWYoby5pbmxpbmUpdGhpcy5fdXBkYXRlRGF0ZXBpY2tlcihvKTtlbHNle3RoaXMuX2hpZGVEYXRlcGlja2VyKCk7dGhpcy5fbGFzdElucHV0PW8uaW5wdXRbMF07Im9iamVjdCIhPXR5cGVvZiBvLmlucHV0WzBdJiZvLmlucHV0LmZvY3VzKCk7CnRoaXMuX2xhc3RJbnB1dD1udWxsfX0sX3VwZGF0ZUFsdGVybmF0ZTpmdW5jdGlvbihlKXt2YXIgaSxzLG4sbz10aGlzLl9nZXQoZSwiYWx0RmllbGQiKTtpZihvKXtpPXRoaXMuX2dldChlLCJhbHRGb3JtYXQiKXx8dGhpcy5fZ2V0KGUsImRhdGVGb3JtYXQiKTtzPXRoaXMuX2dldERhdGUoZSk7bj10aGlzLmZvcm1hdERhdGUoaSxzLHRoaXMuX2dldEZvcm1hdENvbmZpZyhlKSk7dChvKS5lYWNoKGZ1bmN0aW9uKCl7dCh0aGlzKS52YWwobil9KX19LG5vV2Vla2VuZHM6ZnVuY3Rpb24odCl7dmFyIGU9dC5nZXREYXkoKTtyZXR1cm5bZT4wJiY2PmUsIiJdfSxpc284NjAxV2VlazpmdW5jdGlvbih0KXt2YXIgZSxpPW5ldyBEYXRlKHQuZ2V0VGltZSgpKTtpLnNldERhdGUoaS5nZXREYXRlKCkrNC0oaS5nZXREYXkoKXx8NykpO2U9aS5nZXRUaW1lKCk7aS5zZXRNb250aCgwKTtpLnNldERhdGUoMSk7cmV0dXJuIE1hdGguZmxvb3IoTWF0aC5yb3VuZCgoZS1pKS84NjRlNSkvNykrMX0scGFyc2VEYXRlOmZ1bmN0aW9uKGUsaSxzKXtpZihudWxsPT1lfHxudWxsPT1pKXRocm93IkludmFsaWQgYXJndW1lbnRzIjsKaT0ib2JqZWN0Ij09dHlwZW9mIGk/aS50b1N0cmluZygpOmkrIiI7aWYoIiI9PT1pKXJldHVybiBudWxsO3ZhciBuLG8sYSxyLGg9MCxsPShzP3Muc2hvcnRZZWFyQ3V0b2ZmOm51bGwpfHx0aGlzLl9kZWZhdWx0cy5zaG9ydFllYXJDdXRvZmYsdT0ic3RyaW5nIiE9dHlwZW9mIGw/bDoobmV3IERhdGUpLmdldEZ1bGxZZWFyKCklMTAwK3BhcnNlSW50KGwsMTApLGM9KHM/cy5kYXlOYW1lc1Nob3J0Om51bGwpfHx0aGlzLl9kZWZhdWx0cy5kYXlOYW1lc1Nob3J0LGQ9KHM/cy5kYXlOYW1lczpudWxsKXx8dGhpcy5fZGVmYXVsdHMuZGF5TmFtZXMscD0ocz9zLm1vbnRoTmFtZXNTaG9ydDpudWxsKXx8dGhpcy5fZGVmYXVsdHMubW9udGhOYW1lc1Nob3J0LGY9KHM/cy5tb250aE5hbWVzOm51bGwpfHx0aGlzLl9kZWZhdWx0cy5tb250aE5hbWVzLGc9LTEsbT0tMSx2PS0xLGI9LTEsXz0hMSx5PWZ1bmN0aW9uKHQpe3ZhciBpPW4rMTxlLmxlbmd0aCYmZS5jaGFyQXQobisxKT09PXQ7aSYmbisrOwpyZXR1cm4gaX0sdz1mdW5jdGlvbih0KXt2YXIgZT15KHQpLHM9IkAiPT09dD8xNDoiISI9PT10PzIwOiJ5Ij09PXQmJmU/NDoibyI9PT10PzM6MixuPW5ldyBSZWdFeHAoIl5cXGR7MSwiK3MrIn0iKSxvPWkuc3Vic3RyaW5nKGgpLm1hdGNoKG4pO2lmKCFvKXRocm93Ik1pc3NpbmcgbnVtYmVyIGF0IHBvc2l0aW9uICIraDtoKz1vWzBdLmxlbmd0aDtyZXR1cm4gcGFyc2VJbnQob1swXSwxMCl9LGs9ZnVuY3Rpb24oZSxzLG4pe3ZhciBvPS0xLGE9dC5tYXAoeShlKT9uOnMsZnVuY3Rpb24odCxlKXtyZXR1cm5bW2UsdF1dfSkuc29ydChmdW5jdGlvbih0LGUpe3JldHVybi0odFsxXS5sZW5ndGgtZVsxXS5sZW5ndGgpfSk7dC5lYWNoKGEsZnVuY3Rpb24odCxlKXt2YXIgcz1lWzFdO2lmKGkuc3Vic3RyKGgscy5sZW5ndGgpLnRvTG93ZXJDYXNlKCk9PT1zLnRvTG93ZXJDYXNlKCkpe289ZVswXTtoKz1zLmxlbmd0aDtyZXR1cm4hMX19KTtpZigtMSE9PW8pcmV0dXJuIG8rMTt0aHJvdyJVbmtub3duIG5hbWUgYXQgcG9zaXRpb24gIitoCn0seD1mdW5jdGlvbigpe2lmKGkuY2hhckF0KGgpIT09ZS5jaGFyQXQobikpdGhyb3ciVW5leHBlY3RlZCBsaXRlcmFsIGF0IHBvc2l0aW9uICIraDtoKyt9O2ZvcihuPTA7bjxlLmxlbmd0aDtuKyspaWYoXykiJyIhPT1lLmNoYXJBdChuKXx8eSgiJyIpP3goKTpfPSExO2Vsc2Ugc3dpdGNoKGUuY2hhckF0KG4pKXtjYXNlImQiOnY9dygiZCIpO2JyZWFrO2Nhc2UiRCI6aygiRCIsYyxkKTticmVhaztjYXNlIm8iOmI9dygibyIpO2JyZWFrO2Nhc2UibSI6bT13KCJtIik7YnJlYWs7Y2FzZSJNIjptPWsoIk0iLHAsZik7YnJlYWs7Y2FzZSJ5IjpnPXcoInkiKTticmVhaztjYXNlIkAiOnI9bmV3IERhdGUodygiQCIpKTtnPXIuZ2V0RnVsbFllYXIoKTttPXIuZ2V0TW9udGgoKSsxO3Y9ci5nZXREYXRlKCk7YnJlYWs7Y2FzZSIhIjpyPW5ldyBEYXRlKCh3KCIhIiktdGhpcy5fdGlja3NUbzE5NzApLzFlNCk7Zz1yLmdldEZ1bGxZZWFyKCk7bT1yLmdldE1vbnRoKCkrMTt2PXIuZ2V0RGF0ZSgpOwpicmVhaztjYXNlIiciOnkoIiciKT94KCk6Xz0hMDticmVhaztkZWZhdWx0OngoKX1pZihoPGkubGVuZ3RoKXthPWkuc3Vic3RyKGgpO2lmKCEvXlxzKy8udGVzdChhKSl0aHJvdyJFeHRyYS91bnBhcnNlZCBjaGFyYWN0ZXJzIGZvdW5kIGluIGRhdGU6ICIrYX0tMT09PWc/Zz0obmV3IERhdGUpLmdldEZ1bGxZZWFyKCk6MTAwPmcmJihnKz0obmV3IERhdGUpLmdldEZ1bGxZZWFyKCktKG5ldyBEYXRlKS5nZXRGdWxsWWVhcigpJTEwMCsodT49Zz8wOi0xMDApKTtpZihiPi0xKXttPTE7dj1iO2Zvcig7Oyl7bz10aGlzLl9nZXREYXlzSW5Nb250aChnLG0tMSk7aWYobz49dilicmVhazttKys7di09b319cj10aGlzLl9kYXlsaWdodFNhdmluZ0FkanVzdChuZXcgRGF0ZShnLG0tMSx2KSk7aWYoci5nZXRGdWxsWWVhcigpIT09Z3x8ci5nZXRNb250aCgpKzEhPT1tfHxyLmdldERhdGUoKSE9PXYpdGhyb3ciSW52YWxpZCBkYXRlIjtyZXR1cm4gcn0sQVRPTToieXktbW0tZGQiLENPT0tJRToiRCwgZGQgTSB5eSIsSVNPXzg2MDE6Inl5LW1tLWRkIixSRkNfODIyOiJELCBkIE0geSIsUkZDXzg1MDoiREQsIGRkLU0teSIsUkZDXzEwMzY6IkQsIGQgTSB5IixSRkNfMTEyMzoiRCwgZCBNIHl5IixSRkNfMjgyMjoiRCwgZCBNIHl5IixSU1M6IkQsIGQgTSB5IixUSUNLUzoiISIsVElNRVNUQU1QOiJAIixXM0M6Inl5LW1tLWRkIixfdGlja3NUbzE5NzA6MjQqKDcxODY4NStNYXRoLmZsb29yKDQ5Mi41KS1NYXRoLmZsb29yKDE5LjcpK01hdGguZmxvb3IoNC45MjUpKSo2MCo2MCoxZTcsZm9ybWF0RGF0ZTpmdW5jdGlvbih0LGUsaSl7aWYoIWUpcmV0dXJuIiI7CnZhciBzLG49KGk/aS5kYXlOYW1lc1Nob3J0Om51bGwpfHx0aGlzLl9kZWZhdWx0cy5kYXlOYW1lc1Nob3J0LG89KGk/aS5kYXlOYW1lczpudWxsKXx8dGhpcy5fZGVmYXVsdHMuZGF5TmFtZXMsYT0oaT9pLm1vbnRoTmFtZXNTaG9ydDpudWxsKXx8dGhpcy5fZGVmYXVsdHMubW9udGhOYW1lc1Nob3J0LHI9KGk/aS5tb250aE5hbWVzOm51bGwpfHx0aGlzLl9kZWZhdWx0cy5tb250aE5hbWVzLGg9ZnVuY3Rpb24oZSl7dmFyIGk9cysxPHQubGVuZ3RoJiZ0LmNoYXJBdChzKzEpPT09ZTtpJiZzKys7cmV0dXJuIGl9LGw9ZnVuY3Rpb24odCxlLGkpe3ZhciBzPSIiK2U7aWYoaCh0KSlmb3IoO3MubGVuZ3RoPGk7KXM9IjAiK3M7cmV0dXJuIHN9LHU9ZnVuY3Rpb24odCxlLGkscyl7cmV0dXJuIGgodCk/c1tlXTppW2VdfSxjPSIiLGQ9ITE7aWYoZSlmb3Iocz0wO3M8dC5sZW5ndGg7cysrKWlmKGQpIiciIT09dC5jaGFyQXQocyl8fGgoIiciKT9jKz10LmNoYXJBdChzKTpkPSExO2Vsc2Ugc3dpdGNoKHQuY2hhckF0KHMpKXtjYXNlImQiOmMrPWwoImQiLGUuZ2V0RGF0ZSgpLDIpOwpicmVhaztjYXNlIkQiOmMrPXUoIkQiLGUuZ2V0RGF5KCksbixvKTticmVhaztjYXNlIm8iOmMrPWwoIm8iLE1hdGgucm91bmQoKG5ldyBEYXRlKGUuZ2V0RnVsbFllYXIoKSxlLmdldE1vbnRoKCksZS5nZXREYXRlKCkpLmdldFRpbWUoKS1uZXcgRGF0ZShlLmdldEZ1bGxZZWFyKCksMCwwKS5nZXRUaW1lKCkpLzg2NGU1KSwzKTticmVhaztjYXNlIm0iOmMrPWwoIm0iLGUuZ2V0TW9udGgoKSsxLDIpO2JyZWFrO2Nhc2UiTSI6Yys9dSgiTSIsZS5nZXRNb250aCgpLGEscik7YnJlYWs7Y2FzZSJ5IjpjKz1oKCJ5Iik/ZS5nZXRGdWxsWWVhcigpOihlLmdldFllYXIoKSUxMDA8MTA/IjAiOiIiKStlLmdldFllYXIoKSUxMDA7YnJlYWs7Y2FzZSJAIjpjKz1lLmdldFRpbWUoKTticmVhaztjYXNlIiEiOmMrPTFlNCplLmdldFRpbWUoKSt0aGlzLl90aWNrc1RvMTk3MDticmVhaztjYXNlIiciOmgoIiciKT9jKz0iJyI6ZD0hMDticmVhaztkZWZhdWx0OmMrPXQuY2hhckF0KHMpfXJldHVybiBjCn0sX3Bvc3NpYmxlQ2hhcnM6ZnVuY3Rpb24odCl7dmFyIGUsaT0iIixzPSExLG49ZnVuY3Rpb24oaSl7dmFyIHM9ZSsxPHQubGVuZ3RoJiZ0LmNoYXJBdChlKzEpPT09aTtzJiZlKys7cmV0dXJuIHN9O2ZvcihlPTA7ZTx0Lmxlbmd0aDtlKyspaWYocykiJyIhPT10LmNoYXJBdChlKXx8bigiJyIpP2krPXQuY2hhckF0KGUpOnM9ITE7ZWxzZSBzd2l0Y2godC5jaGFyQXQoZSkpe2Nhc2UiZCI6Y2FzZSJtIjpjYXNlInkiOmNhc2UiQCI6aSs9IjAxMjM0NTY3ODkiO2JyZWFrO2Nhc2UiRCI6Y2FzZSJNIjpyZXR1cm4gbnVsbDtjYXNlIiciOm4oIiciKT9pKz0iJyI6cz0hMDticmVhaztkZWZhdWx0OmkrPXQuY2hhckF0KGUpfXJldHVybiBpfSxfZ2V0OmZ1bmN0aW9uKHQsaSl7cmV0dXJuIHQuc2V0dGluZ3NbaV0hPT1lP3Quc2V0dGluZ3NbaV06dGhpcy5fZGVmYXVsdHNbaV19LF9zZXREYXRlRnJvbUZpZWxkOmZ1bmN0aW9uKHQsZSl7aWYodC5pbnB1dC52YWwoKSE9PXQubGFzdFZhbCl7dmFyIGk9dGhpcy5fZ2V0KHQsImRhdGVGb3JtYXQiKSxzPXQubGFzdFZhbD10LmlucHV0P3QuaW5wdXQudmFsKCk6bnVsbCxuPXRoaXMuX2dldERlZmF1bHREYXRlKHQpLG89bixhPXRoaXMuX2dldEZvcm1hdENvbmZpZyh0KTsKdHJ5e289dGhpcy5wYXJzZURhdGUoaSxzLGEpfHxufWNhdGNoKHIpe3M9ZT8iIjpzfXQuc2VsZWN0ZWREYXk9by5nZXREYXRlKCk7dC5kcmF3TW9udGg9dC5zZWxlY3RlZE1vbnRoPW8uZ2V0TW9udGgoKTt0LmRyYXdZZWFyPXQuc2VsZWN0ZWRZZWFyPW8uZ2V0RnVsbFllYXIoKTt0LmN1cnJlbnREYXk9cz9vLmdldERhdGUoKTowO3QuY3VycmVudE1vbnRoPXM/by5nZXRNb250aCgpOjA7dC5jdXJyZW50WWVhcj1zP28uZ2V0RnVsbFllYXIoKTowO3RoaXMuX2FkanVzdEluc3REYXRlKHQpfX0sX2dldERlZmF1bHREYXRlOmZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLl9yZXN0cmljdE1pbk1heCh0LHRoaXMuX2RldGVybWluZURhdGUodCx0aGlzLl9nZXQodCwiZGVmYXVsdERhdGUiKSxuZXcgRGF0ZSkpfSxfZGV0ZXJtaW5lRGF0ZTpmdW5jdGlvbihlLGkscyl7dmFyIG49ZnVuY3Rpb24odCl7dmFyIGU9bmV3IERhdGU7ZS5zZXREYXRlKGUuZ2V0RGF0ZSgpK3QpO3JldHVybiBlfSxvPWZ1bmN0aW9uKGkpe3RyeXtyZXR1cm4gdC5kYXRlcGlja2VyLnBhcnNlRGF0ZSh0LmRhdGVwaWNrZXIuX2dldChlLCJkYXRlRm9ybWF0IiksaSx0LmRhdGVwaWNrZXIuX2dldEZvcm1hdENvbmZpZyhlKSkKfWNhdGNoKHMpe31mb3IodmFyIG49KGkudG9Mb3dlckNhc2UoKS5tYXRjaCgvXmMvKT90LmRhdGVwaWNrZXIuX2dldERhdGUoZSk6bnVsbCl8fG5ldyBEYXRlLG89bi5nZXRGdWxsWWVhcigpLGE9bi5nZXRNb250aCgpLHI9bi5nZXREYXRlKCksaD0vKFsrXC1dP1swLTldKylccyooZHxEfHd8V3xtfE18eXxZKT8vZyxsPWguZXhlYyhpKTtsOyl7c3dpdGNoKGxbMl18fCJkIil7Y2FzZSJkIjpjYXNlIkQiOnIrPXBhcnNlSW50KGxbMV0sMTApO2JyZWFrO2Nhc2UidyI6Y2FzZSJXIjpyKz03KnBhcnNlSW50KGxbMV0sMTApO2JyZWFrO2Nhc2UibSI6Y2FzZSJNIjphKz1wYXJzZUludChsWzFdLDEwKTtyPU1hdGgubWluKHIsdC5kYXRlcGlja2VyLl9nZXREYXlzSW5Nb250aChvLGEpKTticmVhaztjYXNlInkiOmNhc2UiWSI6bys9cGFyc2VJbnQobFsxXSwxMCk7cj1NYXRoLm1pbihyLHQuZGF0ZXBpY2tlci5fZ2V0RGF5c0luTW9udGgobyxhKSl9bD1oLmV4ZWMoaSl9cmV0dXJuIG5ldyBEYXRlKG8sYSxyKQp9LGE9bnVsbD09aXx8IiI9PT1pP3M6InN0cmluZyI9PXR5cGVvZiBpP28oaSk6Im51bWJlciI9PXR5cGVvZiBpP2lzTmFOKGkpP3M6bihpKTpuZXcgRGF0ZShpLmdldFRpbWUoKSk7YT1hJiYiSW52YWxpZCBEYXRlIj09PWEudG9TdHJpbmcoKT9zOmE7aWYoYSl7YS5zZXRIb3VycygwKTthLnNldE1pbnV0ZXMoMCk7YS5zZXRTZWNvbmRzKDApO2Euc2V0TWlsbGlzZWNvbmRzKDApfXJldHVybiB0aGlzLl9kYXlsaWdodFNhdmluZ0FkanVzdChhKX0sX2RheWxpZ2h0U2F2aW5nQWRqdXN0OmZ1bmN0aW9uKHQpe2lmKCF0KXJldHVybiBudWxsO3Quc2V0SG91cnModC5nZXRIb3VycygpPjEyP3QuZ2V0SG91cnMoKSsyOjApO3JldHVybiB0fSxfc2V0RGF0ZTpmdW5jdGlvbih0LGUsaSl7dmFyIHM9IWUsbj10LnNlbGVjdGVkTW9udGgsbz10LnNlbGVjdGVkWWVhcixhPXRoaXMuX3Jlc3RyaWN0TWluTWF4KHQsdGhpcy5fZGV0ZXJtaW5lRGF0ZSh0LGUsbmV3IERhdGUpKTt0LnNlbGVjdGVkRGF5PXQuY3VycmVudERheT1hLmdldERhdGUoKTsKdC5kcmF3TW9udGg9dC5zZWxlY3RlZE1vbnRoPXQuY3VycmVudE1vbnRoPWEuZ2V0TW9udGgoKTt0LmRyYXdZZWFyPXQuc2VsZWN0ZWRZZWFyPXQuY3VycmVudFllYXI9YS5nZXRGdWxsWWVhcigpO249PT10LnNlbGVjdGVkTW9udGgmJm89PT10LnNlbGVjdGVkWWVhcnx8aXx8dGhpcy5fbm90aWZ5Q2hhbmdlKHQpO3RoaXMuX2FkanVzdEluc3REYXRlKHQpO3QuaW5wdXQmJnQuaW5wdXQudmFsKHM/IiI6dGhpcy5fZm9ybWF0RGF0ZSh0KSl9LF9nZXREYXRlOmZ1bmN0aW9uKHQpe3ZhciBlPSF0LmN1cnJlbnRZZWFyfHx0LmlucHV0JiYiIj09PXQuaW5wdXQudmFsKCk/bnVsbDp0aGlzLl9kYXlsaWdodFNhdmluZ0FkanVzdChuZXcgRGF0ZSh0LmN1cnJlbnRZZWFyLHQuY3VycmVudE1vbnRoLHQuY3VycmVudERheSkpO3JldHVybiBlfSxfYXR0YWNoSGFuZGxlcnM6ZnVuY3Rpb24oZSl7dmFyIGk9dGhpcy5fZ2V0KGUsInN0ZXBNb250aHMiKSxzPSIjIitlLmlkLnJlcGxhY2UoL1xcXFwvZywiXFwiKTsKZS5kcERpdi5maW5kKCJbZGF0YS1oYW5kbGVyXSIpLm1hcChmdW5jdGlvbigpe3ZhciBlPXtwcmV2OmZ1bmN0aW9uKCl7dC5kYXRlcGlja2VyLl9hZGp1c3REYXRlKHMsLWksIk0iKX0sbmV4dDpmdW5jdGlvbigpe3QuZGF0ZXBpY2tlci5fYWRqdXN0RGF0ZShzLCtpLCJNIil9LGhpZGU6ZnVuY3Rpb24oKXt0LmRhdGVwaWNrZXIuX2hpZGVEYXRlcGlja2VyKCl9LHRvZGF5OmZ1bmN0aW9uKCl7dC5kYXRlcGlja2VyLl9nb3RvVG9kYXkocyl9LHNlbGVjdERheTpmdW5jdGlvbigpe3QuZGF0ZXBpY2tlci5fc2VsZWN0RGF5KHMsK3RoaXMuZ2V0QXR0cmlidXRlKCJkYXRhLW1vbnRoIiksK3RoaXMuZ2V0QXR0cmlidXRlKCJkYXRhLXllYXIiKSx0aGlzKTtyZXR1cm4hMX0sc2VsZWN0TW9udGg6ZnVuY3Rpb24oKXt0LmRhdGVwaWNrZXIuX3NlbGVjdE1vbnRoWWVhcihzLHRoaXMsIk0iKTtyZXR1cm4hMX0sc2VsZWN0WWVhcjpmdW5jdGlvbigpe3QuZGF0ZXBpY2tlci5fc2VsZWN0TW9udGhZZWFyKHMsdGhpcywiWSIpOwpyZXR1cm4hMX19O3QodGhpcykuYmluZCh0aGlzLmdldEF0dHJpYnV0ZSgiZGF0YS1ldmVudCIpLGVbdGhpcy5nZXRBdHRyaWJ1dGUoImRhdGEtaGFuZGxlciIpXSl9KX0sX2dlbmVyYXRlSFRNTDpmdW5jdGlvbih0KXt2YXIgZSxpLHMsbixvLGEscixoLGwsdSxjLGQscCxmLGcsbSx2LGIsXyx5LHcsayx4LEMsRCxJLCQsVCxQLE0sQSxTLEUseixOLE8sSCxXLEYsUj1uZXcgRGF0ZSxqPXRoaXMuX2RheWxpZ2h0U2F2aW5nQWRqdXN0KG5ldyBEYXRlKFIuZ2V0RnVsbFllYXIoKSxSLmdldE1vbnRoKCksUi5nZXREYXRlKCkpKSxMPXRoaXMuX2dldCh0LCJpc1JUTCIpLFk9dGhpcy5fZ2V0KHQsInNob3dCdXR0b25QYW5lbCIpLEI9dGhpcy5fZ2V0KHQsImhpZGVJZk5vUHJldk5leHQiKSxVPXRoaXMuX2dldCh0LCJuYXZpZ2F0aW9uQXNEYXRlRm9ybWF0IiksVj10aGlzLl9nZXROdW1iZXJPZk1vbnRocyh0KSxLPXRoaXMuX2dldCh0LCJzaG93Q3VycmVudEF0UG9zIikscT10aGlzLl9nZXQodCwic3RlcE1vbnRocyIpLFg9MSE9PVZbMF18fDEhPT1WWzFdLEc9dGhpcy5fZGF5bGlnaHRTYXZpbmdBZGp1c3QodC5jdXJyZW50RGF5P25ldyBEYXRlKHQuY3VycmVudFllYXIsdC5jdXJyZW50TW9udGgsdC5jdXJyZW50RGF5KTpuZXcgRGF0ZSg5OTk5LDksOSkpLFE9dGhpcy5fZ2V0TWluTWF4RGF0ZSh0LCJtaW4iKSxKPXRoaXMuX2dldE1pbk1heERhdGUodCwibWF4IiksWj10LmRyYXdNb250aC1LLHRlPXQuZHJhd1llYXI7CmlmKDA+Wil7Wis9MTI7dGUtLX1pZihKKXtlPXRoaXMuX2RheWxpZ2h0U2F2aW5nQWRqdXN0KG5ldyBEYXRlKEouZ2V0RnVsbFllYXIoKSxKLmdldE1vbnRoKCktVlswXSpWWzFdKzEsSi5nZXREYXRlKCkpKTtlPVEmJlE+ZT9ROmU7Zm9yKDt0aGlzLl9kYXlsaWdodFNhdmluZ0FkanVzdChuZXcgRGF0ZSh0ZSxaLDEpKT5lOyl7Wi0tO2lmKDA+Wil7Wj0xMTt0ZS0tfX19dC5kcmF3TW9udGg9Wjt0LmRyYXdZZWFyPXRlO2k9dGhpcy5fZ2V0KHQsInByZXZUZXh0Iik7aT1VP3RoaXMuZm9ybWF0RGF0ZShpLHRoaXMuX2RheWxpZ2h0U2F2aW5nQWRqdXN0KG5ldyBEYXRlKHRlLFotcSwxKSksdGhpcy5fZ2V0Rm9ybWF0Q29uZmlnKHQpKTppO3M9dGhpcy5fY2FuQWRqdXN0TW9udGgodCwtMSx0ZSxaKT8iPGEgY2xhc3M9J3VpLWRhdGVwaWNrZXItcHJldiB1aS1jb3JuZXItYWxsJyBkYXRhLWhhbmRsZXI9J3ByZXYnIGRhdGEtZXZlbnQ9J2NsaWNrJyB0aXRsZT0nIitpKyInPjxzcGFuIGNsYXNzPSd1aS1pY29uIHVpLWljb24tY2lyY2xlLXRyaWFuZ2xlLSIrKEw/ImUiOiJ3IikrIic+IitpKyI8L3NwYW4+PC9hPiI6Qj8iIjoiPGEgY2xhc3M9J3VpLWRhdGVwaWNrZXItcHJldiB1aS1jb3JuZXItYWxsIHVpLXN0YXRlLWRpc2FibGVkJyB0aXRsZT0nIitpKyInPjxzcGFuIGNsYXNzPSd1aS1pY29uIHVpLWljb24tY2lyY2xlLXRyaWFuZ2xlLSIrKEw/ImUiOiJ3IikrIic+IitpKyI8L3NwYW4+PC9hPiI7Cm49dGhpcy5fZ2V0KHQsIm5leHRUZXh0Iik7bj1VP3RoaXMuZm9ybWF0RGF0ZShuLHRoaXMuX2RheWxpZ2h0U2F2aW5nQWRqdXN0KG5ldyBEYXRlKHRlLForcSwxKSksdGhpcy5fZ2V0Rm9ybWF0Q29uZmlnKHQpKTpuO289dGhpcy5fY2FuQWRqdXN0TW9udGgodCwxLHRlLFopPyI8YSBjbGFzcz0ndWktZGF0ZXBpY2tlci1uZXh0IHVpLWNvcm5lci1hbGwnIGRhdGEtaGFuZGxlcj0nbmV4dCcgZGF0YS1ldmVudD0nY2xpY2snIHRpdGxlPSciK24rIic+PHNwYW4gY2xhc3M9J3VpLWljb24gdWktaWNvbi1jaXJjbGUtdHJpYW5nbGUtIisoTD8idyI6ImUiKSsiJz4iK24rIjwvc3Bhbj48L2E+IjpCPyIiOiI8YSBjbGFzcz0ndWktZGF0ZXBpY2tlci1uZXh0IHVpLWNvcm5lci1hbGwgdWktc3RhdGUtZGlzYWJsZWQnIHRpdGxlPSciK24rIic+PHNwYW4gY2xhc3M9J3VpLWljb24gdWktaWNvbi1jaXJjbGUtdHJpYW5nbGUtIisoTD8idyI6ImUiKSsiJz4iK24rIjwvc3Bhbj48L2E+IjthPXRoaXMuX2dldCh0LCJjdXJyZW50VGV4dCIpOwpyPXRoaXMuX2dldCh0LCJnb3RvQ3VycmVudCIpJiZ0LmN1cnJlbnREYXk/RzpqO2E9VT90aGlzLmZvcm1hdERhdGUoYSxyLHRoaXMuX2dldEZvcm1hdENvbmZpZyh0KSk6YTtoPXQuaW5saW5lPyIiOiI8YnV0dG9uIHR5cGU9J2J1dHRvbicgY2xhc3M9J3VpLWRhdGVwaWNrZXItY2xvc2UgdWktc3RhdGUtZGVmYXVsdCB1aS1wcmlvcml0eS1wcmltYXJ5IHVpLWNvcm5lci1hbGwnIGRhdGEtaGFuZGxlcj0naGlkZScgZGF0YS1ldmVudD0nY2xpY2snPiIrdGhpcy5fZ2V0KHQsImNsb3NlVGV4dCIpKyI8L2J1dHRvbj4iO2w9WT8iPGRpdiBjbGFzcz0ndWktZGF0ZXBpY2tlci1idXR0b25wYW5lIHVpLXdpZGdldC1jb250ZW50Jz4iKyhMP2g6IiIpKyh0aGlzLl9pc0luUmFuZ2UodCxyKT8iPGJ1dHRvbiB0eXBlPSdidXR0b24nIGNsYXNzPSd1aS1kYXRlcGlja2VyLWN1cnJlbnQgdWktc3RhdGUtZGVmYXVsdCB1aS1wcmlvcml0eS1zZWNvbmRhcnkgdWktY29ybmVyLWFsbCcgZGF0YS1oYW5kbGVyPSd0b2RheScgZGF0YS1ldmVudD0nY2xpY2snPiIrYSsiPC9idXR0b24+IjoiIikrKEw/IiI6aCkrIjwvZGl2PiI6IiI7CnU9cGFyc2VJbnQodGhpcy5fZ2V0KHQsImZpcnN0RGF5IiksMTApO3U9aXNOYU4odSk/MDp1O2M9dGhpcy5fZ2V0KHQsInNob3dXZWVrIik7ZD10aGlzLl9nZXQodCwiZGF5TmFtZXMiKTtwPXRoaXMuX2dldCh0LCJkYXlOYW1lc01pbiIpO2Y9dGhpcy5fZ2V0KHQsIm1vbnRoTmFtZXMiKTtnPXRoaXMuX2dldCh0LCJtb250aE5hbWVzU2hvcnQiKTttPXRoaXMuX2dldCh0LCJiZWZvcmVTaG93RGF5Iik7dj10aGlzLl9nZXQodCwic2hvd090aGVyTW9udGhzIik7Yj10aGlzLl9nZXQodCwic2VsZWN0T3RoZXJNb250aHMiKTtfPXRoaXMuX2dldERlZmF1bHREYXRlKHQpO3k9IiI7Zm9yKGs9MDtrPFZbMF07aysrKXt4PSIiO3RoaXMubWF4Um93cz00O2ZvcihDPTA7QzxWWzFdO0MrKyl7RD10aGlzLl9kYXlsaWdodFNhdmluZ0FkanVzdChuZXcgRGF0ZSh0ZSxaLHQuc2VsZWN0ZWREYXkpKTtJPSIgdWktY29ybmVyLWFsbCI7JD0iIjtpZihYKXskKz0iPGRpdiBjbGFzcz0ndWktZGF0ZXBpY2tlci1ncm91cCI7CmlmKFZbMV0+MSlzd2l0Y2goQyl7Y2FzZSAwOiQrPSIgdWktZGF0ZXBpY2tlci1ncm91cC1maXJzdCI7ST0iIHVpLWNvcm5lci0iKyhMPyJyaWdodCI6ImxlZnQiKTticmVhaztjYXNlIFZbMV0tMTokKz0iIHVpLWRhdGVwaWNrZXItZ3JvdXAtbGFzdCI7ST0iIHVpLWNvcm5lci0iKyhMPyJsZWZ0IjoicmlnaHQiKTticmVhaztkZWZhdWx0OiQrPSIgdWktZGF0ZXBpY2tlci1ncm91cC1taWRkbGUiO0k9IiJ9JCs9Iic+In0kKz0iPGRpdiBjbGFzcz0ndWktZGF0ZXBpY2tlci1oZWFkZXIgdWktd2lkZ2V0LWhlYWRlciB1aS1oZWxwZXItY2xlYXJmaXgiK0krIic+IisoL2FsbHxsZWZ0Ly50ZXN0KEkpJiYwPT09az9MP286czoiIikrKC9hbGx8cmlnaHQvLnRlc3QoSSkmJjA9PT1rP0w/czpvOiIiKSt0aGlzLl9nZW5lcmF0ZU1vbnRoWWVhckhlYWRlcih0LFosdGUsUSxKLGs+MHx8Qz4wLGYsZykrIjwvZGl2Pjx0YWJsZSBjbGFzcz0ndWktZGF0ZXBpY2tlci1jYWxlbmRhcic+PHRoZWFkPjx0cj4iOwpUPWM/Ijx0aCBjbGFzcz0ndWktZGF0ZXBpY2tlci13ZWVrLWNvbCc+Iit0aGlzLl9nZXQodCwid2Vla0hlYWRlciIpKyI8L3RoPiI6IiI7Zm9yKHc9MDs3Pnc7dysrKXtQPSh3K3UpJTc7VCs9Ijx0aCIrKCh3K3UrNiklNz49NT8iIGNsYXNzPSd1aS1kYXRlcGlja2VyLXdlZWstZW5kJyI6IiIpKyI+PHNwYW4gdGl0bGU9JyIrZFtQXSsiJz4iK3BbUF0rIjwvc3Bhbj48L3RoPiJ9JCs9VCsiPC90cj48L3RoZWFkPjx0Ym9keT4iO009dGhpcy5fZ2V0RGF5c0luTW9udGgodGUsWik7dGU9PT10LnNlbGVjdGVkWWVhciYmWj09PXQuc2VsZWN0ZWRNb250aCYmKHQuc2VsZWN0ZWREYXk9TWF0aC5taW4odC5zZWxlY3RlZERheSxNKSk7QT0odGhpcy5fZ2V0Rmlyc3REYXlPZk1vbnRoKHRlLFopLXUrNyklNztTPU1hdGguY2VpbCgoQStNKS83KTtFPVgmJnRoaXMubWF4Um93cz5TP3RoaXMubWF4Um93czpTO3RoaXMubWF4Um93cz1FO3o9dGhpcy5fZGF5bGlnaHRTYXZpbmdBZGp1c3QobmV3IERhdGUodGUsWiwxLUEpKTsKZm9yKE49MDtFPk47TisrKXskKz0iPHRyPiI7Tz1jPyI8dGQgY2xhc3M9J3VpLWRhdGVwaWNrZXItd2Vlay1jb2wnPiIrdGhpcy5fZ2V0KHQsImNhbGN1bGF0ZVdlZWsiKSh6KSsiPC90ZD4iOiIiO2Zvcih3PTA7Nz53O3crKyl7SD1tP20uYXBwbHkodC5pbnB1dD90LmlucHV0WzBdOm51bGwsW3pdKTpbITAsIiJdO1c9ei5nZXRNb250aCgpIT09WjtGPVcmJiFifHwhSFswXXx8USYmUT56fHxKJiZ6Pko7Tys9Ijx0ZCBjbGFzcz0nIisoKHcrdSs2KSU3Pj01PyIgdWktZGF0ZXBpY2tlci13ZWVrLWVuZCI6IiIpKyhXPyIgdWktZGF0ZXBpY2tlci1vdGhlci1tb250aCI6IiIpKyh6LmdldFRpbWUoKT09PUQuZ2V0VGltZSgpJiZaPT09dC5zZWxlY3RlZE1vbnRoJiZ0Ll9rZXlFdmVudHx8Xy5nZXRUaW1lKCk9PT16LmdldFRpbWUoKSYmXy5nZXRUaW1lKCk9PT1ELmdldFRpbWUoKT8iICIrdGhpcy5fZGF5T3ZlckNsYXNzOiIiKSsoRj8iICIrdGhpcy5fdW5zZWxlY3RhYmxlQ2xhc3MrIiB1aS1zdGF0ZS1kaXNhYmxlZCI6IiIpKyhXJiYhdj8iIjoiICIrSFsxXSsoei5nZXRUaW1lKCk9PT1HLmdldFRpbWUoKT8iICIrdGhpcy5fY3VycmVudENsYXNzOiIiKSsoei5nZXRUaW1lKCk9PT1qLmdldFRpbWUoKT8iIHVpLWRhdGVwaWNrZXItdG9kYXkiOiIiKSkrIiciKyhXJiYhdnx8IUhbMl0/IiI6IiB0aXRsZT0nIitIWzJdLnJlcGxhY2UoLycvZywiJiMzOTsiKSsiJyIpKyhGPyIiOiIgZGF0YS1oYW5kbGVyPSdzZWxlY3REYXknIGRhdGEtZXZlbnQ9J2NsaWNrJyBkYXRhLW1vbnRoPSciK3ouZ2V0TW9udGgoKSsiJyBkYXRhLXllYXI9JyIrei5nZXRGdWxsWWVhcigpKyInIikrIj4iKyhXJiYhdj8iJiN4YTA7IjpGPyI8c3BhbiBjbGFzcz0ndWktc3RhdGUtZGVmYXVsdCc+Iit6LmdldERhdGUoKSsiPC9zcGFuPiI6IjxhIGNsYXNzPSd1aS1zdGF0ZS1kZWZhdWx0Iisoei5nZXRUaW1lKCk9PT1qLmdldFRpbWUoKT8iIHVpLXN0YXRlLWhpZ2hsaWdodCI6IiIpKyh6LmdldFRpbWUoKT09PUcuZ2V0VGltZSgpPyIgdWktc3RhdGUtYWN0aXZlIjoiIikrKFc/IiB1aS1wcmlvcml0eS1zZWNvbmRhcnkiOiIiKSsiJyBocmVmPScjJz4iK3ouZ2V0RGF0ZSgpKyI8L2E+IikrIjwvdGQ+IjsKei5zZXREYXRlKHouZ2V0RGF0ZSgpKzEpO3o9dGhpcy5fZGF5bGlnaHRTYXZpbmdBZGp1c3Qoeil9JCs9TysiPC90cj4ifVorKztpZihaPjExKXtaPTA7dGUrK30kKz0iPC90Ym9keT48L3RhYmxlPiIrKFg/IjwvZGl2PiIrKFZbMF0+MCYmQz09PVZbMV0tMT8iPGRpdiBjbGFzcz0ndWktZGF0ZXBpY2tlci1yb3ctYnJlYWsnPjwvZGl2PiI6IiIpOiIiKTt4Kz0kfXkrPXh9eSs9bDt0Ll9rZXlFdmVudD0hMTtyZXR1cm4geX0sX2dlbmVyYXRlTW9udGhZZWFySGVhZGVyOmZ1bmN0aW9uKHQsZSxpLHMsbixvLGEscil7dmFyIGgsbCx1LGMsZCxwLGYsZyxtPXRoaXMuX2dldCh0LCJjaGFuZ2VNb250aCIpLHY9dGhpcy5fZ2V0KHQsImNoYW5nZVllYXIiKSxiPXRoaXMuX2dldCh0LCJzaG93TW9udGhBZnRlclllYXIiKSxfPSI8ZGl2IGNsYXNzPSd1aS1kYXRlcGlja2VyLXRpdGxlJz4iLHk9IiI7aWYob3x8IW0peSs9IjxzcGFuIGNsYXNzPSd1aS1kYXRlcGlja2VyLW1vbnRoJz4iK2FbZV0rIjwvc3Bhbj4iOwplbHNle2g9cyYmcy5nZXRGdWxsWWVhcigpPT09aTtsPW4mJm4uZ2V0RnVsbFllYXIoKT09PWk7eSs9IjxzZWxlY3QgY2xhc3M9J3VpLWRhdGVwaWNrZXItbW9udGgnIGRhdGEtaGFuZGxlcj0nc2VsZWN0TW9udGgnIGRhdGEtZXZlbnQ9J2NoYW5nZSc+Ijtmb3IodT0wOzEyPnU7dSsrKSghaHx8dT49cy5nZXRNb250aCgpKSYmKCFsfHx1PD1uLmdldE1vbnRoKCkpJiYoeSs9IjxvcHRpb24gdmFsdWU9JyIrdSsiJyIrKHU9PT1lPyIgc2VsZWN0ZWQ9J3NlbGVjdGVkJyI6IiIpKyI+IityW3VdKyI8L29wdGlvbj4iKTt5Kz0iPC9zZWxlY3Q+In1ifHwoXys9eSsoIW8mJm0mJnY/IiI6IiYjeGEwOyIpKTtpZighdC55ZWFyc2h0bWwpe3QueWVhcnNodG1sPSIiO2lmKG98fCF2KV8rPSI8c3BhbiBjbGFzcz0ndWktZGF0ZXBpY2tlci15ZWFyJz4iK2krIjwvc3Bhbj4iO2Vsc2V7Yz10aGlzLl9nZXQodCwieWVhclJhbmdlIikuc3BsaXQoIjoiKTtkPShuZXcgRGF0ZSkuZ2V0RnVsbFllYXIoKTsKcD1mdW5jdGlvbih0KXt2YXIgZT10Lm1hdGNoKC9jWytcLV0uKi8pP2krcGFyc2VJbnQodC5zdWJzdHJpbmcoMSksMTApOnQubWF0Y2goL1srXC1dLiovKT9kK3BhcnNlSW50KHQsMTApOnBhcnNlSW50KHQsMTApO3JldHVybiBpc05hTihlKT9kOmV9O2Y9cChjWzBdKTtnPU1hdGgubWF4KGYscChjWzFdfHwiIikpO2Y9cz9NYXRoLm1heChmLHMuZ2V0RnVsbFllYXIoKSk6ZjtnPW4/TWF0aC5taW4oZyxuLmdldEZ1bGxZZWFyKCkpOmc7dC55ZWFyc2h0bWwrPSI8c2VsZWN0IGNsYXNzPSd1aS1kYXRlcGlja2VyLXllYXInIGRhdGEtaGFuZGxlcj0nc2VsZWN0WWVhcicgZGF0YS1ldmVudD0nY2hhbmdlJz4iO2Zvcig7Zz49ZjtmKyspdC55ZWFyc2h0bWwrPSI8b3B0aW9uIHZhbHVlPSciK2YrIiciKyhmPT09aT8iIHNlbGVjdGVkPSdzZWxlY3RlZCciOiIiKSsiPiIrZisiPC9vcHRpb24+Ijt0LnllYXJzaHRtbCs9Ijwvc2VsZWN0PiI7Xys9dC55ZWFyc2h0bWw7dC55ZWFyc2h0bWw9bnVsbAp9fV8rPXRoaXMuX2dldCh0LCJ5ZWFyU3VmZml4Iik7YiYmKF8rPSghbyYmbSYmdj8iIjoiJiN4YTA7IikreSk7Xys9IjwvZGl2PiI7cmV0dXJuIF99LF9hZGp1c3RJbnN0RGF0ZTpmdW5jdGlvbih0LGUsaSl7dmFyIHM9dC5kcmF3WWVhcisoIlkiPT09aT9lOjApLG49dC5kcmF3TW9udGgrKCJNIj09PWk/ZTowKSxvPU1hdGgubWluKHQuc2VsZWN0ZWREYXksdGhpcy5fZ2V0RGF5c0luTW9udGgocyxuKSkrKCJEIj09PWk/ZTowKSxhPXRoaXMuX3Jlc3RyaWN0TWluTWF4KHQsdGhpcy5fZGF5bGlnaHRTYXZpbmdBZGp1c3QobmV3IERhdGUocyxuLG8pKSk7dC5zZWxlY3RlZERheT1hLmdldERhdGUoKTt0LmRyYXdNb250aD10LnNlbGVjdGVkTW9udGg9YS5nZXRNb250aCgpO3QuZHJhd1llYXI9dC5zZWxlY3RlZFllYXI9YS5nZXRGdWxsWWVhcigpOygiTSI9PT1pfHwiWSI9PT1pKSYmdGhpcy5fbm90aWZ5Q2hhbmdlKHQpfSxfcmVzdHJpY3RNaW5NYXg6ZnVuY3Rpb24odCxlKXt2YXIgaT10aGlzLl9nZXRNaW5NYXhEYXRlKHQsIm1pbiIpLHM9dGhpcy5fZ2V0TWluTWF4RGF0ZSh0LCJtYXgiKSxuPWkmJmk+ZT9pOmU7CnJldHVybiBzJiZuPnM/czpufSxfbm90aWZ5Q2hhbmdlOmZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMuX2dldCh0LCJvbkNoYW5nZU1vbnRoWWVhciIpO2UmJmUuYXBwbHkodC5pbnB1dD90LmlucHV0WzBdOm51bGwsW3Quc2VsZWN0ZWRZZWFyLHQuc2VsZWN0ZWRNb250aCsxLHRdKX0sX2dldE51bWJlck9mTW9udGhzOmZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMuX2dldCh0LCJudW1iZXJPZk1vbnRocyIpO3JldHVybiBudWxsPT1lP1sxLDFdOiJudW1iZXIiPT10eXBlb2YgZT9bMSxlXTplfSxfZ2V0TWluTWF4RGF0ZTpmdW5jdGlvbih0LGUpe3JldHVybiB0aGlzLl9kZXRlcm1pbmVEYXRlKHQsdGhpcy5fZ2V0KHQsZSsiRGF0ZSIpLG51bGwpfSxfZ2V0RGF5c0luTW9udGg6ZnVuY3Rpb24odCxlKXtyZXR1cm4gMzItdGhpcy5fZGF5bGlnaHRTYXZpbmdBZGp1c3QobmV3IERhdGUodCxlLDMyKSkuZ2V0RGF0ZSgpfSxfZ2V0Rmlyc3REYXlPZk1vbnRoOmZ1bmN0aW9uKHQsZSl7cmV0dXJuIG5ldyBEYXRlKHQsZSwxKS5nZXREYXkoKQp9LF9jYW5BZGp1c3RNb250aDpmdW5jdGlvbih0LGUsaSxzKXt2YXIgbj10aGlzLl9nZXROdW1iZXJPZk1vbnRocyh0KSxvPXRoaXMuX2RheWxpZ2h0U2F2aW5nQWRqdXN0KG5ldyBEYXRlKGkscysoMD5lP2U6blswXSpuWzFdKSwxKSk7MD5lJiZvLnNldERhdGUodGhpcy5fZ2V0RGF5c0luTW9udGgoby5nZXRGdWxsWWVhcigpLG8uZ2V0TW9udGgoKSkpO3JldHVybiB0aGlzLl9pc0luUmFuZ2UodCxvKX0sX2lzSW5SYW5nZTpmdW5jdGlvbih0LGUpe3ZhciBpLHMsbj10aGlzLl9nZXRNaW5NYXhEYXRlKHQsIm1pbiIpLG89dGhpcy5fZ2V0TWluTWF4RGF0ZSh0LCJtYXgiKSxhPW51bGwscj1udWxsLGg9dGhpcy5fZ2V0KHQsInllYXJSYW5nZSIpO2lmKGgpe2k9aC5zcGxpdCgiOiIpO3M9KG5ldyBEYXRlKS5nZXRGdWxsWWVhcigpO2E9cGFyc2VJbnQoaVswXSwxMCk7cj1wYXJzZUludChpWzFdLDEwKTtpWzBdLm1hdGNoKC9bK1wtXS4qLykmJihhKz1zKTtpWzFdLm1hdGNoKC9bK1wtXS4qLykmJihyKz1zKQp9cmV0dXJuKCFufHxlLmdldFRpbWUoKT49bi5nZXRUaW1lKCkpJiYoIW98fGUuZ2V0VGltZSgpPD1vLmdldFRpbWUoKSkmJighYXx8ZS5nZXRGdWxsWWVhcigpPj1hKSYmKCFyfHxlLmdldEZ1bGxZZWFyKCk8PXIpfSxfZ2V0Rm9ybWF0Q29uZmlnOmZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMuX2dldCh0LCJzaG9ydFllYXJDdXRvZmYiKTtlPSJzdHJpbmciIT10eXBlb2YgZT9lOihuZXcgRGF0ZSkuZ2V0RnVsbFllYXIoKSUxMDArcGFyc2VJbnQoZSwxMCk7cmV0dXJue3Nob3J0WWVhckN1dG9mZjplLGRheU5hbWVzU2hvcnQ6dGhpcy5fZ2V0KHQsImRheU5hbWVzU2hvcnQiKSxkYXlOYW1lczp0aGlzLl9nZXQodCwiZGF5TmFtZXMiKSxtb250aE5hbWVzU2hvcnQ6dGhpcy5fZ2V0KHQsIm1vbnRoTmFtZXNTaG9ydCIpLG1vbnRoTmFtZXM6dGhpcy5fZ2V0KHQsIm1vbnRoTmFtZXMiKX19LF9mb3JtYXREYXRlOmZ1bmN0aW9uKHQsZSxpLHMpe2lmKCFlKXt0LmN1cnJlbnREYXk9dC5zZWxlY3RlZERheTsKdC5jdXJyZW50TW9udGg9dC5zZWxlY3RlZE1vbnRoO3QuY3VycmVudFllYXI9dC5zZWxlY3RlZFllYXJ9dmFyIG49ZT8ib2JqZWN0Ij09dHlwZW9mIGU/ZTp0aGlzLl9kYXlsaWdodFNhdmluZ0FkanVzdChuZXcgRGF0ZShzLGksZSkpOnRoaXMuX2RheWxpZ2h0U2F2aW5nQWRqdXN0KG5ldyBEYXRlKHQuY3VycmVudFllYXIsdC5jdXJyZW50TW9udGgsdC5jdXJyZW50RGF5KSk7cmV0dXJuIHRoaXMuZm9ybWF0RGF0ZSh0aGlzLl9nZXQodCwiZGF0ZUZvcm1hdCIpLG4sdGhpcy5fZ2V0Rm9ybWF0Q29uZmlnKHQpKX19KTt0LmZuLmRhdGVwaWNrZXI9ZnVuY3Rpb24oZSl7aWYoIXRoaXMubGVuZ3RoKXJldHVybiB0aGlzO2lmKCF0LmRhdGVwaWNrZXIuaW5pdGlhbGl6ZWQpe3QoZG9jdW1lbnQpLm1vdXNlZG93bih0LmRhdGVwaWNrZXIuX2NoZWNrRXh0ZXJuYWxDbGljayk7dC5kYXRlcGlja2VyLmluaXRpYWxpemVkPSEwfTA9PT10KCIjIit0LmRhdGVwaWNrZXIuX21haW5EaXZJZCkubGVuZ3RoJiZ0KCJib2R5IikuYXBwZW5kKHQuZGF0ZXBpY2tlci5kcERpdik7CnZhciBpPUFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cywxKTtyZXR1cm4ic3RyaW5nIiE9dHlwZW9mIGV8fCJpc0Rpc2FibGVkIiE9PWUmJiJnZXREYXRlIiE9PWUmJiJ3aWRnZXQiIT09ZT8ib3B0aW9uIj09PWUmJjI9PT1hcmd1bWVudHMubGVuZ3RoJiYic3RyaW5nIj09dHlwZW9mIGFyZ3VtZW50c1sxXT90LmRhdGVwaWNrZXJbIl8iK2UrIkRhdGVwaWNrZXIiXS5hcHBseSh0LmRhdGVwaWNrZXIsW3RoaXNbMF1dLmNvbmNhdChpKSk6dGhpcy5lYWNoKGZ1bmN0aW9uKCl7InN0cmluZyI9PXR5cGVvZiBlP3QuZGF0ZXBpY2tlclsiXyIrZSsiRGF0ZXBpY2tlciJdLmFwcGx5KHQuZGF0ZXBpY2tlcixbdGhpc10uY29uY2F0KGkpKTp0LmRhdGVwaWNrZXIuX2F0dGFjaERhdGVwaWNrZXIodGhpcyxlKX0pOnQuZGF0ZXBpY2tlclsiXyIrZSsiRGF0ZXBpY2tlciJdLmFwcGx5KHQuZGF0ZXBpY2tlcixbdGhpc1swXV0uY29uY2F0KGkpKX07dC5kYXRlcGlja2VyPW5ldyBpOwp0LmRhdGVwaWNrZXIuaW5pdGlhbGl6ZWQ9ITE7dC5kYXRlcGlja2VyLnV1aWQ9KG5ldyBEYXRlKS5nZXRUaW1lKCk7dC5kYXRlcGlja2VyLnZlcnNpb249IjEuMTAuNCJ9KGpRdWVyeSk7IWZ1bmN0aW9uKHQpe3ZhciBlPXtidXR0b25zOiEwLGhlaWdodDohMCxtYXhIZWlnaHQ6ITAsbWF4V2lkdGg6ITAsbWluSGVpZ2h0OiEwLG1pbldpZHRoOiEwLHdpZHRoOiEwfSxpPXttYXhIZWlnaHQ6ITAsbWF4V2lkdGg6ITAsbWluSGVpZ2h0OiEwLG1pbldpZHRoOiEwfTt0LndpZGdldCgidWkuZGlhbG9nIix7dmVyc2lvbjoiMS4xMC40IixvcHRpb25zOnthcHBlbmRUbzoiYm9keSIsYXV0b09wZW46ITAsYnV0dG9uczpbXSxjbG9zZU9uRXNjYXBlOiEwLGNsb3NlVGV4dDoiY2xvc2UiLGRpYWxvZ0NsYXNzOiIiLGRyYWdnYWJsZTohMCxoaWRlOm51bGwsaGVpZ2h0OiJhdXRvIixtYXhIZWlnaHQ6bnVsbCxtYXhXaWR0aDpudWxsLG1pbkhlaWdodDoxNTAsbWluV2lkdGg6MTUwLG1vZGFsOiExLHBvc2l0aW9uOntteToiY2VudGVyIixhdDoiY2VudGVyIixvZjp3aW5kb3csY29sbGlzaW9uOiJmaXQiLHVzaW5nOmZ1bmN0aW9uKGUpe3ZhciBpPXQodGhpcykuY3NzKGUpLm9mZnNldCgpLnRvcDsKMD5pJiZ0KHRoaXMpLmNzcygidG9wIixlLnRvcC1pKX19LHJlc2l6YWJsZTohMCxzaG93Om51bGwsdGl0bGU6bnVsbCx3aWR0aDozMDAsYmVmb3JlQ2xvc2U6bnVsbCxjbG9zZTpudWxsLGRyYWc6bnVsbCxkcmFnU3RhcnQ6bnVsbCxkcmFnU3RvcDpudWxsLGZvY3VzOm51bGwsb3BlbjpudWxsLHJlc2l6ZTpudWxsLHJlc2l6ZVN0YXJ0Om51bGwscmVzaXplU3RvcDpudWxsfSxfY3JlYXRlOmZ1bmN0aW9uKCl7dGhpcy5vcmlnaW5hbENzcz17ZGlzcGxheTp0aGlzLmVsZW1lbnRbMF0uc3R5bGUuZGlzcGxheSx3aWR0aDp0aGlzLmVsZW1lbnRbMF0uc3R5bGUud2lkdGgsbWluSGVpZ2h0OnRoaXMuZWxlbWVudFswXS5zdHlsZS5taW5IZWlnaHQsbWF4SGVpZ2h0OnRoaXMuZWxlbWVudFswXS5zdHlsZS5tYXhIZWlnaHQsaGVpZ2h0OnRoaXMuZWxlbWVudFswXS5zdHlsZS5oZWlnaHR9O3RoaXMub3JpZ2luYWxQb3NpdGlvbj17cGFyZW50OnRoaXMuZWxlbWVudC5wYXJlbnQoKSxpbmRleDp0aGlzLmVsZW1lbnQucGFyZW50KCkuY2hpbGRyZW4oKS5pbmRleCh0aGlzLmVsZW1lbnQpfTsKdGhpcy5vcmlnaW5hbFRpdGxlPXRoaXMuZWxlbWVudC5hdHRyKCJ0aXRsZSIpO3RoaXMub3B0aW9ucy50aXRsZT10aGlzLm9wdGlvbnMudGl0bGV8fHRoaXMub3JpZ2luYWxUaXRsZTt0aGlzLl9jcmVhdGVXcmFwcGVyKCk7dGhpcy5lbGVtZW50LnNob3coKS5yZW1vdmVBdHRyKCJ0aXRsZSIpLmFkZENsYXNzKCJ1aS1kaWFsb2ctY29udGVudCB1aS13aWRnZXQtY29udGVudCIpLmFwcGVuZFRvKHRoaXMudWlEaWFsb2cpO3RoaXMuX2NyZWF0ZVRpdGxlYmFyKCk7dGhpcy5fY3JlYXRlQnV0dG9uUGFuZSgpO3RoaXMub3B0aW9ucy5kcmFnZ2FibGUmJnQuZm4uZHJhZ2dhYmxlJiZ0aGlzLl9tYWtlRHJhZ2dhYmxlKCk7dGhpcy5vcHRpb25zLnJlc2l6YWJsZSYmdC5mbi5yZXNpemFibGUmJnRoaXMuX21ha2VSZXNpemFibGUoKTt0aGlzLl9pc09wZW49ITF9LF9pbml0OmZ1bmN0aW9uKCl7dGhpcy5vcHRpb25zLmF1dG9PcGVuJiZ0aGlzLm9wZW4oKX0sX2FwcGVuZFRvOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5vcHRpb25zLmFwcGVuZFRvOwpyZXR1cm4gZSYmKGUuanF1ZXJ5fHxlLm5vZGVUeXBlKT90KGUpOnRoaXMuZG9jdW1lbnQuZmluZChlfHwiYm9keSIpLmVxKDApfSxfZGVzdHJveTpmdW5jdGlvbigpe3ZhciB0LGU9dGhpcy5vcmlnaW5hbFBvc2l0aW9uO3RoaXMuX2Rlc3Ryb3lPdmVybGF5KCk7dGhpcy5lbGVtZW50LnJlbW92ZVVuaXF1ZUlkKCkucmVtb3ZlQ2xhc3MoInVpLWRpYWxvZy1jb250ZW50IHVpLXdpZGdldC1jb250ZW50IikuY3NzKHRoaXMub3JpZ2luYWxDc3MpLmRldGFjaCgpO3RoaXMudWlEaWFsb2cuc3RvcCghMCwhMCkucmVtb3ZlKCk7dGhpcy5vcmlnaW5hbFRpdGxlJiZ0aGlzLmVsZW1lbnQuYXR0cigidGl0bGUiLHRoaXMub3JpZ2luYWxUaXRsZSk7dD1lLnBhcmVudC5jaGlsZHJlbigpLmVxKGUuaW5kZXgpO3QubGVuZ3RoJiZ0WzBdIT09dGhpcy5lbGVtZW50WzBdP3QuYmVmb3JlKHRoaXMuZWxlbWVudCk6ZS5wYXJlbnQuYXBwZW5kKHRoaXMuZWxlbWVudCl9LHdpZGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLnVpRGlhbG9nCn0sZGlzYWJsZTp0Lm5vb3AsZW5hYmxlOnQubm9vcCxjbG9zZTpmdW5jdGlvbihlKXt2YXIgaSxzPXRoaXM7aWYodGhpcy5faXNPcGVuJiZ0aGlzLl90cmlnZ2VyKCJiZWZvcmVDbG9zZSIsZSkhPT0hMSl7dGhpcy5faXNPcGVuPSExO3RoaXMuX2Rlc3Ryb3lPdmVybGF5KCk7aWYoIXRoaXMub3BlbmVyLmZpbHRlcigiOmZvY3VzYWJsZSIpLmZvY3VzKCkubGVuZ3RoKXRyeXtpPXRoaXMuZG9jdW1lbnRbMF0uYWN0aXZlRWxlbWVudDtpJiYiYm9keSIhPT1pLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCkmJnQoaSkuYmx1cigpfWNhdGNoKG4pe310aGlzLl9oaWRlKHRoaXMudWlEaWFsb2csdGhpcy5vcHRpb25zLmhpZGUsZnVuY3Rpb24oKXtzLl90cmlnZ2VyKCJjbG9zZSIsZSl9KX19LGlzT3BlbjpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9pc09wZW59LG1vdmVUb1RvcDpmdW5jdGlvbigpe3RoaXMuX21vdmVUb1RvcCgpfSxfbW92ZVRvVG9wOmZ1bmN0aW9uKHQsZSl7dmFyIGk9ISF0aGlzLnVpRGlhbG9nLm5leHRBbGwoIjp2aXNpYmxlIikuaW5zZXJ0QmVmb3JlKHRoaXMudWlEaWFsb2cpLmxlbmd0aDsKaSYmIWUmJnRoaXMuX3RyaWdnZXIoImZvY3VzIix0KTtyZXR1cm4gaX0sb3BlbjpmdW5jdGlvbigpe3ZhciBlPXRoaXM7aWYodGhpcy5faXNPcGVuKXRoaXMuX21vdmVUb1RvcCgpJiZ0aGlzLl9mb2N1c1RhYmJhYmxlKCk7ZWxzZXt0aGlzLl9pc09wZW49ITA7dGhpcy5vcGVuZXI9dCh0aGlzLmRvY3VtZW50WzBdLmFjdGl2ZUVsZW1lbnQpO3RoaXMuX3NpemUoKTt0aGlzLl9wb3NpdGlvbigpO3RoaXMuX2NyZWF0ZU92ZXJsYXkoKTt0aGlzLl9tb3ZlVG9Ub3AobnVsbCwhMCk7dGhpcy5fc2hvdyh0aGlzLnVpRGlhbG9nLHRoaXMub3B0aW9ucy5zaG93LGZ1bmN0aW9uKCl7ZS5fZm9jdXNUYWJiYWJsZSgpO2UuX3RyaWdnZXIoImZvY3VzIil9KTt0aGlzLl90cmlnZ2VyKCJvcGVuIil9fSxfZm9jdXNUYWJiYWJsZTpmdW5jdGlvbigpe3ZhciB0PXRoaXMuZWxlbWVudC5maW5kKCJbYXV0b2ZvY3VzXSIpO3QubGVuZ3RofHwodD10aGlzLmVsZW1lbnQuZmluZCgiOnRhYmJhYmxlIikpO3QubGVuZ3RofHwodD10aGlzLnVpRGlhbG9nQnV0dG9uUGFuZS5maW5kKCI6dGFiYmFibGUiKSk7CnQubGVuZ3RofHwodD10aGlzLnVpRGlhbG9nVGl0bGViYXJDbG9zZS5maWx0ZXIoIjp0YWJiYWJsZSIpKTt0Lmxlbmd0aHx8KHQ9dGhpcy51aURpYWxvZyk7dC5lcSgwKS5mb2N1cygpfSxfa2VlcEZvY3VzOmZ1bmN0aW9uKGUpe2Z1bmN0aW9uIGkoKXt2YXIgZT10aGlzLmRvY3VtZW50WzBdLmFjdGl2ZUVsZW1lbnQsaT10aGlzLnVpRGlhbG9nWzBdPT09ZXx8dC5jb250YWlucyh0aGlzLnVpRGlhbG9nWzBdLGUpO2l8fHRoaXMuX2ZvY3VzVGFiYmFibGUoKX1lLnByZXZlbnREZWZhdWx0KCk7aS5jYWxsKHRoaXMpO3RoaXMuX2RlbGF5KGkpfSxfY3JlYXRlV3JhcHBlcjpmdW5jdGlvbigpe3RoaXMudWlEaWFsb2c9dCgiPGRpdj4iKS5hZGRDbGFzcygidWktZGlhbG9nIHVpLXdpZGdldCB1aS13aWRnZXQtY29udGVudCB1aS1jb3JuZXItYWxsIHVpLWZyb250ICIrdGhpcy5vcHRpb25zLmRpYWxvZ0NsYXNzKS5oaWRlKCkuYXR0cih7dGFiSW5kZXg6LTEscm9sZToiZGlhbG9nIn0pLmFwcGVuZFRvKHRoaXMuX2FwcGVuZFRvKCkpOwp0aGlzLl9vbih0aGlzLnVpRGlhbG9nLHtrZXlkb3duOmZ1bmN0aW9uKGUpe2lmKHRoaXMub3B0aW9ucy5jbG9zZU9uRXNjYXBlJiYhZS5pc0RlZmF1bHRQcmV2ZW50ZWQoKSYmZS5rZXlDb2RlJiZlLmtleUNvZGU9PT10LnVpLmtleUNvZGUuRVNDQVBFKXtlLnByZXZlbnREZWZhdWx0KCk7dGhpcy5jbG9zZShlKX1lbHNlIGlmKGUua2V5Q29kZT09PXQudWkua2V5Q29kZS5UQUIpe3ZhciBpPXRoaXMudWlEaWFsb2cuZmluZCgiOnRhYmJhYmxlIikscz1pLmZpbHRlcigiOmZpcnN0Iiksbj1pLmZpbHRlcigiOmxhc3QiKTtpZihlLnRhcmdldCE9PW5bMF0mJmUudGFyZ2V0IT09dGhpcy51aURpYWxvZ1swXXx8ZS5zaGlmdEtleSl7aWYoKGUudGFyZ2V0PT09c1swXXx8ZS50YXJnZXQ9PT10aGlzLnVpRGlhbG9nWzBdKSYmZS5zaGlmdEtleSl7bi5mb2N1cygxKTtlLnByZXZlbnREZWZhdWx0KCl9fWVsc2V7cy5mb2N1cygxKTtlLnByZXZlbnREZWZhdWx0KCl9fX0sbW91c2Vkb3duOmZ1bmN0aW9uKHQpe3RoaXMuX21vdmVUb1RvcCh0KSYmdGhpcy5fZm9jdXNUYWJiYWJsZSgpCn19KTt0aGlzLmVsZW1lbnQuZmluZCgiW2FyaWEtZGVzY3JpYmVkYnldIikubGVuZ3RofHx0aGlzLnVpRGlhbG9nLmF0dHIoeyJhcmlhLWRlc2NyaWJlZGJ5Ijp0aGlzLmVsZW1lbnQudW5pcXVlSWQoKS5hdHRyKCJpZCIpfSl9LF9jcmVhdGVUaXRsZWJhcjpmdW5jdGlvbigpe3ZhciBlO3RoaXMudWlEaWFsb2dUaXRsZWJhcj10KCI8ZGl2PiIpLmFkZENsYXNzKCJ1aS1kaWFsb2ctdGl0bGViYXIgdWktd2lkZ2V0LWhlYWRlciB1aS1jb3JuZXItYWxsIHVpLWhlbHBlci1jbGVhcmZpeCIpLnByZXBlbmRUbyh0aGlzLnVpRGlhbG9nKTt0aGlzLl9vbih0aGlzLnVpRGlhbG9nVGl0bGViYXIse21vdXNlZG93bjpmdW5jdGlvbihlKXt0KGUudGFyZ2V0KS5jbG9zZXN0KCIudWktZGlhbG9nLXRpdGxlYmFyLWNsb3NlIil8fHRoaXMudWlEaWFsb2cuZm9jdXMoKX19KTt0aGlzLnVpRGlhbG9nVGl0bGViYXJDbG9zZT10KCI8YnV0dG9uIHR5cGU9J2J1dHRvbic+PC9idXR0b24+IikuYnV0dG9uKHtsYWJlbDp0aGlzLm9wdGlvbnMuY2xvc2VUZXh0LGljb25zOntwcmltYXJ5OiJ1aS1pY29uLWNsb3NldGhpY2sifSx0ZXh0OiExfSkuYWRkQ2xhc3MoInVpLWRpYWxvZy10aXRsZWJhci1jbG9zZSIpLmFwcGVuZFRvKHRoaXMudWlEaWFsb2dUaXRsZWJhcik7CnRoaXMuX29uKHRoaXMudWlEaWFsb2dUaXRsZWJhckNsb3NlLHtjbGljazpmdW5jdGlvbih0KXt0LnByZXZlbnREZWZhdWx0KCk7dGhpcy5jbG9zZSh0KX19KTtlPXQoIjxzcGFuPiIpLnVuaXF1ZUlkKCkuYWRkQ2xhc3MoInVpLWRpYWxvZy10aXRsZSIpLnByZXBlbmRUbyh0aGlzLnVpRGlhbG9nVGl0bGViYXIpO3RoaXMuX3RpdGxlKGUpO3RoaXMudWlEaWFsb2cuYXR0cih7ImFyaWEtbGFiZWxsZWRieSI6ZS5hdHRyKCJpZCIpfSl9LF90aXRsZTpmdW5jdGlvbih0KXt0aGlzLm9wdGlvbnMudGl0bGV8fHQuaHRtbCgiJiMxNjA7Iik7dC50ZXh0KHRoaXMub3B0aW9ucy50aXRsZSl9LF9jcmVhdGVCdXR0b25QYW5lOmZ1bmN0aW9uKCl7dGhpcy51aURpYWxvZ0J1dHRvblBhbmU9dCgiPGRpdj4iKS5hZGRDbGFzcygidWktZGlhbG9nLWJ1dHRvbnBhbmUgdWktd2lkZ2V0LWNvbnRlbnQgdWktaGVscGVyLWNsZWFyZml4Iik7dGhpcy51aUJ1dHRvblNldD10KCI8ZGl2PiIpLmFkZENsYXNzKCJ1aS1kaWFsb2ctYnV0dG9uc2V0IikuYXBwZW5kVG8odGhpcy51aURpYWxvZ0J1dHRvblBhbmUpOwp0aGlzLl9jcmVhdGVCdXR0b25zKCl9LF9jcmVhdGVCdXR0b25zOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcyxpPXRoaXMub3B0aW9ucy5idXR0b25zO3RoaXMudWlEaWFsb2dCdXR0b25QYW5lLnJlbW92ZSgpO3RoaXMudWlCdXR0b25TZXQuZW1wdHkoKTtpZih0LmlzRW1wdHlPYmplY3QoaSl8fHQuaXNBcnJheShpKSYmIWkubGVuZ3RoKXRoaXMudWlEaWFsb2cucmVtb3ZlQ2xhc3MoInVpLWRpYWxvZy1idXR0b25zIik7ZWxzZXt0LmVhY2goaSxmdW5jdGlvbihpLHMpe3ZhciBuLG87cz10LmlzRnVuY3Rpb24ocyk/e2NsaWNrOnMsdGV4dDppfTpzO3M9dC5leHRlbmQoe3R5cGU6ImJ1dHRvbiJ9LHMpO249cy5jbGljaztzLmNsaWNrPWZ1bmN0aW9uKCl7bi5hcHBseShlLmVsZW1lbnRbMF0sYXJndW1lbnRzKX07bz17aWNvbnM6cy5pY29ucyx0ZXh0OnMuc2hvd1RleHR9O2RlbGV0ZSBzLmljb25zO2RlbGV0ZSBzLnNob3dUZXh0O3QoIjxidXR0b24+PC9idXR0b24+IixzKS5idXR0b24obykuYXBwZW5kVG8oZS51aUJ1dHRvblNldCkKfSk7dGhpcy51aURpYWxvZy5hZGRDbGFzcygidWktZGlhbG9nLWJ1dHRvbnMiKTt0aGlzLnVpRGlhbG9nQnV0dG9uUGFuZS5hcHBlbmRUbyh0aGlzLnVpRGlhbG9nKX19LF9tYWtlRHJhZ2dhYmxlOmZ1bmN0aW9uKCl7ZnVuY3Rpb24gZSh0KXtyZXR1cm57cG9zaXRpb246dC5wb3NpdGlvbixvZmZzZXQ6dC5vZmZzZXR9fXZhciBpPXRoaXMscz10aGlzLm9wdGlvbnM7dGhpcy51aURpYWxvZy5kcmFnZ2FibGUoe2NhbmNlbDoiLnVpLWRpYWxvZy1jb250ZW50LCAudWktZGlhbG9nLXRpdGxlYmFyLWNsb3NlIixoYW5kbGU6Ii51aS1kaWFsb2ctdGl0bGViYXIiLGNvbnRhaW5tZW50OiJkb2N1bWVudCIsc3RhcnQ6ZnVuY3Rpb24ocyxuKXt0KHRoaXMpLmFkZENsYXNzKCJ1aS1kaWFsb2ctZHJhZ2dpbmciKTtpLl9ibG9ja0ZyYW1lcygpO2kuX3RyaWdnZXIoImRyYWdTdGFydCIscyxlKG4pKX0sZHJhZzpmdW5jdGlvbih0LHMpe2kuX3RyaWdnZXIoImRyYWciLHQsZShzKSl9LHN0b3A6ZnVuY3Rpb24obixvKXtzLnBvc2l0aW9uPVtvLnBvc2l0aW9uLmxlZnQtaS5kb2N1bWVudC5zY3JvbGxMZWZ0KCksby5wb3NpdGlvbi50b3AtaS5kb2N1bWVudC5zY3JvbGxUb3AoKV07CnQodGhpcykucmVtb3ZlQ2xhc3MoInVpLWRpYWxvZy1kcmFnZ2luZyIpO2kuX3VuYmxvY2tGcmFtZXMoKTtpLl90cmlnZ2VyKCJkcmFnU3RvcCIsbixlKG8pKX19KX0sX21ha2VSZXNpemFibGU6ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKHQpe3JldHVybntvcmlnaW5hbFBvc2l0aW9uOnQub3JpZ2luYWxQb3NpdGlvbixvcmlnaW5hbFNpemU6dC5vcmlnaW5hbFNpemUscG9zaXRpb246dC5wb3NpdGlvbixzaXplOnQuc2l6ZX19dmFyIGk9dGhpcyxzPXRoaXMub3B0aW9ucyxuPXMucmVzaXphYmxlLG89dGhpcy51aURpYWxvZy5jc3MoInBvc2l0aW9uIiksYT0ic3RyaW5nIj09dHlwZW9mIG4/bjoibixlLHMsdyxzZSxzdyxuZSxudyI7dGhpcy51aURpYWxvZy5yZXNpemFibGUoe2NhbmNlbDoiLnVpLWRpYWxvZy1jb250ZW50Iixjb250YWlubWVudDoiZG9jdW1lbnQiLGFsc29SZXNpemU6dGhpcy5lbGVtZW50LG1heFdpZHRoOnMubWF4V2lkdGgsbWF4SGVpZ2h0OnMubWF4SGVpZ2h0LG1pbldpZHRoOnMubWluV2lkdGgsbWluSGVpZ2h0OnRoaXMuX21pbkhlaWdodCgpLGhhbmRsZXM6YSxzdGFydDpmdW5jdGlvbihzLG4pe3QodGhpcykuYWRkQ2xhc3MoInVpLWRpYWxvZy1yZXNpemluZyIpOwppLl9ibG9ja0ZyYW1lcygpO2kuX3RyaWdnZXIoInJlc2l6ZVN0YXJ0IixzLGUobikpfSxyZXNpemU6ZnVuY3Rpb24odCxzKXtpLl90cmlnZ2VyKCJyZXNpemUiLHQsZShzKSl9LHN0b3A6ZnVuY3Rpb24obixvKXtzLmhlaWdodD10KHRoaXMpLmhlaWdodCgpO3Mud2lkdGg9dCh0aGlzKS53aWR0aCgpO3QodGhpcykucmVtb3ZlQ2xhc3MoInVpLWRpYWxvZy1yZXNpemluZyIpO2kuX3VuYmxvY2tGcmFtZXMoKTtpLl90cmlnZ2VyKCJyZXNpemVTdG9wIixuLGUobykpfX0pLmNzcygicG9zaXRpb24iLG8pfSxfbWluSGVpZ2h0OmZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5vcHRpb25zO3JldHVybiJhdXRvIj09PXQuaGVpZ2h0P3QubWluSGVpZ2h0Ok1hdGgubWluKHQubWluSGVpZ2h0LHQuaGVpZ2h0KX0sX3Bvc2l0aW9uOmZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy51aURpYWxvZy5pcygiOnZpc2libGUiKTt0fHx0aGlzLnVpRGlhbG9nLnNob3coKTt0aGlzLnVpRGlhbG9nLnBvc2l0aW9uKHRoaXMub3B0aW9ucy5wb3NpdGlvbik7CnR8fHRoaXMudWlEaWFsb2cuaGlkZSgpfSxfc2V0T3B0aW9uczpmdW5jdGlvbihzKXt2YXIgbj10aGlzLG89ITEsYT17fTt0LmVhY2gocyxmdW5jdGlvbih0LHMpe24uX3NldE9wdGlvbih0LHMpO3QgaW4gZSYmKG89ITApO3QgaW4gaSYmKGFbdF09cyl9KTtpZihvKXt0aGlzLl9zaXplKCk7dGhpcy5fcG9zaXRpb24oKX10aGlzLnVpRGlhbG9nLmlzKCI6ZGF0YSh1aS1yZXNpemFibGUpIikmJnRoaXMudWlEaWFsb2cucmVzaXphYmxlKCJvcHRpb24iLGEpfSxfc2V0T3B0aW9uOmZ1bmN0aW9uKHQsZSl7dmFyIGkscyxuPXRoaXMudWlEaWFsb2c7ImRpYWxvZ0NsYXNzIj09PXQmJm4ucmVtb3ZlQ2xhc3ModGhpcy5vcHRpb25zLmRpYWxvZ0NsYXNzKS5hZGRDbGFzcyhlKTtpZigiZGlzYWJsZWQiIT09dCl7dGhpcy5fc3VwZXIodCxlKTsiYXBwZW5kVG8iPT09dCYmdGhpcy51aURpYWxvZy5hcHBlbmRUbyh0aGlzLl9hcHBlbmRUbygpKTsiYnV0dG9ucyI9PT10JiZ0aGlzLl9jcmVhdGVCdXR0b25zKCk7CiJjbG9zZVRleHQiPT09dCYmdGhpcy51aURpYWxvZ1RpdGxlYmFyQ2xvc2UuYnV0dG9uKHtsYWJlbDoiIitlfSk7aWYoImRyYWdnYWJsZSI9PT10KXtpPW4uaXMoIjpkYXRhKHVpLWRyYWdnYWJsZSkiKTtpJiYhZSYmbi5kcmFnZ2FibGUoImRlc3Ryb3kiKTshaSYmZSYmdGhpcy5fbWFrZURyYWdnYWJsZSgpfSJwb3NpdGlvbiI9PT10JiZ0aGlzLl9wb3NpdGlvbigpO2lmKCJyZXNpemFibGUiPT09dCl7cz1uLmlzKCI6ZGF0YSh1aS1yZXNpemFibGUpIik7cyYmIWUmJm4ucmVzaXphYmxlKCJkZXN0cm95Iik7cyYmInN0cmluZyI9PXR5cGVvZiBlJiZuLnJlc2l6YWJsZSgib3B0aW9uIiwiaGFuZGxlcyIsZSk7c3x8ZT09PSExfHx0aGlzLl9tYWtlUmVzaXphYmxlKCl9InRpdGxlIj09PXQmJnRoaXMuX3RpdGxlKHRoaXMudWlEaWFsb2dUaXRsZWJhci5maW5kKCIudWktZGlhbG9nLXRpdGxlIikpfX0sX3NpemU6ZnVuY3Rpb24oKXt2YXIgdCxlLGkscz10aGlzLm9wdGlvbnM7dGhpcy5lbGVtZW50LnNob3coKS5jc3Moe3dpZHRoOiJhdXRvIixtaW5IZWlnaHQ6MCxtYXhIZWlnaHQ6Im5vbmUiLGhlaWdodDowfSk7CnMubWluV2lkdGg+cy53aWR0aCYmKHMud2lkdGg9cy5taW5XaWR0aCk7dD10aGlzLnVpRGlhbG9nLmNzcyh7aGVpZ2h0OiJhdXRvIix3aWR0aDpzLndpZHRofSkub3V0ZXJIZWlnaHQoKTtlPU1hdGgubWF4KDAscy5taW5IZWlnaHQtdCk7aT0ibnVtYmVyIj09dHlwZW9mIHMubWF4SGVpZ2h0P01hdGgubWF4KDAscy5tYXhIZWlnaHQtdCk6Im5vbmUiOyJhdXRvIj09PXMuaGVpZ2h0P3RoaXMuZWxlbWVudC5jc3Moe21pbkhlaWdodDplLG1heEhlaWdodDppLGhlaWdodDoiYXV0byJ9KTp0aGlzLmVsZW1lbnQuaGVpZ2h0KE1hdGgubWF4KDAscy5oZWlnaHQtdCkpO3RoaXMudWlEaWFsb2cuaXMoIjpkYXRhKHVpLXJlc2l6YWJsZSkiKSYmdGhpcy51aURpYWxvZy5yZXNpemFibGUoIm9wdGlvbiIsIm1pbkhlaWdodCIsdGhpcy5fbWluSGVpZ2h0KCkpfSxfYmxvY2tGcmFtZXM6ZnVuY3Rpb24oKXt0aGlzLmlmcmFtZUJsb2Nrcz10aGlzLmRvY3VtZW50LmZpbmQoImlmcmFtZSIpLm1hcChmdW5jdGlvbigpe3ZhciBlPXQodGhpcyk7CnJldHVybiB0KCI8ZGl2PiIpLmNzcyh7cG9zaXRpb246ImFic29sdXRlIix3aWR0aDplLm91dGVyV2lkdGgoKSxoZWlnaHQ6ZS5vdXRlckhlaWdodCgpfSkuYXBwZW5kVG8oZS5wYXJlbnQoKSkub2Zmc2V0KGUub2Zmc2V0KCkpWzBdfSl9LF91bmJsb2NrRnJhbWVzOmZ1bmN0aW9uKCl7aWYodGhpcy5pZnJhbWVCbG9ja3Mpe3RoaXMuaWZyYW1lQmxvY2tzLnJlbW92ZSgpO2RlbGV0ZSB0aGlzLmlmcmFtZUJsb2Nrc319LF9hbGxvd0ludGVyYWN0aW9uOmZ1bmN0aW9uKGUpe3JldHVybiB0KGUudGFyZ2V0KS5jbG9zZXN0KCIudWktZGlhbG9nIikubGVuZ3RoPyEwOiEhdChlLnRhcmdldCkuY2xvc2VzdCgiLnVpLWRhdGVwaWNrZXIiKS5sZW5ndGh9LF9jcmVhdGVPdmVybGF5OmZ1bmN0aW9uKCl7aWYodGhpcy5vcHRpb25zLm1vZGFsKXt2YXIgZT10aGlzLGk9dGhpcy53aWRnZXRGdWxsTmFtZTt0LnVpLmRpYWxvZy5vdmVybGF5SW5zdGFuY2VzfHx0aGlzLl9kZWxheShmdW5jdGlvbigpe3QudWkuZGlhbG9nLm92ZXJsYXlJbnN0YW5jZXMmJnRoaXMuZG9jdW1lbnQuYmluZCgiZm9jdXNpbi5kaWFsb2ciLGZ1bmN0aW9uKHMpe2lmKCFlLl9hbGxvd0ludGVyYWN0aW9uKHMpKXtzLnByZXZlbnREZWZhdWx0KCk7CnQoIi51aS1kaWFsb2c6dmlzaWJsZTpsYXN0IC51aS1kaWFsb2ctY29udGVudCIpLmRhdGEoaSkuX2ZvY3VzVGFiYmFibGUoKX19KX0pO3RoaXMub3ZlcmxheT10KCI8ZGl2PiIpLmFkZENsYXNzKCJ1aS13aWRnZXQtb3ZlcmxheSB1aS1mcm9udCIpLmFwcGVuZFRvKHRoaXMuX2FwcGVuZFRvKCkpO3RoaXMuX29uKHRoaXMub3ZlcmxheSx7bW91c2Vkb3duOiJfa2VlcEZvY3VzIn0pO3QudWkuZGlhbG9nLm92ZXJsYXlJbnN0YW5jZXMrK319LF9kZXN0cm95T3ZlcmxheTpmdW5jdGlvbigpe2lmKHRoaXMub3B0aW9ucy5tb2RhbCYmdGhpcy5vdmVybGF5KXt0LnVpLmRpYWxvZy5vdmVybGF5SW5zdGFuY2VzLS07dC51aS5kaWFsb2cub3ZlcmxheUluc3RhbmNlc3x8dGhpcy5kb2N1bWVudC51bmJpbmQoImZvY3VzaW4uZGlhbG9nIik7dGhpcy5vdmVybGF5LnJlbW92ZSgpO3RoaXMub3ZlcmxheT1udWxsfX19KTt0LnVpLmRpYWxvZy5vdmVybGF5SW5zdGFuY2VzPTA7dC51aUJhY2tDb21wYXQhPT0hMSYmdC53aWRnZXQoInVpLmRpYWxvZyIsdC51aS5kaWFsb2cse19wb3NpdGlvbjpmdW5jdGlvbigpe3ZhciBlLGk9dGhpcy5vcHRpb25zLnBvc2l0aW9uLHM9W10sbj1bMCwwXTsKaWYoaSl7aWYoInN0cmluZyI9PXR5cGVvZiBpfHwib2JqZWN0Ij09dHlwZW9mIGkmJiIwImluIGkpe3M9aS5zcGxpdD9pLnNwbGl0KCIgIik6W2lbMF0saVsxXV07MT09PXMubGVuZ3RoJiYoc1sxXT1zWzBdKTt0LmVhY2goWyJsZWZ0IiwidG9wIl0sZnVuY3Rpb24odCxlKXtpZigrc1t0XT09PXNbdF0pe25bdF09c1t0XTtzW3RdPWV9fSk7aT17bXk6c1swXSsoblswXTwwP25bMF06IisiK25bMF0pKyIgIitzWzFdKyhuWzFdPDA/blsxXToiKyIrblsxXSksYXQ6cy5qb2luKCIgIil9fWk9dC5leHRlbmQoe30sdC51aS5kaWFsb2cucHJvdG90eXBlLm9wdGlvbnMucG9zaXRpb24saSl9ZWxzZSBpPXQudWkuZGlhbG9nLnByb3RvdHlwZS5vcHRpb25zLnBvc2l0aW9uO2U9dGhpcy51aURpYWxvZy5pcygiOnZpc2libGUiKTtlfHx0aGlzLnVpRGlhbG9nLnNob3coKTt0aGlzLnVpRGlhbG9nLnBvc2l0aW9uKGkpO2V8fHRoaXMudWlEaWFsb2cuaGlkZSgpfX0pfShqUXVlcnkpOyFmdW5jdGlvbih0KXt0LndpZGdldCgidWkubWVudSIse3ZlcnNpb246IjEuMTAuNCIsZGVmYXVsdEVsZW1lbnQ6Ijx1bD4iLGRlbGF5OjMwMCxvcHRpb25zOntpY29uczp7c3VibWVudToidWktaWNvbi1jYXJhdC0xLWUifSxtZW51czoidWwiLHBvc2l0aW9uOntteToibGVmdCB0b3AiLGF0OiJyaWdodCB0b3AifSxyb2xlOiJtZW51IixibHVyOm51bGwsZm9jdXM6bnVsbCxzZWxlY3Q6bnVsbH0sX2NyZWF0ZTpmdW5jdGlvbigpe3RoaXMuYWN0aXZlTWVudT10aGlzLmVsZW1lbnQ7CnRoaXMubW91c2VIYW5kbGVkPSExO3RoaXMuZWxlbWVudC51bmlxdWVJZCgpLmFkZENsYXNzKCJ1aS1tZW51IHVpLXdpZGdldCB1aS13aWRnZXQtY29udGVudCB1aS1jb3JuZXItYWxsIikudG9nZ2xlQ2xhc3MoInVpLW1lbnUtaWNvbnMiLCEhdGhpcy5lbGVtZW50LmZpbmQoIi51aS1pY29uIikubGVuZ3RoKS5hdHRyKHtyb2xlOnRoaXMub3B0aW9ucy5yb2xlLHRhYkluZGV4OjB9KS5iaW5kKCJjbGljayIrdGhpcy5ldmVudE5hbWVzcGFjZSx0LnByb3h5KGZ1bmN0aW9uKHQpe3RoaXMub3B0aW9ucy5kaXNhYmxlZCYmdC5wcmV2ZW50RGVmYXVsdCgpfSx0aGlzKSk7dGhpcy5vcHRpb25zLmRpc2FibGVkJiZ0aGlzLmVsZW1lbnQuYWRkQ2xhc3MoInVpLXN0YXRlLWRpc2FibGVkIikuYXR0cigiYXJpYS1kaXNhYmxlZCIsInRydWUiKTt0aGlzLl9vbih7Im1vdXNlZG93biAudWktbWVudS1pdGVtID4gYSI6ZnVuY3Rpb24odCl7dC5wcmV2ZW50RGVmYXVsdCgpfSwiY2xpY2sgLnVpLXN0YXRlLWRpc2FibGVkID4gYSI6ZnVuY3Rpb24odCl7dC5wcmV2ZW50RGVmYXVsdCgpCn0sImNsaWNrIC51aS1tZW51LWl0ZW06aGFzKGEpIjpmdW5jdGlvbihlKXt2YXIgaT10KGUudGFyZ2V0KS5jbG9zZXN0KCIudWktbWVudS1pdGVtIik7aWYoIXRoaXMubW91c2VIYW5kbGVkJiZpLm5vdCgiLnVpLXN0YXRlLWRpc2FibGVkIikubGVuZ3RoKXt0aGlzLnNlbGVjdChlKTtlLmlzUHJvcGFnYXRpb25TdG9wcGVkKCl8fCh0aGlzLm1vdXNlSGFuZGxlZD0hMCk7aWYoaS5oYXMoIi51aS1tZW51IikubGVuZ3RoKXRoaXMuZXhwYW5kKGUpO2Vsc2UgaWYoIXRoaXMuZWxlbWVudC5pcygiOmZvY3VzIikmJnQodGhpcy5kb2N1bWVudFswXS5hY3RpdmVFbGVtZW50KS5jbG9zZXN0KCIudWktbWVudSIpLmxlbmd0aCl7dGhpcy5lbGVtZW50LnRyaWdnZXIoImZvY3VzIixbITBdKTt0aGlzLmFjdGl2ZSYmMT09PXRoaXMuYWN0aXZlLnBhcmVudHMoIi51aS1tZW51IikubGVuZ3RoJiZjbGVhclRpbWVvdXQodGhpcy50aW1lcil9fX0sIm1vdXNlZW50ZXIgLnVpLW1lbnUtaXRlbSI6ZnVuY3Rpb24oZSl7dmFyIGk9dChlLmN1cnJlbnRUYXJnZXQpOwppLnNpYmxpbmdzKCkuY2hpbGRyZW4oIi51aS1zdGF0ZS1hY3RpdmUiKS5yZW1vdmVDbGFzcygidWktc3RhdGUtYWN0aXZlIik7dGhpcy5mb2N1cyhlLGkpfSxtb3VzZWxlYXZlOiJjb2xsYXBzZUFsbCIsIm1vdXNlbGVhdmUgLnVpLW1lbnUiOiJjb2xsYXBzZUFsbCIsZm9jdXM6ZnVuY3Rpb24odCxlKXt2YXIgaT10aGlzLmFjdGl2ZXx8dGhpcy5lbGVtZW50LmNoaWxkcmVuKCIudWktbWVudS1pdGVtIikuZXEoMCk7ZXx8dGhpcy5mb2N1cyh0LGkpfSxibHVyOmZ1bmN0aW9uKGUpe3RoaXMuX2RlbGF5KGZ1bmN0aW9uKCl7dC5jb250YWlucyh0aGlzLmVsZW1lbnRbMF0sdGhpcy5kb2N1bWVudFswXS5hY3RpdmVFbGVtZW50KXx8dGhpcy5jb2xsYXBzZUFsbChlKX0pfSxrZXlkb3duOiJfa2V5ZG93biJ9KTt0aGlzLnJlZnJlc2goKTt0aGlzLl9vbih0aGlzLmRvY3VtZW50LHtjbGljazpmdW5jdGlvbihlKXt0KGUudGFyZ2V0KS5jbG9zZXN0KCIudWktbWVudSIpLmxlbmd0aHx8dGhpcy5jb2xsYXBzZUFsbChlKTsKdGhpcy5tb3VzZUhhbmRsZWQ9ITF9fSl9LF9kZXN0cm95OmZ1bmN0aW9uKCl7dGhpcy5lbGVtZW50LnJlbW92ZUF0dHIoImFyaWEtYWN0aXZlZGVzY2VuZGFudCIpLmZpbmQoIi51aS1tZW51IikuYWRkQmFjaygpLnJlbW92ZUNsYXNzKCJ1aS1tZW51IHVpLXdpZGdldCB1aS13aWRnZXQtY29udGVudCB1aS1jb3JuZXItYWxsIHVpLW1lbnUtaWNvbnMiKS5yZW1vdmVBdHRyKCJyb2xlIikucmVtb3ZlQXR0cigidGFiSW5kZXgiKS5yZW1vdmVBdHRyKCJhcmlhLWxhYmVsbGVkYnkiKS5yZW1vdmVBdHRyKCJhcmlhLWV4cGFuZGVkIikucmVtb3ZlQXR0cigiYXJpYS1oaWRkZW4iKS5yZW1vdmVBdHRyKCJhcmlhLWRpc2FibGVkIikucmVtb3ZlVW5pcXVlSWQoKS5zaG93KCk7dGhpcy5lbGVtZW50LmZpbmQoIi51aS1tZW51LWl0ZW0iKS5yZW1vdmVDbGFzcygidWktbWVudS1pdGVtIikucmVtb3ZlQXR0cigicm9sZSIpLnJlbW92ZUF0dHIoImFyaWEtZGlzYWJsZWQiKS5jaGlsZHJlbigiYSIpLnJlbW92ZVVuaXF1ZUlkKCkucmVtb3ZlQ2xhc3MoInVpLWNvcm5lci1hbGwgdWktc3RhdGUtaG92ZXIiKS5yZW1vdmVBdHRyKCJ0YWJJbmRleCIpLnJlbW92ZUF0dHIoInJvbGUiKS5yZW1vdmVBdHRyKCJhcmlhLWhhc3BvcHVwIikuY2hpbGRyZW4oKS5lYWNoKGZ1bmN0aW9uKCl7dmFyIGU9dCh0aGlzKTsKZS5kYXRhKCJ1aS1tZW51LXN1Ym1lbnUtY2FyYXQiKSYmZS5yZW1vdmUoKX0pO3RoaXMuZWxlbWVudC5maW5kKCIudWktbWVudS1kaXZpZGVyIikucmVtb3ZlQ2xhc3MoInVpLW1lbnUtZGl2aWRlciB1aS13aWRnZXQtY29udGVudCIpfSxfa2V5ZG93bjpmdW5jdGlvbihlKXtmdW5jdGlvbiBpKHQpe3JldHVybiB0LnJlcGxhY2UoL1tcLVxbXF17fSgpKis/LixcXFxeJHwjXHNdL2csIlxcJCYiKX12YXIgcyxuLG8sYSxyLGg9ITA7c3dpdGNoKGUua2V5Q29kZSl7Y2FzZSB0LnVpLmtleUNvZGUuUEFHRV9VUDp0aGlzLnByZXZpb3VzUGFnZShlKTticmVhaztjYXNlIHQudWkua2V5Q29kZS5QQUdFX0RPV046dGhpcy5uZXh0UGFnZShlKTticmVhaztjYXNlIHQudWkua2V5Q29kZS5IT01FOnRoaXMuX21vdmUoImZpcnN0IiwiZmlyc3QiLGUpO2JyZWFrO2Nhc2UgdC51aS5rZXlDb2RlLkVORDp0aGlzLl9tb3ZlKCJsYXN0IiwibGFzdCIsZSk7YnJlYWs7Y2FzZSB0LnVpLmtleUNvZGUuVVA6dGhpcy5wcmV2aW91cyhlKTsKYnJlYWs7Y2FzZSB0LnVpLmtleUNvZGUuRE9XTjp0aGlzLm5leHQoZSk7YnJlYWs7Y2FzZSB0LnVpLmtleUNvZGUuTEVGVDp0aGlzLmNvbGxhcHNlKGUpO2JyZWFrO2Nhc2UgdC51aS5rZXlDb2RlLlJJR0hUOnRoaXMuYWN0aXZlJiYhdGhpcy5hY3RpdmUuaXMoIi51aS1zdGF0ZS1kaXNhYmxlZCIpJiZ0aGlzLmV4cGFuZChlKTticmVhaztjYXNlIHQudWkua2V5Q29kZS5FTlRFUjpjYXNlIHQudWkua2V5Q29kZS5TUEFDRTp0aGlzLl9hY3RpdmF0ZShlKTticmVhaztjYXNlIHQudWkua2V5Q29kZS5FU0NBUEU6dGhpcy5jb2xsYXBzZShlKTticmVhaztkZWZhdWx0Omg9ITE7bj10aGlzLnByZXZpb3VzRmlsdGVyfHwiIjtvPVN0cmluZy5mcm9tQ2hhckNvZGUoZS5rZXlDb2RlKTthPSExO2NsZWFyVGltZW91dCh0aGlzLmZpbHRlclRpbWVyKTtvPT09bj9hPSEwOm89bitvO3I9bmV3IFJlZ0V4cCgiXiIraShvKSwiaSIpO3M9dGhpcy5hY3RpdmVNZW51LmNoaWxkcmVuKCIudWktbWVudS1pdGVtIikuZmlsdGVyKGZ1bmN0aW9uKCl7cmV0dXJuIHIudGVzdCh0KHRoaXMpLmNoaWxkcmVuKCJhIikudGV4dCgpKQp9KTtzPWEmJi0xIT09cy5pbmRleCh0aGlzLmFjdGl2ZS5uZXh0KCkpP3RoaXMuYWN0aXZlLm5leHRBbGwoIi51aS1tZW51LWl0ZW0iKTpzO2lmKCFzLmxlbmd0aCl7bz1TdHJpbmcuZnJvbUNoYXJDb2RlKGUua2V5Q29kZSk7cj1uZXcgUmVnRXhwKCJeIitpKG8pLCJpIik7cz10aGlzLmFjdGl2ZU1lbnUuY2hpbGRyZW4oIi51aS1tZW51LWl0ZW0iKS5maWx0ZXIoZnVuY3Rpb24oKXtyZXR1cm4gci50ZXN0KHQodGhpcykuY2hpbGRyZW4oImEiKS50ZXh0KCkpfSl9aWYocy5sZW5ndGgpe3RoaXMuZm9jdXMoZSxzKTtpZihzLmxlbmd0aD4xKXt0aGlzLnByZXZpb3VzRmlsdGVyPW87dGhpcy5maWx0ZXJUaW1lcj10aGlzLl9kZWxheShmdW5jdGlvbigpe2RlbGV0ZSB0aGlzLnByZXZpb3VzRmlsdGVyfSwxZTMpfWVsc2UgZGVsZXRlIHRoaXMucHJldmlvdXNGaWx0ZXJ9ZWxzZSBkZWxldGUgdGhpcy5wcmV2aW91c0ZpbHRlcn1oJiZlLnByZXZlbnREZWZhdWx0KCl9LF9hY3RpdmF0ZTpmdW5jdGlvbih0KXt0aGlzLmFjdGl2ZSYmIXRoaXMuYWN0aXZlLmlzKCIudWktc3RhdGUtZGlzYWJsZWQiKSYmKHRoaXMuYWN0aXZlLmNoaWxkcmVuKCJhW2FyaWEtaGFzcG9wdXA9J3RydWUnXSIpLmxlbmd0aD90aGlzLmV4cGFuZCh0KTp0aGlzLnNlbGVjdCh0KSkKfSxyZWZyZXNoOmZ1bmN0aW9uKCl7dmFyIGUsaT10aGlzLm9wdGlvbnMuaWNvbnMuc3VibWVudSxzPXRoaXMuZWxlbWVudC5maW5kKHRoaXMub3B0aW9ucy5tZW51cyk7dGhpcy5lbGVtZW50LnRvZ2dsZUNsYXNzKCJ1aS1tZW51LWljb25zIiwhIXRoaXMuZWxlbWVudC5maW5kKCIudWktaWNvbiIpLmxlbmd0aCk7cy5maWx0ZXIoIjpub3QoLnVpLW1lbnUpIikuYWRkQ2xhc3MoInVpLW1lbnUgdWktd2lkZ2V0IHVpLXdpZGdldC1jb250ZW50IHVpLWNvcm5lci1hbGwiKS5oaWRlKCkuYXR0cih7cm9sZTp0aGlzLm9wdGlvbnMucm9sZSwiYXJpYS1oaWRkZW4iOiJ0cnVlIiwiYXJpYS1leHBhbmRlZCI6ImZhbHNlIn0pLmVhY2goZnVuY3Rpb24oKXt2YXIgZT10KHRoaXMpLHM9ZS5wcmV2KCJhIiksbj10KCI8c3Bhbj4iKS5hZGRDbGFzcygidWktbWVudS1pY29uIHVpLWljb24gIitpKS5kYXRhKCJ1aS1tZW51LXN1Ym1lbnUtY2FyYXQiLCEwKTtzLmF0dHIoImFyaWEtaGFzcG9wdXAiLCJ0cnVlIikucHJlcGVuZChuKTsKZS5hdHRyKCJhcmlhLWxhYmVsbGVkYnkiLHMuYXR0cigiaWQiKSl9KTtlPXMuYWRkKHRoaXMuZWxlbWVudCk7ZS5jaGlsZHJlbigiOm5vdCgudWktbWVudS1pdGVtKTpoYXMoYSkiKS5hZGRDbGFzcygidWktbWVudS1pdGVtIikuYXR0cigicm9sZSIsInByZXNlbnRhdGlvbiIpLmNoaWxkcmVuKCJhIikudW5pcXVlSWQoKS5hZGRDbGFzcygidWktY29ybmVyLWFsbCIpLmF0dHIoe3RhYkluZGV4Oi0xLHJvbGU6dGhpcy5faXRlbVJvbGUoKX0pO2UuY2hpbGRyZW4oIjpub3QoLnVpLW1lbnUtaXRlbSkiKS5lYWNoKGZ1bmN0aW9uKCl7dmFyIGU9dCh0aGlzKTsvW15cLVx1MjAxNFx1MjAxM1xzXS8udGVzdChlLnRleHQoKSl8fGUuYWRkQ2xhc3MoInVpLXdpZGdldC1jb250ZW50IHVpLW1lbnUtZGl2aWRlciIpfSk7ZS5jaGlsZHJlbigiLnVpLXN0YXRlLWRpc2FibGVkIikuYXR0cigiYXJpYS1kaXNhYmxlZCIsInRydWUiKTt0aGlzLmFjdGl2ZSYmIXQuY29udGFpbnModGhpcy5lbGVtZW50WzBdLHRoaXMuYWN0aXZlWzBdKSYmdGhpcy5ibHVyKCkKfSxfaXRlbVJvbGU6ZnVuY3Rpb24oKXtyZXR1cm57bWVudToibWVudWl0ZW0iLGxpc3Rib3g6Im9wdGlvbiJ9W3RoaXMub3B0aW9ucy5yb2xlXX0sX3NldE9wdGlvbjpmdW5jdGlvbih0LGUpeyJpY29ucyI9PT10JiZ0aGlzLmVsZW1lbnQuZmluZCgiLnVpLW1lbnUtaWNvbiIpLnJlbW92ZUNsYXNzKHRoaXMub3B0aW9ucy5pY29ucy5zdWJtZW51KS5hZGRDbGFzcyhlLnN1Ym1lbnUpO3RoaXMuX3N1cGVyKHQsZSl9LGZvY3VzOmZ1bmN0aW9uKHQsZSl7dmFyIGksczt0aGlzLmJsdXIodCx0JiYiZm9jdXMiPT09dC50eXBlKTt0aGlzLl9zY3JvbGxJbnRvVmlldyhlKTt0aGlzLmFjdGl2ZT1lLmZpcnN0KCk7cz10aGlzLmFjdGl2ZS5jaGlsZHJlbigiYSIpLmFkZENsYXNzKCJ1aS1zdGF0ZS1mb2N1cyIpO3RoaXMub3B0aW9ucy5yb2xlJiZ0aGlzLmVsZW1lbnQuYXR0cigiYXJpYS1hY3RpdmVkZXNjZW5kYW50IixzLmF0dHIoImlkIikpO3RoaXMuYWN0aXZlLnBhcmVudCgpLmNsb3Nlc3QoIi51aS1tZW51LWl0ZW0iKS5jaGlsZHJlbigiYTpmaXJzdCIpLmFkZENsYXNzKCJ1aS1zdGF0ZS1hY3RpdmUiKTsKdCYmImtleWRvd24iPT09dC50eXBlP3RoaXMuX2Nsb3NlKCk6dGhpcy50aW1lcj10aGlzLl9kZWxheShmdW5jdGlvbigpe3RoaXMuX2Nsb3NlKCl9LHRoaXMuZGVsYXkpO2k9ZS5jaGlsZHJlbigiLnVpLW1lbnUiKTtpLmxlbmd0aCYmdCYmL15tb3VzZS8udGVzdCh0LnR5cGUpJiZ0aGlzLl9zdGFydE9wZW5pbmcoaSk7dGhpcy5hY3RpdmVNZW51PWUucGFyZW50KCk7dGhpcy5fdHJpZ2dlcigiZm9jdXMiLHQse2l0ZW06ZX0pfSxfc2Nyb2xsSW50b1ZpZXc6ZnVuY3Rpb24oZSl7dmFyIGkscyxuLG8sYSxyO2lmKHRoaXMuX2hhc1Njcm9sbCgpKXtpPXBhcnNlRmxvYXQodC5jc3ModGhpcy5hY3RpdmVNZW51WzBdLCJib3JkZXJUb3BXaWR0aCIpKXx8MDtzPXBhcnNlRmxvYXQodC5jc3ModGhpcy5hY3RpdmVNZW51WzBdLCJwYWRkaW5nVG9wIikpfHwwO249ZS5vZmZzZXQoKS50b3AtdGhpcy5hY3RpdmVNZW51Lm9mZnNldCgpLnRvcC1pLXM7bz10aGlzLmFjdGl2ZU1lbnUuc2Nyb2xsVG9wKCk7CmE9dGhpcy5hY3RpdmVNZW51LmhlaWdodCgpO3I9ZS5oZWlnaHQoKTswPm4/dGhpcy5hY3RpdmVNZW51LnNjcm9sbFRvcChvK24pOm4rcj5hJiZ0aGlzLmFjdGl2ZU1lbnUuc2Nyb2xsVG9wKG8rbi1hK3IpfX0sYmx1cjpmdW5jdGlvbih0LGUpe2V8fGNsZWFyVGltZW91dCh0aGlzLnRpbWVyKTtpZih0aGlzLmFjdGl2ZSl7dGhpcy5hY3RpdmUuY2hpbGRyZW4oImEiKS5yZW1vdmVDbGFzcygidWktc3RhdGUtZm9jdXMiKTt0aGlzLmFjdGl2ZT1udWxsO3RoaXMuX3RyaWdnZXIoImJsdXIiLHQse2l0ZW06dGhpcy5hY3RpdmV9KX19LF9zdGFydE9wZW5pbmc6ZnVuY3Rpb24odCl7Y2xlYXJUaW1lb3V0KHRoaXMudGltZXIpOyJ0cnVlIj09PXQuYXR0cigiYXJpYS1oaWRkZW4iKSYmKHRoaXMudGltZXI9dGhpcy5fZGVsYXkoZnVuY3Rpb24oKXt0aGlzLl9jbG9zZSgpO3RoaXMuX29wZW4odCl9LHRoaXMuZGVsYXkpKX0sX29wZW46ZnVuY3Rpb24oZSl7dmFyIGk9dC5leHRlbmQoe29mOnRoaXMuYWN0aXZlfSx0aGlzLm9wdGlvbnMucG9zaXRpb24pOwpjbGVhclRpbWVvdXQodGhpcy50aW1lcik7dGhpcy5lbGVtZW50LmZpbmQoIi51aS1tZW51Iikubm90KGUucGFyZW50cygiLnVpLW1lbnUiKSkuaGlkZSgpLmF0dHIoImFyaWEtaGlkZGVuIiwidHJ1ZSIpO2Uuc2hvdygpLnJlbW92ZUF0dHIoImFyaWEtaGlkZGVuIikuYXR0cigiYXJpYS1leHBhbmRlZCIsInRydWUiKS5wb3NpdGlvbihpKX0sY29sbGFwc2VBbGw6ZnVuY3Rpb24oZSxpKXtjbGVhclRpbWVvdXQodGhpcy50aW1lcik7dGhpcy50aW1lcj10aGlzLl9kZWxheShmdW5jdGlvbigpe3ZhciBzPWk/dGhpcy5lbGVtZW50OnQoZSYmZS50YXJnZXQpLmNsb3Nlc3QodGhpcy5lbGVtZW50LmZpbmQoIi51aS1tZW51IikpO3MubGVuZ3RofHwocz10aGlzLmVsZW1lbnQpO3RoaXMuX2Nsb3NlKHMpO3RoaXMuYmx1cihlKTt0aGlzLmFjdGl2ZU1lbnU9c30sdGhpcy5kZWxheSl9LF9jbG9zZTpmdW5jdGlvbih0KXt0fHwodD10aGlzLmFjdGl2ZT90aGlzLmFjdGl2ZS5wYXJlbnQoKTp0aGlzLmVsZW1lbnQpOwp0LmZpbmQoIi51aS1tZW51IikuaGlkZSgpLmF0dHIoImFyaWEtaGlkZGVuIiwidHJ1ZSIpLmF0dHIoImFyaWEtZXhwYW5kZWQiLCJmYWxzZSIpLmVuZCgpLmZpbmQoImEudWktc3RhdGUtYWN0aXZlIikucmVtb3ZlQ2xhc3MoInVpLXN0YXRlLWFjdGl2ZSIpfSxjb2xsYXBzZTpmdW5jdGlvbih0KXt2YXIgZT10aGlzLmFjdGl2ZSYmdGhpcy5hY3RpdmUucGFyZW50KCkuY2xvc2VzdCgiLnVpLW1lbnUtaXRlbSIsdGhpcy5lbGVtZW50KTtpZihlJiZlLmxlbmd0aCl7dGhpcy5fY2xvc2UoKTt0aGlzLmZvY3VzKHQsZSl9fSxleHBhbmQ6ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy5hY3RpdmUmJnRoaXMuYWN0aXZlLmNoaWxkcmVuKCIudWktbWVudSAiKS5jaGlsZHJlbigiLnVpLW1lbnUtaXRlbSIpLmZpcnN0KCk7aWYoZSYmZS5sZW5ndGgpe3RoaXMuX29wZW4oZS5wYXJlbnQoKSk7dGhpcy5fZGVsYXkoZnVuY3Rpb24oKXt0aGlzLmZvY3VzKHQsZSl9KX19LG5leHQ6ZnVuY3Rpb24odCl7dGhpcy5fbW92ZSgibmV4dCIsImZpcnN0Iix0KQp9LHByZXZpb3VzOmZ1bmN0aW9uKHQpe3RoaXMuX21vdmUoInByZXYiLCJsYXN0Iix0KX0saXNGaXJzdEl0ZW06ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5hY3RpdmUmJiF0aGlzLmFjdGl2ZS5wcmV2QWxsKCIudWktbWVudS1pdGVtIikubGVuZ3RofSxpc0xhc3RJdGVtOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuYWN0aXZlJiYhdGhpcy5hY3RpdmUubmV4dEFsbCgiLnVpLW1lbnUtaXRlbSIpLmxlbmd0aH0sX21vdmU6ZnVuY3Rpb24odCxlLGkpe3ZhciBzO3RoaXMuYWN0aXZlJiYocz0iZmlyc3QiPT09dHx8Imxhc3QiPT09dD90aGlzLmFjdGl2ZVsiZmlyc3QiPT09dD8icHJldkFsbCI6Im5leHRBbGwiXSgiLnVpLW1lbnUtaXRlbSIpLmVxKC0xKTp0aGlzLmFjdGl2ZVt0KyJBbGwiXSgiLnVpLW1lbnUtaXRlbSIpLmVxKDApKTtzJiZzLmxlbmd0aCYmdGhpcy5hY3RpdmV8fChzPXRoaXMuYWN0aXZlTWVudS5jaGlsZHJlbigiLnVpLW1lbnUtaXRlbSIpW2VdKCkpO3RoaXMuZm9jdXMoaSxzKQp9LG5leHRQYWdlOmZ1bmN0aW9uKGUpe3ZhciBpLHMsbjtpZih0aGlzLmFjdGl2ZSl7aWYoIXRoaXMuaXNMYXN0SXRlbSgpKWlmKHRoaXMuX2hhc1Njcm9sbCgpKXtzPXRoaXMuYWN0aXZlLm9mZnNldCgpLnRvcDtuPXRoaXMuZWxlbWVudC5oZWlnaHQoKTt0aGlzLmFjdGl2ZS5uZXh0QWxsKCIudWktbWVudS1pdGVtIikuZWFjaChmdW5jdGlvbigpe2k9dCh0aGlzKTtyZXR1cm4gaS5vZmZzZXQoKS50b3Atcy1uPDB9KTt0aGlzLmZvY3VzKGUsaSl9ZWxzZSB0aGlzLmZvY3VzKGUsdGhpcy5hY3RpdmVNZW51LmNoaWxkcmVuKCIudWktbWVudS1pdGVtIilbdGhpcy5hY3RpdmU/Imxhc3QiOiJmaXJzdCJdKCkpfWVsc2UgdGhpcy5uZXh0KGUpfSxwcmV2aW91c1BhZ2U6ZnVuY3Rpb24oZSl7dmFyIGkscyxuO2lmKHRoaXMuYWN0aXZlKXtpZighdGhpcy5pc0ZpcnN0SXRlbSgpKWlmKHRoaXMuX2hhc1Njcm9sbCgpKXtzPXRoaXMuYWN0aXZlLm9mZnNldCgpLnRvcDtuPXRoaXMuZWxlbWVudC5oZWlnaHQoKTsKdGhpcy5hY3RpdmUucHJldkFsbCgiLnVpLW1lbnUtaXRlbSIpLmVhY2goZnVuY3Rpb24oKXtpPXQodGhpcyk7cmV0dXJuIGkub2Zmc2V0KCkudG9wLXMrbj4wfSk7dGhpcy5mb2N1cyhlLGkpfWVsc2UgdGhpcy5mb2N1cyhlLHRoaXMuYWN0aXZlTWVudS5jaGlsZHJlbigiLnVpLW1lbnUtaXRlbSIpLmZpcnN0KCkpfWVsc2UgdGhpcy5uZXh0KGUpfSxfaGFzU2Nyb2xsOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZWxlbWVudC5vdXRlckhlaWdodCgpPHRoaXMuZWxlbWVudC5wcm9wKCJzY3JvbGxIZWlnaHQiKX0sc2VsZWN0OmZ1bmN0aW9uKGUpe3RoaXMuYWN0aXZlPXRoaXMuYWN0aXZlfHx0KGUudGFyZ2V0KS5jbG9zZXN0KCIudWktbWVudS1pdGVtIik7dmFyIGk9e2l0ZW06dGhpcy5hY3RpdmV9O3RoaXMuYWN0aXZlLmhhcygiLnVpLW1lbnUiKS5sZW5ndGh8fHRoaXMuY29sbGFwc2VBbGwoZSwhMCk7dGhpcy5fdHJpZ2dlcigic2VsZWN0IixlLGkpfX0pfShqUXVlcnkpOyFmdW5jdGlvbih0LGUpe3Qud2lkZ2V0KCJ1aS5wcm9ncmVzc2JhciIse3ZlcnNpb246IjEuMTAuNCIsb3B0aW9uczp7bWF4OjEwMCx2YWx1ZTowLGNoYW5nZTpudWxsLGNvbXBsZXRlOm51bGx9LG1pbjowLF9jcmVhdGU6ZnVuY3Rpb24oKXt0aGlzLm9sZFZhbHVlPXRoaXMub3B0aW9ucy52YWx1ZT10aGlzLl9jb25zdHJhaW5lZFZhbHVlKCk7CnRoaXMuZWxlbWVudC5hZGRDbGFzcygidWktcHJvZ3Jlc3NiYXIgdWktd2lkZ2V0IHVpLXdpZGdldC1jb250ZW50IHVpLWNvcm5lci1hbGwiKS5hdHRyKHtyb2xlOiJwcm9ncmVzc2JhciIsImFyaWEtdmFsdWVtaW4iOnRoaXMubWlufSk7dGhpcy52YWx1ZURpdj10KCI8ZGl2IGNsYXNzPSd1aS1wcm9ncmVzc2Jhci12YWx1ZSB1aS13aWRnZXQtaGVhZGVyIHVpLWNvcm5lci1sZWZ0Jz48L2Rpdj4iKS5hcHBlbmRUbyh0aGlzLmVsZW1lbnQpO3RoaXMuX3JlZnJlc2hWYWx1ZSgpfSxfZGVzdHJveTpmdW5jdGlvbigpe3RoaXMuZWxlbWVudC5yZW1vdmVDbGFzcygidWktcHJvZ3Jlc3NiYXIgdWktd2lkZ2V0IHVpLXdpZGdldC1jb250ZW50IHVpLWNvcm5lci1hbGwiKS5yZW1vdmVBdHRyKCJyb2xlIikucmVtb3ZlQXR0cigiYXJpYS12YWx1ZW1pbiIpLnJlbW92ZUF0dHIoImFyaWEtdmFsdWVtYXgiKS5yZW1vdmVBdHRyKCJhcmlhLXZhbHVlbm93Iik7dGhpcy52YWx1ZURpdi5yZW1vdmUoKQp9LHZhbHVlOmZ1bmN0aW9uKHQpe2lmKHQ9PT1lKXJldHVybiB0aGlzLm9wdGlvbnMudmFsdWU7dGhpcy5vcHRpb25zLnZhbHVlPXRoaXMuX2NvbnN0cmFpbmVkVmFsdWUodCk7dGhpcy5fcmVmcmVzaFZhbHVlKCl9LF9jb25zdHJhaW5lZFZhbHVlOmZ1bmN0aW9uKHQpe3Q9PT1lJiYodD10aGlzLm9wdGlvbnMudmFsdWUpO3RoaXMuaW5kZXRlcm1pbmF0ZT10PT09ITE7Im51bWJlciIhPXR5cGVvZiB0JiYodD0wKTtyZXR1cm4gdGhpcy5pbmRldGVybWluYXRlPyExOk1hdGgubWluKHRoaXMub3B0aW9ucy5tYXgsTWF0aC5tYXgodGhpcy5taW4sdCkpfSxfc2V0T3B0aW9uczpmdW5jdGlvbih0KXt2YXIgZT10LnZhbHVlO2RlbGV0ZSB0LnZhbHVlO3RoaXMuX3N1cGVyKHQpO3RoaXMub3B0aW9ucy52YWx1ZT10aGlzLl9jb25zdHJhaW5lZFZhbHVlKGUpO3RoaXMuX3JlZnJlc2hWYWx1ZSgpfSxfc2V0T3B0aW9uOmZ1bmN0aW9uKHQsZSl7Im1heCI9PT10JiYoZT1NYXRoLm1heCh0aGlzLm1pbixlKSk7CnRoaXMuX3N1cGVyKHQsZSl9LF9wZXJjZW50YWdlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuaW5kZXRlcm1pbmF0ZT8xMDA6MTAwKih0aGlzLm9wdGlvbnMudmFsdWUtdGhpcy5taW4pLyh0aGlzLm9wdGlvbnMubWF4LXRoaXMubWluKX0sX3JlZnJlc2hWYWx1ZTpmdW5jdGlvbigpe3ZhciBlPXRoaXMub3B0aW9ucy52YWx1ZSxpPXRoaXMuX3BlcmNlbnRhZ2UoKTt0aGlzLnZhbHVlRGl2LnRvZ2dsZSh0aGlzLmluZGV0ZXJtaW5hdGV8fGU+dGhpcy5taW4pLnRvZ2dsZUNsYXNzKCJ1aS1jb3JuZXItcmlnaHQiLGU9PT10aGlzLm9wdGlvbnMubWF4KS53aWR0aChpLnRvRml4ZWQoMCkrIiUiKTt0aGlzLmVsZW1lbnQudG9nZ2xlQ2xhc3MoInVpLXByb2dyZXNzYmFyLWluZGV0ZXJtaW5hdGUiLHRoaXMuaW5kZXRlcm1pbmF0ZSk7aWYodGhpcy5pbmRldGVybWluYXRlKXt0aGlzLmVsZW1lbnQucmVtb3ZlQXR0cigiYXJpYS12YWx1ZW5vdyIpO3RoaXMub3ZlcmxheURpdnx8KHRoaXMub3ZlcmxheURpdj10KCI8ZGl2IGNsYXNzPSd1aS1wcm9ncmVzc2Jhci1vdmVybGF5Jz48L2Rpdj4iKS5hcHBlbmRUbyh0aGlzLnZhbHVlRGl2KSkKfWVsc2V7dGhpcy5lbGVtZW50LmF0dHIoeyJhcmlhLXZhbHVlbWF4Ijp0aGlzLm9wdGlvbnMubWF4LCJhcmlhLXZhbHVlbm93IjplfSk7aWYodGhpcy5vdmVybGF5RGl2KXt0aGlzLm92ZXJsYXlEaXYucmVtb3ZlKCk7dGhpcy5vdmVybGF5RGl2PW51bGx9fWlmKHRoaXMub2xkVmFsdWUhPT1lKXt0aGlzLm9sZFZhbHVlPWU7dGhpcy5fdHJpZ2dlcigiY2hhbmdlIil9ZT09PXRoaXMub3B0aW9ucy5tYXgmJnRoaXMuX3RyaWdnZXIoImNvbXBsZXRlIil9fSl9KGpRdWVyeSk7IWZ1bmN0aW9uKHQpe3ZhciBlPTU7dC53aWRnZXQoInVpLnNsaWRlciIsdC51aS5tb3VzZSx7dmVyc2lvbjoiMS4xMC40Iix3aWRnZXRFdmVudFByZWZpeDoic2xpZGUiLG9wdGlvbnM6e2FuaW1hdGU6ITEsZGlzdGFuY2U6MCxtYXg6MTAwLG1pbjowLG9yaWVudGF0aW9uOiJob3Jpem9udGFsIixyYW5nZTohMSxzdGVwOjEsdmFsdWU6MCx2YWx1ZXM6bnVsbCxjaGFuZ2U6bnVsbCxzbGlkZTpudWxsLHN0YXJ0Om51bGwsc3RvcDpudWxsfSxfY3JlYXRlOmZ1bmN0aW9uKCl7dGhpcy5fa2V5U2xpZGluZz0hMTsKdGhpcy5fbW91c2VTbGlkaW5nPSExO3RoaXMuX2FuaW1hdGVPZmY9ITA7dGhpcy5faGFuZGxlSW5kZXg9bnVsbDt0aGlzLl9kZXRlY3RPcmllbnRhdGlvbigpO3RoaXMuX21vdXNlSW5pdCgpO3RoaXMuZWxlbWVudC5hZGRDbGFzcygidWktc2xpZGVyIHVpLXNsaWRlci0iK3RoaXMub3JpZW50YXRpb24rIiB1aS13aWRnZXQgdWktd2lkZ2V0LWNvbnRlbnQgdWktY29ybmVyLWFsbCIpO3RoaXMuX3JlZnJlc2goKTt0aGlzLl9zZXRPcHRpb24oImRpc2FibGVkIix0aGlzLm9wdGlvbnMuZGlzYWJsZWQpO3RoaXMuX2FuaW1hdGVPZmY9ITF9LF9yZWZyZXNoOmZ1bmN0aW9uKCl7dGhpcy5fY3JlYXRlUmFuZ2UoKTt0aGlzLl9jcmVhdGVIYW5kbGVzKCk7dGhpcy5fc2V0dXBFdmVudHMoKTt0aGlzLl9yZWZyZXNoVmFsdWUoKX0sX2NyZWF0ZUhhbmRsZXM6ZnVuY3Rpb24oKXt2YXIgZSxpLHM9dGhpcy5vcHRpb25zLG49dGhpcy5lbGVtZW50LmZpbmQoIi51aS1zbGlkZXItaGFuZGxlIikuYWRkQ2xhc3MoInVpLXN0YXRlLWRlZmF1bHQgdWktY29ybmVyLWFsbCIpLG89IjxhIGNsYXNzPSd1aS1zbGlkZXItaGFuZGxlIHVpLXN0YXRlLWRlZmF1bHQgdWktY29ybmVyLWFsbCcgaHJlZj0nIyc+PC9hPiIsYT1bXTsKaT1zLnZhbHVlcyYmcy52YWx1ZXMubGVuZ3RofHwxO2lmKG4ubGVuZ3RoPmkpe24uc2xpY2UoaSkucmVtb3ZlKCk7bj1uLnNsaWNlKDAsaSl9Zm9yKGU9bi5sZW5ndGg7aT5lO2UrKylhLnB1c2gobyk7dGhpcy5oYW5kbGVzPW4uYWRkKHQoYS5qb2luKCIiKSkuYXBwZW5kVG8odGhpcy5lbGVtZW50KSk7dGhpcy5oYW5kbGU9dGhpcy5oYW5kbGVzLmVxKDApO3RoaXMuaGFuZGxlcy5lYWNoKGZ1bmN0aW9uKGUpe3QodGhpcykuZGF0YSgidWktc2xpZGVyLWhhbmRsZS1pbmRleCIsZSl9KX0sX2NyZWF0ZVJhbmdlOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5vcHRpb25zLGk9IiI7aWYoZS5yYW5nZSl7ZS5yYW5nZT09PSEwJiYoZS52YWx1ZXM/ZS52YWx1ZXMubGVuZ3RoJiYyIT09ZS52YWx1ZXMubGVuZ3RoP2UudmFsdWVzPVtlLnZhbHVlc1swXSxlLnZhbHVlc1swXV06dC5pc0FycmF5KGUudmFsdWVzKSYmKGUudmFsdWVzPWUudmFsdWVzLnNsaWNlKDApKTplLnZhbHVlcz1bdGhpcy5fdmFsdWVNaW4oKSx0aGlzLl92YWx1ZU1pbigpXSk7CmlmKHRoaXMucmFuZ2UmJnRoaXMucmFuZ2UubGVuZ3RoKXRoaXMucmFuZ2UucmVtb3ZlQ2xhc3MoInVpLXNsaWRlci1yYW5nZS1taW4gdWktc2xpZGVyLXJhbmdlLW1heCIpLmNzcyh7bGVmdDoiIixib3R0b206IiJ9KTtlbHNle3RoaXMucmFuZ2U9dCgiPGRpdj48L2Rpdj4iKS5hcHBlbmRUbyh0aGlzLmVsZW1lbnQpO2k9InVpLXNsaWRlci1yYW5nZSB1aS13aWRnZXQtaGVhZGVyIHVpLWNvcm5lci1hbGwifXRoaXMucmFuZ2UuYWRkQ2xhc3MoaSsoIm1pbiI9PT1lLnJhbmdlfHwibWF4Ij09PWUucmFuZ2U/IiB1aS1zbGlkZXItcmFuZ2UtIitlLnJhbmdlOiIiKSl9ZWxzZXt0aGlzLnJhbmdlJiZ0aGlzLnJhbmdlLnJlbW92ZSgpO3RoaXMucmFuZ2U9bnVsbH19LF9zZXR1cEV2ZW50czpmdW5jdGlvbigpe3ZhciB0PXRoaXMuaGFuZGxlcy5hZGQodGhpcy5yYW5nZSkuZmlsdGVyKCJhIik7dGhpcy5fb2ZmKHQpO3RoaXMuX29uKHQsdGhpcy5faGFuZGxlRXZlbnRzKTt0aGlzLl9ob3ZlcmFibGUodCk7CnRoaXMuX2ZvY3VzYWJsZSh0KX0sX2Rlc3Ryb3k6ZnVuY3Rpb24oKXt0aGlzLmhhbmRsZXMucmVtb3ZlKCk7dGhpcy5yYW5nZSYmdGhpcy5yYW5nZS5yZW1vdmUoKTt0aGlzLmVsZW1lbnQucmVtb3ZlQ2xhc3MoInVpLXNsaWRlciB1aS1zbGlkZXItaG9yaXpvbnRhbCB1aS1zbGlkZXItdmVydGljYWwgdWktd2lkZ2V0IHVpLXdpZGdldC1jb250ZW50IHVpLWNvcm5lci1hbGwiKTt0aGlzLl9tb3VzZURlc3Ryb3koKX0sX21vdXNlQ2FwdHVyZTpmdW5jdGlvbihlKXt2YXIgaSxzLG4sbyxhLHIsaCxsLHU9dGhpcyxjPXRoaXMub3B0aW9ucztpZihjLmRpc2FibGVkKXJldHVybiExO3RoaXMuZWxlbWVudFNpemU9e3dpZHRoOnRoaXMuZWxlbWVudC5vdXRlcldpZHRoKCksaGVpZ2h0OnRoaXMuZWxlbWVudC5vdXRlckhlaWdodCgpfTt0aGlzLmVsZW1lbnRPZmZzZXQ9dGhpcy5lbGVtZW50Lm9mZnNldCgpO2k9e3g6ZS5wYWdlWCx5OmUucGFnZVl9O3M9dGhpcy5fbm9ybVZhbHVlRnJvbU1vdXNlKGkpOwpuPXRoaXMuX3ZhbHVlTWF4KCktdGhpcy5fdmFsdWVNaW4oKSsxO3RoaXMuaGFuZGxlcy5lYWNoKGZ1bmN0aW9uKGUpe3ZhciBpPU1hdGguYWJzKHMtdS52YWx1ZXMoZSkpO2lmKG4+aXx8bj09PWkmJihlPT09dS5fbGFzdENoYW5nZWRWYWx1ZXx8dS52YWx1ZXMoZSk9PT1jLm1pbikpe249aTtvPXQodGhpcyk7YT1lfX0pO3I9dGhpcy5fc3RhcnQoZSxhKTtpZihyPT09ITEpcmV0dXJuITE7dGhpcy5fbW91c2VTbGlkaW5nPSEwO3RoaXMuX2hhbmRsZUluZGV4PWE7by5hZGRDbGFzcygidWktc3RhdGUtYWN0aXZlIikuZm9jdXMoKTtoPW8ub2Zmc2V0KCk7bD0hdChlLnRhcmdldCkucGFyZW50cygpLmFkZEJhY2soKS5pcygiLnVpLXNsaWRlci1oYW5kbGUiKTt0aGlzLl9jbGlja09mZnNldD1sP3tsZWZ0OjAsdG9wOjB9OntsZWZ0OmUucGFnZVgtaC5sZWZ0LW8ud2lkdGgoKS8yLHRvcDplLnBhZ2VZLWgudG9wLW8uaGVpZ2h0KCkvMi0ocGFyc2VJbnQoby5jc3MoImJvcmRlclRvcFdpZHRoIiksMTApfHwwKS0ocGFyc2VJbnQoby5jc3MoImJvcmRlckJvdHRvbVdpZHRoIiksMTApfHwwKSsocGFyc2VJbnQoby5jc3MoIm1hcmdpblRvcCIpLDEwKXx8MCl9Owp0aGlzLmhhbmRsZXMuaGFzQ2xhc3MoInVpLXN0YXRlLWhvdmVyIil8fHRoaXMuX3NsaWRlKGUsYSxzKTt0aGlzLl9hbmltYXRlT2ZmPSEwO3JldHVybiEwfSxfbW91c2VTdGFydDpmdW5jdGlvbigpe3JldHVybiEwfSxfbW91c2VEcmFnOmZ1bmN0aW9uKHQpe3ZhciBlPXt4OnQucGFnZVgseTp0LnBhZ2VZfSxpPXRoaXMuX25vcm1WYWx1ZUZyb21Nb3VzZShlKTt0aGlzLl9zbGlkZSh0LHRoaXMuX2hhbmRsZUluZGV4LGkpO3JldHVybiExfSxfbW91c2VTdG9wOmZ1bmN0aW9uKHQpe3RoaXMuaGFuZGxlcy5yZW1vdmVDbGFzcygidWktc3RhdGUtYWN0aXZlIik7dGhpcy5fbW91c2VTbGlkaW5nPSExO3RoaXMuX3N0b3AodCx0aGlzLl9oYW5kbGVJbmRleCk7dGhpcy5fY2hhbmdlKHQsdGhpcy5faGFuZGxlSW5kZXgpO3RoaXMuX2hhbmRsZUluZGV4PW51bGw7dGhpcy5fY2xpY2tPZmZzZXQ9bnVsbDt0aGlzLl9hbmltYXRlT2ZmPSExO3JldHVybiExfSxfZGV0ZWN0T3JpZW50YXRpb246ZnVuY3Rpb24oKXt0aGlzLm9yaWVudGF0aW9uPSJ2ZXJ0aWNhbCI9PT10aGlzLm9wdGlvbnMub3JpZW50YXRpb24/InZlcnRpY2FsIjoiaG9yaXpvbnRhbCIKfSxfbm9ybVZhbHVlRnJvbU1vdXNlOmZ1bmN0aW9uKHQpe3ZhciBlLGkscyxuLG87aWYoImhvcml6b250YWwiPT09dGhpcy5vcmllbnRhdGlvbil7ZT10aGlzLmVsZW1lbnRTaXplLndpZHRoO2k9dC54LXRoaXMuZWxlbWVudE9mZnNldC5sZWZ0LSh0aGlzLl9jbGlja09mZnNldD90aGlzLl9jbGlja09mZnNldC5sZWZ0OjApfWVsc2V7ZT10aGlzLmVsZW1lbnRTaXplLmhlaWdodDtpPXQueS10aGlzLmVsZW1lbnRPZmZzZXQudG9wLSh0aGlzLl9jbGlja09mZnNldD90aGlzLl9jbGlja09mZnNldC50b3A6MCl9cz1pL2U7cz4xJiYocz0xKTswPnMmJihzPTApOyJ2ZXJ0aWNhbCI9PT10aGlzLm9yaWVudGF0aW9uJiYocz0xLXMpO249dGhpcy5fdmFsdWVNYXgoKS10aGlzLl92YWx1ZU1pbigpO289dGhpcy5fdmFsdWVNaW4oKStzKm47cmV0dXJuIHRoaXMuX3RyaW1BbGlnblZhbHVlKG8pfSxfc3RhcnQ6ZnVuY3Rpb24odCxlKXt2YXIgaT17aGFuZGxlOnRoaXMuaGFuZGxlc1tlXSx2YWx1ZTp0aGlzLnZhbHVlKCl9OwppZih0aGlzLm9wdGlvbnMudmFsdWVzJiZ0aGlzLm9wdGlvbnMudmFsdWVzLmxlbmd0aCl7aS52YWx1ZT10aGlzLnZhbHVlcyhlKTtpLnZhbHVlcz10aGlzLnZhbHVlcygpfXJldHVybiB0aGlzLl90cmlnZ2VyKCJzdGFydCIsdCxpKX0sX3NsaWRlOmZ1bmN0aW9uKHQsZSxpKXt2YXIgcyxuLG87aWYodGhpcy5vcHRpb25zLnZhbHVlcyYmdGhpcy5vcHRpb25zLnZhbHVlcy5sZW5ndGgpe3M9dGhpcy52YWx1ZXMoZT8wOjEpOzI9PT10aGlzLm9wdGlvbnMudmFsdWVzLmxlbmd0aCYmdGhpcy5vcHRpb25zLnJhbmdlPT09ITAmJigwPT09ZSYmaT5zfHwxPT09ZSYmcz5pKSYmKGk9cyk7aWYoaSE9PXRoaXMudmFsdWVzKGUpKXtuPXRoaXMudmFsdWVzKCk7bltlXT1pO289dGhpcy5fdHJpZ2dlcigic2xpZGUiLHQse2hhbmRsZTp0aGlzLmhhbmRsZXNbZV0sdmFsdWU6aSx2YWx1ZXM6bn0pO3M9dGhpcy52YWx1ZXMoZT8wOjEpO28hPT0hMSYmdGhpcy52YWx1ZXMoZSxpKX19ZWxzZSBpZihpIT09dGhpcy52YWx1ZSgpKXtvPXRoaXMuX3RyaWdnZXIoInNsaWRlIix0LHtoYW5kbGU6dGhpcy5oYW5kbGVzW2VdLHZhbHVlOml9KTsKbyE9PSExJiZ0aGlzLnZhbHVlKGkpfX0sX3N0b3A6ZnVuY3Rpb24odCxlKXt2YXIgaT17aGFuZGxlOnRoaXMuaGFuZGxlc1tlXSx2YWx1ZTp0aGlzLnZhbHVlKCl9O2lmKHRoaXMub3B0aW9ucy52YWx1ZXMmJnRoaXMub3B0aW9ucy52YWx1ZXMubGVuZ3RoKXtpLnZhbHVlPXRoaXMudmFsdWVzKGUpO2kudmFsdWVzPXRoaXMudmFsdWVzKCl9dGhpcy5fdHJpZ2dlcigic3RvcCIsdCxpKX0sX2NoYW5nZTpmdW5jdGlvbih0LGUpe2lmKCF0aGlzLl9rZXlTbGlkaW5nJiYhdGhpcy5fbW91c2VTbGlkaW5nKXt2YXIgaT17aGFuZGxlOnRoaXMuaGFuZGxlc1tlXSx2YWx1ZTp0aGlzLnZhbHVlKCl9O2lmKHRoaXMub3B0aW9ucy52YWx1ZXMmJnRoaXMub3B0aW9ucy52YWx1ZXMubGVuZ3RoKXtpLnZhbHVlPXRoaXMudmFsdWVzKGUpO2kudmFsdWVzPXRoaXMudmFsdWVzKCl9dGhpcy5fbGFzdENoYW5nZWRWYWx1ZT1lO3RoaXMuX3RyaWdnZXIoImNoYW5nZSIsdCxpKX19LHZhbHVlOmZ1bmN0aW9uKHQpe2lmKCFhcmd1bWVudHMubGVuZ3RoKXJldHVybiB0aGlzLl92YWx1ZSgpOwp0aGlzLm9wdGlvbnMudmFsdWU9dGhpcy5fdHJpbUFsaWduVmFsdWUodCk7dGhpcy5fcmVmcmVzaFZhbHVlKCk7dGhpcy5fY2hhbmdlKG51bGwsMCl9LHZhbHVlczpmdW5jdGlvbihlLGkpe3ZhciBzLG4sbztpZihhcmd1bWVudHMubGVuZ3RoPjEpe3RoaXMub3B0aW9ucy52YWx1ZXNbZV09dGhpcy5fdHJpbUFsaWduVmFsdWUoaSk7dGhpcy5fcmVmcmVzaFZhbHVlKCk7dGhpcy5fY2hhbmdlKG51bGwsZSl9ZWxzZXtpZighYXJndW1lbnRzLmxlbmd0aClyZXR1cm4gdGhpcy5fdmFsdWVzKCk7aWYoIXQuaXNBcnJheShhcmd1bWVudHNbMF0pKXJldHVybiB0aGlzLm9wdGlvbnMudmFsdWVzJiZ0aGlzLm9wdGlvbnMudmFsdWVzLmxlbmd0aD90aGlzLl92YWx1ZXMoZSk6dGhpcy52YWx1ZSgpO3M9dGhpcy5vcHRpb25zLnZhbHVlcztuPWFyZ3VtZW50c1swXTtmb3Iobz0wO288cy5sZW5ndGg7bys9MSl7c1tvXT10aGlzLl90cmltQWxpZ25WYWx1ZShuW29dKTt0aGlzLl9jaGFuZ2UobnVsbCxvKQp9dGhpcy5fcmVmcmVzaFZhbHVlKCl9fSxfc2V0T3B0aW9uOmZ1bmN0aW9uKGUsaSl7dmFyIHMsbj0wO2lmKCJyYW5nZSI9PT1lJiZ0aGlzLm9wdGlvbnMucmFuZ2U9PT0hMClpZigibWluIj09PWkpe3RoaXMub3B0aW9ucy52YWx1ZT10aGlzLl92YWx1ZXMoMCk7dGhpcy5vcHRpb25zLnZhbHVlcz1udWxsfWVsc2UgaWYoIm1heCI9PT1pKXt0aGlzLm9wdGlvbnMudmFsdWU9dGhpcy5fdmFsdWVzKHRoaXMub3B0aW9ucy52YWx1ZXMubGVuZ3RoLTEpO3RoaXMub3B0aW9ucy52YWx1ZXM9bnVsbH10LmlzQXJyYXkodGhpcy5vcHRpb25zLnZhbHVlcykmJihuPXRoaXMub3B0aW9ucy52YWx1ZXMubGVuZ3RoKTt0LldpZGdldC5wcm90b3R5cGUuX3NldE9wdGlvbi5hcHBseSh0aGlzLGFyZ3VtZW50cyk7c3dpdGNoKGUpe2Nhc2Uib3JpZW50YXRpb24iOnRoaXMuX2RldGVjdE9yaWVudGF0aW9uKCk7dGhpcy5lbGVtZW50LnJlbW92ZUNsYXNzKCJ1aS1zbGlkZXItaG9yaXpvbnRhbCB1aS1zbGlkZXItdmVydGljYWwiKS5hZGRDbGFzcygidWktc2xpZGVyLSIrdGhpcy5vcmllbnRhdGlvbik7CnRoaXMuX3JlZnJlc2hWYWx1ZSgpO2JyZWFrO2Nhc2UidmFsdWUiOnRoaXMuX2FuaW1hdGVPZmY9ITA7dGhpcy5fcmVmcmVzaFZhbHVlKCk7dGhpcy5fY2hhbmdlKG51bGwsMCk7dGhpcy5fYW5pbWF0ZU9mZj0hMTticmVhaztjYXNlInZhbHVlcyI6dGhpcy5fYW5pbWF0ZU9mZj0hMDt0aGlzLl9yZWZyZXNoVmFsdWUoKTtmb3Iocz0wO24+cztzKz0xKXRoaXMuX2NoYW5nZShudWxsLHMpO3RoaXMuX2FuaW1hdGVPZmY9ITE7YnJlYWs7Y2FzZSJtaW4iOmNhc2UibWF4Ijp0aGlzLl9hbmltYXRlT2ZmPSEwO3RoaXMuX3JlZnJlc2hWYWx1ZSgpO3RoaXMuX2FuaW1hdGVPZmY9ITE7YnJlYWs7Y2FzZSJyYW5nZSI6dGhpcy5fYW5pbWF0ZU9mZj0hMDt0aGlzLl9yZWZyZXNoKCk7dGhpcy5fYW5pbWF0ZU9mZj0hMX19LF92YWx1ZTpmdW5jdGlvbigpe3ZhciB0PXRoaXMub3B0aW9ucy52YWx1ZTt0PXRoaXMuX3RyaW1BbGlnblZhbHVlKHQpO3JldHVybiB0fSxfdmFsdWVzOmZ1bmN0aW9uKHQpe3ZhciBlLGksczsKaWYoYXJndW1lbnRzLmxlbmd0aCl7ZT10aGlzLm9wdGlvbnMudmFsdWVzW3RdO2U9dGhpcy5fdHJpbUFsaWduVmFsdWUoZSk7cmV0dXJuIGV9aWYodGhpcy5vcHRpb25zLnZhbHVlcyYmdGhpcy5vcHRpb25zLnZhbHVlcy5sZW5ndGgpe2k9dGhpcy5vcHRpb25zLnZhbHVlcy5zbGljZSgpO2ZvcihzPTA7czxpLmxlbmd0aDtzKz0xKWlbc109dGhpcy5fdHJpbUFsaWduVmFsdWUoaVtzXSk7cmV0dXJuIGl9cmV0dXJuW119LF90cmltQWxpZ25WYWx1ZTpmdW5jdGlvbih0KXtpZih0PD10aGlzLl92YWx1ZU1pbigpKXJldHVybiB0aGlzLl92YWx1ZU1pbigpO2lmKHQ+PXRoaXMuX3ZhbHVlTWF4KCkpcmV0dXJuIHRoaXMuX3ZhbHVlTWF4KCk7dmFyIGU9dGhpcy5vcHRpb25zLnN0ZXA+MD90aGlzLm9wdGlvbnMuc3RlcDoxLGk9KHQtdGhpcy5fdmFsdWVNaW4oKSklZSxzPXQtaTsyKk1hdGguYWJzKGkpPj1lJiYocys9aT4wP2U6LWUpO3JldHVybiBwYXJzZUZsb2F0KHMudG9GaXhlZCg1KSl9LF92YWx1ZU1pbjpmdW5jdGlvbigpe3JldHVybiB0aGlzLm9wdGlvbnMubWluCn0sX3ZhbHVlTWF4OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMub3B0aW9ucy5tYXh9LF9yZWZyZXNoVmFsdWU6ZnVuY3Rpb24oKXt2YXIgZSxpLHMsbixvLGE9dGhpcy5vcHRpb25zLnJhbmdlLHI9dGhpcy5vcHRpb25zLGg9dGhpcyxsPXRoaXMuX2FuaW1hdGVPZmY/ITE6ci5hbmltYXRlLHU9e307aWYodGhpcy5vcHRpb25zLnZhbHVlcyYmdGhpcy5vcHRpb25zLnZhbHVlcy5sZW5ndGgpdGhpcy5oYW5kbGVzLmVhY2goZnVuY3Rpb24ocyl7aT0oaC52YWx1ZXMocyktaC5fdmFsdWVNaW4oKSkvKGguX3ZhbHVlTWF4KCktaC5fdmFsdWVNaW4oKSkqMTAwO3VbImhvcml6b250YWwiPT09aC5vcmllbnRhdGlvbj8ibGVmdCI6ImJvdHRvbSJdPWkrIiUiO3QodGhpcykuc3RvcCgxLDEpW2w/ImFuaW1hdGUiOiJjc3MiXSh1LHIuYW5pbWF0ZSk7aWYoaC5vcHRpb25zLnJhbmdlPT09ITApaWYoImhvcml6b250YWwiPT09aC5vcmllbnRhdGlvbil7MD09PXMmJmgucmFuZ2Uuc3RvcCgxLDEpW2w/ImFuaW1hdGUiOiJjc3MiXSh7bGVmdDppKyIlIn0sci5hbmltYXRlKTsKMT09PXMmJmgucmFuZ2VbbD8iYW5pbWF0ZSI6ImNzcyJdKHt3aWR0aDppLWUrIiUifSx7cXVldWU6ITEsZHVyYXRpb246ci5hbmltYXRlfSl9ZWxzZXswPT09cyYmaC5yYW5nZS5zdG9wKDEsMSlbbD8iYW5pbWF0ZSI6ImNzcyJdKHtib3R0b206aSsiJSJ9LHIuYW5pbWF0ZSk7MT09PXMmJmgucmFuZ2VbbD8iYW5pbWF0ZSI6ImNzcyJdKHtoZWlnaHQ6aS1lKyIlIn0se3F1ZXVlOiExLGR1cmF0aW9uOnIuYW5pbWF0ZX0pfWU9aX0pO2Vsc2V7cz10aGlzLnZhbHVlKCk7bj10aGlzLl92YWx1ZU1pbigpO289dGhpcy5fdmFsdWVNYXgoKTtpPW8hPT1uPyhzLW4pLyhvLW4pKjEwMDowO3VbImhvcml6b250YWwiPT09dGhpcy5vcmllbnRhdGlvbj8ibGVmdCI6ImJvdHRvbSJdPWkrIiUiO3RoaXMuaGFuZGxlLnN0b3AoMSwxKVtsPyJhbmltYXRlIjoiY3NzIl0odSxyLmFuaW1hdGUpOyJtaW4iPT09YSYmImhvcml6b250YWwiPT09dGhpcy5vcmllbnRhdGlvbiYmdGhpcy5yYW5nZS5zdG9wKDEsMSlbbD8iYW5pbWF0ZSI6ImNzcyJdKHt3aWR0aDppKyIlIn0sci5hbmltYXRlKTsKIm1heCI9PT1hJiYiaG9yaXpvbnRhbCI9PT10aGlzLm9yaWVudGF0aW9uJiZ0aGlzLnJhbmdlW2w/ImFuaW1hdGUiOiJjc3MiXSh7d2lkdGg6MTAwLWkrIiUifSx7cXVldWU6ITEsZHVyYXRpb246ci5hbmltYXRlfSk7Im1pbiI9PT1hJiYidmVydGljYWwiPT09dGhpcy5vcmllbnRhdGlvbiYmdGhpcy5yYW5nZS5zdG9wKDEsMSlbbD8iYW5pbWF0ZSI6ImNzcyJdKHtoZWlnaHQ6aSsiJSJ9LHIuYW5pbWF0ZSk7Im1heCI9PT1hJiYidmVydGljYWwiPT09dGhpcy5vcmllbnRhdGlvbiYmdGhpcy5yYW5nZVtsPyJhbmltYXRlIjoiY3NzIl0oe2hlaWdodDoxMDAtaSsiJSJ9LHtxdWV1ZTohMSxkdXJhdGlvbjpyLmFuaW1hdGV9KX19LF9oYW5kbGVFdmVudHM6e2tleWRvd246ZnVuY3Rpb24oaSl7dmFyIHMsbixvLGEscj10KGkudGFyZ2V0KS5kYXRhKCJ1aS1zbGlkZXItaGFuZGxlLWluZGV4Iik7c3dpdGNoKGkua2V5Q29kZSl7Y2FzZSB0LnVpLmtleUNvZGUuSE9NRTpjYXNlIHQudWkua2V5Q29kZS5FTkQ6Y2FzZSB0LnVpLmtleUNvZGUuUEFHRV9VUDpjYXNlIHQudWkua2V5Q29kZS5QQUdFX0RPV046Y2FzZSB0LnVpLmtleUNvZGUuVVA6Y2FzZSB0LnVpLmtleUNvZGUuUklHSFQ6Y2FzZSB0LnVpLmtleUNvZGUuRE9XTjpjYXNlIHQudWkua2V5Q29kZS5MRUZUOmkucHJldmVudERlZmF1bHQoKTsKaWYoIXRoaXMuX2tleVNsaWRpbmcpe3RoaXMuX2tleVNsaWRpbmc9ITA7dChpLnRhcmdldCkuYWRkQ2xhc3MoInVpLXN0YXRlLWFjdGl2ZSIpO3M9dGhpcy5fc3RhcnQoaSxyKTtpZihzPT09ITEpcmV0dXJufX1hPXRoaXMub3B0aW9ucy5zdGVwO249bz10aGlzLm9wdGlvbnMudmFsdWVzJiZ0aGlzLm9wdGlvbnMudmFsdWVzLmxlbmd0aD90aGlzLnZhbHVlcyhyKTp0aGlzLnZhbHVlKCk7c3dpdGNoKGkua2V5Q29kZSl7Y2FzZSB0LnVpLmtleUNvZGUuSE9NRTpvPXRoaXMuX3ZhbHVlTWluKCk7YnJlYWs7Y2FzZSB0LnVpLmtleUNvZGUuRU5EOm89dGhpcy5fdmFsdWVNYXgoKTticmVhaztjYXNlIHQudWkua2V5Q29kZS5QQUdFX1VQOm89dGhpcy5fdHJpbUFsaWduVmFsdWUobisodGhpcy5fdmFsdWVNYXgoKS10aGlzLl92YWx1ZU1pbigpKS9lKTticmVhaztjYXNlIHQudWkua2V5Q29kZS5QQUdFX0RPV046bz10aGlzLl90cmltQWxpZ25WYWx1ZShuLSh0aGlzLl92YWx1ZU1heCgpLXRoaXMuX3ZhbHVlTWluKCkpL2UpOwpicmVhaztjYXNlIHQudWkua2V5Q29kZS5VUDpjYXNlIHQudWkua2V5Q29kZS5SSUdIVDppZihuPT09dGhpcy5fdmFsdWVNYXgoKSlyZXR1cm47bz10aGlzLl90cmltQWxpZ25WYWx1ZShuK2EpO2JyZWFrO2Nhc2UgdC51aS5rZXlDb2RlLkRPV046Y2FzZSB0LnVpLmtleUNvZGUuTEVGVDppZihuPT09dGhpcy5fdmFsdWVNaW4oKSlyZXR1cm47bz10aGlzLl90cmltQWxpZ25WYWx1ZShuLWEpfXRoaXMuX3NsaWRlKGkscixvKX0sY2xpY2s6ZnVuY3Rpb24odCl7dC5wcmV2ZW50RGVmYXVsdCgpfSxrZXl1cDpmdW5jdGlvbihlKXt2YXIgaT10KGUudGFyZ2V0KS5kYXRhKCJ1aS1zbGlkZXItaGFuZGxlLWluZGV4Iik7aWYodGhpcy5fa2V5U2xpZGluZyl7dGhpcy5fa2V5U2xpZGluZz0hMTt0aGlzLl9zdG9wKGUsaSk7dGhpcy5fY2hhbmdlKGUsaSk7dChlLnRhcmdldCkucmVtb3ZlQ2xhc3MoInVpLXN0YXRlLWFjdGl2ZSIpfX19fSl9KGpRdWVyeSk7IWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUodCl7cmV0dXJuIGZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5lbGVtZW50LnZhbCgpOwp0LmFwcGx5KHRoaXMsYXJndW1lbnRzKTt0aGlzLl9yZWZyZXNoKCk7ZSE9PXRoaXMuZWxlbWVudC52YWwoKSYmdGhpcy5fdHJpZ2dlcigiY2hhbmdlIil9fXQud2lkZ2V0KCJ1aS5zcGlubmVyIix7dmVyc2lvbjoiMS4xMC40IixkZWZhdWx0RWxlbWVudDoiPGlucHV0PiIsd2lkZ2V0RXZlbnRQcmVmaXg6InNwaW4iLG9wdGlvbnM6e2N1bHR1cmU6bnVsbCxpY29uczp7ZG93bjoidWktaWNvbi10cmlhbmdsZS0xLXMiLHVwOiJ1aS1pY29uLXRyaWFuZ2xlLTEtbiJ9LGluY3JlbWVudGFsOiEwLG1heDpudWxsLG1pbjpudWxsLG51bWJlckZvcm1hdDpudWxsLHBhZ2U6MTAsc3RlcDoxLGNoYW5nZTpudWxsLHNwaW46bnVsbCxzdGFydDpudWxsLHN0b3A6bnVsbH0sX2NyZWF0ZTpmdW5jdGlvbigpe3RoaXMuX3NldE9wdGlvbigibWF4Iix0aGlzLm9wdGlvbnMubWF4KTt0aGlzLl9zZXRPcHRpb24oIm1pbiIsdGhpcy5vcHRpb25zLm1pbik7dGhpcy5fc2V0T3B0aW9uKCJzdGVwIix0aGlzLm9wdGlvbnMuc3RlcCk7CiIiIT09dGhpcy52YWx1ZSgpJiZ0aGlzLl92YWx1ZSh0aGlzLmVsZW1lbnQudmFsKCksITApO3RoaXMuX2RyYXcoKTt0aGlzLl9vbih0aGlzLl9ldmVudHMpO3RoaXMuX3JlZnJlc2goKTt0aGlzLl9vbih0aGlzLndpbmRvdyx7YmVmb3JldW5sb2FkOmZ1bmN0aW9uKCl7dGhpcy5lbGVtZW50LnJlbW92ZUF0dHIoImF1dG9jb21wbGV0ZSIpfX0pfSxfZ2V0Q3JlYXRlT3B0aW9uczpmdW5jdGlvbigpe3ZhciBlPXt9LGk9dGhpcy5lbGVtZW50O3QuZWFjaChbIm1pbiIsIm1heCIsInN0ZXAiXSxmdW5jdGlvbih0LHMpe3ZhciBuPWkuYXR0cihzKTt2b2lkIDAhPT1uJiZuLmxlbmd0aCYmKGVbc109bil9KTtyZXR1cm4gZX0sX2V2ZW50czp7a2V5ZG93bjpmdW5jdGlvbih0KXt0aGlzLl9zdGFydCh0KSYmdGhpcy5fa2V5ZG93bih0KSYmdC5wcmV2ZW50RGVmYXVsdCgpfSxrZXl1cDoiX3N0b3AiLGZvY3VzOmZ1bmN0aW9uKCl7dGhpcy5wcmV2aW91cz10aGlzLmVsZW1lbnQudmFsKCl9LGJsdXI6ZnVuY3Rpb24odCl7aWYodGhpcy5jYW5jZWxCbHVyKWRlbGV0ZSB0aGlzLmNhbmNlbEJsdXI7CmVsc2V7dGhpcy5fc3RvcCgpO3RoaXMuX3JlZnJlc2goKTt0aGlzLnByZXZpb3VzIT09dGhpcy5lbGVtZW50LnZhbCgpJiZ0aGlzLl90cmlnZ2VyKCJjaGFuZ2UiLHQpfX0sbW91c2V3aGVlbDpmdW5jdGlvbih0LGUpe2lmKGUpe2lmKCF0aGlzLnNwaW5uaW5nJiYhdGhpcy5fc3RhcnQodCkpcmV0dXJuITE7dGhpcy5fc3BpbigoZT4wPzE6LTEpKnRoaXMub3B0aW9ucy5zdGVwLHQpO2NsZWFyVGltZW91dCh0aGlzLm1vdXNld2hlZWxUaW1lcik7dGhpcy5tb3VzZXdoZWVsVGltZXI9dGhpcy5fZGVsYXkoZnVuY3Rpb24oKXt0aGlzLnNwaW5uaW5nJiZ0aGlzLl9zdG9wKHQpfSwxMDApO3QucHJldmVudERlZmF1bHQoKX19LCJtb3VzZWRvd24gLnVpLXNwaW5uZXItYnV0dG9uIjpmdW5jdGlvbihlKXtmdW5jdGlvbiBpKCl7dmFyIHQ9dGhpcy5lbGVtZW50WzBdPT09dGhpcy5kb2N1bWVudFswXS5hY3RpdmVFbGVtZW50O2lmKCF0KXt0aGlzLmVsZW1lbnQuZm9jdXMoKTt0aGlzLnByZXZpb3VzPXM7CnRoaXMuX2RlbGF5KGZ1bmN0aW9uKCl7dGhpcy5wcmV2aW91cz1zfSl9fXZhciBzO3M9dGhpcy5lbGVtZW50WzBdPT09dGhpcy5kb2N1bWVudFswXS5hY3RpdmVFbGVtZW50P3RoaXMucHJldmlvdXM6dGhpcy5lbGVtZW50LnZhbCgpO2UucHJldmVudERlZmF1bHQoKTtpLmNhbGwodGhpcyk7dGhpcy5jYW5jZWxCbHVyPSEwO3RoaXMuX2RlbGF5KGZ1bmN0aW9uKCl7ZGVsZXRlIHRoaXMuY2FuY2VsQmx1cjtpLmNhbGwodGhpcyl9KTt0aGlzLl9zdGFydChlKSE9PSExJiZ0aGlzLl9yZXBlYXQobnVsbCx0KGUuY3VycmVudFRhcmdldCkuaGFzQ2xhc3MoInVpLXNwaW5uZXItdXAiKT8xOi0xLGUpfSwibW91c2V1cCAudWktc3Bpbm5lci1idXR0b24iOiJfc3RvcCIsIm1vdXNlZW50ZXIgLnVpLXNwaW5uZXItYnV0dG9uIjpmdW5jdGlvbihlKXtpZih0KGUuY3VycmVudFRhcmdldCkuaGFzQ2xhc3MoInVpLXN0YXRlLWFjdGl2ZSIpKXtpZih0aGlzLl9zdGFydChlKT09PSExKXJldHVybiExOwp0aGlzLl9yZXBlYXQobnVsbCx0KGUuY3VycmVudFRhcmdldCkuaGFzQ2xhc3MoInVpLXNwaW5uZXItdXAiKT8xOi0xLGUpO3JldHVybiB2b2lkIDB9fSwibW91c2VsZWF2ZSAudWktc3Bpbm5lci1idXR0b24iOiJfc3RvcCJ9LF9kcmF3OmZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy51aVNwaW5uZXI9dGhpcy5lbGVtZW50LmFkZENsYXNzKCJ1aS1zcGlubmVyLWlucHV0IikuYXR0cigiYXV0b2NvbXBsZXRlIiwib2ZmIikud3JhcCh0aGlzLl91aVNwaW5uZXJIdG1sKCkpLnBhcmVudCgpLmFwcGVuZCh0aGlzLl9idXR0b25IdG1sKCkpO3RoaXMuZWxlbWVudC5hdHRyKCJyb2xlIiwic3BpbmJ1dHRvbiIpO3RoaXMuYnV0dG9ucz10LmZpbmQoIi51aS1zcGlubmVyLWJ1dHRvbiIpLmF0dHIoInRhYkluZGV4IiwtMSkuYnV0dG9uKCkucmVtb3ZlQ2xhc3MoInVpLWNvcm5lci1hbGwiKTt0aGlzLmJ1dHRvbnMuaGVpZ2h0KCk+TWF0aC5jZWlsKC41KnQuaGVpZ2h0KCkpJiZ0LmhlaWdodCgpPjAmJnQuaGVpZ2h0KHQuaGVpZ2h0KCkpOwp0aGlzLm9wdGlvbnMuZGlzYWJsZWQmJnRoaXMuZGlzYWJsZSgpfSxfa2V5ZG93bjpmdW5jdGlvbihlKXt2YXIgaT10aGlzLm9wdGlvbnMscz10LnVpLmtleUNvZGU7c3dpdGNoKGUua2V5Q29kZSl7Y2FzZSBzLlVQOnRoaXMuX3JlcGVhdChudWxsLDEsZSk7cmV0dXJuITA7Y2FzZSBzLkRPV046dGhpcy5fcmVwZWF0KG51bGwsLTEsZSk7cmV0dXJuITA7Y2FzZSBzLlBBR0VfVVA6dGhpcy5fcmVwZWF0KG51bGwsaS5wYWdlLGUpO3JldHVybiEwO2Nhc2Ugcy5QQUdFX0RPV046dGhpcy5fcmVwZWF0KG51bGwsLWkucGFnZSxlKTtyZXR1cm4hMH1yZXR1cm4hMX0sX3VpU3Bpbm5lckh0bWw6ZnVuY3Rpb24oKXtyZXR1cm4iPHNwYW4gY2xhc3M9J3VpLXNwaW5uZXIgdWktd2lkZ2V0IHVpLXdpZGdldC1jb250ZW50IHVpLWNvcm5lci1hbGwnPjwvc3Bhbj4ifSxfYnV0dG9uSHRtbDpmdW5jdGlvbigpe3JldHVybiI8YSBjbGFzcz0ndWktc3Bpbm5lci1idXR0b24gdWktc3Bpbm5lci11cCB1aS1jb3JuZXItdHInPjxzcGFuIGNsYXNzPSd1aS1pY29uICIrdGhpcy5vcHRpb25zLmljb25zLnVwKyInPiYjOTY1MDs8L3NwYW4+PC9hPjxhIGNsYXNzPSd1aS1zcGlubmVyLWJ1dHRvbiB1aS1zcGlubmVyLWRvd24gdWktY29ybmVyLWJyJz48c3BhbiBjbGFzcz0ndWktaWNvbiAiK3RoaXMub3B0aW9ucy5pY29ucy5kb3duKyInPiYjOTY2MDs8L3NwYW4+PC9hPiIKfSxfc3RhcnQ6ZnVuY3Rpb24odCl7aWYoIXRoaXMuc3Bpbm5pbmcmJnRoaXMuX3RyaWdnZXIoInN0YXJ0Iix0KT09PSExKXJldHVybiExO3RoaXMuY291bnRlcnx8KHRoaXMuY291bnRlcj0xKTt0aGlzLnNwaW5uaW5nPSEwO3JldHVybiEwfSxfcmVwZWF0OmZ1bmN0aW9uKHQsZSxpKXt0PXR8fDUwMDtjbGVhclRpbWVvdXQodGhpcy50aW1lcik7dGhpcy50aW1lcj10aGlzLl9kZWxheShmdW5jdGlvbigpe3RoaXMuX3JlcGVhdCg0MCxlLGkpfSx0KTt0aGlzLl9zcGluKGUqdGhpcy5vcHRpb25zLnN0ZXAsaSl9LF9zcGluOmZ1bmN0aW9uKHQsZSl7dmFyIGk9dGhpcy52YWx1ZSgpfHwwO3RoaXMuY291bnRlcnx8KHRoaXMuY291bnRlcj0xKTtpPXRoaXMuX2FkanVzdFZhbHVlKGkrdCp0aGlzLl9pbmNyZW1lbnQodGhpcy5jb3VudGVyKSk7aWYoIXRoaXMuc3Bpbm5pbmd8fHRoaXMuX3RyaWdnZXIoInNwaW4iLGUse3ZhbHVlOml9KSE9PSExKXt0aGlzLl92YWx1ZShpKTt0aGlzLmNvdW50ZXIrKwp9fSxfaW5jcmVtZW50OmZ1bmN0aW9uKGUpe3ZhciBpPXRoaXMub3B0aW9ucy5pbmNyZW1lbnRhbDtyZXR1cm4gaT90LmlzRnVuY3Rpb24oaSk/aShlKTpNYXRoLmZsb29yKGUqZSplLzVlNC1lKmUvNTAwKzE3KmUvMjAwKzEpOjF9LF9wcmVjaXNpb246ZnVuY3Rpb24oKXt2YXIgdD10aGlzLl9wcmVjaXNpb25PZih0aGlzLm9wdGlvbnMuc3RlcCk7bnVsbCE9PXRoaXMub3B0aW9ucy5taW4mJih0PU1hdGgubWF4KHQsdGhpcy5fcHJlY2lzaW9uT2YodGhpcy5vcHRpb25zLm1pbikpKTtyZXR1cm4gdH0sX3ByZWNpc2lvbk9mOmZ1bmN0aW9uKHQpe3ZhciBlPXQudG9TdHJpbmcoKSxpPWUuaW5kZXhPZigiLiIpO3JldHVybi0xPT09aT8wOmUubGVuZ3RoLWktMX0sX2FkanVzdFZhbHVlOmZ1bmN0aW9uKHQpe3ZhciBlLGkscz10aGlzLm9wdGlvbnM7ZT1udWxsIT09cy5taW4/cy5taW46MDtpPXQtZTtpPU1hdGgucm91bmQoaS9zLnN0ZXApKnMuc3RlcDt0PWUraTt0PXBhcnNlRmxvYXQodC50b0ZpeGVkKHRoaXMuX3ByZWNpc2lvbigpKSk7CnJldHVybiBudWxsIT09cy5tYXgmJnQ+cy5tYXg/cy5tYXg6bnVsbCE9PXMubWluJiZ0PHMubWluP3MubWluOnR9LF9zdG9wOmZ1bmN0aW9uKHQpe2lmKHRoaXMuc3Bpbm5pbmcpe2NsZWFyVGltZW91dCh0aGlzLnRpbWVyKTtjbGVhclRpbWVvdXQodGhpcy5tb3VzZXdoZWVsVGltZXIpO3RoaXMuY291bnRlcj0wO3RoaXMuc3Bpbm5pbmc9ITE7dGhpcy5fdHJpZ2dlcigic3RvcCIsdCl9fSxfc2V0T3B0aW9uOmZ1bmN0aW9uKHQsZSl7aWYoImN1bHR1cmUiIT09dCYmIm51bWJlckZvcm1hdCIhPT10KXsoIm1heCI9PT10fHwibWluIj09PXR8fCJzdGVwIj09PXQpJiYic3RyaW5nIj09dHlwZW9mIGUmJihlPXRoaXMuX3BhcnNlKGUpKTtpZigiaWNvbnMiPT09dCl7dGhpcy5idXR0b25zLmZpcnN0KCkuZmluZCgiLnVpLWljb24iKS5yZW1vdmVDbGFzcyh0aGlzLm9wdGlvbnMuaWNvbnMudXApLmFkZENsYXNzKGUudXApO3RoaXMuYnV0dG9ucy5sYXN0KCkuZmluZCgiLnVpLWljb24iKS5yZW1vdmVDbGFzcyh0aGlzLm9wdGlvbnMuaWNvbnMuZG93bikuYWRkQ2xhc3MoZS5kb3duKQp9dGhpcy5fc3VwZXIodCxlKTtpZigiZGlzYWJsZWQiPT09dClpZihlKXt0aGlzLmVsZW1lbnQucHJvcCgiZGlzYWJsZWQiLCEwKTt0aGlzLmJ1dHRvbnMuYnV0dG9uKCJkaXNhYmxlIil9ZWxzZXt0aGlzLmVsZW1lbnQucHJvcCgiZGlzYWJsZWQiLCExKTt0aGlzLmJ1dHRvbnMuYnV0dG9uKCJlbmFibGUiKX19ZWxzZXt2YXIgaT10aGlzLl9wYXJzZSh0aGlzLmVsZW1lbnQudmFsKCkpO3RoaXMub3B0aW9uc1t0XT1lO3RoaXMuZWxlbWVudC52YWwodGhpcy5fZm9ybWF0KGkpKX19LF9zZXRPcHRpb25zOmUoZnVuY3Rpb24odCl7dGhpcy5fc3VwZXIodCk7dGhpcy5fdmFsdWUodGhpcy5lbGVtZW50LnZhbCgpKX0pLF9wYXJzZTpmdW5jdGlvbih0KXsic3RyaW5nIj09dHlwZW9mIHQmJiIiIT09dCYmKHQ9d2luZG93Lkdsb2JhbGl6ZSYmdGhpcy5vcHRpb25zLm51bWJlckZvcm1hdD9HbG9iYWxpemUucGFyc2VGbG9hdCh0LDEwLHRoaXMub3B0aW9ucy5jdWx0dXJlKTordCk7cmV0dXJuIiI9PT10fHxpc05hTih0KT9udWxsOnQKfSxfZm9ybWF0OmZ1bmN0aW9uKHQpe3JldHVybiIiPT09dD8iIjp3aW5kb3cuR2xvYmFsaXplJiZ0aGlzLm9wdGlvbnMubnVtYmVyRm9ybWF0P0dsb2JhbGl6ZS5mb3JtYXQodCx0aGlzLm9wdGlvbnMubnVtYmVyRm9ybWF0LHRoaXMub3B0aW9ucy5jdWx0dXJlKTp0fSxfcmVmcmVzaDpmdW5jdGlvbigpe3RoaXMuZWxlbWVudC5hdHRyKHsiYXJpYS12YWx1ZW1pbiI6dGhpcy5vcHRpb25zLm1pbiwiYXJpYS12YWx1ZW1heCI6dGhpcy5vcHRpb25zLm1heCwiYXJpYS12YWx1ZW5vdyI6dGhpcy5fcGFyc2UodGhpcy5lbGVtZW50LnZhbCgpKX0pfSxfdmFsdWU6ZnVuY3Rpb24odCxlKXt2YXIgaTtpZigiIiE9PXQpe2k9dGhpcy5fcGFyc2UodCk7aWYobnVsbCE9PWkpe2V8fChpPXRoaXMuX2FkanVzdFZhbHVlKGkpKTt0PXRoaXMuX2Zvcm1hdChpKX19dGhpcy5lbGVtZW50LnZhbCh0KTt0aGlzLl9yZWZyZXNoKCl9LF9kZXN0cm95OmZ1bmN0aW9uKCl7dGhpcy5lbGVtZW50LnJlbW92ZUNsYXNzKCJ1aS1zcGlubmVyLWlucHV0IikucHJvcCgiZGlzYWJsZWQiLCExKS5yZW1vdmVBdHRyKCJhdXRvY29tcGxldGUiKS5yZW1vdmVBdHRyKCJyb2xlIikucmVtb3ZlQXR0cigiYXJpYS12YWx1ZW1pbiIpLnJlbW92ZUF0dHIoImFyaWEtdmFsdWVtYXgiKS5yZW1vdmVBdHRyKCJhcmlhLXZhbHVlbm93Iik7CnRoaXMudWlTcGlubmVyLnJlcGxhY2VXaXRoKHRoaXMuZWxlbWVudCl9LHN0ZXBVcDplKGZ1bmN0aW9uKHQpe3RoaXMuX3N0ZXBVcCh0KX0pLF9zdGVwVXA6ZnVuY3Rpb24odCl7aWYodGhpcy5fc3RhcnQoKSl7dGhpcy5fc3BpbigodHx8MSkqdGhpcy5vcHRpb25zLnN0ZXApO3RoaXMuX3N0b3AoKX19LHN0ZXBEb3duOmUoZnVuY3Rpb24odCl7dGhpcy5fc3RlcERvd24odCl9KSxfc3RlcERvd246ZnVuY3Rpb24odCl7aWYodGhpcy5fc3RhcnQoKSl7dGhpcy5fc3BpbigodHx8MSkqLXRoaXMub3B0aW9ucy5zdGVwKTt0aGlzLl9zdG9wKCl9fSxwYWdlVXA6ZShmdW5jdGlvbih0KXt0aGlzLl9zdGVwVXAoKHR8fDEpKnRoaXMub3B0aW9ucy5wYWdlKX0pLHBhZ2VEb3duOmUoZnVuY3Rpb24odCl7dGhpcy5fc3RlcERvd24oKHR8fDEpKnRoaXMub3B0aW9ucy5wYWdlKX0pLHZhbHVlOmZ1bmN0aW9uKHQpe2lmKCFhcmd1bWVudHMubGVuZ3RoKXJldHVybiB0aGlzLl9wYXJzZSh0aGlzLmVsZW1lbnQudmFsKCkpOwplKHRoaXMuX3ZhbHVlKS5jYWxsKHRoaXMsdCk7cmV0dXJuIHZvaWQgMH0sd2lkZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudWlTcGlubmVyfX0pfShqUXVlcnkpOyFmdW5jdGlvbih0LGUpe2Z1bmN0aW9uIGkoKXtyZXR1cm4rK259ZnVuY3Rpb24gcyh0KXt0PXQuY2xvbmVOb2RlKCExKTtyZXR1cm4gdC5oYXNoLmxlbmd0aD4xJiZkZWNvZGVVUklDb21wb25lbnQodC5ocmVmLnJlcGxhY2UobywiIikpPT09ZGVjb2RlVVJJQ29tcG9uZW50KGxvY2F0aW9uLmhyZWYucmVwbGFjZShvLCIiKSl9dmFyIG49MCxvPS8jLiokLzt0LndpZGdldCgidWkudGFicyIse3ZlcnNpb246IjEuMTAuNCIsZGVsYXk6MzAwLG9wdGlvbnM6e2FjdGl2ZTpudWxsLGNvbGxhcHNpYmxlOiExLGV2ZW50OiJjbGljayIsaGVpZ2h0U3R5bGU6ImNvbnRlbnQiLGhpZGU6bnVsbCxzaG93Om51bGwsYWN0aXZhdGU6bnVsbCxiZWZvcmVBY3RpdmF0ZTpudWxsLGJlZm9yZUxvYWQ6bnVsbCxsb2FkOm51bGx9LF9jcmVhdGU6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLGk9dGhpcy5vcHRpb25zOwp0aGlzLnJ1bm5pbmc9ITE7dGhpcy5lbGVtZW50LmFkZENsYXNzKCJ1aS10YWJzIHVpLXdpZGdldCB1aS13aWRnZXQtY29udGVudCB1aS1jb3JuZXItYWxsIikudG9nZ2xlQ2xhc3MoInVpLXRhYnMtY29sbGFwc2libGUiLGkuY29sbGFwc2libGUpLmRlbGVnYXRlKCIudWktdGFicy1uYXYgPiBsaSIsIm1vdXNlZG93biIrdGhpcy5ldmVudE5hbWVzcGFjZSxmdW5jdGlvbihlKXt0KHRoaXMpLmlzKCIudWktc3RhdGUtZGlzYWJsZWQiKSYmZS5wcmV2ZW50RGVmYXVsdCgpfSkuZGVsZWdhdGUoIi51aS10YWJzLWFuY2hvciIsImZvY3VzIit0aGlzLmV2ZW50TmFtZXNwYWNlLGZ1bmN0aW9uKCl7dCh0aGlzKS5jbG9zZXN0KCJsaSIpLmlzKCIudWktc3RhdGUtZGlzYWJsZWQiKSYmdGhpcy5ibHVyKCl9KTt0aGlzLl9wcm9jZXNzVGFicygpO2kuYWN0aXZlPXRoaXMuX2luaXRpYWxBY3RpdmUoKTt0LmlzQXJyYXkoaS5kaXNhYmxlZCkmJihpLmRpc2FibGVkPXQudW5pcXVlKGkuZGlzYWJsZWQuY29uY2F0KHQubWFwKHRoaXMudGFicy5maWx0ZXIoIi51aS1zdGF0ZS1kaXNhYmxlZCIpLGZ1bmN0aW9uKHQpe3JldHVybiBlLnRhYnMuaW5kZXgodCkKfSkpKS5zb3J0KCkpO3RoaXMuYWN0aXZlPXRoaXMub3B0aW9ucy5hY3RpdmUhPT0hMSYmdGhpcy5hbmNob3JzLmxlbmd0aD90aGlzLl9maW5kQWN0aXZlKGkuYWN0aXZlKTp0KCk7dGhpcy5fcmVmcmVzaCgpO3RoaXMuYWN0aXZlLmxlbmd0aCYmdGhpcy5sb2FkKGkuYWN0aXZlKX0sX2luaXRpYWxBY3RpdmU6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLm9wdGlvbnMuYWN0aXZlLGk9dGhpcy5vcHRpb25zLmNvbGxhcHNpYmxlLHM9bG9jYXRpb24uaGFzaC5zdWJzdHJpbmcoMSk7aWYobnVsbD09PWUpe3MmJnRoaXMudGFicy5lYWNoKGZ1bmN0aW9uKGksbil7aWYodChuKS5hdHRyKCJhcmlhLWNvbnRyb2xzIik9PT1zKXtlPWk7cmV0dXJuITF9fSk7bnVsbD09PWUmJihlPXRoaXMudGFicy5pbmRleCh0aGlzLnRhYnMuZmlsdGVyKCIudWktdGFicy1hY3RpdmUiKSkpOyhudWxsPT09ZXx8LTE9PT1lKSYmKGU9dGhpcy50YWJzLmxlbmd0aD8wOiExKX1pZihlIT09ITEpe2U9dGhpcy50YWJzLmluZGV4KHRoaXMudGFicy5lcShlKSk7Ci0xPT09ZSYmKGU9aT8hMTowKX0haSYmZT09PSExJiZ0aGlzLmFuY2hvcnMubGVuZ3RoJiYoZT0wKTtyZXR1cm4gZX0sX2dldENyZWF0ZUV2ZW50RGF0YTpmdW5jdGlvbigpe3JldHVybnt0YWI6dGhpcy5hY3RpdmUscGFuZWw6dGhpcy5hY3RpdmUubGVuZ3RoP3RoaXMuX2dldFBhbmVsRm9yVGFiKHRoaXMuYWN0aXZlKTp0KCl9fSxfdGFiS2V5ZG93bjpmdW5jdGlvbihlKXt2YXIgaT10KHRoaXMuZG9jdW1lbnRbMF0uYWN0aXZlRWxlbWVudCkuY2xvc2VzdCgibGkiKSxzPXRoaXMudGFicy5pbmRleChpKSxuPSEwO2lmKCF0aGlzLl9oYW5kbGVQYWdlTmF2KGUpKXtzd2l0Y2goZS5rZXlDb2RlKXtjYXNlIHQudWkua2V5Q29kZS5SSUdIVDpjYXNlIHQudWkua2V5Q29kZS5ET1dOOnMrKzticmVhaztjYXNlIHQudWkua2V5Q29kZS5VUDpjYXNlIHQudWkua2V5Q29kZS5MRUZUOm49ITE7cy0tO2JyZWFrO2Nhc2UgdC51aS5rZXlDb2RlLkVORDpzPXRoaXMuYW5jaG9ycy5sZW5ndGgtMTticmVhazsKY2FzZSB0LnVpLmtleUNvZGUuSE9NRTpzPTA7YnJlYWs7Y2FzZSB0LnVpLmtleUNvZGUuU1BBQ0U6ZS5wcmV2ZW50RGVmYXVsdCgpO2NsZWFyVGltZW91dCh0aGlzLmFjdGl2YXRpbmcpO3RoaXMuX2FjdGl2YXRlKHMpO3JldHVybjtjYXNlIHQudWkua2V5Q29kZS5FTlRFUjplLnByZXZlbnREZWZhdWx0KCk7Y2xlYXJUaW1lb3V0KHRoaXMuYWN0aXZhdGluZyk7dGhpcy5fYWN0aXZhdGUocz09PXRoaXMub3B0aW9ucy5hY3RpdmU/ITE6cyk7cmV0dXJuO2RlZmF1bHQ6cmV0dXJufWUucHJldmVudERlZmF1bHQoKTtjbGVhclRpbWVvdXQodGhpcy5hY3RpdmF0aW5nKTtzPXRoaXMuX2ZvY3VzTmV4dFRhYihzLG4pO2lmKCFlLmN0cmxLZXkpe2kuYXR0cigiYXJpYS1zZWxlY3RlZCIsImZhbHNlIik7dGhpcy50YWJzLmVxKHMpLmF0dHIoImFyaWEtc2VsZWN0ZWQiLCJ0cnVlIik7dGhpcy5hY3RpdmF0aW5nPXRoaXMuX2RlbGF5KGZ1bmN0aW9uKCl7dGhpcy5vcHRpb24oImFjdGl2ZSIscyl9LHRoaXMuZGVsYXkpCn19fSxfcGFuZWxLZXlkb3duOmZ1bmN0aW9uKGUpe2lmKCF0aGlzLl9oYW5kbGVQYWdlTmF2KGUpJiZlLmN0cmxLZXkmJmUua2V5Q29kZT09PXQudWkua2V5Q29kZS5VUCl7ZS5wcmV2ZW50RGVmYXVsdCgpO3RoaXMuYWN0aXZlLmZvY3VzKCl9fSxfaGFuZGxlUGFnZU5hdjpmdW5jdGlvbihlKXtpZihlLmFsdEtleSYmZS5rZXlDb2RlPT09dC51aS5rZXlDb2RlLlBBR0VfVVApe3RoaXMuX2FjdGl2YXRlKHRoaXMuX2ZvY3VzTmV4dFRhYih0aGlzLm9wdGlvbnMuYWN0aXZlLTEsITEpKTtyZXR1cm4hMH1pZihlLmFsdEtleSYmZS5rZXlDb2RlPT09dC51aS5rZXlDb2RlLlBBR0VfRE9XTil7dGhpcy5fYWN0aXZhdGUodGhpcy5fZm9jdXNOZXh0VGFiKHRoaXMub3B0aW9ucy5hY3RpdmUrMSwhMCkpO3JldHVybiEwfX0sX2ZpbmROZXh0VGFiOmZ1bmN0aW9uKGUsaSl7ZnVuY3Rpb24gcygpe2U+biYmKGU9MCk7MD5lJiYoZT1uKTtyZXR1cm4gZX1mb3IodmFyIG49dGhpcy50YWJzLmxlbmd0aC0xOy0xIT09dC5pbkFycmF5KHMoKSx0aGlzLm9wdGlvbnMuZGlzYWJsZWQpOyllPWk/ZSsxOmUtMTsKcmV0dXJuIGV9LF9mb2N1c05leHRUYWI6ZnVuY3Rpb24odCxlKXt0PXRoaXMuX2ZpbmROZXh0VGFiKHQsZSk7dGhpcy50YWJzLmVxKHQpLmZvY3VzKCk7cmV0dXJuIHR9LF9zZXRPcHRpb246ZnVuY3Rpb24odCxlKXtpZigiYWN0aXZlIiE9PXQpaWYoImRpc2FibGVkIiE9PXQpe3RoaXMuX3N1cGVyKHQsZSk7aWYoImNvbGxhcHNpYmxlIj09PXQpe3RoaXMuZWxlbWVudC50b2dnbGVDbGFzcygidWktdGFicy1jb2xsYXBzaWJsZSIsZSk7ZXx8dGhpcy5vcHRpb25zLmFjdGl2ZSE9PSExfHx0aGlzLl9hY3RpdmF0ZSgwKX0iZXZlbnQiPT09dCYmdGhpcy5fc2V0dXBFdmVudHMoZSk7ImhlaWdodFN0eWxlIj09PXQmJnRoaXMuX3NldHVwSGVpZ2h0U3R5bGUoZSl9ZWxzZSB0aGlzLl9zZXR1cERpc2FibGVkKGUpO2Vsc2UgdGhpcy5fYWN0aXZhdGUoZSl9LF90YWJJZDpmdW5jdGlvbih0KXtyZXR1cm4gdC5hdHRyKCJhcmlhLWNvbnRyb2xzIil8fCJ1aS10YWJzLSIraSgpfSxfc2FuaXRpemVTZWxlY3RvcjpmdW5jdGlvbih0KXtyZXR1cm4gdD90LnJlcGxhY2UoL1shIiQlJicoKSorLC5cLzo7PD0+P0BcW1xdXF5ge3x9fl0vZywiXFwkJiIpOiIiCn0scmVmcmVzaDpmdW5jdGlvbigpe3ZhciBlPXRoaXMub3B0aW9ucyxpPXRoaXMudGFibGlzdC5jaGlsZHJlbigiOmhhcyhhW2hyZWZdKSIpO2UuZGlzYWJsZWQ9dC5tYXAoaS5maWx0ZXIoIi51aS1zdGF0ZS1kaXNhYmxlZCIpLGZ1bmN0aW9uKHQpe3JldHVybiBpLmluZGV4KHQpfSk7dGhpcy5fcHJvY2Vzc1RhYnMoKTtpZihlLmFjdGl2ZSE9PSExJiZ0aGlzLmFuY2hvcnMubGVuZ3RoKWlmKHRoaXMuYWN0aXZlLmxlbmd0aCYmIXQuY29udGFpbnModGhpcy50YWJsaXN0WzBdLHRoaXMuYWN0aXZlWzBdKSlpZih0aGlzLnRhYnMubGVuZ3RoPT09ZS5kaXNhYmxlZC5sZW5ndGgpe2UuYWN0aXZlPSExO3RoaXMuYWN0aXZlPXQoKX1lbHNlIHRoaXMuX2FjdGl2YXRlKHRoaXMuX2ZpbmROZXh0VGFiKE1hdGgubWF4KDAsZS5hY3RpdmUtMSksITEpKTtlbHNlIGUuYWN0aXZlPXRoaXMudGFicy5pbmRleCh0aGlzLmFjdGl2ZSk7ZWxzZXtlLmFjdGl2ZT0hMTt0aGlzLmFjdGl2ZT10KCl9dGhpcy5fcmVmcmVzaCgpCn0sX3JlZnJlc2g6ZnVuY3Rpb24oKXt0aGlzLl9zZXR1cERpc2FibGVkKHRoaXMub3B0aW9ucy5kaXNhYmxlZCk7dGhpcy5fc2V0dXBFdmVudHModGhpcy5vcHRpb25zLmV2ZW50KTt0aGlzLl9zZXR1cEhlaWdodFN0eWxlKHRoaXMub3B0aW9ucy5oZWlnaHRTdHlsZSk7dGhpcy50YWJzLm5vdCh0aGlzLmFjdGl2ZSkuYXR0cih7ImFyaWEtc2VsZWN0ZWQiOiJmYWxzZSIsdGFiSW5kZXg6LTF9KTt0aGlzLnBhbmVscy5ub3QodGhpcy5fZ2V0UGFuZWxGb3JUYWIodGhpcy5hY3RpdmUpKS5oaWRlKCkuYXR0cih7ImFyaWEtZXhwYW5kZWQiOiJmYWxzZSIsImFyaWEtaGlkZGVuIjoidHJ1ZSJ9KTtpZih0aGlzLmFjdGl2ZS5sZW5ndGgpe3RoaXMuYWN0aXZlLmFkZENsYXNzKCJ1aS10YWJzLWFjdGl2ZSB1aS1zdGF0ZS1hY3RpdmUiKS5hdHRyKHsiYXJpYS1zZWxlY3RlZCI6InRydWUiLHRhYkluZGV4OjB9KTt0aGlzLl9nZXRQYW5lbEZvclRhYih0aGlzLmFjdGl2ZSkuc2hvdygpLmF0dHIoeyJhcmlhLWV4cGFuZGVkIjoidHJ1ZSIsImFyaWEtaGlkZGVuIjoiZmFsc2UifSkKfWVsc2UgdGhpcy50YWJzLmVxKDApLmF0dHIoInRhYkluZGV4IiwwKX0sX3Byb2Nlc3NUYWJzOmZ1bmN0aW9uKCl7dmFyIGU9dGhpczt0aGlzLnRhYmxpc3Q9dGhpcy5fZ2V0TGlzdCgpLmFkZENsYXNzKCJ1aS10YWJzLW5hdiB1aS1oZWxwZXItcmVzZXQgdWktaGVscGVyLWNsZWFyZml4IHVpLXdpZGdldC1oZWFkZXIgdWktY29ybmVyLWFsbCIpLmF0dHIoInJvbGUiLCJ0YWJsaXN0Iik7dGhpcy50YWJzPXRoaXMudGFibGlzdC5maW5kKCI+IGxpOmhhcyhhW2hyZWZdKSIpLmFkZENsYXNzKCJ1aS1zdGF0ZS1kZWZhdWx0IHVpLWNvcm5lci10b3AiKS5hdHRyKHtyb2xlOiJ0YWIiLHRhYkluZGV4Oi0xfSk7dGhpcy5hbmNob3JzPXRoaXMudGFicy5tYXAoZnVuY3Rpb24oKXtyZXR1cm4gdCgiYSIsdGhpcylbMF19KS5hZGRDbGFzcygidWktdGFicy1hbmNob3IiKS5hdHRyKHtyb2xlOiJwcmVzZW50YXRpb24iLHRhYkluZGV4Oi0xfSk7dGhpcy5wYW5lbHM9dCgpO3RoaXMuYW5jaG9ycy5lYWNoKGZ1bmN0aW9uKGksbil7dmFyIG8sYSxyLGg9dChuKS51bmlxdWVJZCgpLmF0dHIoImlkIiksbD10KG4pLmNsb3Nlc3QoImxpIiksdT1sLmF0dHIoImFyaWEtY29udHJvbHMiKTsKaWYocyhuKSl7bz1uLmhhc2g7YT1lLmVsZW1lbnQuZmluZChlLl9zYW5pdGl6ZVNlbGVjdG9yKG8pKX1lbHNle3I9ZS5fdGFiSWQobCk7bz0iIyIrcjthPWUuZWxlbWVudC5maW5kKG8pO2lmKCFhLmxlbmd0aCl7YT1lLl9jcmVhdGVQYW5lbChyKTthLmluc2VydEFmdGVyKGUucGFuZWxzW2ktMV18fGUudGFibGlzdCl9YS5hdHRyKCJhcmlhLWxpdmUiLCJwb2xpdGUiKX1hLmxlbmd0aCYmKGUucGFuZWxzPWUucGFuZWxzLmFkZChhKSk7dSYmbC5kYXRhKCJ1aS10YWJzLWFyaWEtY29udHJvbHMiLHUpO2wuYXR0cih7ImFyaWEtY29udHJvbHMiOm8uc3Vic3RyaW5nKDEpLCJhcmlhLWxhYmVsbGVkYnkiOmh9KTthLmF0dHIoImFyaWEtbGFiZWxsZWRieSIsaCl9KTt0aGlzLnBhbmVscy5hZGRDbGFzcygidWktdGFicy1wYW5lbCB1aS13aWRnZXQtY29udGVudCB1aS1jb3JuZXItYm90dG9tIikuYXR0cigicm9sZSIsInRhYnBhbmVsIil9LF9nZXRMaXN0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudGFibGlzdHx8dGhpcy5lbGVtZW50LmZpbmQoIm9sLHVsIikuZXEoMCkKfSxfY3JlYXRlUGFuZWw6ZnVuY3Rpb24oZSl7cmV0dXJuIHQoIjxkaXY+IikuYXR0cigiaWQiLGUpLmFkZENsYXNzKCJ1aS10YWJzLXBhbmVsIHVpLXdpZGdldC1jb250ZW50IHVpLWNvcm5lci1ib3R0b20iKS5kYXRhKCJ1aS10YWJzLWRlc3Ryb3kiLCEwKX0sX3NldHVwRGlzYWJsZWQ6ZnVuY3Rpb24oZSl7dC5pc0FycmF5KGUpJiYoZS5sZW5ndGg/ZS5sZW5ndGg9PT10aGlzLmFuY2hvcnMubGVuZ3RoJiYoZT0hMCk6ZT0hMSk7Zm9yKHZhciBpLHM9MDtpPXRoaXMudGFic1tzXTtzKyspZT09PSEwfHwtMSE9PXQuaW5BcnJheShzLGUpP3QoaSkuYWRkQ2xhc3MoInVpLXN0YXRlLWRpc2FibGVkIikuYXR0cigiYXJpYS1kaXNhYmxlZCIsInRydWUiKTp0KGkpLnJlbW92ZUNsYXNzKCJ1aS1zdGF0ZS1kaXNhYmxlZCIpLnJlbW92ZUF0dHIoImFyaWEtZGlzYWJsZWQiKTt0aGlzLm9wdGlvbnMuZGlzYWJsZWQ9ZX0sX3NldHVwRXZlbnRzOmZ1bmN0aW9uKGUpe3ZhciBpPXtjbGljazpmdW5jdGlvbih0KXt0LnByZXZlbnREZWZhdWx0KCkKfX07ZSYmdC5lYWNoKGUuc3BsaXQoIiAiKSxmdW5jdGlvbih0LGUpe2lbZV09Il9ldmVudEhhbmRsZXIifSk7dGhpcy5fb2ZmKHRoaXMuYW5jaG9ycy5hZGQodGhpcy50YWJzKS5hZGQodGhpcy5wYW5lbHMpKTt0aGlzLl9vbih0aGlzLmFuY2hvcnMsaSk7dGhpcy5fb24odGhpcy50YWJzLHtrZXlkb3duOiJfdGFiS2V5ZG93biJ9KTt0aGlzLl9vbih0aGlzLnBhbmVscyx7a2V5ZG93bjoiX3BhbmVsS2V5ZG93biJ9KTt0aGlzLl9mb2N1c2FibGUodGhpcy50YWJzKTt0aGlzLl9ob3ZlcmFibGUodGhpcy50YWJzKX0sX3NldHVwSGVpZ2h0U3R5bGU6ZnVuY3Rpb24oZSl7dmFyIGkscz10aGlzLmVsZW1lbnQucGFyZW50KCk7aWYoImZpbGwiPT09ZSl7aT1zLmhlaWdodCgpO2ktPXRoaXMuZWxlbWVudC5vdXRlckhlaWdodCgpLXRoaXMuZWxlbWVudC5oZWlnaHQoKTt0aGlzLmVsZW1lbnQuc2libGluZ3MoIjp2aXNpYmxlIikuZWFjaChmdW5jdGlvbigpe3ZhciBlPXQodGhpcykscz1lLmNzcygicG9zaXRpb24iKTsKImFic29sdXRlIiE9PXMmJiJmaXhlZCIhPT1zJiYoaS09ZS5vdXRlckhlaWdodCghMCkpfSk7dGhpcy5lbGVtZW50LmNoaWxkcmVuKCkubm90KHRoaXMucGFuZWxzKS5lYWNoKGZ1bmN0aW9uKCl7aS09dCh0aGlzKS5vdXRlckhlaWdodCghMCl9KTt0aGlzLnBhbmVscy5lYWNoKGZ1bmN0aW9uKCl7dCh0aGlzKS5oZWlnaHQoTWF0aC5tYXgoMCxpLXQodGhpcykuaW5uZXJIZWlnaHQoKSt0KHRoaXMpLmhlaWdodCgpKSl9KS5jc3MoIm92ZXJmbG93IiwiYXV0byIpfWVsc2UgaWYoImF1dG8iPT09ZSl7aT0wO3RoaXMucGFuZWxzLmVhY2goZnVuY3Rpb24oKXtpPU1hdGgubWF4KGksdCh0aGlzKS5oZWlnaHQoIiIpLmhlaWdodCgpKX0pLmhlaWdodChpKX19LF9ldmVudEhhbmRsZXI6ZnVuY3Rpb24oZSl7dmFyIGk9dGhpcy5vcHRpb25zLHM9dGhpcy5hY3RpdmUsbj10KGUuY3VycmVudFRhcmdldCksbz1uLmNsb3Nlc3QoImxpIiksYT1vWzBdPT09c1swXSxyPWEmJmkuY29sbGFwc2libGUsaD1yP3QoKTp0aGlzLl9nZXRQYW5lbEZvclRhYihvKSxsPXMubGVuZ3RoP3RoaXMuX2dldFBhbmVsRm9yVGFiKHMpOnQoKSx1PXtvbGRUYWI6cyxvbGRQYW5lbDpsLG5ld1RhYjpyP3QoKTpvLG5ld1BhbmVsOmh9OwplLnByZXZlbnREZWZhdWx0KCk7aWYoIShvLmhhc0NsYXNzKCJ1aS1zdGF0ZS1kaXNhYmxlZCIpfHxvLmhhc0NsYXNzKCJ1aS10YWJzLWxvYWRpbmciKXx8dGhpcy5ydW5uaW5nfHxhJiYhaS5jb2xsYXBzaWJsZXx8dGhpcy5fdHJpZ2dlcigiYmVmb3JlQWN0aXZhdGUiLGUsdSk9PT0hMSkpe2kuYWN0aXZlPXI/ITE6dGhpcy50YWJzLmluZGV4KG8pO3RoaXMuYWN0aXZlPWE/dCgpOm87dGhpcy54aHImJnRoaXMueGhyLmFib3J0KCk7bC5sZW5ndGh8fGgubGVuZ3RofHx0LmVycm9yKCJqUXVlcnkgVUkgVGFiczogTWlzbWF0Y2hpbmcgZnJhZ21lbnQgaWRlbnRpZmllci4iKTtoLmxlbmd0aCYmdGhpcy5sb2FkKHRoaXMudGFicy5pbmRleChvKSxlKTt0aGlzLl90b2dnbGUoZSx1KX19LF90b2dnbGU6ZnVuY3Rpb24oZSxpKXtmdW5jdGlvbiBzKCl7by5ydW5uaW5nPSExO28uX3RyaWdnZXIoImFjdGl2YXRlIixlLGkpfWZ1bmN0aW9uIG4oKXtpLm5ld1RhYi5jbG9zZXN0KCJsaSIpLmFkZENsYXNzKCJ1aS10YWJzLWFjdGl2ZSB1aS1zdGF0ZS1hY3RpdmUiKTsKaWYoYS5sZW5ndGgmJm8ub3B0aW9ucy5zaG93KW8uX3Nob3coYSxvLm9wdGlvbnMuc2hvdyxzKTtlbHNle2Euc2hvdygpO3MoKX19dmFyIG89dGhpcyxhPWkubmV3UGFuZWwscj1pLm9sZFBhbmVsO3RoaXMucnVubmluZz0hMDtpZihyLmxlbmd0aCYmdGhpcy5vcHRpb25zLmhpZGUpdGhpcy5faGlkZShyLHRoaXMub3B0aW9ucy5oaWRlLGZ1bmN0aW9uKCl7aS5vbGRUYWIuY2xvc2VzdCgibGkiKS5yZW1vdmVDbGFzcygidWktdGFicy1hY3RpdmUgdWktc3RhdGUtYWN0aXZlIik7bigpfSk7ZWxzZXtpLm9sZFRhYi5jbG9zZXN0KCJsaSIpLnJlbW92ZUNsYXNzKCJ1aS10YWJzLWFjdGl2ZSB1aS1zdGF0ZS1hY3RpdmUiKTtyLmhpZGUoKTtuKCl9ci5hdHRyKHsiYXJpYS1leHBhbmRlZCI6ImZhbHNlIiwiYXJpYS1oaWRkZW4iOiJ0cnVlIn0pO2kub2xkVGFiLmF0dHIoImFyaWEtc2VsZWN0ZWQiLCJmYWxzZSIpO2EubGVuZ3RoJiZyLmxlbmd0aD9pLm9sZFRhYi5hdHRyKCJ0YWJJbmRleCIsLTEpOmEubGVuZ3RoJiZ0aGlzLnRhYnMuZmlsdGVyKGZ1bmN0aW9uKCl7cmV0dXJuIDA9PT10KHRoaXMpLmF0dHIoInRhYkluZGV4IikKfSkuYXR0cigidGFiSW5kZXgiLC0xKTthLmF0dHIoeyJhcmlhLWV4cGFuZGVkIjoidHJ1ZSIsImFyaWEtaGlkZGVuIjoiZmFsc2UifSk7aS5uZXdUYWIuYXR0cih7ImFyaWEtc2VsZWN0ZWQiOiJ0cnVlIix0YWJJbmRleDowfSl9LF9hY3RpdmF0ZTpmdW5jdGlvbihlKXt2YXIgaSxzPXRoaXMuX2ZpbmRBY3RpdmUoZSk7aWYoc1swXSE9PXRoaXMuYWN0aXZlWzBdKXtzLmxlbmd0aHx8KHM9dGhpcy5hY3RpdmUpO2k9cy5maW5kKCIudWktdGFicy1hbmNob3IiKVswXTt0aGlzLl9ldmVudEhhbmRsZXIoe3RhcmdldDppLGN1cnJlbnRUYXJnZXQ6aSxwcmV2ZW50RGVmYXVsdDp0Lm5vb3B9KX19LF9maW5kQWN0aXZlOmZ1bmN0aW9uKGUpe3JldHVybiBlPT09ITE/dCgpOnRoaXMudGFicy5lcShlKX0sX2dldEluZGV4OmZ1bmN0aW9uKHQpeyJzdHJpbmciPT10eXBlb2YgdCYmKHQ9dGhpcy5hbmNob3JzLmluZGV4KHRoaXMuYW5jaG9ycy5maWx0ZXIoIltocmVmJD0nIit0KyInXSIpKSk7cmV0dXJuIHQKfSxfZGVzdHJveTpmdW5jdGlvbigpe3RoaXMueGhyJiZ0aGlzLnhoci5hYm9ydCgpO3RoaXMuZWxlbWVudC5yZW1vdmVDbGFzcygidWktdGFicyB1aS13aWRnZXQgdWktd2lkZ2V0LWNvbnRlbnQgdWktY29ybmVyLWFsbCB1aS10YWJzLWNvbGxhcHNpYmxlIik7dGhpcy50YWJsaXN0LnJlbW92ZUNsYXNzKCJ1aS10YWJzLW5hdiB1aS1oZWxwZXItcmVzZXQgdWktaGVscGVyLWNsZWFyZml4IHVpLXdpZGdldC1oZWFkZXIgdWktY29ybmVyLWFsbCIpLnJlbW92ZUF0dHIoInJvbGUiKTt0aGlzLmFuY2hvcnMucmVtb3ZlQ2xhc3MoInVpLXRhYnMtYW5jaG9yIikucmVtb3ZlQXR0cigicm9sZSIpLnJlbW92ZUF0dHIoInRhYkluZGV4IikucmVtb3ZlVW5pcXVlSWQoKTt0aGlzLnRhYnMuYWRkKHRoaXMucGFuZWxzKS5lYWNoKGZ1bmN0aW9uKCl7dC5kYXRhKHRoaXMsInVpLXRhYnMtZGVzdHJveSIpP3QodGhpcykucmVtb3ZlKCk6dCh0aGlzKS5yZW1vdmVDbGFzcygidWktc3RhdGUtZGVmYXVsdCB1aS1zdGF0ZS1hY3RpdmUgdWktc3RhdGUtZGlzYWJsZWQgdWktY29ybmVyLXRvcCB1aS1jb3JuZXItYm90dG9tIHVpLXdpZGdldC1jb250ZW50IHVpLXRhYnMtYWN0aXZlIHVpLXRhYnMtcGFuZWwiKS5yZW1vdmVBdHRyKCJ0YWJJbmRleCIpLnJlbW92ZUF0dHIoImFyaWEtbGl2ZSIpLnJlbW92ZUF0dHIoImFyaWEtYnVzeSIpLnJlbW92ZUF0dHIoImFyaWEtc2VsZWN0ZWQiKS5yZW1vdmVBdHRyKCJhcmlhLWxhYmVsbGVkYnkiKS5yZW1vdmVBdHRyKCJhcmlhLWhpZGRlbiIpLnJlbW92ZUF0dHIoImFyaWEtZXhwYW5kZWQiKS5yZW1vdmVBdHRyKCJyb2xlIikKfSk7dGhpcy50YWJzLmVhY2goZnVuY3Rpb24oKXt2YXIgZT10KHRoaXMpLGk9ZS5kYXRhKCJ1aS10YWJzLWFyaWEtY29udHJvbHMiKTtpP2UuYXR0cigiYXJpYS1jb250cm9scyIsaSkucmVtb3ZlRGF0YSgidWktdGFicy1hcmlhLWNvbnRyb2xzIik6ZS5yZW1vdmVBdHRyKCJhcmlhLWNvbnRyb2xzIil9KTt0aGlzLnBhbmVscy5zaG93KCk7ImNvbnRlbnQiIT09dGhpcy5vcHRpb25zLmhlaWdodFN0eWxlJiZ0aGlzLnBhbmVscy5jc3MoImhlaWdodCIsIiIpfSxlbmFibGU6ZnVuY3Rpb24oaSl7dmFyIHM9dGhpcy5vcHRpb25zLmRpc2FibGVkO2lmKHMhPT0hMSl7aWYoaT09PWUpcz0hMTtlbHNle2k9dGhpcy5fZ2V0SW5kZXgoaSk7cz10LmlzQXJyYXkocyk/dC5tYXAocyxmdW5jdGlvbih0KXtyZXR1cm4gdCE9PWk/dDpudWxsfSk6dC5tYXAodGhpcy50YWJzLGZ1bmN0aW9uKHQsZSl7cmV0dXJuIGUhPT1pP2U6bnVsbH0pfXRoaXMuX3NldHVwRGlzYWJsZWQocyl9fSxkaXNhYmxlOmZ1bmN0aW9uKGkpe3ZhciBzPXRoaXMub3B0aW9ucy5kaXNhYmxlZDsKaWYocyE9PSEwKXtpZihpPT09ZSlzPSEwO2Vsc2V7aT10aGlzLl9nZXRJbmRleChpKTtpZigtMSE9PXQuaW5BcnJheShpLHMpKXJldHVybjtzPXQuaXNBcnJheShzKT90Lm1lcmdlKFtpXSxzKS5zb3J0KCk6W2ldfXRoaXMuX3NldHVwRGlzYWJsZWQocyl9fSxsb2FkOmZ1bmN0aW9uKGUsaSl7ZT10aGlzLl9nZXRJbmRleChlKTt2YXIgbj10aGlzLG89dGhpcy50YWJzLmVxKGUpLGE9by5maW5kKCIudWktdGFicy1hbmNob3IiKSxyPXRoaXMuX2dldFBhbmVsRm9yVGFiKG8pLGg9e3RhYjpvLHBhbmVsOnJ9O2lmKCFzKGFbMF0pKXt0aGlzLnhocj10LmFqYXgodGhpcy5fYWpheFNldHRpbmdzKGEsaSxoKSk7aWYodGhpcy54aHImJiJjYW5jZWxlZCIhPT10aGlzLnhoci5zdGF0dXNUZXh0KXtvLmFkZENsYXNzKCJ1aS10YWJzLWxvYWRpbmciKTtyLmF0dHIoImFyaWEtYnVzeSIsInRydWUiKTt0aGlzLnhoci5zdWNjZXNzKGZ1bmN0aW9uKHQpe3NldFRpbWVvdXQoZnVuY3Rpb24oKXtyLmh0bWwodCk7Cm4uX3RyaWdnZXIoImxvYWQiLGksaCl9LDEpfSkuY29tcGxldGUoZnVuY3Rpb24odCxlKXtzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7ImFib3J0Ij09PWUmJm4ucGFuZWxzLnN0b3AoITEsITApO28ucmVtb3ZlQ2xhc3MoInVpLXRhYnMtbG9hZGluZyIpO3IucmVtb3ZlQXR0cigiYXJpYS1idXN5Iik7dD09PW4ueGhyJiZkZWxldGUgbi54aHJ9LDEpfSl9fX0sX2FqYXhTZXR0aW5nczpmdW5jdGlvbihlLGkscyl7dmFyIG49dGhpcztyZXR1cm57dXJsOmUuYXR0cigiaHJlZiIpLGJlZm9yZVNlbmQ6ZnVuY3Rpb24oZSxvKXtyZXR1cm4gbi5fdHJpZ2dlcigiYmVmb3JlTG9hZCIsaSx0LmV4dGVuZCh7anFYSFI6ZSxhamF4U2V0dGluZ3M6b30scykpfX19LF9nZXRQYW5lbEZvclRhYjpmdW5jdGlvbihlKXt2YXIgaT10KGUpLmF0dHIoImFyaWEtY29udHJvbHMiKTtyZXR1cm4gdGhpcy5lbGVtZW50LmZpbmQodGhpcy5fc2FuaXRpemVTZWxlY3RvcigiIyIraSkpfX0pfShqUXVlcnkpOyFmdW5jdGlvbih0KXtmdW5jdGlvbiBlKGUsaSl7dmFyIHM9KGUuYXR0cigiYXJpYS1kZXNjcmliZWRieSIpfHwiIikuc3BsaXQoL1xzKy8pOwpzLnB1c2goaSk7ZS5kYXRhKCJ1aS10b29sdGlwLWlkIixpKS5hdHRyKCJhcmlhLWRlc2NyaWJlZGJ5Iix0LnRyaW0ocy5qb2luKCIgIikpKX1mdW5jdGlvbiBpKGUpe3ZhciBpPWUuZGF0YSgidWktdG9vbHRpcC1pZCIpLHM9KGUuYXR0cigiYXJpYS1kZXNjcmliZWRieSIpfHwiIikuc3BsaXQoL1xzKy8pLG49dC5pbkFycmF5KGkscyk7LTEhPT1uJiZzLnNwbGljZShuLDEpO2UucmVtb3ZlRGF0YSgidWktdG9vbHRpcC1pZCIpO3M9dC50cmltKHMuam9pbigiICIpKTtzP2UuYXR0cigiYXJpYS1kZXNjcmliZWRieSIscyk6ZS5yZW1vdmVBdHRyKCJhcmlhLWRlc2NyaWJlZGJ5Iil9dmFyIHM9MDt0LndpZGdldCgidWkudG9vbHRpcCIse3ZlcnNpb246IjEuMTAuNCIsb3B0aW9uczp7Y29udGVudDpmdW5jdGlvbigpe3ZhciBlPXQodGhpcykuYXR0cigidGl0bGUiKXx8IiI7cmV0dXJuIHQoIjxhPiIpLnRleHQoZSkuaHRtbCgpfSxoaWRlOiEwLGl0ZW1zOiJbdGl0bGVdOm5vdChbZGlzYWJsZWRdKSIscG9zaXRpb246e215OiJsZWZ0IHRvcCsxNSIsYXQ6ImxlZnQgYm90dG9tIixjb2xsaXNpb246ImZsaXBmaXQgZmxpcCJ9LHNob3c6ITAsdG9vbHRpcENsYXNzOm51bGwsdHJhY2s6ITEsY2xvc2U6bnVsbCxvcGVuOm51bGx9LF9jcmVhdGU6ZnVuY3Rpb24oKXt0aGlzLl9vbih7bW91c2VvdmVyOiJvcGVuIixmb2N1c2luOiJvcGVuIn0pOwp0aGlzLnRvb2x0aXBzPXt9O3RoaXMucGFyZW50cz17fTt0aGlzLm9wdGlvbnMuZGlzYWJsZWQmJnRoaXMuX2Rpc2FibGUoKX0sX3NldE9wdGlvbjpmdW5jdGlvbihlLGkpe3ZhciBzPXRoaXM7aWYoImRpc2FibGVkIiE9PWUpe3RoaXMuX3N1cGVyKGUsaSk7ImNvbnRlbnQiPT09ZSYmdC5lYWNoKHRoaXMudG9vbHRpcHMsZnVuY3Rpb24odCxlKXtzLl91cGRhdGVDb250ZW50KGUpfSl9ZWxzZXt0aGlzW2k/Il9kaXNhYmxlIjoiX2VuYWJsZSJdKCk7dGhpcy5vcHRpb25zW2VdPWl9fSxfZGlzYWJsZTpmdW5jdGlvbigpe3ZhciBlPXRoaXM7dC5lYWNoKHRoaXMudG9vbHRpcHMsZnVuY3Rpb24oaSxzKXt2YXIgbj10LkV2ZW50KCJibHVyIik7bi50YXJnZXQ9bi5jdXJyZW50VGFyZ2V0PXNbMF07ZS5jbG9zZShuLCEwKX0pO3RoaXMuZWxlbWVudC5maW5kKHRoaXMub3B0aW9ucy5pdGVtcykuYWRkQmFjaygpLmVhY2goZnVuY3Rpb24oKXt2YXIgZT10KHRoaXMpO2UuaXMoIlt0aXRsZV0iKSYmZS5kYXRhKCJ1aS10b29sdGlwLXRpdGxlIixlLmF0dHIoInRpdGxlIikpLmF0dHIoInRpdGxlIiwiIikKfSl9LF9lbmFibGU6ZnVuY3Rpb24oKXt0aGlzLmVsZW1lbnQuZmluZCh0aGlzLm9wdGlvbnMuaXRlbXMpLmFkZEJhY2soKS5lYWNoKGZ1bmN0aW9uKCl7dmFyIGU9dCh0aGlzKTtlLmRhdGEoInVpLXRvb2x0aXAtdGl0bGUiKSYmZS5hdHRyKCJ0aXRsZSIsZS5kYXRhKCJ1aS10b29sdGlwLXRpdGxlIikpfSl9LG9wZW46ZnVuY3Rpb24oZSl7dmFyIGk9dGhpcyxzPXQoZT9lLnRhcmdldDp0aGlzLmVsZW1lbnQpLmNsb3Nlc3QodGhpcy5vcHRpb25zLml0ZW1zKTtpZihzLmxlbmd0aCYmIXMuZGF0YSgidWktdG9vbHRpcC1pZCIpKXtzLmF0dHIoInRpdGxlIikmJnMuZGF0YSgidWktdG9vbHRpcC10aXRsZSIscy5hdHRyKCJ0aXRsZSIpKTtzLmRhdGEoInVpLXRvb2x0aXAtb3BlbiIsITApO2UmJiJtb3VzZW92ZXIiPT09ZS50eXBlJiZzLnBhcmVudHMoKS5lYWNoKGZ1bmN0aW9uKCl7dmFyIGUscz10KHRoaXMpO2lmKHMuZGF0YSgidWktdG9vbHRpcC1vcGVuIikpe2U9dC5FdmVudCgiYmx1ciIpOwplLnRhcmdldD1lLmN1cnJlbnRUYXJnZXQ9dGhpcztpLmNsb3NlKGUsITApfWlmKHMuYXR0cigidGl0bGUiKSl7cy51bmlxdWVJZCgpO2kucGFyZW50c1t0aGlzLmlkXT17ZWxlbWVudDp0aGlzLHRpdGxlOnMuYXR0cigidGl0bGUiKX07cy5hdHRyKCJ0aXRsZSIsIiIpfX0pO3RoaXMuX3VwZGF0ZUNvbnRlbnQocyxlKX19LF91cGRhdGVDb250ZW50OmZ1bmN0aW9uKHQsZSl7dmFyIGkscz10aGlzLm9wdGlvbnMuY29udGVudCxuPXRoaXMsbz1lP2UudHlwZTpudWxsO2lmKCJzdHJpbmciPT10eXBlb2YgcylyZXR1cm4gdGhpcy5fb3BlbihlLHQscyk7aT1zLmNhbGwodFswXSxmdW5jdGlvbihpKXt0LmRhdGEoInVpLXRvb2x0aXAtb3BlbiIpJiZuLl9kZWxheShmdW5jdGlvbigpe2UmJihlLnR5cGU9byk7dGhpcy5fb3BlbihlLHQsaSl9KX0pO2kmJnRoaXMuX29wZW4oZSx0LGkpfSxfb3BlbjpmdW5jdGlvbihpLHMsbil7ZnVuY3Rpb24gbyh0KXtsLm9mPXQ7YS5pcygiOmhpZGRlbiIpfHxhLnBvc2l0aW9uKGwpCn12YXIgYSxyLGgsbD10LmV4dGVuZCh7fSx0aGlzLm9wdGlvbnMucG9zaXRpb24pO2lmKG4pe2E9dGhpcy5fZmluZChzKTtpZihhLmxlbmd0aClhLmZpbmQoIi51aS10b29sdGlwLWNvbnRlbnQiKS5odG1sKG4pO2Vsc2V7cy5pcygiW3RpdGxlXSIpJiYoaSYmIm1vdXNlb3ZlciI9PT1pLnR5cGU/cy5hdHRyKCJ0aXRsZSIsIiIpOnMucmVtb3ZlQXR0cigidGl0bGUiKSk7YT10aGlzLl90b29sdGlwKHMpO2UocyxhLmF0dHIoImlkIikpO2EuZmluZCgiLnVpLXRvb2x0aXAtY29udGVudCIpLmh0bWwobik7aWYodGhpcy5vcHRpb25zLnRyYWNrJiZpJiYvXm1vdXNlLy50ZXN0KGkudHlwZSkpe3RoaXMuX29uKHRoaXMuZG9jdW1lbnQse21vdXNlbW92ZTpvfSk7byhpKX1lbHNlIGEucG9zaXRpb24odC5leHRlbmQoe29mOnN9LHRoaXMub3B0aW9ucy5wb3NpdGlvbikpO2EuaGlkZSgpO3RoaXMuX3Nob3coYSx0aGlzLm9wdGlvbnMuc2hvdyk7dGhpcy5vcHRpb25zLnNob3cmJnRoaXMub3B0aW9ucy5zaG93LmRlbGF5JiYoaD10aGlzLmRlbGF5ZWRTaG93PXNldEludGVydmFsKGZ1bmN0aW9uKCl7aWYoYS5pcygiOnZpc2libGUiKSl7byhsLm9mKTsKY2xlYXJJbnRlcnZhbChoKX19LHQuZnguaW50ZXJ2YWwpKTt0aGlzLl90cmlnZ2VyKCJvcGVuIixpLHt0b29sdGlwOmF9KTtyPXtrZXl1cDpmdW5jdGlvbihlKXtpZihlLmtleUNvZGU9PT10LnVpLmtleUNvZGUuRVNDQVBFKXt2YXIgaT10LkV2ZW50KGUpO2kuY3VycmVudFRhcmdldD1zWzBdO3RoaXMuY2xvc2UoaSwhMCl9fSxyZW1vdmU6ZnVuY3Rpb24oKXt0aGlzLl9yZW1vdmVUb29sdGlwKGEpfX07aSYmIm1vdXNlb3ZlciIhPT1pLnR5cGV8fChyLm1vdXNlbGVhdmU9ImNsb3NlIik7aSYmImZvY3VzaW4iIT09aS50eXBlfHwoci5mb2N1c291dD0iY2xvc2UiKTt0aGlzLl9vbighMCxzLHIpfX19LGNsb3NlOmZ1bmN0aW9uKGUpe3ZhciBzPXRoaXMsbj10KGU/ZS5jdXJyZW50VGFyZ2V0OnRoaXMuZWxlbWVudCksbz10aGlzLl9maW5kKG4pO2lmKCF0aGlzLmNsb3Npbmcpe2NsZWFySW50ZXJ2YWwodGhpcy5kZWxheWVkU2hvdyk7bi5kYXRhKCJ1aS10b29sdGlwLXRpdGxlIikmJm4uYXR0cigidGl0bGUiLG4uZGF0YSgidWktdG9vbHRpcC10aXRsZSIpKTsKaShuKTtvLnN0b3AoITApO3RoaXMuX2hpZGUobyx0aGlzLm9wdGlvbnMuaGlkZSxmdW5jdGlvbigpe3MuX3JlbW92ZVRvb2x0aXAodCh0aGlzKSl9KTtuLnJlbW92ZURhdGEoInVpLXRvb2x0aXAtb3BlbiIpO3RoaXMuX29mZihuLCJtb3VzZWxlYXZlIGZvY3Vzb3V0IGtleXVwIik7blswXSE9PXRoaXMuZWxlbWVudFswXSYmdGhpcy5fb2ZmKG4sInJlbW92ZSIpO3RoaXMuX29mZih0aGlzLmRvY3VtZW50LCJtb3VzZW1vdmUiKTtlJiYibW91c2VsZWF2ZSI9PT1lLnR5cGUmJnQuZWFjaCh0aGlzLnBhcmVudHMsZnVuY3Rpb24oZSxpKXt0KGkuZWxlbWVudCkuYXR0cigidGl0bGUiLGkudGl0bGUpO2RlbGV0ZSBzLnBhcmVudHNbZV19KTt0aGlzLmNsb3Npbmc9ITA7dGhpcy5fdHJpZ2dlcigiY2xvc2UiLGUse3Rvb2x0aXA6b30pO3RoaXMuY2xvc2luZz0hMX19LF90b29sdGlwOmZ1bmN0aW9uKGUpe3ZhciBpPSJ1aS10b29sdGlwLSIrcysrLG49dCgiPGRpdj4iKS5hdHRyKHtpZDppLHJvbGU6InRvb2x0aXAifSkuYWRkQ2xhc3MoInVpLXRvb2x0aXAgdWktd2lkZ2V0IHVpLWNvcm5lci1hbGwgdWktd2lkZ2V0LWNvbnRlbnQgIisodGhpcy5vcHRpb25zLnRvb2x0aXBDbGFzc3x8IiIpKTsKdCgiPGRpdj4iKS5hZGRDbGFzcygidWktdG9vbHRpcC1jb250ZW50IikuYXBwZW5kVG8obik7bi5hcHBlbmRUbyh0aGlzLmRvY3VtZW50WzBdLmJvZHkpO3RoaXMudG9vbHRpcHNbaV09ZTtyZXR1cm4gbn0sX2ZpbmQ6ZnVuY3Rpb24oZSl7dmFyIGk9ZS5kYXRhKCJ1aS10b29sdGlwLWlkIik7cmV0dXJuIGk/dCgiIyIraSk6dCgpfSxfcmVtb3ZlVG9vbHRpcDpmdW5jdGlvbih0KXt0LnJlbW92ZSgpO2RlbGV0ZSB0aGlzLnRvb2x0aXBzW3QuYXR0cigiaWQiKV19LF9kZXN0cm95OmZ1bmN0aW9uKCl7dmFyIGU9dGhpczt0LmVhY2godGhpcy50b29sdGlwcyxmdW5jdGlvbihpLHMpe3ZhciBuPXQuRXZlbnQoImJsdXIiKTtuLnRhcmdldD1uLmN1cnJlbnRUYXJnZXQ9c1swXTtlLmNsb3NlKG4sITApO3QoIiMiK2kpLnJlbW92ZSgpO2lmKHMuZGF0YSgidWktdG9vbHRpcC10aXRsZSIpKXtzLmF0dHIoInRpdGxlIixzLmRhdGEoInVpLXRvb2x0aXAtdGl0bGUiKSk7cy5yZW1vdmVEYXRhKCJ1aS10b29sdGlwLXRpdGxlIikKfX0pfX0pfShqUXVlcnkpOyFmdW5jdGlvbih0LGUpe3ZhciBpPSJ1aS1lZmZlY3RzLSI7dC5lZmZlY3RzPXtlZmZlY3Q6e319OyFmdW5jdGlvbih0LGUpe2Z1bmN0aW9uIGkodCxlLGkpe3ZhciBzPWNbZS50eXBlXXx8e307aWYobnVsbD09dClyZXR1cm4gaXx8IWUuZGVmP251bGw6ZS5kZWY7dD1zLmZsb29yP35+dDpwYXJzZUZsb2F0KHQpO3JldHVybiBpc05hTih0KT9lLmRlZjpzLm1vZD8odCtzLm1vZCklcy5tb2Q6MD50PzA6cy5tYXg8dD9zLm1heDp0fWZ1bmN0aW9uIHMoZSl7dmFyIGk9bCgpLHM9aS5fcmdiYT1bXTtlPWUudG9Mb3dlckNhc2UoKTtmKGgsZnVuY3Rpb24odCxuKXt2YXIgbyxhPW4ucmUuZXhlYyhlKSxyPWEmJm4ucGFyc2UoYSksaD1uLnNwYWNlfHwicmdiYSI7aWYocil7bz1pW2hdKHIpO2lbdVtoXS5jYWNoZV09b1t1W2hdLmNhY2hlXTtzPWkuX3JnYmE9by5fcmdiYTtyZXR1cm4hMX19KTtpZihzLmxlbmd0aCl7IjAsMCwwLDAiPT09cy5qb2luKCkmJnQuZXh0ZW5kKHMsby50cmFuc3BhcmVudCk7CnJldHVybiBpfXJldHVybiBvW2VdfWZ1bmN0aW9uIG4odCxlLGkpe2k9KGkrMSklMTtyZXR1cm4gMT42Kmk/dCsoZS10KSppKjY6MT4yKmk/ZToyPjMqaT90KyhlLXQpKigyLzMtaSkqNjp0fXZhciBvLGE9ImJhY2tncm91bmRDb2xvciBib3JkZXJCb3R0b21Db2xvciBib3JkZXJMZWZ0Q29sb3IgYm9yZGVyUmlnaHRDb2xvciBib3JkZXJUb3BDb2xvciBjb2xvciBjb2x1bW5SdWxlQ29sb3Igb3V0bGluZUNvbG9yIHRleHREZWNvcmF0aW9uQ29sb3IgdGV4dEVtcGhhc2lzQ29sb3IiLHI9L14oW1wtK10pPVxzKihcZCtcLj9cZCopLyxoPVt7cmU6L3JnYmE/XChccyooXGR7MSwzfSlccyosXHMqKFxkezEsM30pXHMqLFxzKihcZHsxLDN9KVxzKig/OixccyooXGQ/KD86XC5cZCspPylccyopP1wpLyxwYXJzZTpmdW5jdGlvbih0KXtyZXR1cm5bdFsxXSx0WzJdLHRbM10sdFs0XV19fSx7cmU6L3JnYmE/XChccyooXGQrKD86XC5cZCspPylcJVxzKixccyooXGQrKD86XC5cZCspPylcJVxzKixccyooXGQrKD86XC5cZCspPylcJVxzKig/OixccyooXGQ/KD86XC5cZCspPylccyopP1wpLyxwYXJzZTpmdW5jdGlvbih0KXtyZXR1cm5bMi41NSp0WzFdLDIuNTUqdFsyXSwyLjU1KnRbM10sdFs0XV0KfX0se3JlOi8jKFthLWYwLTldezJ9KShbYS1mMC05XXsyfSkoW2EtZjAtOV17Mn0pLyxwYXJzZTpmdW5jdGlvbih0KXtyZXR1cm5bcGFyc2VJbnQodFsxXSwxNikscGFyc2VJbnQodFsyXSwxNikscGFyc2VJbnQodFszXSwxNildfX0se3JlOi8jKFthLWYwLTldKShbYS1mMC05XSkoW2EtZjAtOV0pLyxwYXJzZTpmdW5jdGlvbih0KXtyZXR1cm5bcGFyc2VJbnQodFsxXSt0WzFdLDE2KSxwYXJzZUludCh0WzJdK3RbMl0sMTYpLHBhcnNlSW50KHRbM10rdFszXSwxNildfX0se3JlOi9oc2xhP1woXHMqKFxkKyg/OlwuXGQrKT8pXHMqLFxzKihcZCsoPzpcLlxkKyk/KVwlXHMqLFxzKihcZCsoPzpcLlxkKyk/KVwlXHMqKD86LFxzKihcZD8oPzpcLlxkKyk/KVxzKik/XCkvLHNwYWNlOiJoc2xhIixwYXJzZTpmdW5jdGlvbih0KXtyZXR1cm5bdFsxXSx0WzJdLzEwMCx0WzNdLzEwMCx0WzRdXX19XSxsPXQuQ29sb3I9ZnVuY3Rpb24oZSxpLHMsbil7cmV0dXJuIG5ldyB0LkNvbG9yLmZuLnBhcnNlKGUsaSxzLG4pCn0sdT17cmdiYTp7cHJvcHM6e3JlZDp7aWR4OjAsdHlwZToiYnl0ZSJ9LGdyZWVuOntpZHg6MSx0eXBlOiJieXRlIn0sYmx1ZTp7aWR4OjIsdHlwZToiYnl0ZSJ9fX0saHNsYTp7cHJvcHM6e2h1ZTp7aWR4OjAsdHlwZToiZGVncmVlcyJ9LHNhdHVyYXRpb246e2lkeDoxLHR5cGU6InBlcmNlbnQifSxsaWdodG5lc3M6e2lkeDoyLHR5cGU6InBlcmNlbnQifX19fSxjPXsiYnl0ZSI6e2Zsb29yOiEwLG1heDoyNTV9LHBlcmNlbnQ6e21heDoxfSxkZWdyZWVzOnttb2Q6MzYwLGZsb29yOiEwfX0sZD1sLnN1cHBvcnQ9e30scD10KCI8cD4iKVswXSxmPXQuZWFjaDtwLnN0eWxlLmNzc1RleHQ9ImJhY2tncm91bmQtY29sb3I6cmdiYSgxLDEsMSwuNSkiO2QucmdiYT1wLnN0eWxlLmJhY2tncm91bmRDb2xvci5pbmRleE9mKCJyZ2JhIik+LTE7Zih1LGZ1bmN0aW9uKHQsZSl7ZS5jYWNoZT0iXyIrdDtlLnByb3BzLmFscGhhPXtpZHg6Myx0eXBlOiJwZXJjZW50IixkZWY6MX19KTtsLmZuPXQuZXh0ZW5kKGwucHJvdG90eXBlLHtwYXJzZTpmdW5jdGlvbihuLGEscixoKXtpZihuPT09ZSl7dGhpcy5fcmdiYT1bbnVsbCxudWxsLG51bGwsbnVsbF07CnJldHVybiB0aGlzfWlmKG4uanF1ZXJ5fHxuLm5vZGVUeXBlKXtuPXQobikuY3NzKGEpO2E9ZX12YXIgYz10aGlzLGQ9dC50eXBlKG4pLHA9dGhpcy5fcmdiYT1bXTtpZihhIT09ZSl7bj1bbixhLHIsaF07ZD0iYXJyYXkifWlmKCJzdHJpbmciPT09ZClyZXR1cm4gdGhpcy5wYXJzZShzKG4pfHxvLl9kZWZhdWx0KTtpZigiYXJyYXkiPT09ZCl7Zih1LnJnYmEucHJvcHMsZnVuY3Rpb24odCxlKXtwW2UuaWR4XT1pKG5bZS5pZHhdLGUpfSk7cmV0dXJuIHRoaXN9aWYoIm9iamVjdCI9PT1kKXtuIGluc3RhbmNlb2YgbD9mKHUsZnVuY3Rpb24odCxlKXtuW2UuY2FjaGVdJiYoY1tlLmNhY2hlXT1uW2UuY2FjaGVdLnNsaWNlKCkpfSk6Zih1LGZ1bmN0aW9uKGUscyl7dmFyIG89cy5jYWNoZTtmKHMucHJvcHMsZnVuY3Rpb24odCxlKXtpZighY1tvXSYmcy50byl7aWYoImFscGhhIj09PXR8fG51bGw9PW5bdF0pcmV0dXJuO2Nbb109cy50byhjLl9yZ2JhKX1jW29dW2UuaWR4XT1pKG5bdF0sZSwhMCkKfSk7aWYoY1tvXSYmdC5pbkFycmF5KG51bGwsY1tvXS5zbGljZSgwLDMpKTwwKXtjW29dWzNdPTE7cy5mcm9tJiYoYy5fcmdiYT1zLmZyb20oY1tvXSkpfX0pO3JldHVybiB0aGlzfX0saXM6ZnVuY3Rpb24odCl7dmFyIGU9bCh0KSxpPSEwLHM9dGhpcztmKHUsZnVuY3Rpb24odCxuKXt2YXIgbyxhPWVbbi5jYWNoZV07aWYoYSl7bz1zW24uY2FjaGVdfHxuLnRvJiZuLnRvKHMuX3JnYmEpfHxbXTtmKG4ucHJvcHMsZnVuY3Rpb24odCxlKXtpZihudWxsIT1hW2UuaWR4XSl7aT1hW2UuaWR4XT09PW9bZS5pZHhdO3JldHVybiBpfX0pfXJldHVybiBpfSk7cmV0dXJuIGl9LF9zcGFjZTpmdW5jdGlvbigpe3ZhciB0PVtdLGU9dGhpcztmKHUsZnVuY3Rpb24oaSxzKXtlW3MuY2FjaGVdJiZ0LnB1c2goaSl9KTtyZXR1cm4gdC5wb3AoKX0sdHJhbnNpdGlvbjpmdW5jdGlvbih0LGUpe3ZhciBzPWwodCksbj1zLl9zcGFjZSgpLG89dVtuXSxhPTA9PT10aGlzLmFscGhhKCk/bCgidHJhbnNwYXJlbnQiKTp0aGlzLHI9YVtvLmNhY2hlXXx8by50byhhLl9yZ2JhKSxoPXIuc2xpY2UoKTsKcz1zW28uY2FjaGVdO2Yoby5wcm9wcyxmdW5jdGlvbih0LG4pe3ZhciBvPW4uaWR4LGE9cltvXSxsPXNbb10sdT1jW24udHlwZV18fHt9O2lmKG51bGwhPT1sKWlmKG51bGw9PT1hKWhbb109bDtlbHNle3UubW9kJiYobC1hPnUubW9kLzI/YSs9dS5tb2Q6YS1sPnUubW9kLzImJihhLT11Lm1vZCkpO2hbb109aSgobC1hKSplK2Esbil9fSk7cmV0dXJuIHRoaXNbbl0oaCl9LGJsZW5kOmZ1bmN0aW9uKGUpe2lmKDE9PT10aGlzLl9yZ2JhWzNdKXJldHVybiB0aGlzO3ZhciBpPXRoaXMuX3JnYmEuc2xpY2UoKSxzPWkucG9wKCksbj1sKGUpLl9yZ2JhO3JldHVybiBsKHQubWFwKGksZnVuY3Rpb24odCxlKXtyZXR1cm4oMS1zKSpuW2VdK3MqdH0pKX0sdG9SZ2JhU3RyaW5nOmZ1bmN0aW9uKCl7dmFyIGU9InJnYmEoIixpPXQubWFwKHRoaXMuX3JnYmEsZnVuY3Rpb24odCxlKXtyZXR1cm4gbnVsbD09dD9lPjI/MTowOnR9KTtpZigxPT09aVszXSl7aS5wb3AoKTtlPSJyZ2IoIn1yZXR1cm4gZStpLmpvaW4oKSsiKSIKfSx0b0hzbGFTdHJpbmc6ZnVuY3Rpb24oKXt2YXIgZT0iaHNsYSgiLGk9dC5tYXAodGhpcy5oc2xhKCksZnVuY3Rpb24odCxlKXtudWxsPT10JiYodD1lPjI/MTowKTtlJiYzPmUmJih0PU1hdGgucm91bmQoMTAwKnQpKyIlIik7cmV0dXJuIHR9KTtpZigxPT09aVszXSl7aS5wb3AoKTtlPSJoc2woIn1yZXR1cm4gZStpLmpvaW4oKSsiKSJ9LHRvSGV4U3RyaW5nOmZ1bmN0aW9uKGUpe3ZhciBpPXRoaXMuX3JnYmEuc2xpY2UoKSxzPWkucG9wKCk7ZSYmaS5wdXNoKH5+KDI1NSpzKSk7cmV0dXJuIiMiK3QubWFwKGksZnVuY3Rpb24odCl7dD0odHx8MCkudG9TdHJpbmcoMTYpO3JldHVybiAxPT09dC5sZW5ndGg/IjAiK3Q6dH0pLmpvaW4oIiIpfSx0b1N0cmluZzpmdW5jdGlvbigpe3JldHVybiAwPT09dGhpcy5fcmdiYVszXT8idHJhbnNwYXJlbnQiOnRoaXMudG9SZ2JhU3RyaW5nKCl9fSk7bC5mbi5wYXJzZS5wcm90b3R5cGU9bC5mbjt1LmhzbGEudG89ZnVuY3Rpb24odCl7aWYobnVsbD09dFswXXx8bnVsbD09dFsxXXx8bnVsbD09dFsyXSlyZXR1cm5bbnVsbCxudWxsLG51bGwsdFszXV07CnZhciBlLGkscz10WzBdLzI1NSxuPXRbMV0vMjU1LG89dFsyXS8yNTUsYT10WzNdLHI9TWF0aC5tYXgocyxuLG8pLGg9TWF0aC5taW4ocyxuLG8pLGw9ci1oLHU9citoLGM9LjUqdTtlPWg9PT1yPzA6cz09PXI/NjAqKG4tbykvbCszNjA6bj09PXI/NjAqKG8tcykvbCsxMjA6NjAqKHMtbikvbCsyNDA7aT0wPT09bD8wOi41Pj1jP2wvdTpsLygyLXUpO3JldHVybltNYXRoLnJvdW5kKGUpJTM2MCxpLGMsbnVsbD09YT8xOmFdfTt1LmhzbGEuZnJvbT1mdW5jdGlvbih0KXtpZihudWxsPT10WzBdfHxudWxsPT10WzFdfHxudWxsPT10WzJdKXJldHVybltudWxsLG51bGwsbnVsbCx0WzNdXTt2YXIgZT10WzBdLzM2MCxpPXRbMV0scz10WzJdLG89dFszXSxhPS41Pj1zP3MqKDEraSk6cytpLXMqaSxyPTIqcy1hO3JldHVybltNYXRoLnJvdW5kKDI1NSpuKHIsYSxlKzEvMykpLE1hdGgucm91bmQoMjU1Km4ocixhLGUpKSxNYXRoLnJvdW5kKDI1NSpuKHIsYSxlLTEvMykpLG9dfTtmKHUsZnVuY3Rpb24ocyxuKXt2YXIgbz1uLnByb3BzLGE9bi5jYWNoZSxoPW4udG8sdT1uLmZyb207CmwuZm5bc109ZnVuY3Rpb24ocyl7aCYmIXRoaXNbYV0mJih0aGlzW2FdPWgodGhpcy5fcmdiYSkpO2lmKHM9PT1lKXJldHVybiB0aGlzW2FdLnNsaWNlKCk7dmFyIG4scj10LnR5cGUocyksYz0iYXJyYXkiPT09cnx8Im9iamVjdCI9PT1yP3M6YXJndW1lbnRzLGQ9dGhpc1thXS5zbGljZSgpO2YobyxmdW5jdGlvbih0LGUpe3ZhciBzPWNbIm9iamVjdCI9PT1yP3Q6ZS5pZHhdO251bGw9PXMmJihzPWRbZS5pZHhdKTtkW2UuaWR4XT1pKHMsZSl9KTtpZih1KXtuPWwodShkKSk7blthXT1kO3JldHVybiBufXJldHVybiBsKGQpfTtmKG8sZnVuY3Rpb24oZSxpKXtsLmZuW2VdfHwobC5mbltlXT1mdW5jdGlvbihuKXt2YXIgbyxhPXQudHlwZShuKSxoPSJhbHBoYSI9PT1lP3RoaXMuX2hzbGE/ImhzbGEiOiJyZ2JhIjpzLGw9dGhpc1toXSgpLHU9bFtpLmlkeF07aWYoInVuZGVmaW5lZCI9PT1hKXJldHVybiB1O2lmKCJmdW5jdGlvbiI9PT1hKXtuPW4uY2FsbCh0aGlzLHUpO2E9dC50eXBlKG4pCn1pZihudWxsPT1uJiZpLmVtcHR5KXJldHVybiB0aGlzO2lmKCJzdHJpbmciPT09YSl7bz1yLmV4ZWMobik7byYmKG49dStwYXJzZUZsb2F0KG9bMl0pKigiKyI9PT1vWzFdPzE6LTEpKX1sW2kuaWR4XT1uO3JldHVybiB0aGlzW2hdKGwpfSl9KX0pO2wuaG9vaz1mdW5jdGlvbihlKXt2YXIgaT1lLnNwbGl0KCIgIik7ZihpLGZ1bmN0aW9uKGUsaSl7dC5jc3NIb29rc1tpXT17c2V0OmZ1bmN0aW9uKGUsbil7dmFyIG8sYSxyPSIiO2lmKCJ0cmFuc3BhcmVudCIhPT1uJiYoInN0cmluZyIhPT10LnR5cGUobil8fChvPXMobikpKSl7bj1sKG98fG4pO2lmKCFkLnJnYmEmJjEhPT1uLl9yZ2JhWzNdKXthPSJiYWNrZ3JvdW5kQ29sb3IiPT09aT9lLnBhcmVudE5vZGU6ZTtmb3IoOygiIj09PXJ8fCJ0cmFuc3BhcmVudCI9PT1yKSYmYSYmYS5zdHlsZTspdHJ5e3I9dC5jc3MoYSwiYmFja2dyb3VuZENvbG9yIik7YT1hLnBhcmVudE5vZGV9Y2F0Y2goaCl7fW49bi5ibGVuZChyJiYidHJhbnNwYXJlbnQiIT09cj9yOiJfZGVmYXVsdCIpCn1uPW4udG9SZ2JhU3RyaW5nKCl9dHJ5e2Uuc3R5bGVbaV09bn1jYXRjaChoKXt9fX07dC5meC5zdGVwW2ldPWZ1bmN0aW9uKGUpe2lmKCFlLmNvbG9ySW5pdCl7ZS5zdGFydD1sKGUuZWxlbSxpKTtlLmVuZD1sKGUuZW5kKTtlLmNvbG9ySW5pdD0hMH10LmNzc0hvb2tzW2ldLnNldChlLmVsZW0sZS5zdGFydC50cmFuc2l0aW9uKGUuZW5kLGUucG9zKSl9fSl9O2wuaG9vayhhKTt0LmNzc0hvb2tzLmJvcmRlckNvbG9yPXtleHBhbmQ6ZnVuY3Rpb24odCl7dmFyIGU9e307ZihbIlRvcCIsIlJpZ2h0IiwiQm90dG9tIiwiTGVmdCJdLGZ1bmN0aW9uKGkscyl7ZVsiYm9yZGVyIitzKyJDb2xvciJdPXR9KTtyZXR1cm4gZX19O289dC5Db2xvci5uYW1lcz17YXF1YToiIzAwZmZmZiIsYmxhY2s6IiMwMDAwMDAiLGJsdWU6IiMwMDAwZmYiLGZ1Y2hzaWE6IiNmZjAwZmYiLGdyYXk6IiM4MDgwODAiLGdyZWVuOiIjMDA4MDAwIixsaW1lOiIjMDBmZjAwIixtYXJvb246IiM4MDAwMDAiLG5hdnk6IiMwMDAwODAiLG9saXZlOiIjODA4MDAwIixwdXJwbGU6IiM4MDAwODAiLHJlZDoiI2ZmMDAwMCIsc2lsdmVyOiIjYzBjMGMwIix0ZWFsOiIjMDA4MDgwIix3aGl0ZToiI2ZmZmZmZiIseWVsbG93OiIjZmZmZjAwIix0cmFuc3BhcmVudDpbbnVsbCxudWxsLG51bGwsMF0sX2RlZmF1bHQ6IiNmZmZmZmYifQp9KGpRdWVyeSk7IWZ1bmN0aW9uKCl7ZnVuY3Rpb24gaShlKXt2YXIgaSxzLG49ZS5vd25lckRvY3VtZW50LmRlZmF1bHRWaWV3P2Uub3duZXJEb2N1bWVudC5kZWZhdWx0Vmlldy5nZXRDb21wdXRlZFN0eWxlKGUsbnVsbCk6ZS5jdXJyZW50U3R5bGUsbz17fTtpZihuJiZuLmxlbmd0aCYmblswXSYmbltuWzBdXSl7cz1uLmxlbmd0aDtmb3IoO3MtLTspe2k9bltzXTsic3RyaW5nIj09dHlwZW9mIG5baV0mJihvW3QuY2FtZWxDYXNlKGkpXT1uW2ldKX19ZWxzZSBmb3IoaSBpbiBuKSJzdHJpbmciPT10eXBlb2YgbltpXSYmKG9baV09bltpXSk7cmV0dXJuIG99ZnVuY3Rpb24gcyhlLGkpe3ZhciBzLG4sYT17fTtmb3IocyBpbiBpKXtuPWlbc107ZVtzXSE9PW4mJihvW3NdfHwodC5meC5zdGVwW3NdfHwhaXNOYU4ocGFyc2VGbG9hdChuKSkpJiYoYVtzXT1uKSl9cmV0dXJuIGF9dmFyIG49WyJhZGQiLCJyZW1vdmUiLCJ0b2dnbGUiXSxvPXtib3JkZXI6MSxib3JkZXJCb3R0b206MSxib3JkZXJDb2xvcjoxLGJvcmRlckxlZnQ6MSxib3JkZXJSaWdodDoxLGJvcmRlclRvcDoxLGJvcmRlcldpZHRoOjEsbWFyZ2luOjEscGFkZGluZzoxfTsKdC5lYWNoKFsiYm9yZGVyTGVmdFN0eWxlIiwiYm9yZGVyUmlnaHRTdHlsZSIsImJvcmRlckJvdHRvbVN0eWxlIiwiYm9yZGVyVG9wU3R5bGUiXSxmdW5jdGlvbihlLGkpe3QuZnguc3RlcFtpXT1mdW5jdGlvbih0KXtpZigibm9uZSIhPT10LmVuZCYmIXQuc2V0QXR0cnx8MT09PXQucG9zJiYhdC5zZXRBdHRyKXtqUXVlcnkuc3R5bGUodC5lbGVtLGksdC5lbmQpO3Quc2V0QXR0cj0hMH19fSk7dC5mbi5hZGRCYWNrfHwodC5mbi5hZGRCYWNrPWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLmFkZChudWxsPT10P3RoaXMucHJldk9iamVjdDp0aGlzLnByZXZPYmplY3QuZmlsdGVyKHQpKX0pO3QuZWZmZWN0cy5hbmltYXRlQ2xhc3M9ZnVuY3Rpb24oZSxvLGEscil7dmFyIGg9dC5zcGVlZChvLGEscik7cmV0dXJuIHRoaXMucXVldWUoZnVuY3Rpb24oKXt2YXIgbyxhPXQodGhpcykscj1hLmF0dHIoImNsYXNzIil8fCIiLGw9aC5jaGlsZHJlbj9hLmZpbmQoIioiKS5hZGRCYWNrKCk6YTtsPWwubWFwKGZ1bmN0aW9uKCl7dmFyIGU9dCh0aGlzKTsKcmV0dXJue2VsOmUsc3RhcnQ6aSh0aGlzKX19KTtvPWZ1bmN0aW9uKCl7dC5lYWNoKG4sZnVuY3Rpb24odCxpKXtlW2ldJiZhW2krIkNsYXNzIl0oZVtpXSl9KX07bygpO2w9bC5tYXAoZnVuY3Rpb24oKXt0aGlzLmVuZD1pKHRoaXMuZWxbMF0pO3RoaXMuZGlmZj1zKHRoaXMuc3RhcnQsdGhpcy5lbmQpO3JldHVybiB0aGlzfSk7YS5hdHRyKCJjbGFzcyIscik7bD1sLm1hcChmdW5jdGlvbigpe3ZhciBlPXRoaXMsaT10LkRlZmVycmVkKCkscz10LmV4dGVuZCh7fSxoLHtxdWV1ZTohMSxjb21wbGV0ZTpmdW5jdGlvbigpe2kucmVzb2x2ZShlKX19KTt0aGlzLmVsLmFuaW1hdGUodGhpcy5kaWZmLHMpO3JldHVybiBpLnByb21pc2UoKX0pO3Qud2hlbi5hcHBseSh0LGwuZ2V0KCkpLmRvbmUoZnVuY3Rpb24oKXtvKCk7dC5lYWNoKGFyZ3VtZW50cyxmdW5jdGlvbigpe3ZhciBlPXRoaXMuZWw7dC5lYWNoKHRoaXMuZGlmZixmdW5jdGlvbih0KXtlLmNzcyh0LCIiKX0pfSk7aC5jb21wbGV0ZS5jYWxsKGFbMF0pCn0pfSl9O3QuZm4uZXh0ZW5kKHthZGRDbGFzczpmdW5jdGlvbihlKXtyZXR1cm4gZnVuY3Rpb24oaSxzLG4sbyl7cmV0dXJuIHM/dC5lZmZlY3RzLmFuaW1hdGVDbGFzcy5jYWxsKHRoaXMse2FkZDppfSxzLG4sbyk6ZS5hcHBseSh0aGlzLGFyZ3VtZW50cyl9fSh0LmZuLmFkZENsYXNzKSxyZW1vdmVDbGFzczpmdW5jdGlvbihlKXtyZXR1cm4gZnVuY3Rpb24oaSxzLG4sbyl7cmV0dXJuIGFyZ3VtZW50cy5sZW5ndGg+MT90LmVmZmVjdHMuYW5pbWF0ZUNsYXNzLmNhbGwodGhpcyx7cmVtb3ZlOml9LHMsbixvKTplLmFwcGx5KHRoaXMsYXJndW1lbnRzKX19KHQuZm4ucmVtb3ZlQ2xhc3MpLHRvZ2dsZUNsYXNzOmZ1bmN0aW9uKGkpe3JldHVybiBmdW5jdGlvbihzLG4sbyxhLHIpe3JldHVybiJib29sZWFuIj09dHlwZW9mIG58fG49PT1lP28/dC5lZmZlY3RzLmFuaW1hdGVDbGFzcy5jYWxsKHRoaXMsbj97YWRkOnN9OntyZW1vdmU6c30sbyxhLHIpOmkuYXBwbHkodGhpcyxhcmd1bWVudHMpOnQuZWZmZWN0cy5hbmltYXRlQ2xhc3MuY2FsbCh0aGlzLHt0b2dnbGU6c30sbixvLGEpCn19KHQuZm4udG9nZ2xlQ2xhc3MpLHN3aXRjaENsYXNzOmZ1bmN0aW9uKGUsaSxzLG4sbyl7cmV0dXJuIHQuZWZmZWN0cy5hbmltYXRlQ2xhc3MuY2FsbCh0aGlzLHthZGQ6aSxyZW1vdmU6ZX0scyxuLG8pfX0pfSgpOyFmdW5jdGlvbigpe2Z1bmN0aW9uIHMoZSxpLHMsbil7aWYodC5pc1BsYWluT2JqZWN0KGUpKXtpPWU7ZT1lLmVmZmVjdH1lPXtlZmZlY3Q6ZX07bnVsbD09aSYmKGk9e30pO2lmKHQuaXNGdW5jdGlvbihpKSl7bj1pO3M9bnVsbDtpPXt9fWlmKCJudW1iZXIiPT10eXBlb2YgaXx8dC5meC5zcGVlZHNbaV0pe249cztzPWk7aT17fX1pZih0LmlzRnVuY3Rpb24ocykpe249cztzPW51bGx9aSYmdC5leHRlbmQoZSxpKTtzPXN8fGkuZHVyYXRpb247ZS5kdXJhdGlvbj10LmZ4Lm9mZj8wOiJudW1iZXIiPT10eXBlb2Ygcz9zOnMgaW4gdC5meC5zcGVlZHM/dC5meC5zcGVlZHNbc106dC5meC5zcGVlZHMuX2RlZmF1bHQ7ZS5jb21wbGV0ZT1ufHxpLmNvbXBsZXRlO3JldHVybiBlCn1mdW5jdGlvbiBuKGUpe3JldHVybiFlfHwibnVtYmVyIj09dHlwZW9mIGV8fHQuZnguc3BlZWRzW2VdPyEwOiJzdHJpbmciIT10eXBlb2YgZXx8dC5lZmZlY3RzLmVmZmVjdFtlXT90LmlzRnVuY3Rpb24oZSk/ITA6Im9iamVjdCIhPXR5cGVvZiBlfHxlLmVmZmVjdD8hMTohMDohMH10LmV4dGVuZCh0LmVmZmVjdHMse3ZlcnNpb246IjEuMTAuNCIsc2F2ZTpmdW5jdGlvbih0LGUpe2Zvcih2YXIgcz0wO3M8ZS5sZW5ndGg7cysrKW51bGwhPT1lW3NdJiZ0LmRhdGEoaStlW3NdLHRbMF0uc3R5bGVbZVtzXV0pfSxyZXN0b3JlOmZ1bmN0aW9uKHQscyl7dmFyIG4sbztmb3Iobz0wO288cy5sZW5ndGg7bysrKWlmKG51bGwhPT1zW29dKXtuPXQuZGF0YShpK3Nbb10pO249PT1lJiYobj0iIik7dC5jc3Moc1tvXSxuKX19LHNldE1vZGU6ZnVuY3Rpb24odCxlKXsidG9nZ2xlIj09PWUmJihlPXQuaXMoIjpoaWRkZW4iKT8ic2hvdyI6ImhpZGUiKTtyZXR1cm4gZX0sZ2V0QmFzZWxpbmU6ZnVuY3Rpb24odCxlKXt2YXIgaSxzOwpzd2l0Y2godFswXSl7Y2FzZSJ0b3AiOmk9MDticmVhaztjYXNlIm1pZGRsZSI6aT0uNTticmVhaztjYXNlImJvdHRvbSI6aT0xO2JyZWFrO2RlZmF1bHQ6aT10WzBdL2UuaGVpZ2h0fXN3aXRjaCh0WzFdKXtjYXNlImxlZnQiOnM9MDticmVhaztjYXNlImNlbnRlciI6cz0uNTticmVhaztjYXNlInJpZ2h0IjpzPTE7YnJlYWs7ZGVmYXVsdDpzPXRbMV0vZS53aWR0aH1yZXR1cm57eDpzLHk6aX19LGNyZWF0ZVdyYXBwZXI6ZnVuY3Rpb24oZSl7aWYoZS5wYXJlbnQoKS5pcygiLnVpLWVmZmVjdHMtd3JhcHBlciIpKXJldHVybiBlLnBhcmVudCgpO3ZhciBpPXt3aWR0aDplLm91dGVyV2lkdGgoITApLGhlaWdodDplLm91dGVySGVpZ2h0KCEwKSwiZmxvYXQiOmUuY3NzKCJmbG9hdCIpfSxzPXQoIjxkaXY+PC9kaXY+IikuYWRkQ2xhc3MoInVpLWVmZmVjdHMtd3JhcHBlciIpLmNzcyh7Zm9udFNpemU6IjEwMCUiLGJhY2tncm91bmQ6InRyYW5zcGFyZW50Iixib3JkZXI6Im5vbmUiLG1hcmdpbjowLHBhZGRpbmc6MH0pLG49e3dpZHRoOmUud2lkdGgoKSxoZWlnaHQ6ZS5oZWlnaHQoKX0sbz1kb2N1bWVudC5hY3RpdmVFbGVtZW50Owp0cnl7by5pZH1jYXRjaChhKXtvPWRvY3VtZW50LmJvZHl9ZS53cmFwKHMpOyhlWzBdPT09b3x8dC5jb250YWlucyhlWzBdLG8pKSYmdChvKS5mb2N1cygpO3M9ZS5wYXJlbnQoKTtpZigic3RhdGljIj09PWUuY3NzKCJwb3NpdGlvbiIpKXtzLmNzcyh7cG9zaXRpb246InJlbGF0aXZlIn0pO2UuY3NzKHtwb3NpdGlvbjoicmVsYXRpdmUifSl9ZWxzZXt0LmV4dGVuZChpLHtwb3NpdGlvbjplLmNzcygicG9zaXRpb24iKSx6SW5kZXg6ZS5jc3MoInotaW5kZXgiKX0pO3QuZWFjaChbInRvcCIsImxlZnQiLCJib3R0b20iLCJyaWdodCJdLGZ1bmN0aW9uKHQscyl7aVtzXT1lLmNzcyhzKTtpc05hTihwYXJzZUludChpW3NdLDEwKSkmJihpW3NdPSJhdXRvIil9KTtlLmNzcyh7cG9zaXRpb246InJlbGF0aXZlIix0b3A6MCxsZWZ0OjAscmlnaHQ6ImF1dG8iLGJvdHRvbToiYXV0byJ9KX1lLmNzcyhuKTtyZXR1cm4gcy5jc3MoaSkuc2hvdygpfSxyZW1vdmVXcmFwcGVyOmZ1bmN0aW9uKGUpe3ZhciBpPWRvY3VtZW50LmFjdGl2ZUVsZW1lbnQ7CmlmKGUucGFyZW50KCkuaXMoIi51aS1lZmZlY3RzLXdyYXBwZXIiKSl7ZS5wYXJlbnQoKS5yZXBsYWNlV2l0aChlKTsoZVswXT09PWl8fHQuY29udGFpbnMoZVswXSxpKSkmJnQoaSkuZm9jdXMoKX1yZXR1cm4gZX0sc2V0VHJhbnNpdGlvbjpmdW5jdGlvbihlLGkscyxuKXtuPW58fHt9O3QuZWFjaChpLGZ1bmN0aW9uKHQsaSl7dmFyIG89ZS5jc3NVbml0KGkpO29bMF0+MCYmKG5baV09b1swXSpzK29bMV0pfSk7cmV0dXJuIG59fSk7dC5mbi5leHRlbmQoe2VmZmVjdDpmdW5jdGlvbigpe2Z1bmN0aW9uIGUoZSl7ZnVuY3Rpb24gcygpe3QuaXNGdW5jdGlvbihvKSYmby5jYWxsKG5bMF0pO3QuaXNGdW5jdGlvbihlKSYmZSgpfXZhciBuPXQodGhpcyksbz1pLmNvbXBsZXRlLHI9aS5tb2RlO2lmKG4uaXMoIjpoaWRkZW4iKT8iaGlkZSI9PT1yOiJzaG93Ij09PXIpe25bcl0oKTtzKCl9ZWxzZSBhLmNhbGwoblswXSxpLHMpfXZhciBpPXMuYXBwbHkodGhpcyxhcmd1bWVudHMpLG49aS5tb2RlLG89aS5xdWV1ZSxhPXQuZWZmZWN0cy5lZmZlY3RbaS5lZmZlY3RdOwpyZXR1cm4gdC5meC5vZmZ8fCFhP24/dGhpc1tuXShpLmR1cmF0aW9uLGkuY29tcGxldGUpOnRoaXMuZWFjaChmdW5jdGlvbigpe2kuY29tcGxldGUmJmkuY29tcGxldGUuY2FsbCh0aGlzKX0pOm89PT0hMT90aGlzLmVhY2goZSk6dGhpcy5xdWV1ZShvfHwiZngiLGUpfSxzaG93OmZ1bmN0aW9uKHQpe3JldHVybiBmdW5jdGlvbihlKXtpZihuKGUpKXJldHVybiB0LmFwcGx5KHRoaXMsYXJndW1lbnRzKTt2YXIgaT1zLmFwcGx5KHRoaXMsYXJndW1lbnRzKTtpLm1vZGU9InNob3ciO3JldHVybiB0aGlzLmVmZmVjdC5jYWxsKHRoaXMsaSl9fSh0LmZuLnNob3cpLGhpZGU6ZnVuY3Rpb24odCl7cmV0dXJuIGZ1bmN0aW9uKGUpe2lmKG4oZSkpcmV0dXJuIHQuYXBwbHkodGhpcyxhcmd1bWVudHMpO3ZhciBpPXMuYXBwbHkodGhpcyxhcmd1bWVudHMpO2kubW9kZT0iaGlkZSI7cmV0dXJuIHRoaXMuZWZmZWN0LmNhbGwodGhpcyxpKX19KHQuZm4uaGlkZSksdG9nZ2xlOmZ1bmN0aW9uKHQpe3JldHVybiBmdW5jdGlvbihlKXtpZihuKGUpfHwiYm9vbGVhbiI9PXR5cGVvZiBlKXJldHVybiB0LmFwcGx5KHRoaXMsYXJndW1lbnRzKTsKdmFyIGk9cy5hcHBseSh0aGlzLGFyZ3VtZW50cyk7aS5tb2RlPSJ0b2dnbGUiO3JldHVybiB0aGlzLmVmZmVjdC5jYWxsKHRoaXMsaSl9fSh0LmZuLnRvZ2dsZSksY3NzVW5pdDpmdW5jdGlvbihlKXt2YXIgaT10aGlzLmNzcyhlKSxzPVtdO3QuZWFjaChbImVtIiwicHgiLCIlIiwicHQiXSxmdW5jdGlvbih0LGUpe2kuaW5kZXhPZihlKT4wJiYocz1bcGFyc2VGbG9hdChpKSxlXSl9KTtyZXR1cm4gc319KX0oKTshZnVuY3Rpb24oKXt2YXIgZT17fTt0LmVhY2goWyJRdWFkIiwiQ3ViaWMiLCJRdWFydCIsIlF1aW50IiwiRXhwbyJdLGZ1bmN0aW9uKHQsaSl7ZVtpXT1mdW5jdGlvbihlKXtyZXR1cm4gTWF0aC5wb3coZSx0KzIpfX0pO3QuZXh0ZW5kKGUse1NpbmU6ZnVuY3Rpb24odCl7cmV0dXJuIDEtTWF0aC5jb3ModCpNYXRoLlBJLzIpfSxDaXJjOmZ1bmN0aW9uKHQpe3JldHVybiAxLU1hdGguc3FydCgxLXQqdCl9LEVsYXN0aWM6ZnVuY3Rpb24odCl7cmV0dXJuIDA9PT10fHwxPT09dD90Oi1NYXRoLnBvdygyLDgqKHQtMSkpKk1hdGguc2luKCg4MCoodC0xKS03LjUpKk1hdGguUEkvMTUpCn0sQmFjazpmdW5jdGlvbih0KXtyZXR1cm4gdCp0KigzKnQtMil9LEJvdW5jZTpmdW5jdGlvbih0KXtmb3IodmFyIGUsaT00O3Q8KChlPU1hdGgucG93KDIsLS1pKSktMSkvMTE7KTtyZXR1cm4gMS9NYXRoLnBvdyg0LDMtaSktNy41NjI1Kk1hdGgucG93KCgzKmUtMikvMjItdCwyKX19KTt0LmVhY2goZSxmdW5jdGlvbihlLGkpe3QuZWFzaW5nWyJlYXNlSW4iK2VdPWk7dC5lYXNpbmdbImVhc2VPdXQiK2VdPWZ1bmN0aW9uKHQpe3JldHVybiAxLWkoMS10KX07dC5lYXNpbmdbImVhc2VJbk91dCIrZV09ZnVuY3Rpb24odCl7cmV0dXJuLjU+dD9pKDIqdCkvMjoxLWkoLTIqdCsyKS8yfX0pfSgpfShqUXVlcnkpO3ZhciBuYj17fTtuYi5JRV9MVDk9Qm9vbGVhbihkb2N1bWVudC5kb2N1bWVudE1vZGUmJmRvY3VtZW50LmRvY3VtZW50TW9kZTw5KTtuYi5pbmhlcml0PWZ1bmN0aW9uKHQsZSl7dmFyIGk9ZnVuY3Rpb24oKXt9O2kucHJvdG90eXBlPWUucHJvdG90eXBlO3QucHJvdG90eXBlPW5ldyBpOwp0LnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj10fTtuYi5leHRlbmQ9ZnVuY3Rpb24odCl7Zm9yKHZhciBlPVtdLnNsaWNlLmNhbGwoYXJndW1lbnRzLDEpLGk9MCxzPWUubGVuZ3RoO3M+aTtpKyspe3ZhciBuPWVbaV07Zm9yKHZhciBvIGluIG4pdFtvXT1uW29dfXJldHVybiB0fTt2YXIgbmI9bmJ8fHt9OyFmdW5jdGlvbigpe25iLm5vZGU9e307bmIubm9kZS5kYXRhPWZ1bmN0aW9uKG5vZGUsa2V5LHZhbHVlKXtmdW5jdGlvbiBwYXJzZVZhbHVlKHZhbHVlKXt2YXIgY2g9dmFsdWUuY2hhckF0KDApO3JldHVybiJbIj09PWNofHwieyI9PT1jaD9ldmFsKCIoIit2YWx1ZSsiKSIpOnZhbHVlfWlmKCFrZXkpe2Zvcih2YXIgZGF0YT17fSxhdHRycz1ub2RlLmF0dHJpYnV0ZXMscixpPTAsbD1hdHRycy5sZW5ndGg7bD5pO2krKyl7dmFyIGF0dHI9YXR0cnNbaV07KHI9L15kYXRhLW5iLSguKykvLmV4ZWMoYXR0ci5uYW1lKSkmJihkYXRhW3JbMV1dPXBhcnNlVmFsdWUoYXR0ci52YWx1ZSkpfXJldHVybiBkYXRhCn1pZih2b2lkIDA9PT12YWx1ZSlyZXR1cm4gcGFyc2VWYWx1ZShub2RlLmdldEF0dHJpYnV0ZSgiZGF0YS1uYi0iK2tleSl8fCIiKTtub2RlLnNldEF0dHJpYnV0ZSgiZGF0YS1uYi0iK2tleSx2YWx1ZSk7cmV0dXJuIHZvaWQgMH07bmIubm9kZS5nZXRNb2Q9ZnVuY3Rpb24odCxlKXtyZXR1cm4gbmIubm9kZS5zZXRNb2QodCxlKX07dmFyIG1vZENhY2hlPXt9O25iLm5vZGUuc2V0TW9kPWZ1bmN0aW9uKHQsZSxpKXt2YXIgcz1tb2RDYWNoZVtlXXx8KG1vZENhY2hlW2VdPVJlZ0V4cCgiKD86XnxcXHMrKSIrZSsiKD86XyhbXFx3LV0rKSk/KD86JHxcXHMrKSIpKSxuPXQuY2xhc3NOYW1lO2lmKHZvaWQgMD09PWkpe3ZhciBvPXMuZXhlYyhuKTtyZXR1cm4gbz92b2lkIDA9PT1vWzFdPyEwOm9bMV06IiJ9bj1uLnJlcGxhY2UocywiICIpLnRyaW0oKTtpIT09ITEmJiIiIT09aSYmKG4rPSIgIitlKyhpPT09ITA/IiI6Il8iK2kpKTt0LmNsYXNzTmFtZT1ufTtuYi5ub2RlLmRlbE1vZD1mdW5jdGlvbih0LGUpe25iLm5vZGUuc2V0TW9kKHQsZSwhMSkKfX0oKTshZnVuY3Rpb24oKXt2YXIgdD17fSxlPXt9LGk9WyJjbGljayIsImRibGNsaWNrIiwibW91c2V1cCIsIm1vdXNlZG93biIsImtleWRvd24iLCJrZXlwcmVzcyIsImtleXVwIiwiaW5wdXQiLCJjaGFuZ2UiLCJibHVyIiwibW91c2VvdmVyIiwibW91c2VvdXQiLCJmb2N1c2luIiwiZm9jdXNvdXQiXSxzPW5ldyBSZWdFeHAoIl4oIitpLmpvaW4oInwiKSsiKVxcYlxccyooLiopPyQiKSxuPTAsbz17fSxhPWZ1bmN0aW9uKHQpe3ZhciBlPXQuZ2V0QXR0cmlidXRlKCJkYXRhLW5iIik7cmV0dXJuIGU/ZS50cmltKCkucmVwbGFjZSgvXHMrL2csIiAiKTplfSxyPWZ1bmN0aW9uKHQpe3JldHVybiB0LnNwbGl0KC9ccysvKX0saD1mdW5jdGlvbigpe307aC5wcm90b3R5cGUuX19pbml0PWZ1bmN0aW9uKHQpe3RoaXMubm9kZT10O3RoaXMuX19oYW5kbGVycz17fTt0aGlzLl9fYmluZEV2ZW50cygpO3RoaXMudHJpZ2dlcigiaW5pdCIpO3UmJm5iLnRyaWdnZXIoImluaXRlZDoiK3RoaXMuaWQsdGhpcykKfTtoLnByb3RvdHlwZS5fX2JpbmRFdmVudHM9ZnVuY3Rpb24oKXtmb3IodmFyIHQ9dGhpcyxlPWwuZ2V0KHRoaXMubmFtZSkuZXZlbnRzLGk9MCxzPWUubGVuZ3RoO3M+aTtpKyspe3ZhciBuPWVbaV0uY3VzdG9tLG89ZVtpXS5sb2NhbDtmb3IodmFyIGEgaW4gbikhZnVuY3Rpb24oZSl7dC5fX2JpbmRDdXN0b21FdmVudChhLGZ1bmN0aW9uKGkscyl7Zm9yKHZhciBuPWUubGVuZ3RoO24tLTspe3ZhciBvPWVbbl0uY2FsbCh0LGkscyk7aWYobz09PSExfHxudWxsPT09bylyZXR1cm4gb319KX0oblthXSk7Zm9yKHZhciBhIGluIG8pZm9yKHZhciByIGluIG9bYV0pZm9yKHZhciBoPShyfHwiIikubGVuZ3RoPyIgIityOiIiLHU9YStoLGM9b1thXVtyXSxpPTA7aTxjLmxlbmd0aDtpKyspIWZ1bmN0aW9uKGUpe3Qub24odSxmdW5jdGlvbigpe2UuYXBwbHkodCxhcmd1bWVudHMpfSl9KGNbaV0pfX07aC5wcm90b3R5cGUubmJkZXN0cm95PWZ1bmN0aW9uKCl7Zm9yKHZhciB0PWwuZ2V0KHRoaXMubmFtZSkuZXZlbnRzLGU9MCxpPXQubGVuZ3RoO2k+ZTtlKyspe2Zvcih2YXIgcyBpbiB0W2VdLmN1c3RvbSl0aGlzLm9mZihzKTsKZm9yKHZhciBzIGluIHRbZV0ubG9jYWwpdGhpcy5vZmYocyl9b1t0aGlzLmlkXT1udWxsfTtoLnByb3RvdHlwZS5fX2dldEhhbmRsZXJzPWZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMuX19oYW5kbGVycztyZXR1cm4gZVt0XXx8KGVbdF09W10pfTtoLnByb3RvdHlwZS5vbj1mdW5jdGlvbih0LGUpe3ZhciBpPXMuZXhlYyh0KTtpPyQodGhpcy5ub2RlKS5vbihpWzFdLGlbMl18fCIiLGUpOnRoaXMuX19iaW5kQ3VzdG9tRXZlbnQodCxlKTtyZXR1cm4gZX07aC5wcm90b3R5cGUuX19iaW5kQ3VzdG9tRXZlbnQ9ZnVuY3Rpb24odCxlKXt0aGlzLl9fZ2V0SGFuZGxlcnModCkucHVzaChlKX07aC5wcm90b3R5cGUub2ZmPWZ1bmN0aW9uKHQsZSl7dmFyIGk9cy5leGVjKHQpO2lmKGkpJCh0aGlzLm5vZGUpLm9mZihpWzFdLGlbMl18fCIiLGUpO2Vsc2UgaWYoZSl7dmFyIG49dGhpcy5fX2dldEhhbmRsZXJzKHQpLG89bi5pbmRleE9mKGUpOy0xIT09byYmbi5zcGxpY2UobywxKX1lbHNlIHRoaXMuX19oYW5kbGVyc1t0XT1udWxsCn07aC5wcm90b3R5cGUudHJpZ2dlcj1mdW5jdGlvbigpe2Zvcih2YXIgdD10aGlzLl9fZ2V0SGFuZGxlcnMoYXJndW1lbnRzWzBdKS5zbGljZSgpLGU9MCxpPXQubGVuZ3RoO2k+ZTtlKyspdFtlXS5hcHBseSh0aGlzLGFyZ3VtZW50cyl9O2gucHJvdG90eXBlLm5iZGF0YT1mdW5jdGlvbih0LGUpe3JldHVybiBuYi5ub2RlLmRhdGEodGhpcy5ub2RlLHQsZSl9O2gucHJvdG90eXBlLnNob3c9ZnVuY3Rpb24oKXskKHRoaXMubm9kZSkucmVtb3ZlQ2xhc3MoIm5iLWlzLWhpZGRlbiIpO3RoaXMudHJpZ2dlcigic2hvdyIpfTtoLnByb3RvdHlwZS5oaWRlPWZ1bmN0aW9uKCl7JCh0aGlzLm5vZGUpLmFkZENsYXNzKCJuYi1pcy1oaWRkZW4iKTt0aGlzLnRyaWdnZXIoImhpZGUiKX07aC5wcm90b3R5cGUuZ2V0TW9kPWZ1bmN0aW9uKHQpe3JldHVybiBuYi5ub2RlLnNldE1vZCh0aGlzLm5vZGUsdCl9O2gucHJvdG90eXBlLnNldE1vZD1mdW5jdGlvbih0LGUpe25iLm5vZGUuc2V0TW9kKHRoaXMubm9kZSx0LGUpCn07aC5wcm90b3R5cGUuZGVsTW9kPWZ1bmN0aW9uKHQpe25iLm5vZGUuc2V0TW9kKHRoaXMubm9kZSx0LCExKX07aC5wcm90b3R5cGUuY2hpbGRyZW49ZnVuY3Rpb24oKXtmb3IodmFyIHQ9W10sZT0kKHRoaXMubm9kZSkuZmluZCgiW2RhdGEtbmJdIiksaT0wLHM9ZS5sZW5ndGg7cz5pO2krKyl0PXQuY29uY2F0KG5iLmJsb2NrcyhlW2ldKSk7cmV0dXJuIHR9O2gucHJvdG90eXBlLmdldFlhdGVNb2R1bGVOYW1lPWZ1bmN0aW9uKCl7cmV0dXJuIm1haW4ifTtuYi5CbG9jaz1oO3ZhciBsPWZ1bmN0aW9uKHQsZSxpKXt0aGlzLm5hbWU9dDtlLnByb3RvdHlwZS5uYW1lPXQ7dGhpcy5jdG9yPWU7dGhpcy5ldmVudHM9dGhpcy5fcHJlcGFyZUV2ZW50cyhpKX07bC5wcm90b3R5cGUuX3ByZXBhcmVFdmVudHM9ZnVuY3Rpb24odCl7dD10fHx7fTt2YXIgaT10aGlzLmN0b3IucHJvdG90eXBlLG49e30sbz17fSxhPXt9O2Zvcih2YXIgciBpbiB0KXt2YXIgaCx1LGM9cy5leGVjKHIpO2lmKGMpe3ZhciBkPWNbMV07Cmg9ImJsdXIiPT09ZD9hW2RdfHwoYVtkXT17fSk6bltkXXx8KG5bZF09e30pO3U9Y1syXXx8IiJ9ZWxzZXtoPW87dT1yfXZhciBwPXRbcl07InN0cmluZyI9PXR5cGVvZiBwJiYocD1pW3BdKTtpZihudWxsPT09cCloW3VdPW51bGw7ZWxzZXtoPWhbdV18fChoW3VdPVtdKTtoLnB1c2gocCl9fWZvcih2YXIgZCBpbiBuKWlmKCFlW2RdKXskKGRvY3VtZW50KS5vbihkLGZ1bmN0aW9uKHQpe3JldHVybiB0LmJ1dHRvbiYmImNsaWNrIj09PXQudHlwZT92b2lkIDA6bC5fb25ldmVudCh0KX0pO2VbZF09ITB9cmV0dXJuW3tkb206bixjdXN0b206byxsb2NhbDphfV19O2wucHJvdG90eXBlLmNyZWF0ZT1mdW5jdGlvbih0LGUpe3ZhciBpPXQuZ2V0QXR0cmlidXRlKCJpZCIpO2lmKCFpKXtpPSJuYi0iK24rKzt0LnNldEF0dHJpYnV0ZSgiaWQiLGkpfWlmKCFvW2ldKXtvW2ldPXt9O251bGw9PT1hKHQpJiZ0LnNldEF0dHJpYnV0ZSgiZGF0YS1uYiIsdGhpcy5uYW1lKX1pZighb1tpXVt0aGlzLm5hbWVdKXt2YXIgcz1uZXcgdGhpcy5jdG9yOwpzLmlkPWk7cy5fX2luaXQodCk7aWYoZSlmb3IodmFyIHIgaW4gZSlzLm9uKHIsZVtyXSk7b1tpXVt0aGlzLm5hbWVdPXN9cmV0dXJuIG9baV1bdGhpcy5uYW1lXX07bC5wcm90b3R5cGUuX2V4dGVuZEV2ZW50cz1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKHQsZSl7Zm9yKHZhciBpIGluIGUpe3ZhciBzPWVbaV0sbj10W2ldO3RbaV09bnVsbD09PW4/W106cy5jb25jYXQobnx8W10pfX12YXIgaT10aGlzLmV2ZW50c1swXS5kb20scz10LmV2ZW50c1swXS5kb207Zm9yKHZhciBuIGluIHMpZShpW25dfHwoaVtuXT17fSksc1tuXSk7ZSh0aGlzLmV2ZW50c1swXS5jdXN0b20sdC5ldmVudHNbMF0uY3VzdG9tKX07bC5fb25ldmVudD1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKCl7dT1udWxsO2Zvcih2YXIgdDt0PXYucGFyZW50Tm9kZTspe2lmKGM9YSh2KSl7dT12O2JyZWFrfW4ucHVzaCh2KTt2PXR9aWYodSl7ZyYmbSYmKG49Zj09PXU/W106W2ZdKTtvPW4ubGVuZ3RoO3JldHVybiEwfX1mdW5jdGlvbiBpKHQsZSl7aWYoZSl7Zm9yKHZhciBpLGEscixsPTA7bz5sO2wrKyl7YT1uW2xdOwpyPWhbbF18fChoW2xdPSQoYSkpO2Zvcih2YXIgYyBpbiBlKWlmKGMmJnIuaXMoYykmJiEoZyYmbSYmJC5jb250YWlucyhhLG0pKSl7dmFyIGQ9cyhhLHQsZVtjXSk7ZD09PSExJiYoaT1kKX1pZihpPT09ITEpcmV0dXJuIGl9dmFyIHA9ZVsiIl07cmV0dXJuIXB8fGcmJm0mJiQuY29udGFpbnModSxtKT92b2lkIDA6cyh1LHQscCl9fWZ1bmN0aW9uIHMoZSxpLHMpe2Zvcih2YXIgbj1kLmNyZWF0ZSh1KSxvPXMubGVuZ3RoO28tLTspe3ZhciBhPXNbb10uY2FsbChuLHQsZSk7aWYoYT09PSExKXJldHVybiExO2lmKG51bGw9PT1hKWJyZWFrfX12YXIgbixvLGgsdSxjLGQscD10LnR5cGUsZj10LnRhcmdldCxnPSJtb3VzZW92ZXIiPT09cHx8Im1vdXNlb3V0Ij09PXAsbT10LnJlbGF0ZWRUYXJnZXQsdj1mO249W107aD1bXTtvPW4ubGVuZ3RoO2Zvcig7Oyl7aWYoIWUoKSlicmVhaztmb3IodmFyIGI9cihjKSxfPSEwLHk9MDt5PGIubGVuZ3RoO3krKyl7dmFyIHc9Ylt5XTtkPWwuZ2V0KHcpOwppZihkKWZvcih2YXIgaz1kLmV2ZW50cyx4PTAsQz1rLmxlbmd0aDtDPng7eCsrKWkodyxrW3hdLmRvbVtwXSk9PT0hMSYmKF89ITEpfWlmKCFfKXJldHVybiExO2lmKG0pcmV0dXJuO24ucHVzaCh2KTtoLnB1c2goJCh2KSk7bz1uLmxlbmd0aDt2PXYucGFyZW50Tm9kZX19O2wuZ2V0PWZ1bmN0aW9uKGUpe3JldHVybiB0W2VdfTtuYi5oYXNCbG9jaz1mdW5jdGlvbih0LGUpe3ZhciBpPXQuZ2V0QXR0cmlidXRlKCJpZCIpO3JldHVybiEoIWl8fCFvW2ldfHxlJiYhb1tpXVtlXSl9O25iLmJsb2NrPWZ1bmN0aW9uKHQsZSxpKXt2YXIgcz1hKHQpO3JldHVybiBzP2k/bC5nZXQoaSkuY3JlYXRlKHQsZSk6bmIuYmxvY2tzKHQsZSlbMF06bnVsbH07bmIuYmxvY2tzPWZ1bmN0aW9uKHQsZSl7dmFyIGk9YSh0KTtpZighaSlyZXR1cm5bXTtmb3IodmFyIHM9cihpKSxuPVtdLG89MDtvPHMubGVuZ3RoO28rKyluLnB1c2gobC5nZXQoc1tvXSkuY3JlYXRlKHQsZSkpO3JldHVybiBufTtuYi5maW5kPWZ1bmN0aW9uKHQpe3ZhciBlPWRvY3VtZW50LmdldEVsZW1lbnRCeUlkKHQpOwpyZXR1cm4gZT9uYi5ibG9jayhlKTp2b2lkIDB9O25iLmRlZmluZT1mdW5jdGlvbihlLGkscyl7aWYoInN0cmluZyIhPXR5cGVvZiBlKXtzPWk7aT1lO2U9Im5iLSIrbisrfXMmJihzPWwuZ2V0KHMpKTt2YXIgbz1pLmV2ZW50cztkZWxldGUgaS5ldmVudHM7dmFyIGE9ZnVuY3Rpb24oKXt9O25iLmluaGVyaXQoYSxzP3MuY3RvcjpoKTtuYi5leHRlbmQoYS5wcm90b3R5cGUsaSk7dmFyIHI9bmV3IGwoZSxhLG8pO3MmJnIuX2V4dGVuZEV2ZW50cyhzKTt0W2VdPXI7cmV0dXJuIHJ9O25iLmluaXQ9ZnVuY3Rpb24odCl7dD10fHxkb2N1bWVudDtmb3IodmFyIGU9JCh0KS5maW5kKCIuX2luaXQiKS5hZGRCYWNrKCkuZmlsdGVyKCIuX2luaXQiKSxpPTAscz1lLmxlbmd0aDtzPmk7aSsrKW5iLmJsb2NrKGVbaV0pfTtuYi5kZXN0cm95PWZ1bmN0aW9uKHQpe3Q9dHx8ZG9jdW1lbnQ7Zm9yKHZhciBlPSQodCkuZmluZCgiLl9pbml0IikuYWRkQmFjaygpLmZpbHRlcigiLl9pbml0IiksaT0wLHM9ZS5sZW5ndGg7cz5pO2krKyl7dmFyIG49ZVtpXSxhPW4uZ2V0QXR0cmlidXRlKCJpZCIpLHI9b1thXTsKaWYocilmb3IodmFyIGggaW4gcilyW2hdLmRlc3Ryb3koKX19O3ZhciB1PW5iLmRlZmluZSh7ZXZlbnRzOntjbGljazpmdW5jdGlvbih0KXtuYi50cmlnZ2VyKCJzcGFjZTpjbGljayIsdC50YXJnZXQpfX19KS5jcmVhdGUoZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoImh0bWwiKVswXSk7bmIub249ZnVuY3Rpb24odCxlKXtyZXR1cm4gdS5vbih0LGUpfTtuYi5vZmY9ZnVuY3Rpb24odCxlKXt1Lm9mZih0LGUpfTtuYi50cmlnZ2VyPWZ1bmN0aW9uKHQsZSl7dS50cmlnZ2VyKHQsZSl9fSgpO25iLmRlZmluZSgiYmFzZSIse2V2ZW50czp7aW5pdDoiX29uaW5pdCJ9LF9vbmluaXQ6ZnVuY3Rpb24oKXt0aGlzLiRub2RlPSQodGhpcy5ub2RlKTt0aGlzLm9uaW5pdCYmdGhpcy5vbmluaXQoKX0sZ2V0VHlwZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLiRub2RlLmF0dHIoImRhdGEtbmIiKX19KTtuYi5kZWZpbmUoImJ1dHRvbiIse2V2ZW50czp7fSxvbmluaXQ6ZnVuY3Rpb24oKXt0aGlzLiRub2RlLmJ1dHRvbih7ZGlzYWJsZWQ6dGhpcy4kbm9kZS5wcm9wKCJkaXNhYmxlZCIpfSk7CnRoaXMudHJpZ2dlcigibmItaW5pdGVkIix0aGlzKX0sc2V0Q29udGVudDpmdW5jdGlvbih0KXtpZih0aGlzLiRub2RlJiZ0aGlzLiRub2RlLmRhdGEoInVpQnV0dG9uIikpe3RoaXMuJG5vZGUuZmluZCgiLl9uYi1idXR0b24tY29udGVudCIpLmh0bWwodCk7dGhpcy50cmlnZ2VyKCJuYi10ZXh0LXNldCIsdGhpcyl9cmV0dXJuIHRoaXN9LGdldENvbnRlbnQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy4kbm9kZS5maW5kKCIuX25iLWJ1dHRvbi1jb250ZW50IikuaHRtbCgpfSxzZXRVcmw6ZnVuY3Rpb24odCl7dGhpcy4kbm9kZS5hdHRyKCJocmVmIix0KTt0aGlzLnRyaWdnZXIoIm5iLXVybC1zZXQiLHRoaXMpO3JldHVybiB0aGlzfSxnZXRVcmw6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy4kbm9kZS5hdHRyKCJocmVmIil9LGRpc2FibGU6ZnVuY3Rpb24oKXtpZih0aGlzLiRub2RlJiZ0aGlzLiRub2RlLmRhdGEoInVpQnV0dG9uIikpe3RoaXMuJG5vZGUuYnV0dG9uKCJkaXNhYmxlIik7dGhpcy5fdGFiaW5kZXg9dGhpcy4kbm9kZS5hdHRyKCJ0YWJpbmRleCIpOwp0aGlzLiRub2RlLmF0dHIoInRhYmluZGV4IiwiLTEiKTt0aGlzLiRub2RlLmFkZENsYXNzKCJfbmItaXMtZGlzYWJsZWQiKTt0aGlzLnRyaWdnZXIoIm5iLWRpc2FibGVkIix0aGlzKX1yZXR1cm4gdGhpc30sZW5hYmxlOmZ1bmN0aW9uKCl7aWYodGhpcy4kbm9kZSYmdGhpcy4kbm9kZS5kYXRhKCJ1aUJ1dHRvbiIpKXt0aGlzLiRub2RlLmJ1dHRvbigiZW5hYmxlIik7dGhpcy4kbm9kZS5hdHRyKCJ0YWJpbmRleCIsdGhpcy5fdGFiaW5kZXh8fCIwIik7dGhpcy4kbm9kZS5yZW1vdmVDbGFzcygiX25iLWlzLWRpc2FibGVkIik7dGhpcy50cmlnZ2VyKCJuYi1lbmFibGVkIix0aGlzKX1yZXR1cm4gdGhpc30saXNFbmFibGVkOmZ1bmN0aW9uKCl7cmV0dXJuIXRoaXMuJG5vZGUucHJvcCgiZGlzYWJsZWQiKX0sZm9jdXM6ZnVuY3Rpb24oKXt0aGlzLmlzRW5hYmxlZCgpJiZ0aGlzLiRub2RlLmZvY3VzKCk7dGhpcy50cmlnZ2VyKCJuYi1mb2N1c2VkIix0aGlzKTtyZXR1cm4gdGhpc30sYmx1cjpmdW5jdGlvbigpe3RoaXMuaXNFbmFibGVkKCkmJnRoaXMuJG5vZGUuYmx1cigpOwp0aGlzLnRyaWdnZXIoIm5iLWJsdXJlZCIsdGhpcyk7cmV0dXJuIHRoaXN9LGRlc3Ryb3k6ZnVuY3Rpb24oKXt0aGlzLiRub2RlJiZ0aGlzLiRub2RlLmRhdGEoInVpQnV0dG9uIikmJnRoaXMuJG5vZGUuYnV0dG9uKCJkZXN0cm95Iik7dGhpcy50cmlnZ2VyKCJuYi1kZXN0cm95ZWQiLHRoaXMpO3RoaXMubmJkZXN0cm95KCl9fSwiYmFzZSIpO25iLmRlZmluZSgiY2hlY2tib3giLHtldmVudHM6eyJjaGFuZ2UgaW5wdXQiOiJvbmNoYW5nZSJ9LF9vbkNoZWNrYm94Q2hlY2tlZDpmdW5jdGlvbih0LGUpe2UubmFtZT09dGhpcy5nZXROYW1lKCkmJmUudmFsdWUhPXRoaXMuZ2V0VmFsdWUoKSYmdGhpcy51bmNoZWNrKCl9LG9uY2hhbmdlOmZ1bmN0aW9uKCl7dGhpcy4kY29udHJvbC5wcm9wKCJjaGVja2VkIik/dGhpcy5jaGVjaygpOnRoaXMudW5jaGVjaygpfSxvbmluaXQ6ZnVuY3Rpb24oKXt0aGlzLiRjb250cm9sPXRoaXMuJG5vZGUuZmluZCgiaW5wdXRbdHlwZV0iKTt0aGlzLl9pc0NoZWNrZWQ9dGhpcy4kY29udHJvbC5wcm9wKCJjaGVja2VkIik7CnRoaXMuJGNvbnRyb2wub24oImNsaWNrLm5iLWNoZWNrYm94IixmdW5jdGlvbih0KXt0LnN0b3BQcm9wYWdhdGlvbigpfSk7aWYoZG9jdW1lbnQuZG9jdW1lbnRNb2RlJiZkb2N1bWVudC5kb2N1bWVudE1vZGU8OSl7dmFyIHQ9dGhpczt0aGlzLiRjb250cm9sLm9uKCJwcm9wZXJ0eWNoYW5nZS5uYi1jaGVja2JveCIsZnVuY3Rpb24oZSl7ImNoZWNrZWQiPT09ZS5vcmlnaW5hbEV2ZW50LnByb3BlcnR5TmFtZSYmdC5vbmNoYW5nZSgpfSl9InJhZGlvIj09PXRoaXMuZ2V0VHlwZSgpJiZuYi5vbigiY2hlY2tib3g6Y2hlY2tlZCIsJC5wcm94eSh0aGlzLl9vbkNoZWNrYm94Q2hlY2tlZCx0aGlzKSk7dGhpcy50cmlnZ2VyKCJuYi1pbml0ZWQiLHRoaXMpfSxnZXRUeXBlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuJGNvbnRyb2wuYXR0cigidHlwZSIpfSxpc0NoZWNrZWQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5faXNDaGVja2VkfSxjaGVjazpmdW5jdGlvbigpe2lmKCF0aGlzLmlzRW5hYmxlZCgpKXJldHVybiB0aGlzOwoicmFkaW8iPT09dGhpcy5nZXRUeXBlKCkmJm5iLnRyaWdnZXIoImNoZWNrYm94OmNoZWNrZWQiLHtuYW1lOnRoaXMuZ2V0TmFtZSgpLHZhbHVlOnRoaXMuZ2V0VmFsdWUoKX0pO3ZhciB0PXRoaXMuaXNDaGVja2VkKCk7dGhpcy4kY29udHJvbC5wcm9wKHtpbmRldGVybWluYXRlOiExLGNoZWNrZWQ6ITB9KTt0aGlzLl9pc0NoZWNrZWQ9ITA7dGhpcy50cmlnZ2VyKCJuYi1jaGVja2VkIix0aGlzKTt0fHx0aGlzLnRyaWdnZXIoIm5iLWNoYW5nZWQiLHRoaXMpO3JldHVybiB0aGlzfSx1bmNoZWNrOmZ1bmN0aW9uKCl7aWYoIXRoaXMuaXNFbmFibGVkKCkpcmV0dXJuIHRoaXM7dmFyIHQ9dGhpcy5pc0NoZWNrZWQoKTt0aGlzLiRjb250cm9sLnByb3Aoe2luZGV0ZXJtaW5hdGU6ITEsY2hlY2tlZDohMX0pO3RoaXMuX2lzQ2hlY2tlZD0hMTt0aGlzLnRyaWdnZXIoIm5iLXVuY2hlY2tlZCIsdGhpcyk7dCYmdGhpcy50cmlnZ2VyKCJuYi1jaGFuZ2VkIix0aGlzKTtyZXR1cm4gdGhpc30sdG9nZ2xlOmZ1bmN0aW9uKCl7aWYoIXRoaXMuaXNFbmFibGVkKCkpcmV0dXJuIHRoaXM7CnRoaXMudHJpZ2dlcigibmItY2hhbmdlIix0aGlzKTt0aGlzLmlzQ2hlY2tlZCgpP3RoaXMudW5jaGVjaygpOnRoaXMuY2hlY2soKTtyZXR1cm4gdGhpc30saXNJbmRldGVybWluYXRlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuJGNvbnRyb2wucHJvcCgiaW5kZXRlcm1pbmF0ZSIpfSxzZXRJbmRldGVybWluYXRlOmZ1bmN0aW9uKCl7aWYodGhpcy5pc0VuYWJsZWQoKSl7dGhpcy4kY29udHJvbC5wcm9wKCJpbmRldGVybWluYXRlIiwhMCk7dGhpcy50cmlnZ2VyKCJuYi1pbmRldGVybWluYXRlZCIsdGhpcyl9cmV0dXJuIHRoaXN9LHNldERldGVybWluYXRlOmZ1bmN0aW9uKCl7aWYodGhpcy5pc0VuYWJsZWQoKSl7dGhpcy4kY29udHJvbC5wcm9wKCJpbmRldGVybWluYXRlIiwhMSk7dGhpcy50cmlnZ2VyKCJuYi1kZXRlcm1pbmF0ZWQiLHRoaXMpfXJldHVybiB0aGlzfSxpc0VuYWJsZWQ6ZnVuY3Rpb24oKXtyZXR1cm4hdGhpcy4kY29udHJvbC5wcm9wKCJkaXNhYmxlZCIpfSxlbmFibGU6ZnVuY3Rpb24oKXtpZighdGhpcy5pc0VuYWJsZWQoKSl7dGhpcy4kbm9kZS5yZW1vdmVDbGFzcygiX25iLWlzLWRpc2FibGVkIik7CnRoaXMuJGNvbnRyb2wucmVtb3ZlQXR0cigiZGlzYWJsZWQiKTt0aGlzLnRyaWdnZXIoIm5iLWVuYWJsZWQiLHRoaXMpfXJldHVybiB0aGlzfSxkaXNhYmxlOmZ1bmN0aW9uKCl7aWYodGhpcy5pc0VuYWJsZWQoKSl7dGhpcy5ibHVyKCk7dGhpcy4kbm9kZS5hZGRDbGFzcygiX25iLWlzLWRpc2FibGVkIik7dGhpcy4kY29udHJvbC5hdHRyKCJkaXNhYmxlZCIsImRpc2FibGVkIik7dGhpcy50cmlnZ2VyKCJuYi1kaXNhYmxlZCIsdGhpcyl9cmV0dXJuIHRoaXN9LGZvY3VzOmZ1bmN0aW9uKCl7dGhpcy4kY29udHJvbC5mb2N1cygpO3RoaXMudHJpZ2dlcigibmItZm9jdXNlZCIsdGhpcyk7cmV0dXJuIHRoaXN9LGJsdXI6ZnVuY3Rpb24oKXt0aGlzLiRjb250cm9sLmJsdXIoKTt0aGlzLnRyaWdnZXIoIm5iLWJsdXJlZCIsdGhpcyk7cmV0dXJuIHRoaXN9LHNldExhYmVsOmZ1bmN0aW9uKHQpe3RoaXMuJG5vZGUuZmluZCgiLl9uYi1jaGVja2JveC1sYWJlbCIpLmh0bWwodCk7dGhpcy50cmlnZ2VyKCJuYi1sYWJlbC1zZXQiLHRoaXMpOwpyZXR1cm4gdGhpc30sZ2V0TGFiZWw6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy4kbm9kZS5maW5kKCIuX25iLWNoZWNrYm94LWxhYmVsIikuaHRtbCgpfSxnZXROYW1lOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuJGNvbnRyb2wucHJvcCgibmFtZSIpfSxzZXROYW1lOmZ1bmN0aW9uKHQpe3RoaXMuJGNvbnRyb2wuYXR0cigibmFtZSIsdCk7dGhpcy50cmlnZ2VyKCJuYi1uYW1lLXNldCIsdGhpcyk7cmV0dXJuIHRoaXN9LGdldFZhbHVlOmZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy4kY29udHJvbC5hdHRyKCJ2YWx1ZSIpO3JldHVybiJzdHJpbmciPT10eXBlb2YgdD90OiJvbiJ9LHNldFZhbHVlOmZ1bmN0aW9uKHQpe3RoaXMuJGNvbnRyb2wuYXR0cigidmFsdWUiLHQpO3RoaXMudHJpZ2dlcigibmItdmFsdWUtc2V0Iix0aGlzKTtyZXR1cm4gdGhpc30sZGVzdHJveTpmdW5jdGlvbigpe3RoaXMuJGNvbnRyb2wub2ZmKCIubmItY2hlY2tib3giKTsicmFkaW8iPT09dGhpcy5nZXRUeXBlKCkmJm5iLm9mZigiY2hlY2tib3g6Y2hlY2tlZCIsJC5wcm94eSh0aGlzLl9vbkNoZWNrYm94Q2hlY2tlZCx0aGlzKSk7CnRoaXMudHJpZ2dlcigibmItZGVzdHJveWVkIix0aGlzKTt0aGlzLm5iZGVzdHJveSgpfX0sImJhc2UiKTtuYi5kZWZpbmUoImhlYWRlciIse2V2ZW50czp7ImNsaWNrIC5uYi1oZWFkZXItYnV0dG9uIjoidG9nZ2xlUHJlc3MifSx0b2dnbGVQcmVzczpmdW5jdGlvbih0KXt2YXIgZT0kKHQudGFyZ2V0KTtlLmNsb3Nlc3QoIi5uYi1oZWFkZXItYnV0dG9uIikudG9nZ2xlQ2xhc3MoIm5iLWhlYWRlci1wcmVzc2VkLWJ1dHRvbiIpO2UuaGFzQ2xhc3MoIm5iLXNlcnZpY2VzLWljb24iKSYmbmIudHJpZ2dlcigic2VydmljZXMtY2xpY2siKTtlLmhhc0NsYXNzKCJuYi1zZXR0aW5ncy1pY29uIikmJm5iLnRyaWdnZXIoInNldHRpbmdzLWNsaWNrIil9fSwiYmFzZSIpOyFmdW5jdGlvbigpe3ZhciB0PWZ1bmN0aW9uKHQsZSl7dC4kY29udHJvbC5nZXQoMCkuYXR0YWNoRXZlbnQ/dC4kY29udHJvbC5nZXQoMCkuYXR0YWNoRXZlbnQoIm9ucHJvcGVydHljaGFuZ2UiLGZ1bmN0aW9uKHQpeyJ2YWx1ZSI9PT10LnByb3BlcnR5TmFtZSYmZSh0KQp9KTp0LiRjb250cm9sLm9uKCJpbnB1dCIsZSl9O25iLmRlZmluZSgiaW5wdXQiLHtldmVudHM6e2NsaWNrOiJmb2N1cyIsIm1vdXNlZG93biAuX25iLWlucHV0LXJlc2V0IjoicmVzZXQifSxvbmluaXQ6ZnVuY3Rpb24oKXt2YXIgZT10aGlzO3RoaXMuZGF0YT10aGlzLm5iZGF0YSgpO3RoaXMuJGNvbnRyb2w9InNpbXBsZSI9PXRoaXMuZGF0YS50eXBlP3RoaXMuJG5vZGU6dGhpcy4kbm9kZS5maW5kKCIuX25iLWlucHV0LWNvbnRyb2xsZXIiKTt0aGlzLmZvY3VzZWQ9ITE7dGhpcy5kaXNhYmxlZD10aGlzLiRjb250cm9sLnByb3AoImRpc2FibGVkIik7dGhpcy52YWx1ZT10aGlzLmdldFZhbHVlKCk7dGhpcy4kcmVzZXQ9dGhpcy4kbm9kZS5maW5kKCIuX25iLWlucHV0LXJlc2V0Iik7dGhpcy4kaGludD10aGlzLiRub2RlLmZpbmQoIi5fbmItaW5wdXQtaGludCIpO3RoaXMuJGNvbnRyb2wub24oImZvY3VzaW4iLGZ1bmN0aW9uKHQpe2UuZm9jdXNlZHx8ZS5fb25mb2N1cyh0KX0pO3RoaXMuJGNvbnRyb2wub24oImZvY3Vzb3V0IixmdW5jdGlvbih0KXtlLmZvY3VzZWQmJmUuX29uYmx1cih0KQp9KTt0aGlzLiRjb250cm9sLm9uKCJjaGFuZ2UiLGZ1bmN0aW9uKHQpe2UudHJpZ2dlcigibmItY2hhbmdlZCIsZSx0KX0pO3QodGhpcyxmdW5jdGlvbih0KXtlLnZhbHVlPWUuZ2V0VmFsdWUoKTsiIiE9PWUudmFsdWUmJmUuJHJlc2V0Lmxlbmd0aD9lLiRyZXNldC5jc3MoInZpc2liaWxpdHkiLCJ2aXNpYmxlIik6ZS4kcmVzZXQuY3NzKCJ2aXNpYmlsaXR5IiwiaGlkZGVuIik7ZS50cmlnZ2VyKCJuYi1pbnB1dCIsdGhpcyx0KX0pO3RoaXMuJGhpbnQubGVuZ3RoJiZ0aGlzLl9pbml0aGludCgpO3RoaXMuZGF0YS5naG9zdCYmdGhpcy4kbm9kZS5vbigibW91c2VvdmVyIG1vdXNlb3V0IixmdW5jdGlvbigpe2UuJG5vZGUudG9nZ2xlQ2xhc3MoIl9uYi1pcy1naG9zdCIpfSk7dGhpcy5kYXRhLmVycm9yJiYodGhpcy5lcnJvcj1uYi5maW5kKHRoaXMuZGF0YS5lcnJvci5pZCkpOyIiPT09dGhpcy52YWx1ZSYmdGhpcy4kcmVzZXQubGVuZ3RoJiZ0aGlzLiRyZXNldC5jc3MoInZpc2liaWxpdHkiLCJoaWRkZW4iKTsKdGhpcy5fb25tb3VzZWRvd249ZnVuY3Rpb24odCl7JC5jb250YWlucyh0aGlzLiRub2RlLmdldCgwKSx0LnRhcmdldCl8fHRoaXMuX29uYmx1cih0KX0uYmluZCh0aGlzKTskKGRvY3VtZW50KS5vbigibW91c2Vkb3duIix0aGlzLl9vbm1vdXNlZG93bik7JChkb2N1bWVudCkub24oInRvdWNoc3RhcnQiLHRoaXMuX29ubW91c2Vkb3duKTt0aGlzLnRyaWdnZXIoIm5iLWluaXRlZCIsdGhpcyl9LF9pbml0aGludDpmdW5jdGlvbigpe3ZhciBlPXRoaXM7dGhpcy4kY29udHJvbC5yZW1vdmVBdHRyKCJwbGFjZWhvbGRlciIpO3RoaXMuJGhpbnRHaG9zdD10aGlzLiRoaW50LmZpbmQoIi5fbmItaW5wdXQtaGludC1naG9zdCIpO2lmKHRoaXMuJGhpbnRHaG9zdC5sZW5ndGgpe3RoaXMuJGhpbnRHaG9zdC5odG1sKGUuZ2V0VmFsdWUoKSk7dCh0aGlzLGZ1bmN0aW9uKCl7ZS4kaGludEdob3N0Lmh0bWwoZS5nZXRWYWx1ZSgpKX0pfWVsc2V7ZS4kaGludC5jc3MoInZpc2liaWxpdHkiLCJ2aXNpYmxlIik7CnQodGhpcyxmdW5jdGlvbigpeyIiPT09ZS5nZXRWYWx1ZSgpP2UuJGhpbnQuY3NzKCJ2aXNpYmlsaXR5IiwiaW5oZXJpdCIpOmUuJGhpbnQuY3NzKCJ2aXNpYmlsaXR5IiwiaGlkZGVuIil9KX19LF9vbmZvY3VzOmZ1bmN0aW9uKHQpe3RoaXMuJG5vZGUuYWRkQ2xhc3MoIl9uYi1pcy1mb2N1c2VkIik7dGhpcy5mb2N1c2VkPSEwO3R8fHRoaXMuJGNvbnRyb2wuZm9jdXMoKTt0aGlzLiRoaW50R2hvc3QmJnRoaXMuJGhpbnRHaG9zdC5sZW5ndGgmJnRoaXMuJGhpbnQuY3NzKCJ2aXNpYmlsaXR5IiwiaGlkZGVuIik7dGhpcy5kYXRhLmdob3N0JiZ0aGlzLiRub2RlLnJlbW92ZUNsYXNzKCJfbmItaXMtZ2hvc3QiKX0sX29uYmx1cjpmdW5jdGlvbih0KXt0aGlzLiRub2RlLnJlbW92ZUNsYXNzKCJfbmItaXMtZm9jdXNlZCIpO3RoaXMuZm9jdXNlZD0hMTt0fHx0aGlzLiRjb250cm9sLmJsdXIoKTt0aGlzLiRoaW50R2hvc3QmJnRoaXMuJGhpbnRHaG9zdC5sZW5ndGgmJnRoaXMuJGhpbnQuY3NzKCJ2aXNpYmlsaXR5IiwiaW5oZXJpdCIpOwp0aGlzLmRhdGEuZ2hvc3QmJnRoaXMuJG5vZGUuYWRkQ2xhc3MoIl9uYi1pcy1naG9zdCIpfSxzaG93RXJyb3I6ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy5mb2N1c2VkLHQ9dHx8e307aWYodGhpcy5kYXRhLmVycm9yKXt0aGlzLiRub2RlLmFkZENsYXNzKCJfbmItaXMtd3JvbmciKTt2YXIgaT17Y29sbGlzaW9uOiJmbGlwIGZsaXAifTtpZih0aGlzLmRhdGEuZXJyb3IuZGlyZWN0aW9uJiYibGVmdCI9PXRoaXMuZGF0YS5lcnJvci5kaXJlY3Rpb24pe2kuYXQ9ImxlZnQiO2kubXk9InJpZ2h0In1lbHNle2kuYXQ9InJpZ2h0IjtpLm15PSJsZWZ0In0ic3RyaW5nIj09dHlwZW9mIHQmJnRoaXMuc2V0RXJyb3JDb250ZW50KHQpO3QuY29udGVudCYmdGhpcy5zZXRFcnJvckNvbnRlbnQodC5jb250ZW50KTtpZighdGhpcy5lcnJvci5pc09wZW4oKSl7dGhpcy5lcnJvci5vcGVuKHthdXRvY2xvc2U6dC5hdXRvY2xvc2V8fCExLGF1dG9mb2N1czohMSx3aGVyZTp0LndoZXJlfHx0aGlzLm5vZGUsaG93OnQuaG93fHxpLGFwcGVuZFRvOnQuYXBwZW5kVG98fCExLCJjbGFzcyI6dC5jbGFzc3x8ITF9KTsKZSYmdGhpcy5fb25mb2N1cygpfX1yZXR1cm4gdGhpc30saGlkZUVycm9yOmZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5mb2N1c2VkO2lmKHRoaXMuZGF0YS5lcnJvcil7dGhpcy4kbm9kZS5yZW1vdmVDbGFzcygiX25iLWlzLXdyb25nIik7dGhpcy5lcnJvci5jbG9zZSgpO3QmJnRoaXMuX29uZm9jdXMoKX1yZXR1cm4gdGhpc30sc2V0RXJyb3JDb250ZW50OmZ1bmN0aW9uKHQpe2lmKHRoaXMuZGF0YS5lcnJvcil7dGhpcy5lcnJvci4kbm9kZS5maW5kKCIuX25iLXBvcHVwLWNvbnRlbnQiKS5odG1sKHQpO3RoaXMudHJpZ2dlcigibmItZXJyb3ItY29udGVudC1zZXQiLHRoaXMpfXJldHVybiB0aGlzfSxmb2N1czpmdW5jdGlvbigpe2lmKCF0aGlzLmZvY3VzZWQmJnRoaXMuaXNFbmFibGVkKCkpe25iLnRyaWdnZXIoIm5iLWZvY3Vzb3V0Iik7dGhpcy5fb25mb2N1cygpO3RoaXMudHJpZ2dlcigibmItZm9jdXNlZCIsdGhpcyl9cmV0dXJuIHRoaXN9LGJsdXI6ZnVuY3Rpb24oKXtpZih0aGlzLmZvY3VzZWQmJnRoaXMuaXNFbmFibGVkKCkpe3RoaXMuX29uYmx1cigpOwp0aGlzLnRyaWdnZXIoIm5iLWJsdXJlZCIsdGhpcyl9cmV0dXJuIHRoaXN9LGRpc2FibGU6ZnVuY3Rpb24oKXt0aGlzLiRub2RlLmFkZENsYXNzKCJfbmItaXMtZGlzYWJsZWQiKTt0aGlzLiRjb250cm9sLnByb3AoImRpc2FibGVkIiwhMCk7dGhpcy50cmlnZ2VyKCJuYi1kaXNhYmxlZCIsdGhpcyk7cmV0dXJuIHRoaXN9LGVuYWJsZTpmdW5jdGlvbigpe3RoaXMuJG5vZGUucmVtb3ZlQ2xhc3MoIl9uYi1pcy1kaXNhYmxlZCIpO3RoaXMuJGNvbnRyb2wucHJvcCgiZGlzYWJsZWQiLCExKTt0aGlzLnRyaWdnZXIoIm5iLWVuYWJsZWQiLHRoaXMpO3JldHVybiB0aGlzfSxzZXRWYWx1ZTpmdW5jdGlvbih0KXtpZih0aGlzLnZhbHVlIT10KXt0aGlzLnZhbHVlPXQ7dGhpcy4kY29udHJvbC52YWwodCk7dGhpcy4kY29udHJvbC50cmlnZ2VyKCJpbnB1dCIpO3RoaXMudHJpZ2dlcigibmItdmFsdWUtc2V0Iix0aGlzKTt0aGlzLnRyaWdnZXIoIm5iLWNoYW5nZWQiLHRoaXMpfXJldHVybiB0aGlzCn0sZ2V0VmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy4kY29udHJvbC52YWwoKX0sZ2V0TmFtZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLiRjb250cm9sLnByb3AoIm5hbWUiKX0sc2V0TmFtZTpmdW5jdGlvbih0KXt0aGlzLiRjb250cm9sLmF0dHIoIm5hbWUiLHQpO3RoaXMudHJpZ2dlcigibmItbmFtZS1zZXQiLHRoaXMpO3JldHVybiB0aGlzfSxpc0VuYWJsZWQ6ZnVuY3Rpb24oKXtyZXR1cm4hdGhpcy4kY29udHJvbC5wcm9wKCJkaXNhYmxlZCIpfSxyZXNldDpmdW5jdGlvbih0KXt0JiZ0LnByZXZlbnREZWZhdWx0JiZ0LnByZXZlbnREZWZhdWx0KCk7dGhpcy5zZXRWYWx1ZSgiIik7cmV0dXJuIHRoaXN9LHNldEhpbnQ6ZnVuY3Rpb24odCl7aWYodGhpcy4kaGludC5sZW5ndGgpe3RoaXMuJGhpbnRHaG9zdC5sZW5ndGg/dGhpcy4kaGludC5maW5kKCIuX25iLWlucHV0LWhpbnQtY29udGVudCIpLmh0bWwodCk6dGhpcy4kaGludC5maW5kKCIuX25iLWlucHV0LWhpbnQtaW5uZXIiKS5odG1sKHQpOwp0aGlzLnRyaWdnZXIoIm5iLWhpbnQtc2V0Iix0aGlzKX1yZXR1cm4gdGhpc30sZ2V0SGludDpmdW5jdGlvbigpe3ZhciB0PSIiO3RoaXMuJGhpbnQubGVuZ3RoJiYodD10aGlzLiRoaW50R2hvc3QubGVuZ3RoP3RoaXMuJGhpbnQuZmluZCgiLl9uYi1pbnB1dC1oaW50LWNvbnRlbnQiKS5odG1sKCk6dGhpcy4kaGludC5maW5kKCIuX25iLWlucHV0LWhpbnQtaW5uZXIiKS5odG1sKCkpO3JldHVybiB0fSxkZXN0cm95OmZ1bmN0aW9uKCl7dGhpcy50cmlnZ2VyKCJuYi1kZXN0cm95ZWQiLHRoaXMpO2lmKHRoaXMuZXJyb3Ipe3RoaXMuZXJyb3IubmJkZXN0cm95KCk7dGhpcy5lcnJvci4kbm9kZS5yZW1vdmUoKX0kKGRvY3VtZW50KS5vZmYoIm1vdXNlZG93biIsdGhpcy5fb25tb3VzZWRvd24pOyQoZG9jdW1lbnQpLm9mZigidG91Y2hzdGFydCIsdGhpcy5fb25tb3VzZWRvd24pO3RoaXMubmJkZXN0cm95KCl9fSwiYmFzZSIpfSgpO25iLmRlZmluZSgiaW5wdXQtZ3JvdXAiLHtldmVudHM6e2NsaWNrOiJvbmluaXQiLGRpc2FibGU6Im9uRGlzYWJsZSIsZW5hYmxlOiJvbkVuYWJsZSJ9LG9uaW5pdDpmdW5jdGlvbigpe3ZhciB0PXRoaXM7CnQuZGlzYWJsZWQ9dGhpcy5uYmRhdGEoKS5kaXNhYmxlZDskKHRoaXMuY2hpbGRyZW4oKSkuZWFjaChmdW5jdGlvbigpe3RoaXMuJG5vZGUuaGFzQ2xhc3MoIm5iLWlucHV0Iik/dC5pbnB1dD10aGlzOnQuYnV0dG9uPXRoaXN9KX0sb25EaXNhYmxlOmZ1bmN0aW9uKCl7dGhpcy5pbnB1dC50cmlnZ2VyKCJkaXNhYmxlIik7dGhpcy5idXR0b24uZGlzYWJsZSgpO3RoaXMuZGlzYWJsZWQ9ITB9LG9uRW5hYmxlOmZ1bmN0aW9uKCl7dGhpcy5pbnB1dC50cmlnZ2VyKCJlbmFibGUiKTt0aGlzLmJ1dHRvbi5lbmFibGUoKTt0aGlzLmRpc2FibGVkPSExfX0sImJhc2UiKTshZnVuY3Rpb24oKXtmdW5jdGlvbiB0KHQsZSl7dmFyIGk9cyhlKSxuPXModCk7cmV0dXJuIGlbMF0ueTw9blswXS55JiZpWzFdLnk8PW5bMF0ueT8iYm90dG9tIjppWzBdLng+PW5bMV0ueCYmaVsxXS54Pj1uWzFdLng/ImxlZnQiOmlbMF0ueT49blsxXS55JiZpWzFdLnk+PW5bMV0ueT8idG9wIjoicmlnaHQifWZ1bmN0aW9uIGUodCl7cmV0dXJue3g6TWF0aC5yb3VuZCh0LmxlZnQrdC53aWR0aC8yKSx5Ok1hdGgucm91bmQodC50b3ArdC5oZWlnaHQvMil9Cn1mdW5jdGlvbiBpKHQsZSl7cmV0dXJuIE1hdGgubWluKE1hdGgubWF4KHQsZVswXSksZVsxXSl9ZnVuY3Rpb24gcyh0KXtyZXR1cm5be3g6TWF0aC5yb3VuZCh0LmxlZnQpLHk6TWF0aC5yb3VuZCh0LnRvcCl9LHt4Ok1hdGgucm91bmQodC5sZWZ0K3Qud2lkdGgpLHk6TWF0aC5yb3VuZCh0LnRvcCt0LmhlaWdodCl9XX1mdW5jdGlvbiBuKHQpe3ZhciBlPXt0b3A6ImJvdHRvbSIsYm90dG9tOiJ0b3AiLGxlZnQ6InJpZ2h0IixyaWdodDoibGVmdCJ9O3JldHVybiBlW3RdfWZ1bmN0aW9uIG8odCl7cmV0dXJuInRvcCI9PT10fHwiYm90dG9tIj09PXR9ZnVuY3Rpb24gYSgpe3ZhciB0LGU9dGhpcy5lbGVtZW50LmF0dHIoImNsYXNzIikuc3BsaXQoIiAiKXx8W10saT0vXHcrXF8oPyFfKS87dD0kLm1hcChlLGZ1bmN0aW9uKHQpe3ZhciBlPXQuc3BsaXQoaSkscz1lLmxlbmd0aCxuPWUucG9wKCksbz0iIjtzPjEmJihvPSJuYi1wb3B1cC1vdXRlcl8iK24pO3JldHVybiBvfSk7cmV0dXJuIHQuam9pbigiICIpCn0kLm5iPXt9O3ZhciByPTFlMy82MDskLndpZGdldCgibmIuYmFzZURpYWxvZyIsJC51aS5kaWFsb2cse29wdGlvbnM6e2hlaWdodDoiYXV0byIsbWluSGVpZ2h0OiJhdXRvIix3aWR0aDoiYXV0byJ9LG9wZW46ZnVuY3Rpb24oKXt0aGlzLl9zdXBlcigpO3ZhciB0PXRoaXM7aWYodGhpcy5vcHRpb25zLmF1dG9jbG9zZSlpZih0aGlzLm9wdGlvbnMubW9kYWwpe3RoaXMuX29ubW91c2Vkb3duPWZ1bmN0aW9uKGUpe2lmKDIhPT1lLndoaWNoJiYzIT09ZS53aGljaCl7dC5vcHRpb25zLmNsb3NlZEJ5T3V0ZXJDbGljaz0hMDt0LmNsb3NlKCl9fTt0aGlzLm92ZXJsYXkuY2xpY2sodGhpcy5fb25tb3VzZWRvd24pfWVsc2V7dGhpcy5fb25tb3VzZWRvd249ZnVuY3Rpb24oZSl7dmFyIGk9JCh0LnVpRGlhbG9nWzBdKS5maW5kKCIubmItcG9wdXAiKS5hdHRyKCJpZCIpLHM9JChlLnRhcmdldCkucGFyZW50cygpLmFkZEJhY2soKS5maWx0ZXIoJ1tkYXRhLW5iPSJwb3B1cC10b2dnbGVyIl0nKTsKaWYoMiE9PWUud2hpY2gmJjMhPT1lLndoaWNoJiYhJC5jb250YWlucyh0LnVpRGlhbG9nWzBdLGUudGFyZ2V0KSYmIShzLmxlbmd0aCYmbmIuZmluZChzLmF0dHIoImlkIikpJiZuYi5maW5kKHMuYXR0cigiaWQiKSkubmJkYXRhKClbInBvcHVwLXRvZ2dsZXIiXS5pZD09aXx8ZS5jbGllbnRYPndpbmRvdy5zY3JlZW4ud2lkdGgtMTgpKXt0Lm9wdGlvbnMuY2xvc2VkQnlPdXRlckNsaWNrPSEwO3QuY2xvc2UoKX19O3RoaXMuZG9jdW1lbnQub24oIm1vdXNlZG93biIsdGhpcy5fb25tb3VzZWRvd24pO3RoaXMuZG9jdW1lbnQub24oInRvdWNoc3RhcnQiLHRoaXMuX29ubW91c2Vkb3duKX10aGlzLl9vbnJlc2l6ZT0kLnRocm90dGxlKHIsdGhpcy5fcG9zaXRpb24uYmluZCh0aGlzKSk7dGhpcy53aW5kb3cub24oInJlc2l6ZSIsdGhpcy5fb25yZXNpemUpO3RoaXMuX29ucG9wdXBjbG9zZT1uYi5vbigicG9wdXAtY2xvc2UiLGZ1bmN0aW9uKCl7dC5vcHRpb25zLmF1dG9jbG9zZSYmdC5jbG9zZSgpCn0pfSxjbG9zZTpmdW5jdGlvbih0KXt0aGlzLl9zdXBlcigpO2lmKHQmJjI3PT09dC5rZXlDb2RlJiZ0aGlzLm9wdGlvbnMubW9kYWwpe3RoaXMubmJCbG9jaz10aGlzLm5iQmxvY2t8fG5iLmZpbmQoJCh0aGlzLnVpRGlhbG9nWzBdKS5maW5kKCIubmItcG9wdXAiKS5hdHRyKCJpZCIpKTt0aGlzLm5iQmxvY2sudHJpZ2dlcigibmItY2xvc2VkIix0aGlzLm5iQmxvY2spfWlmKHRoaXMub3B0aW9ucy5hdXRvY2xvc2Upe3RoaXMuZG9jdW1lbnQub2ZmKCJtb3VzZWRvd24iLHRoaXMuX29ubW91c2Vkb3duKTt0aGlzLmRvY3VtZW50Lm9mZigidG91Y2hzdGFydCIsdGhpcy5fb25tb3VzZWRvd24pO3RoaXMuZG9jdW1lbnQub2ZmKCJjbGljayIsdGhpcy5fb25tb3VzZWRvd24pfXRoaXMuX29ucmVzaXplJiZ0aGlzLndpbmRvdy5vZmYoInJlc2l6ZSIsdGhpcy5fb25yZXNpemUpO25iLm9mZigicG9wdXAtY2xvc2UiLHRoaXMuX29ucG9wdXBjbG9zZSl9LF9mb2N1c1RhYmJhYmxlOmZ1bmN0aW9uKCl7dGhpcy5vcHRpb25zLmF1dG9mb2N1cyYmdGhpcy5fc3VwZXIoKQp9LF9rZWVwRm9jdXM6JC5ub29wLF9jcmVhdGU6ZnVuY3Rpb24oKXt0aGlzLm9wdGlvbnMuZGlhbG9nQ2xhc3MrPWEuY2FsbCh0aGlzKTt0aGlzLm9wdGlvbnMuZGlhbG9nQ2xhc3MrPXRoaXMub3B0aW9ucy5wb3NpdGlvbi5maXhlZD8iIHVpLWRpYWxvZy1maXhlZCI6IiI7dGhpcy5fc3VwZXIoKTt0aGlzLmVsZW1lbnRbMF0ud2lkZ2V0PXRoaXN9LF9kZXN0cm95OmZ1bmN0aW9uKCl7dGhpcy5fc3VwZXIoKTtkZWxldGUgdGhpcy5lbGVtZW50WzBdLndpZGdldH0sX3Bvc2l0aW9uOmZ1bmN0aW9uKCl7dmFyIHQ9dGhpcyxlPXRoaXMub3B0aW9ucy5wb3NpdGlvbi51c2luZzt0aGlzLm9wdGlvbnMucG9zaXRpb24udXNpbmc9ZnVuY3Rpb24oaSxzKXt2YXIgbixvLGE9JC5leHRlbmQoe30saSk7JChzLmVsZW1lbnQuZWxlbWVudFswXSkuY3NzKHt0b3A6ImF1dG8iLGJvdHRvbToiYXV0byIsbGVmdDoiYXV0byIscmlnaHQ6ImF1dG8ifSk7aWYoImJvdHRvbSI9PXMudmVydGljYWwpe289dC53aW5kb3cuaGVpZ2h0KCk7CmEuYm90dG9tPW8tKGEudG9wK3MuZWxlbWVudC5oZWlnaHQpO2EudG9wPSJhdXRvIn1pZigicmlnaHQiPT1zLmhvcml6b250YWwpe249dC53aW5kb3cud2lkdGgoKTthLnJpZ2h0PW4tKGEubGVmdCtzLmVsZW1lbnQud2lkdGgpO2EubGVmdD0iYXV0byJ9cmV0dXJuIGUuY2FsbChzLmVsZW1lbnQuZWxlbWVudFswXSxhLHMpfTt0aGlzLl9zdXBlcigpO3RoaXMub3B0aW9ucy5wb3NpdGlvbi51c2luZz1lfSxfY3JlYXRlVGl0bGViYXI6ZnVuY3Rpb24oKXt0aGlzLnVpRGlhbG9nVGl0bGViYXJDbG9zZT0kKCl9fSk7JC53aWRnZXQoIm5iLmNvbnRleHREaWFsb2ciLCQubmIuYmFzZURpYWxvZyx7dGFpbE9mZnNldDoxMyxvcHRpb25zOntzaG93OntlZmZlY3Q6Im5iIixkdXJhdGlvbjoxNTB9LGhpZGU6e2VmZmVjdDoibmIiLGR1cmF0aW9uOjE1MH0sZHJhZ2dhYmxlOiExLHJlc2l6YWJsZTohMSxwb3NpdGlvbjp7bXk6ImNlbnRlciB0b3AiLGF0OiJjZW50ZXIgYm90dG9tIixjb2xsaXNpb246ImZpdCBmbGlwIn19LF9jcmVhdGU6ZnVuY3Rpb24oKXt0aGlzLl9zdXBlcigpOwppZighdGhpcy5vcHRpb25zLndpdGhvdXRUYWlsKXt0aGlzLiR0YWlsPSQoJzxkaXYgY2xhc3M9Il9uYi1wb3B1cC10YWlsIj48aS8+PC9kaXY+Jyk7dGhpcy4kdGFpbC5wcmVwZW5kVG8odGhpcy51aURpYWxvZyl9fSxfcG9zaXRpb246ZnVuY3Rpb24oKXt2YXIgcz10aGlzLGE9dGhpcy5vcHRpb25zLnBvc2l0aW9uLnVzaW5nLHI9e3RvcDoiIixsZWZ0OiIiLHJpZ2h0OiIiLGJvdHRvbToiIn07dGhpcy5vcHRpb25zLnBvc2l0aW9uLnVzaW5nPWZ1bmN0aW9uKGgsbCl7dmFyIHUsYyxkPWwuZWxlbWVudC5lbGVtZW50LHA9ZFswXSxmPXQobC50YXJnZXQsbC5lbGVtZW50KSxnPWUobC50YXJnZXQpO25iLm5vZGUuc2V0TW9kKHAsIl9uYi1wb3B1cF90byIsbihmKSk7ZC5kYXRhKCJuYi10YWlsLWRpciIsZik7aWYoIXMub3B0aW9ucy53aXRob3V0VGFpbCl7aWYobyhmKSl7Yz1bcy50YWlsT2Zmc2V0LGwuZWxlbWVudC53aWR0aC1zLnRhaWxPZmZzZXRdO3U9aShNYXRoLmFicyhnLngtbC5lbGVtZW50LmxlZnQpLGMpOwpzLiR0YWlsLmNzcygkLmV4dGVuZChyLHtsZWZ0OnUrInB4In0pKX1lbHNle2M9W3MudGFpbE9mZnNldCxsLmVsZW1lbnQuaGVpZ2h0LXMudGFpbE9mZnNldF07dT1pKE1hdGguYWJzKGcueS1sLmVsZW1lbnQudG9wKSxjKTtzLiR0YWlsLmNzcygkLmV4dGVuZChyLHt0b3A6dSsicHgifSkpfWhbZl0rPXMudGFpbE9mZnNldH1yZXR1cm4gYS5jYWxsKHAsaCxsKX07dGhpcy5fc3VwZXIoKTt0aGlzLm9wdGlvbnMucG9zaXRpb24udXNpbmc9YX19KTtqUXVlcnkuZWZmZWN0cy5lZmZlY3QubmI9ZnVuY3Rpb24odCxlKXt2YXIgaT0kKHRoaXMpLHM9bmIuYmxvY2soaS5maW5kKCIubmItcG9wdXAiKS5nZXQoMCkpLG49JC5lZmZlY3RzLnNldE1vZGUoaSx0Lm1vZGV8fCJoaWRlIiksbz0iaGlkZSI9PT1uLGE9aS5kYXRhKCJuYi10YWlsLWRpciIpLHI9JC5uYi5jb250ZXh0RGlhbG9nLnByb3RvdHlwZS50YWlsT2Zmc2V0LGg9e30sbD1mdW5jdGlvbigpe2kuY3NzKHtvcGFjaXR5OiIxIn0pO2lmKG8pe2kuaGlkZSgpOwpzLnRyaWdnZXIoIm5iLWNsb3NlZCIscyk7ZSgpfWVsc2V7cy50cmlnZ2VyKCJuYi1vcGVuZWQiLHMpO2UoKX1zLmFuaW1hdGlvbkluUHJvZ3Jlc3M9ITF9LHU9ZnVuY3Rpb24oKXtpLmFuaW1hdGUoaCx7cXVldWU6ITEsZHVyYXRpb246dC5kdXJhdGlvbixlYXNpbmc6dC5lYXNpbmcsY29tcGxldGU6ZnVuY3Rpb24oKXtpZihvKXtpLmhpZGUoKTtzLmFuaW1hdGlvbkluUHJvZ3Jlc3M9ITE7cy50cmlnZ2VyKCJuYi1jbG9zZWQiLHMpO2UoKX1lbHNle3MuYW5pbWF0aW9uSW5Qcm9ncmVzcz0hMTtzLnRyaWdnZXIoIm5iLW9wZW5lZCIscyk7ZSgpfX19KX07aC5vcGFjaXR5PW8/MDoxO2hbYV09KG8/Iis9IjoiLT0iKStyO3MuYW5pbWF0aW9uSW5Qcm9ncmVzcz0hMTtpZihzLmFuaW1hdGlvbkluUHJvZ3Jlc3MpZSgpO2Vsc2V7aWYoIW8pe3MuaGFzQW5pbWF0aW9uJiZpLmNzcyhhLCIrPSIrcik7aS5zaG93KCl9cy5hbmltYXRpb25JblByb2dyZXNzPSEwO3MuaGFzQW5pbWF0aW9uP3UoKTpsKCkKfX07bmIuZGVmaW5lKCJwb3B1cCIse2V2ZW50czp7ImNsaWNrIC5fbmItcG9wdXAtY2xvc2UiOiJjbG9zZSIscG9zaXRpb246Im9ucG9zaXRpb24ifSxvbmluaXQ6ZnVuY3Rpb24oKXt2YXIgdD10aGlzLGU9dGhpcy5uYmRhdGEoKTsibW9kYWwiaW4gZSYmKHRoaXMubW9kYWw9ITApO3RoaXMuJG1lbnU9dGhpcy4kbm9kZS5maW5kKCIuX25iLXBvcHVwLW1lbnUiKTt0aGlzLiRtZW51Lmxlbmd0aCYmdGhpcy4kbWVudS5tZW51KHtzZWxlY3Q6ZnVuY3Rpb24oZSxpKXt0LnRyaWdnZXIoIm5iLXNlbGVjdCIse2V2ZW50OmUsdWk6aX0pfX0pfSxvbnBvc2l0aW9uOmZ1bmN0aW9uKHQsZSl7dmFyIGk9ZS53aGVyZSxzPWUuaG93O3RoaXMuX21vdmUoaSxzLGUpfSxvcGVuOmZ1bmN0aW9uKHQpe2lmKCF0JiYhdGhpcy5tb2RhbCl7Y29uc29sZS53YXJuKCJUcnlpbmcgdG8gY2FsbCBwb3B1cC5vcGVuKCkgd2l0aG91dCBwYXJhbXM7Iik7cmV0dXJuIHRoaXN9dmFyIGU9dHx8e30saT1lLndoZXJlLHM9ZS5ob3c7CmlmKHRoaXMud2hlcmUpKGkhPT10aGlzLndoZXJlfHxpIGluc3RhbmNlb2YgQXJyYXkmJihpWzBdIT09dGhpcy53aGVyZVswXXx8aVsxXSE9PXRoaXMud2hlcmVbMV0pKSYmdGhpcy5fbW92ZShpLHMpO2Vsc2UgaWYoZS53aGVyZXx8dGhpcy5tb2RhbCl7dGhpcy4kbm9kZS5yZW1vdmVDbGFzcygiX25iLWlzLWhpZGRlbiIpO3RoaXMuX21vdmUoaSxzLGUpO3RoaXMudHJpZ2dlcih0aGlzLm1vZGFsPyJuYi1vcGVuZWQiOiJuYi1vcGVuLXN0YXJ0ZWQiKX1yZXR1cm4gdGhpc30sY2xvc2U6ZnVuY3Rpb24oKXt0aGlzLndoZXJlPW51bGw7aWYodGhpcy5pc09wZW4oKSl7dGhpcy5ub2RlLndpZGdldC5jbG9zZSgpO3RoaXMudHJpZ2dlcih0aGlzLm1vZGFsPyJuYi1jbG9zZWQiOiJuYi1jbG9zZS1zdGFydGVkIil9aWYodGhpcy5ub2RlJiZ0aGlzLm5vZGUud2lkZ2V0JiZ0aGlzLm5vZGUud2lkZ2V0Lm9wdGlvbnMuY2xvc2VkQnlPdXRlckNsaWNrKXt0aGlzLnRyaWdnZXIodGhpcy5tb2RhbD8ibmItY2xvc2VkIjoibmItY2xvc2Utc3RhcnRlZCIpOwp0aGlzLm5vZGUud2lkZ2V0Lm9wdGlvbnMuY2xvc2VkQnlPdXRlckNsaWNrPSExfXJldHVybiB0aGlzfSxzZXRDb250ZW50OmZ1bmN0aW9uKHQpe3RoaXMuJG5vZGUuZmluZCgiLl9uYi1wb3B1cC1jb250ZW50IikuaHRtbCh0KTt0aGlzLnRyaWdnZXIoIm5iLWNvbnRlbnQtc2V0Iik7cmV0dXJuIHRoaXN9LGdldENvbnRlbnQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy4kbm9kZS5maW5kKCIuX25iLXBvcHVwLWNvbnRlbnQiKS5odG1sKCl9LGlzT3BlbjpmdW5jdGlvbigpe3JldHVybiB0aGlzLm5vZGUmJnRoaXMubm9kZS53aWRnZXQmJnRoaXMubm9kZS53aWRnZXQuaXNPcGVuKCl9LGRlc3Ryb3k6ZnVuY3Rpb24oKXtpZih0aGlzLm5vZGUmJnRoaXMubm9kZS53aWRnZXQpe3RoaXMubm9kZS53aWRnZXQuZGVzdHJveSgpO3RoaXMuJG5vZGUuYWRkQ2xhc3MoIl9uYi1pcy1oaWRkZW4iKX10aGlzLnRyaWdnZXIoIm5iLWRlc3Ryb3llZCIsdGhpcyk7dGhpcy5uYmRlc3Ryb3koKX0sX21vdmU6ZnVuY3Rpb24odCxlLGkpe3RoaXMud2hlcmU9dDsKdmFyIHM9dGhpcyxpPWl8fHt9LGU9ZXx8e30sbj10aGlzLm5iZGF0YSgpLG89ITE7ZS5maXhlZCYmKG89ITApO24mJiJmaXhlZCI9PW4uaG93JiYobz0hMCk7dmFyIGE9ZnVuY3Rpb24odCl7dmFyIGU9JCh0aGlzKTtlLmNzcyh0KX0scj0hMDsidW5kZWZpbmVkIiE9dHlwZW9mIGUuYXV0b2Nsb3NlJiYocj1lLmF1dG9jbG9zZSk7InVuZGVmaW5lZCIhPXR5cGVvZiBpLmF1dG9jbG9zZSYmKHI9aS5hdXRvY2xvc2UpO3ZhciBoPSEwOyJ1bmRlZmluZWQiIT10eXBlb2YgZS5hdXRvZm9jdXMmJihoPWUuYXV0b2ZvY3VzKTsidW5kZWZpbmVkIiE9dHlwZW9mIGkuYXV0b2ZvY3VzJiYoaD1pLmF1dG9mb2N1cyk7dGhpcy5oYXNBbmltYXRpb249ITA7InVuZGVmaW5lZCIhPXR5cGVvZiBlLmFuaW1hdGlvbiYmKHRoaXMuaGFzQW5pbWF0aW9uPWUuYW5pbWF0aW9uKTsidW5kZWZpbmVkIiE9dHlwZW9mIGkuYW5pbWF0aW9uJiYodGhpcy5oYXNBbmltYXRpb249aS5hbmltYXRpb24pO3RoaXMubW9kYWw/JCh0aGlzLm5vZGUpLmJhc2VEaWFsb2coe2hlaWdodDppLmhlaWdodHx8bi5oZWlnaHQsbWluSGVpZ2h0OmkubWluSGVpZ2h0fHxuLm1pbmhlaWdodCxtYXhIZWlnaHQ6aS5tYXhIZWlnaHR8fG4ubWF4aGVpZ2h0LHdpZHRoOmkud2lkdGh8fG4ud2lkdGgsc2hvdzoiZmFkZSIsaGlkZToiZmFkZSIsbW9kYWw6ITAscmVzaXphYmxlOiExLGRyYWdnYWJsZTohMSxkaWFsb2dDbGFzczppLmNsYXNzfHwiX25iLXBvcHVwLW91dGVyIHVpLWRpYWxvZy1maXhlZCIsY2xvc2U6ZnVuY3Rpb24oKXtzLmNsb3NlKCkKfSxhcHBlbmRUbzppLmFwcGVuZFRvLHBvc2l0aW9uOnt1c2luZzphfSxhdXRvY2xvc2U6cixhdXRvZm9jdXM6aH0pOnRoaXMuYW5pbWF0aW9uSW5Qcm9ncmVzc3x8dGhpcy4kbm9kZS5oaWRlKCkuY29udGV4dERpYWxvZyh7aGVpZ2h0OmkuaGVpZ2h0fHxuLmhlaWdodHx8ImF1dG8iLG1pbkhlaWdodDppLm1pbkhlaWdodHx8bi5taW5oZWlnaHR8fCJhdXRvIixtYXhIZWlnaHQ6aS5tYXhIZWlnaHR8fG4ubWF4aGVpZ2h0fHwiYXV0byIsd2lkdGg6aS53aWR0aHx8bi53aWR0aHx8ImF1dG8iLGRpYWxvZ0NsYXNzOmkuY2xhc3M/Il9uYi1wb3B1cC1vdXRlciB1aS1kaWFsb2ctbm8tY2xvc2UgIitpLmNsYXNzOiJfbmItcG9wdXAtb3V0ZXIgdWktZGlhbG9nLW5vLWNsb3NlIixwb3NpdGlvbjp7YXQ6ZS5hdD9lLmF0OiJjZW50ZXIgYm90dG9tIixteTplLm15P2UubXk6ImNlbnRlciB0b3AiLGZpeGVkOm8sb2Y6JCh0aGlzLndoZXJlKSxjb2xsaXNpb246ZS5jb2xsaXNpb24/ZS5jb2xsaXNpb246ImZpdCBmbGlwIix1c2luZzphfHxlLnVzaW5nLHdpdGhpbjplLndpdGhpbn0sY2xvc2U6ZnVuY3Rpb24oKXtzLmNsb3NlKCkKfSxhcHBlbmRUbzppLmFwcGVuZFRvfHxlLmFwcGVuZFRvLGF1dG9jbG9zZTpyLGF1dG9mb2N1czpoLHdpdGhvdXRUYWlsOmkud2l0aG91dFRhaWx8fG4ud2l0aG91dHRhaWx8fCExfSl9fSwiYmFzZSIpfSgpO25iLmRlZmluZSgicG9wdXAtdG9nZ2xlciIse2V2ZW50czp7Y2xpY2s6InRvZ2dsZSJ9LG9uaW5pdDpmdW5jdGlvbigpe3ZhciB0PXRoaXM7dGhpcy5kYXRhPXRoaXMubmJkYXRhKClbInBvcHVwLXRvZ2dsZXIiXTt0aGlzLnBvcHVwPW5iLmZpbmQodGhpcy5kYXRhLmlkKTtpZih0aGlzLnBvcHVwKXt0aGlzLnBvcHVwLm9uKCJuYi1jbG9zZWQiLGZ1bmN0aW9uKCl7dC50cmlnZ2VyKCJuYi1jbG9zZWQiLHQpfSk7dGhpcy5wb3B1cC5vbigibmItb3BlbmVkIixmdW5jdGlvbigpe3QudHJpZ2dlcigibmItb3BlbmVkIix0KX0pfXRoaXMub3B0aW9ucz17d2hlcmU6dGhpcy5kYXRhLndoZXJlfHx0aGlzLm5vZGUsaG93OnRoaXMuZGF0YS5ob3csd2l0aG91dFRhaWw6dGhpcy5kYXRhLndpdGhvdXRUYWlsLGF1dG9jbG9zZTp0aGlzLmRhdGEuYXV0b2Nsb3NlLGF1dG9mb2N1czp0aGlzLmRhdGEuYXV0b2ZvY3VzLGFwcGVuZFRvOnRoaXMuZGF0YS5hcHBlbmRUb307CnRoaXMudHJpZ2dlcigibmItaW5pdGVkIix0aGlzKX0sdG9nZ2xlOmZ1bmN0aW9uKHQpe3QmJnQucHJldmVudERlZmF1bHQoKTt0aGlzLnBvcHVwJiZ0aGlzLnBvcHVwLmlzT3BlbigpP3RoaXMuY2xvc2UodCk6dGhpcy5vcGVuKHQpO3JldHVybiB0aGlzfSxvcGVuOmZ1bmN0aW9uKHQpe3QmJnQucHJldmVudERlZmF1bHQoKTtpZih0aGlzLmlzRW5hYmxlZCgpJiZ0aGlzLnBvcHVwJiYhdGhpcy5wb3B1cC5pc09wZW4oKSl7dGhpcy5wb3B1cC5vcGVuKHRoaXMub3B0aW9ucyk7dGhpcy50cmlnZ2VyKCJuYi1vcGVuLXN0YXJ0ZWQiLHRoaXMpfXJldHVybiB0aGlzfSxjbG9zZTpmdW5jdGlvbigpe2lmKHRoaXMuaXNFbmFibGVkKCkmJnRoaXMucG9wdXAmJnRoaXMucG9wdXAuaXNPcGVuKCkpe3RoaXMucG9wdXAuY2xvc2UoKTt0aGlzLnRyaWdnZXIoIm5iLWNsb3NlLXN0YXJ0ZWQiLHRoaXMpfXJldHVybiB0aGlzfSxnZXRQb3B1cDpmdW5jdGlvbigpe3JldHVybiB0aGlzLnBvcHVwfSxzZXRQb3B1cDpmdW5jdGlvbih0KXtpZigic3RyaW5nIj09dHlwZW9mIHQpe3ZhciBlPXt9OwplLnBvcHVwPXQ7dD1lfWlmKDE9PT1hcmd1bWVudHMubGVuZ3RoJiYib2JqZWN0Ij09dHlwZW9mIHQmJnQucG9wdXApe3ZhciBpPXQucG9wdXA7ZGVsZXRlIHQucG9wdXA7dC53aGVyZSYmKHRoaXMub3B0aW9ucz10KTt0aGlzLnBvcHVwPSJzdHJpbmciPT10eXBlb2YgaT9uYi5maW5kKGkpOmk7dGhpcy50cmlnZ2VyKCJuYi1wb3B1cC1zZXQiLHRoaXMpfXJldHVybiB0aGlzfSxnZXRPcHRpb25zOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMub3B0aW9uc30sc2V0T3B0aW9uczpmdW5jdGlvbih0KXtpZigxPT09YXJndW1lbnRzLmxlbmd0aCYmIm9iamVjdCI9PXR5cGVvZiB0KXt0aGlzLm9wdGlvbnM9dDt0aGlzLnRyaWdnZXIoIm5iLW9wdGlvbnMtc2V0Iix0aGlzKX1yZXR1cm4gdGhpc30sZGlzYWJsZTpmdW5jdGlvbigpe3RoaXMuX3RhYmluZGV4PXRoaXMuJG5vZGUuYXR0cigidGFiaW5kZXgiKTt0aGlzLiRub2RlLmF0dHIoInRhYmluZGV4IiwiLTEiKTt0aGlzLiRub2RlLmFkZENsYXNzKCJfbmItaXMtZGlzYWJsZWQiKTsKdGhpcy50cmlnZ2VyKCJuYi1kaXNhYmxlZCIsdGhpcyk7cmV0dXJuIHRoaXN9LGVuYWJsZTpmdW5jdGlvbigpe3RoaXMuJG5vZGUuYXR0cigidGFiaW5kZXgiLHRoaXMuX3RhYmluZGV4fHwiMCIpO3RoaXMuJG5vZGUucmVtb3ZlQ2xhc3MoIl9uYi1pcy1kaXNhYmxlZCIpO3RoaXMudHJpZ2dlcigibmItZW5hYmxlZCIsdGhpcyk7cmV0dXJuIHRoaXN9LGlzRW5hYmxlZDpmdW5jdGlvbigpe3JldHVybiF0aGlzLiRub2RlLmhhc0NsYXNzKCJfbmItaXMtZGlzYWJsZWQiKX0sZGVzdHJveTpmdW5jdGlvbigpe3RoaXMubmJkZXN0cm95KCl9fSwiYmFzZSIpO25iLmRlZmluZSgicHJvZ3Jlc3MiLHtvbmluaXQ6ZnVuY3Rpb24oKXt2YXIgdD10aGlzLm5iZGF0YSgpO3QmJnQudHlwZSYmKHRoaXMudHlwZT10LnR5cGUpO3RoaXMuJHRpdGxlPXRoaXMuJG5vZGUuZmluZCgiLmpzLXRpdGxlIik7dGhpcy4kY29udHJvbD10aGlzLiRub2RlLmZpbmQoImlucHV0Iik7dGhpcy4kYmFyPXRoaXMuJG5vZGUuZmluZCgiLmpzLWJhciIpCn0sc2V0VmFsdWU6ZnVuY3Rpb24odCl7dmFyIGU9cGFyc2VGbG9hdCh0KTt0aGlzLiRjb250cm9sLnZhbChlKTt0aGlzLiRiYXIuY3NzKHt3aWR0aDplKyIlIn0pOyJwZXJjZW50YWdlIj09dGhpcy50eXBlJiZ0aGlzLiR0aXRsZS5odG1sKGUrIiUiKTt0aGlzLnRyaWdnZXIoIm5iLXZhbHVlLXNldCIsdGhpcyk7cmV0dXJuIHRoaXN9LGdldFZhbHVlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuJGNvbnRyb2wudmFsKCl9LHRpY2s6ZnVuY3Rpb24oKXt2YXIgdD1wYXJzZUZsb2F0KHRoaXMuZ2V0VmFsdWUoKSk7MTAwPnQmJnQrKzt0aGlzLnNldFZhbHVlKHQpO3RoaXMudHJpZ2dlcigibmItY2hhbmdlZCIsdGhpcyk7cmV0dXJuIHRoaXN9fSwiYmFzZSIpO25iLmRlZmluZSgic2VsZWN0Iix7ZXZlbnRzOnttb3VzZWRvd246Il9vbmNsaWNrIn0sb25pbml0OmZ1bmN0aW9uKCl7dGhpcy5pc09wZW49ITE7dGhpcy4kY29udHJvbD10aGlzLiRub2RlLmZpbmQoInNlbGVjdCIpO3RoaXMuZGF0YT10aGlzLm5iZGF0YSgpOwp0aGlzLiRkcm9wZG93bj10aGlzLiRub2RlLmNoaWxkcmVuKCIubmItc2VsZWN0LWRyb3Bkb3duIikuYXBwZW5kVG8odGhpcy5kYXRhLmFwcGVuZHRvfHwiYm9keSIpO3RoaXMuX3VwZGF0ZUZyb21TZWxlY3QoKTtpZihuYi5JRV9MVDkpe3ZhciB0PXRoaXM7dGhpcy4kY29udHJvbC5vbigiY2hhbmdlIixmdW5jdGlvbihlKXt0LnNldFN0YXRlKHt2YWx1ZTplLnRhcmdldC52YWx1ZX0pfSl9ZWxzZSB0aGlzLmNvbnRyb2xQcmVwYXJlKCk7dGhpcy50cmlnZ2VyKCJuYi1pbml0ZWQiLHRoaXMpfSxjb250cm9sUHJlcGFyZTpmdW5jdGlvbigpe3ZhciB0PXRoaXMsZT17fTtlLmNvbGxpc2lvbj0iZmxpcCI7dC5kYXRhLndpdGhpbiYmKGUud2l0aGluPXQuZGF0YS53aXRoaW4pO2lmKCJ0b3AiPT10LmRhdGEuZGlyZWN0aW9uKXtlLm15PSJsZWZ0IGJvdHRvbSI7ZS5hdD0ibGVmdCB0b3AifWVsc2V7ZS5teT0ibGVmdCB0b3AiO2UuYXQ9ImxlZnQgYm90dG9tIn10Ll9yZXR1cm5PcHRJdGVtPWZ1bmN0aW9uKHQpe3ZhciBlPSQodCksaT1lLmRhdGEoImljb24iKSxzPWUuZGF0YSgiY2xhc3MiKSxuPXt9OwppZihlLmF0dHIoInNlcGFyYXRvciIpKW49e3NlcGFyYXRvcjohMCxvcHRpb246dH07ZWxzZXtuPXtsYWJlbDplLnRleHQoKSx2YWx1ZTplLnZhbCgpLG9wdGlvbjp0fTtpJiYobi5pY29uPWkpO3MmJihuLmNsYXNzTmFtZT1zKX1yZXR1cm4gbn07dC4kbm9kZS5hdXRvY29tcGxldGUoe2Rpc2FibGVkOnQuJG5vZGUuaGFzQ2xhc3MoIl9uYi1pcy1kaXNhYmxlZCIpLGRlbGF5OjAsbWluTGVuZ3RoOjAsYXV0b0ZvY3VzOiExLHBvc2l0aW9uOmUsYXBwZW5kVG86dC4kZHJvcGRvd24sc291cmNlOmZ1bmN0aW9uKGUsaSl7aSh0LiRjb250cm9sLmNoaWxkcmVuKFsib3B0aW9uIiwib3B0Z3JvdXAiXSkubWFwKGZ1bmN0aW9uKCl7dmFyIGUsaT0kKHRoaXMpO2U9Ik9QVEdST1VQIj09dGhpcy50YWdOYW1lP3t0eXBlOiJncm91cCIsbGFiZWw6aS5hdHRyKCJsYWJlbCIpLG9wdGlvbjp0aGlzLGdyb3VwOmkuY2hpbGRyZW4oIm9wdGlvbiIpLm1hcChmdW5jdGlvbigpe3JldHVybiB0Ll9yZXR1cm5PcHRJdGVtKHRoaXMpCn0pfTp0Ll9yZXR1cm5PcHRJdGVtKHRoaXMpO3JldHVybiBlfSkpfSxzZWxlY3Q6ZnVuY3Rpb24oZSxpKXtpZigiZ3JvdXAiIT1pLml0ZW0udHlwZSl7aS5pdGVtLm9wdGlvbi5zZWxlY3RlZD0hMDt0LiRqVUkuX3RyaWdnZXIoInNlbGVjdGVkIixlLHtpdGVtOmkuaXRlbS5vcHRpb259KX19LG9wZW46ZnVuY3Rpb24oKXt0LiRqVUkuX29uKHQuJGpVSS5kb2N1bWVudCx7bW91c2Vkb3duOmZ1bmN0aW9uKGUpezEhPWUud2hpY2h8fCQuY29udGFpbnModC4kalVJLmVsZW1lbnQuZ2V0KDApLGUudGFyZ2V0KXx8JC5jb250YWlucyh0LiRkcm9wZG93blswXSxlLnRhcmdldCl8fHRoaXMuY2xvc2UoKX19KTt0LnRyaWdnZXIoIm5iLW9wZW5lZCIsdCl9LGNsb3NlOmZ1bmN0aW9uKCl7dC4kalVJLl9vZmYodC4kalVJLmRvY3VtZW50LCJtb3VzZWRvd24iKTt0LnRyaWdnZXIoIm5iLWNsb3NlZCIsdCl9fSkuYWRkQ2xhc3MoInVpLXdpZGdldCB1aS13aWRnZXQtY29udGVudCIpO3QuJGpVST10LiRub2RlLmRhdGEoInVpQXV0b2NvbXBsZXRlIik7CnQuJG5vZGUub24oImF1dG9jb21wbGV0ZW9wZW4iLGZ1bmN0aW9uKCl7dC5pc09wZW49ITB9KTt0LiRub2RlLm9uKCJhdXRvY29tcGxldGVjbG9zZSIsZnVuY3Rpb24oKXt0LmlzT3Blbj0hMX0pO3QuJGpVSS5fcmVuZGVySXRlbT1mdW5jdGlvbihlLGkpe3ZhciBzPSQoJzxsaSBjbGFzcz0iX25iLXNlbGVjdC1pdGVtIj48L2xpPicpO2kuY2xhc3NOYW1lJiZzLmFkZENsYXNzKGkuY2xhc3NOYW1lKTtpLm9wdGlvbi5zZWxlY3RlZCYmcy5hZGRDbGFzcygiaXMtc2VsZWN0ZWQiKTtpZigiZ3JvdXAiPT1pLnR5cGUpe3MuYWRkQ2xhc3MoIl9uYi1zZWxlY3QtZ3JvdXAtaXRlbSIpO3ZhciBuPSQoIjx1bD48L3VsPiIpO2kuZ3JvdXAuZWFjaChmdW5jdGlvbihlLGkpe3QuJGpVSS5fcmVuZGVySXRlbShuLGkpfSk7cy5hcHBlbmQobil9aWYoaS5zZXBhcmF0b3Ipcy5hZGRDbGFzcygiX25iLXNlbGVjdC1zZXBlcmF0b3ItaXRlbSIpO2Vsc2V7cy5kYXRhKCJ1aS1hdXRvY29tcGxldGUtaXRlbSIsaSk7CnZhciBvPSQoJzxhIGNsYXNzPSJfbmItc2VsZWN0LWEiPjwvYT4nKTsiZ3JvdXAiPT1pLnR5cGU/by5odG1sKCc8c3BhbiBjbGFzcz0iX25iLXNlbGVjdC10ZXh0Ij4nK2kubGFiZWwrIjwvc3Bhbj4iKTpvLnRleHQoaS5sYWJlbCkuYXBwZW5kVG8obyk7aS5pY29uJiZvLnByZXBlbmQoJzxpbWcgY2xhc3M9Im5iLWljb24gbmItcy0nK2kuaWNvbisnLWljb24iIHNyYz0iZGF0YTppbWFnZS9naWY7YmFzZTY0LFIwbEdPRGxoQVFBQkFJQUFBQUFBQVAvLy95SDVCQUVBQUFBQUxBQUFBQUFCQUFFQUFBSUJSQUE3Ij4nKTtzLmFwcGVuZChvKX1zLmFwcGVuZFRvKGUpO3JldHVybiBzfTt0LiRqVUkudmFsdWVNZXRob2Q9ZnVuY3Rpb24oZSl7aWYoInN0cmluZyI9PXR5cGVvZiBlKXt2YXIgaT10LiRjb250cm9sLmZpbmQoJ29wdGlvblt2YWx1ZT0iJytlKyciXScpLnRleHQoKTt0LnNldFN0YXRlKHt2YWx1ZTplLHRleHQ6aX0pfXJldHVybiB0LiRzZWxlY3RlZC52YWwoKX07dC4kalVJLl9fcmVzaXplTWVudT10LiRqVUkuX3Jlc2l6ZU1lbnU7CnQuJGpVSS5fcmVzaXplTWVudT1mdW5jdGlvbigpe3QuZGF0YS5tYXhoZWlnaHQmJnQuX3NldE1heEhlaWdodCh0LmRhdGEubWF4aGVpZ2h0KTt0aGlzLl9fcmVzaXplTWVudSgpfTt0LiRqVUkubWVudS5lbGVtZW50Lm9uKCJjbGljayIsZnVuY3Rpb24odCl7dC5zdG9wUHJvcGFnYXRpb24oKX0pfSxfdXBkYXRlRnJvbVNlbGVjdDpmdW5jdGlvbigpe3RoaXMuJHNlbGVjdGVkPXRoaXMuJGNvbnRyb2wuZmluZCgiOnNlbGVjdGVkIik7dGhpcy52YWx1ZT10aGlzLiRzZWxlY3RlZC52YWwoKTt0aGlzLnRleHQ9dGhpcy4kc2VsZWN0ZWQudGV4dCgpO3RoaXMuaWNvbj10aGlzLiRzZWxlY3RlZC5kYXRhKCJpY29uIik7dGhpcy5fc2V0VGV4dCh7dGV4dDp0aGlzLnRleHQsaWNvbjp0aGlzLmljb259KX0sX29uY2xpY2s6ZnVuY3Rpb24odCl7aWYodGhpcy4kbm9kZSYmdGhpcy4kbm9kZS5kYXRhKCJ1aUF1dG9jb21wbGV0ZSIpKXt0LnByZXZlbnREZWZhdWx0KCk7aWYodGhpcy5pc09wZW4pdGhpcy5jbG9zZSgpOwplbHNlIGlmKHRoaXMuaXNFbmFibGVkKCkpe3RoaXMub3BlbigpO3RoaXMuJG5vZGUuZm9jdXMoKX19fSxfc2V0VGV4dDpmdW5jdGlvbih0KXt2YXIgZT10aGlzLiRub2RlLmZpbmQoIi5fbmItYnV0dG9uLWNvbnRlbnQiKTtpZih0LnRleHR8fHQuaWNvbil7ZS50ZXh0KHQudGV4dCk7aWYodC5pY29uKXt0aGlzLiRub2RlLmFkZENsYXNzKCJfbmItd2l0aC1pY29uIik7dC50ZXh0fHx0aGlzLiRub2RlLmFkZENsYXNzKCJfbmItd2l0aC1vbmx5LWJ1dHRvbiIpO2UucHJlcGVuZCgnPGltZyBjbGFzcz0ibmItaWNvbiBuYi1zLScrdC5pY29uKyctaWNvbiIgc3JjPSJkYXRhOmltYWdlL2dpZjtiYXNlNjQsUjBsR09EbGhBUUFCQUlBQUFBQUFBUC8vL3lINUJBRUFBQUFBTEFBQUFBQUJBQUVBQUFJQlJBQTciPicpfX1lbHNlIHRoaXMuJG5vZGUuZmluZCgiLl9uYi1idXR0b24tY29udGVudCIpLmh0bWwoIiZuYnNwOyIpfSxfc2V0TWF4SGVpZ2h0OmZ1bmN0aW9uKHQpe3ZhciBlO2lmKC9eXGQrJC8udGVzdCh0KSl7dmFyIGk9dGhpcy4kalVJLm1lbnUuZWxlbWVudC5maW5kKCIuX25iLXNlbGVjdC1pdGVtIikuZmlyc3QoKTsKZT1wYXJzZUludChpLmhlaWdodCgpKSp0fWVsc2UgZT10O3RoaXMuJGpVSS5tZW51LmVsZW1lbnQuY3NzKHsibWF4LWhlaWdodCI6ZSwib3ZlcmZsb3cteSI6ImF1dG8iLCJvdmVyZmxvdy14IjoiaGlkZGVuIn0pfSxyZW5kZXI6ZnVuY3Rpb24oKXtpZighdGhpcy5pc0VuYWJsZWQoKSlyZXR1cm4gdGhpczt0aGlzLiRub2RlLmF1dG9jb21wbGV0ZSgic2VhcmNoIiwiIik7dGhpcy50cmlnZ2VyKCJuYi1yZW5kZXJlZCIsdGhpcyk7cmV0dXJuIHRoaXN9LG9wZW46ZnVuY3Rpb24oKXt0aGlzLiRub2RlJiZ0aGlzLiRub2RlLmRhdGEoInVpQXV0b2NvbXBsZXRlIikmJnRoaXMuaXNFbmFibGVkKCkmJnRoaXMucmVuZGVyKCk7cmV0dXJuIHRoaXN9LGNsb3NlOmZ1bmN0aW9uKCl7aWYodGhpcy4kbm9kZSYmdGhpcy4kbm9kZS5kYXRhKCJ1aUF1dG9jb21wbGV0ZSIpKXt0aGlzLiRub2RlLmF1dG9jb21wbGV0ZSgiY2xvc2UiKTt0aGlzLnRyaWdnZXIoIm5iLWNsb3NlZCIsdGhpcyl9cmV0dXJuIHRoaXMKfSxzZXRTdGF0ZTpmdW5jdGlvbih0KXt0PXR8fHt9O2lmKHRoaXMudmFsdWUhPT10LnZhbHVlKXt2YXIgZTtlPXQudmFsdWU/dGhpcy4kY29udHJvbC5maW5kKCdvcHRpb25bdmFsdWU9IicrdC52YWx1ZSsnIl0nKS5maXJzdCgpOnRoaXMuJGNvbnRyb2wuZmluZCgib3B0aW9uOmNvbnRhaW5zKCIrdC50ZXh0KyIpIikuZmlyc3QoKTtpZigwIT09ZS5sZW5ndGgpe3RoaXMuJHNlbGVjdGVkLnByb3AoInNlbGVjdGVkIiwhMSk7dGhpcy4kc2VsZWN0ZWQ9ZTt0aGlzLiRzZWxlY3RlZC5wcm9wKCJzZWxlY3RlZCIsITApO3RoaXMudmFsdWU9dGhpcy4kc2VsZWN0ZWQudmFsKCk7dGhpcy50ZXh0PXRoaXMuJHNlbGVjdGVkLnRleHQoKTt0aGlzLmljb249dGhpcy4kc2VsZWN0ZWQuZGF0YSgiaWNvbiIpO3RoaXMuX3NldFRleHQoe3RleHQ6dGhpcy50ZXh0LGljb246dGhpcy5pY29ufSk7dGhpcy50cmlnZ2VyKCJuYi1jaGFuZ2VkIix0aGlzKTt0aGlzLiRjb250cm9sLnZhbCh0LnZhbHVlKX19cmV0dXJuIHRoaXMKfSxnZXRTdGF0ZTpmdW5jdGlvbigpe3JldHVybnt2YWx1ZTp0aGlzLnZhbHVlLHRleHQ6dGhpcy50ZXh0fX0sZ2V0TmFtZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLiRjb250cm9sLnByb3AoIm5hbWUiKX0sc2V0TmFtZTpmdW5jdGlvbih0KXt0aGlzLiRjb250cm9sLnByb3AoIm5hbWUiLHQpO3RoaXMudHJpZ2dlcigibmItbmFtZS1zZXQiLHRoaXMpO3JldHVybiB0aGlzfSxkaXNhYmxlOmZ1bmN0aW9uKCl7aWYodGhpcy5pc0VuYWJsZWQoKSl7dGhpcy4kbm9kZS5hZGRDbGFzcygiX25iLWlzLWRpc2FibGVkIik7dGhpcy5fdGFiaW5kZXg9dGhpcy4kbm9kZS5hdHRyKCJ0YWJpbmRleCIpO3RoaXMuJG5vZGUuYXR0cigidGFiaW5kZXgiLCItMSIpO3RoaXMuJG5vZGUuYXR0cigiX25iLWlzLWRpc2FibGVkIik7bmIuSUVfTFQ5fHx0aGlzLiRub2RlLmF1dG9jb21wbGV0ZSgiZGlzYWJsZSIpO3RoaXMuJGNvbnRyb2wuYXR0cigiZGlzYWJsZWQiLCJkaXNhYmxlZCIpO3RoaXMudHJpZ2dlcigibmItZGlzYWJsZWQiLHRoaXMpCn1yZXR1cm4gdGhpc30sZW5hYmxlOmZ1bmN0aW9uKCl7aWYoIXRoaXMuaXNFbmFibGVkKCkpe3RoaXMuJG5vZGUuYXR0cigidGFiaW5kZXgiLHRoaXMuX3RhYmluZGV4fHwiMCIpO3RoaXMuJG5vZGUucmVtb3ZlQ2xhc3MoIl9uYi1pcy1kaXNhYmxlZCIpO25iLklFX0xUOXx8dGhpcy4kbm9kZS5hdXRvY29tcGxldGUoImVuYWJsZSIpO3RoaXMuJGNvbnRyb2wucmVtb3ZlQXR0cigiZGlzYWJsZWQiKTt0aGlzLnRyaWdnZXIoIm5iLWVuYWJsZWQiLHRoaXMpfXJldHVybiB0aGlzfSxpc0VuYWJsZWQ6ZnVuY3Rpb24oKXtyZXR1cm4hdGhpcy4kbm9kZS5oYXNDbGFzcygiX25iLWlzLWRpc2FibGVkIil9LHNldFNvdXJjZTpmdW5jdGlvbih0KXtpZighdClyZXR1cm4gdGhpczt0IGluc3RhbmNlb2YgQXJyYXl8fCh0PVt0XSk7dmFyIGU9W107dC5mb3JFYWNoKGZ1bmN0aW9uKHQpe3Quc2VsZWN0ZWQmJmUucHVzaCh0KX0pO2Uuc2xpY2UoMCwtMSkuZm9yRWFjaChmdW5jdGlvbih0KXt0LnNlbGVjdGVkPSExCn0pO3ZhciBpPXlyLnJ1bih0aGlzLmdldFlhdGVNb2R1bGVOYW1lKCkse2l0ZW1zOnR9LCJuYi1zZWxlY3Qtb3B0aW9ucyIpO3RoaXMuJGNvbnRyb2wuZW1wdHkoKS5hcHBlbmQoaSk7dGhpcy5fdXBkYXRlRnJvbVNlbGVjdCgpO3RoaXMudHJpZ2dlcigibmItc291cmNlLWNoYW5nZWQiLHRoaXMpO3JldHVybiB0aGlzfSxnZXRTb3VyY2U6ZnVuY3Rpb24oKXtyZXR1cm4gJC5tYXAodGhpcy4kY29udHJvbC5jaGlsZHJlbigib3B0aW9uIiksZnVuY3Rpb24odCl7dmFyIGU9JCh0KTtyZXR1cm57dGV4dDplLnRleHQoKSx2YWx1ZTplLnZhbCgpLHNlbGVjdGVkOmUucHJvcCgic2VsZWN0ZWQiKX19KX0sYWRkVG9Tb3VyY2U6ZnVuY3Rpb24odCxlKXt2YXIgaT10aGlzLmdldFNvdXJjZSgpO3QgaW5zdGFuY2VvZiBBcnJheXx8KHQ9W3RdKTt2YXIgcz1udWxsLG49dC5maWx0ZXIoZnVuY3Rpb24odCl7dmFyIGU9LTE9PT1pLmluZGV4T2YodCk7aWYoZSl7dC5zZWxlY3RlZCYmKHM9dC52YWx1ZSk7CnJldHVybiEwfXJldHVybiExfSx0aGlzKTtpc05hTihlKSYmKGU9aS5sZW5ndGgpO24uZm9yRWFjaChmdW5jdGlvbih0LHMpe2kuc3BsaWNlKGUrcywwLHQpfSx0aGlzKTt0aGlzLnNldFNvdXJjZShpKTtzJiZ0aGlzLnNldFN0YXRlKHt2YWx1ZTpzfSk7dGhpcy50cmlnZ2VyKCJuYi1zb3VyY2UtY2hhbmdlZCIsdGhpcyk7cmV0dXJuIHRoaXN9LHJlbW92ZUZyb21Tb3VyY2U6ZnVuY3Rpb24odCl7dmFyIGUsaT10aGlzLmdldFNvdXJjZSgpOyJudW1iZXIiPT10eXBlb2YgdHx8InN0cmluZyI9PXR5cGVvZiB0P2U9cGFyc2VJbnQodCk6dCBpbnN0YW5jZW9mIEFycmF5fHwodD1bdF0pO2V8fDA9PT1lP2kuc3BsaWNlKGUsMSk6dC5mb3JFYWNoKGZ1bmN0aW9uKHQpe2k9aS5maWx0ZXIoZnVuY3Rpb24oZSl7cmV0dXJuIGUudGV4dCE9dC50ZXh0JiZlLnZhbHVlIT10LnZhbHVlfSl9LHRoaXMpO3RoaXMuc2V0U291cmNlKGkpO3RoaXMudHJpZ2dlcigibmItc291cmNlLWNoYW5nZWQiLHRoaXMpOwpyZXR1cm4gdGhpc30sZm9jdXM6ZnVuY3Rpb24oKXt0aGlzLmlzRW5hYmxlZCgpJiZ0aGlzLiRub2RlLmZvY3VzKCk7dGhpcy50cmlnZ2VyKCJuYi1mb2N1c2VkIix0aGlzKTtyZXR1cm4gdGhpc30sYmx1cjpmdW5jdGlvbigpe3RoaXMuaXNFbmFibGVkKCkmJnRoaXMuJG5vZGUuYmx1cigpO3RoaXMudHJpZ2dlcigibmItYmx1cmVkIix0aGlzKTtyZXR1cm4gdGhpc30sc2V0T3B0aW9uOmZ1bmN0aW9uKHQpe3RoaXMuJG5vZGUuYXV0b2NvbXBsZXRlKCJvcHRpb24iLHQpO3RoaXMudHJpZ2dlcigibmItb3B0aW9uLXNldCIsdGhpcyk7cmV0dXJuIHRoaXN9LGdldE9wdGlvbjpmdW5jdGlvbih0KXtyZXR1cm4gdGhpcy4kbm9kZS5hdXRvY29tcGxldGUoIm9wdGlvbiIsdCl9LGRlc3Ryb3k6ZnVuY3Rpb24oKXtpZih0aGlzLiRub2RlJiZ0aGlzLiRub2RlLmRhdGEoInVpQXV0b2NvbXBsZXRlIikpe3RoaXMuJG5vZGUuYXV0b2NvbXBsZXRlKCJkZXN0cm95Iik7dGhpcy4kZHJvcGRvd24uZW1wdHkoKS5hcHBlbmRUbyh0aGlzLiRub2RlKQp9dGhpcy50cmlnZ2VyKCJuYi1kZXN0cm95ZWQiLHRoaXMpO3RoaXMubmJkZXN0cm95KCl9fSwiYmFzZSIpO25iLmRlZmluZSgic2xpZGVyIix7b25pbml0OmZ1bmN0aW9uKCl7dmFyIHQ9dGhpczt0aGlzLmRhdGE9dGhpcy5uYmRhdGEoKTt0aGlzLiRjb250cm9sPXRoaXMuJG5vZGUuZmluZCgiLl9uYi1zbGlkZXItZmFsbGJhY2siKTt0aGlzLiRib2R5PXRoaXMuJG5vZGUuY2hpbGRyZW4oIi5fbmItc2xpZGVyLWJvZHkiKTt0aGlzLiRib2R5LnNob3coKTt0aGlzLiRib2R5LnNsaWRlcih7cmFuZ2U6Im1pbiIsZGlzYWJsZWQ6dGhpcy4kbm9kZS5oYXNDbGFzcygiX25iLWlzLWRpc2FibGVkIiksdmFsdWU6cGFyc2VGbG9hdCh0aGlzLmRhdGEudmFsdWUpLGNoYW5nZTpmdW5jdGlvbih0LGUpe3RoaXMuJGNvbnRyb2wudmFsKGUudmFsdWUpfS5iaW5kKHRoaXMpfSk7dGhpcy4kYm9keS5vbigic2xpZGVzdG9wIixmdW5jdGlvbihlLGkpe3QudHJpZ2dlcigibmItc2xpZGVyX3NsaWRlc3RvcCIsaS52YWx1ZSkKfSk7dGhpcy4kYm9keS5vbigic2xpZGVzdGFydCIsZnVuY3Rpb24oZSxpKXt0LnRyaWdnZXIoIm5iLXNsaWRlcl9zbGlkZXN0YXJ0IixpLnZhbHVlKX0pO3RoaXMuJGJvZHkub24oInNsaWRlIixmdW5jdGlvbihlLGkpe3QudHJpZ2dlcigibmItc2xpZGVyX3NsaWRlIixpLnZhbHVlKX0pO3RoaXMudHJpZ2dlcigibmItaW5pdGVkIix0aGlzKTtyZXR1cm4gdGhpc30sc2V0VmFsdWU6ZnVuY3Rpb24odCl7aWYodGhpcy4kYm9keS5zbGlkZXIoIm9wdGlvbiIsImRpc2FibGVkIikpcmV0dXJuIHRoaXM7dGhpcy4kYm9keS5zbGlkZXIoInZhbHVlIix0KTt0aGlzLnRyaWdnZXIoIm5iLXZhbHVlLXNldCIsdGhpcyk7cmV0dXJuIHRoaXN9LGdldFZhbHVlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuJGJvZHkuc2xpZGVyKCJvcHRpb24iLCJ2YWx1ZSIpfSxzZXROYW1lOmZ1bmN0aW9uKHQpe3RoaXMuJGNvbnRyb2wucHJvcCgibmFtZSIsdCk7dGhpcy50cmlnZ2VyKCJuYi1uYW1lLXNldCIsdGhpcyk7CnJldHVybiB0aGlzfSxnZXROYW1lOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuJGNvbnRyb2wucHJvcCgibmFtZSIpfSxkaXNhYmxlOmZ1bmN0aW9uKCl7dGhpcy4kbm9kZS5hZGRDbGFzcygiX25iLWlzLWRpc2FibGVkIik7dGhpcy4kYm9keS5zbGlkZXIoImRpc2FibGUiKTt0aGlzLnRyaWdnZXIoIm5iLWRpc2FibGVkIix0aGlzKTtyZXR1cm4gdGhpc30sZW5hYmxlOmZ1bmN0aW9uKCl7dGhpcy4kbm9kZS5yZW1vdmVDbGFzcygiX25iLWlzLWRpc2FibGVkIik7dGhpcy4kYm9keS5zbGlkZXIoImVuYWJsZSIpO3RoaXMudHJpZ2dlcigibmItZW5hYmxlZCIsdGhpcyk7cmV0dXJuIHRoaXN9LGlzRW5hYmxlZDpmdW5jdGlvbigpe3JldHVybiF0aGlzLiRib2R5LnNsaWRlcigib3B0aW9uIiwiZGlzYWJsZWQiKX0sZGVzdHJveTpmdW5jdGlvbigpe3RoaXMuJGJvZHkmJnRoaXMuJGJvZHkuZGF0YSgidWlTbGlkZXIiKSYmdGhpcy4kYm9keS5zbGlkZXIoImRlc3Ryb3kiKTt0aGlzLnRyaWdnZXIoIm5iLWRlc3Ryb3llZCIsdGhpcyk7CnRoaXMubmJkZXN0cm95KCl9fSwiYmFzZSIpOyFmdW5jdGlvbigpe3ZhciB0PXtzb3VyY2U6bnVsbCxjb3VudE1heDoxMCx0eXBlOiJkZWZhdWx0IixoaWdobGlnaHQ6ITEsc2l6ZToicyIsbWluTGVuZ3RoOjJ9OyQud2lkZ2V0KCJ1aS5zdWdnZXN0IiwkLnVpLmF1dG9jb21wbGV0ZSx7b3B0aW9uczp0LF9yZW5kZXJNZW51OmZ1bmN0aW9uKHQsZSl7dmFyIGk9dGhpcyxzPSIiOyQuZWFjaChlLGZ1bmN0aW9uKHQsZSl7cys9aS5fcmVuZGVySXRlbShlKX0pOyQocykuYXBwZW5kVG8odCk7dC5jaGlsZHJlbigibGkiKS5lYWNoKGZ1bmN0aW9uKHQpeyQodGhpcykuZGF0YSgidWktYXV0b2NvbXBsZXRlLWl0ZW0iLGVbdF0pfSl9LF9yZW5kZXJJdGVtOmZ1bmN0aW9uKHQpe3ZhciBpPSQuZXh0ZW5kKHt9LHQpO3RoaXMub3B0aW9ucy5oaWdobGlnaHQmJigiZnVuY3Rpb24iPT10eXBlb2YgZVt0aGlzLm9wdGlvbnMudHlwZV0/ZVt0aGlzLm9wdGlvbnMudHlwZV0oaSx0aGlzLl92YWx1ZSgpKToiZnVuY3Rpb24iPT10eXBlb2YgdGhpcy5vcHRpb25zLmhpZ2hsaWdodCYmdGhpcy5vcHRpb25zLmhpZ2hsaWdodChpLHRoaXMuX3ZhbHVlKCkpKTsKaS5sYWJlbENvbnRlbnQ9aS5sYWJlbDtkZWxldGUgaS5sYWJlbDt2YXIgcz17aXRlbTppLHR5cGU6dGhpcy5vcHRpb25zLnR5cGUsc2l6ZTp0aGlzLm9wdGlvbnMuc2l6ZX07cmV0dXJuICQuaXNGdW5jdGlvbih0aGlzLm9wdGlvbnMucmVuZGVySXRlbSk/dGhpcy5vcHRpb25zLnJlbmRlckl0ZW0ocyk6JzxsaT48YSBocmVmPSIjIj4nK2kubGFiZWxDb250ZW50KyI8L2E+PC9saT4ifSxfc3VnZ2VzdDpmdW5jdGlvbih0KXt0aGlzLl9zdXBlcih0KTtpZih0aGlzLm9wdGlvbnMuY291bnRNYXgmJiF0aGlzLl9oZWlnaHRNYXgpe3RoaXMuX2hlaWdodE1heD10aGlzLm1lbnUuZWxlbWVudC5jaGlsZHJlbigpLmVxKDApLmhlaWdodCgpKnRoaXMub3B0aW9ucy5jb3VudE1heDt0aGlzLm1lbnUuZWxlbWVudC5jc3MoeyJtYXgtaGVpZ2h0Ijp0aGlzLl9oZWlnaHRNYXgsIm92ZXJmbG93LXkiOiJhdXRvIiwib3ZlcmZsb3cteCI6ImhpZGRlbiJ9KX19LHNlYXJjaDpmdW5jdGlvbih0LGUpe3RoaXMuX3RyaWdnZXIoIl9zZWFyY2giKTsKcmV0dXJuIHRoaXMuX3N1cGVyKHQsZSl9fSk7dmFyIGU9eyJkZWZhdWx0IjpmdW5jdGlvbih0LGUpe3ZhciBpPW5ldyBSZWdFeHAoIigiKyQudWkuYXV0b2NvbXBsZXRlLmVzY2FwZVJlZ2V4KGUpKyIpIiwiaSIpO3QubGFiZWw9dC5sYWJlbC5yZXBsYWNlKGksIjxiPiQxPC9iPiIpfSx1c2VybmFtZTpmdW5jdGlvbih0LGUpe3ZhciBpPW5ldyBSZWdFeHAoIigiKyQudWkuYXV0b2NvbXBsZXRlLmVzY2FwZVJlZ2V4KGUpKyIpIiwiaWciKTt0LnVzZXJuYW1lSGlnaGxpZ2h0ZWQ9dC51c2VybmFtZS5yZXBsYWNlKGksJzxzcGFuIGNsYXNzPSJfbmItc3VnZ2VzdC1obCI+JDE8L3NwYW4+Jyk7InN0cmluZyI9PXR5cGVvZiB0LmVtYWlsJiYodC5lbWFpbEhpZ2hsaWdodGVkPXQuZW1haWwucmVwbGFjZShpLCc8c3BhbiBjbGFzcz0iX25iLXN1Z2dlc3QtaGwiPiQxPC9zcGFuPicpKX19O25iLmRlZmluZSgic3VnZ2VzdCIse29uaW5pdDpmdW5jdGlvbigpe3ZhciB0PXRoaXMsZT10aGlzLiRub2RlWzBdLnRhZ05hbWUudG9Mb3dlckNhc2UoKTsKaWYoImlucHV0Ij09PWV8fCJ0ZXh0YXJlYSI9PT1lKXRoaXMuJGNvbnRyb2w9dGhpcy4kbm9kZTtlbHNle3RoaXMuJGNvbnRyb2w9dGhpcy4kbm9kZS5maW5kKCJpbnB1dCIpO3RoaXMuaW5wdXQ9dGhpcy5jaGlsZHJlbigpWzBdfXZhciBpPXRoaXMuJG5vZGUuZGF0YSgic291cmNlIik7dGhpcy4kY29udHJvbC5vbigia2V5ZG93bi5uYi1zdWdnZXN0IixmdW5jdGlvbih0KXt2YXIgZT0kLnVpLmtleUNvZGU7LTEhPT0kLmluQXJyYXkodC5rZXlDb2RlLFtlLkVOVEVSLGUuTlVNUEFEX0VOVEVSXSkmJih0aGlzLiRqVUkuZGF0YSgpLnVpU3VnZ2VzdC5tZW51LmFjdGl2ZXx8dGhpcy50cmlnZ2VyKCJuYi1rZXlwcmVzcy1lbnRlciIsdGhpcyx0aGlzLmdldFZhbHVlKCkpKX0uYmluZCh0aGlzKSk7dGhpcy4kalVJPXRoaXMuJGNvbnRyb2wuc3VnZ2VzdCh7c291cmNlOmksY291bnRNYXg6dGhpcy4kbm9kZS5kYXRhKCJjb3VudE1heCIpLHR5cGU6dGhpcy4kbm9kZS5kYXRhKCJ0eXBlIiksc2l6ZTp0aGlzLiRub2RlLmRhdGEoInNpemUiKSxoaWdobGlnaHQ6dGhpcy4kbm9kZS5kYXRhKCJoaWdobGlnaHQiKSxtaW5MZW5ndGg6dGhpcy4kbm9kZS5kYXRhKCJtaW5MZW5ndGgiKSxyZW5kZXJJdGVtOmZ1bmN0aW9uKGUpe3JldHVybiB5ci5ydW4odC5nZXRZYXRlTW9kdWxlTmFtZSgpLGUsIm5iLXN1Z2dlc3QiKQp9fSk7dGhpcy4kc3VnZ2VzdD10aGlzLiRqVUkuZGF0YSgpLnVpU3VnZ2VzdC5tZW51LmVsZW1lbnQ7dGhpcy4kc3VnZ2VzdC5hZGRDbGFzcyh0aGlzLiRub2RlLmRhdGEoImNsYXNzLXN1Z2dlc3QiKSk7dGhpcy4kalVJLm9uKCJzdWdnZXN0X3NlYXJjaC5uYi1zdWdnZXN0IixmdW5jdGlvbigpe3RoaXMudHJpZ2dlcigibmItdHlwZSIsdGhpcyx0aGlzLmdldFZhbHVlKCkpfS5iaW5kKHRoaXMpKTt0aGlzLiRqVUkub24oInN1Z2dlc3RzZWxlY3QubmItc3VnZ2VzdCIsZnVuY3Rpb24odCxlKXt0aGlzLiRzZWxlY3RlZD1lLml0ZW07dGhpcy50cmlnZ2VyKCJuYi1zZWxlY3QiLHRoaXMsZS5pdGVtKX0uYmluZCh0aGlzKSk7dGhpcy50cmlnZ2VyKCJuYi1pbml0ZWQiLHRoaXMpfSxnZXRTZWxlY3RlZDpmdW5jdGlvbigpe3JldHVybiB0aGlzLiRzZWxlY3RlZH0sc2V0T3B0aW9uOmZ1bmN0aW9uKHQpe3RoaXMuJGpVSS5zdWdnZXN0KCJvcHRpb24iLHQpO3RoaXMudHJpZ2dlcigibmItb3B0aW9uLXNldCIsdGhpcyk7CnJldHVybiB0aGlzfSxnZXRPcHRpb246ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuJGpVSS5zdWdnZXN0KCJvcHRpb24iLHQpfSxzZXRTb3VyY2U6ZnVuY3Rpb24odCl7dGhpcy5zZXRPcHRpb24oe3NvdXJjZTp0fSk7dGhpcy50cmlnZ2VyKCJuYi1zb3VyY2Utc2V0Iix0aGlzKTtyZXR1cm4gdGhpc30sZ2V0U291cmNlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZ2V0T3B0aW9uKCJzb3VyY2UiKX0sY2xvc2U6ZnVuY3Rpb24oKXt0aGlzLiRqVUkuc3VnZ2VzdCgiY2xvc2UiKTt0aGlzLnRyaWdnZXIoIm5iLWNsb3NlZCIsdGhpcyk7cmV0dXJuIHRoaXN9LGRpc2FibGU6ZnVuY3Rpb24oKXtpZih0aGlzLmlzRW5hYmxlZCgpKXt0aGlzLmlucHV0P3RoaXMuaW5wdXQuZGlzYWJsZSgpOnRoaXMuJGNvbnRyb2wucHJvcCgiZGlzYWJsZWQiLCEwKTt0aGlzLiRub2RlLmFkZENsYXNzKCJfbmItaXMtZGlzYWJsZWQiKTt0aGlzLiRqVUkuc3VnZ2VzdCgiZGlzYWJsZSIpO3RoaXMudHJpZ2dlcigibmItZGlzYWJsZWQiLHRoaXMpCn1yZXR1cm4gdGhpc30sZW5hYmxlOmZ1bmN0aW9uKCl7aWYoIXRoaXMuaXNFbmFibGVkKCkpe3RoaXMuaW5wdXQ/dGhpcy5pbnB1dC5lbmFibGUoKTp0aGlzLiRjb250cm9sLnByb3AoImRpc2FibGVkIiwhMSk7dGhpcy4kbm9kZS5yZW1vdmVDbGFzcygiX25iLWlzLWRpc2FibGVkIik7dGhpcy4kalVJLnN1Z2dlc3QoImVuYWJsZSIpO3RoaXMudHJpZ2dlcigibmItZW5hYmxlZCIsdGhpcyl9cmV0dXJuIHRoaXN9LGlzRW5hYmxlZDpmdW5jdGlvbigpe3JldHVybiF0aGlzLiRub2RlLmhhc0NsYXNzKCJfbmItaXMtZGlzYWJsZWQiKX0sZm9jdXM6ZnVuY3Rpb24oKXt0aGlzLmlzRW5hYmxlZCgpJiYodGhpcy5pbnB1dD90aGlzLmlucHV0LmZvY3VzKCk6dGhpcy4kY29udHJvbC5mb2N1cygpKTt0aGlzLnRyaWdnZXIoIm5iLWZvY3VzZWQiLHRoaXMpO3JldHVybiB0aGlzfSxnZXROYW1lOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuJGNvbnRyb2wucHJvcCgibmFtZSIpfSxzZXROYW1lOmZ1bmN0aW9uKHQpe3RoaXMuJGNvbnRyb2wucHJvcCgibmFtZSIsdCk7CnRoaXMudHJpZ2dlcigibmItbmFtZS1zZXQiLHRoaXMpO3JldHVybiB0aGlzfSxibHVyOmZ1bmN0aW9uKCl7dGhpcy5pc0VuYWJsZWQoKSYmKHRoaXMuaW5wdXQ/dGhpcy5pbnB1dC5ibHVyKCk6dGhpcy4kY29udHJvbC5ibHVyKCkpO3RoaXMudHJpZ2dlcigibmItYmx1cmVkIix0aGlzKTtyZXR1cm4gdGhpc30sZ2V0VmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy4kY29udHJvbC52YWwoKX0sc2V0VmFsdWU6ZnVuY3Rpb24odCl7aWYodGhpcy5pc0VuYWJsZWQoKSl7dGhpcy4kY29udHJvbC52YWwodCk7dGhpcy50cmlnZ2VyKCJuYi12YWx1ZS1zZXQiLHRoaXMpfXJldHVybiB0aGlzfSxzZWFyY2g6ZnVuY3Rpb24odCl7dGhpcy4kalVJLnN1Z2dlc3QoInNlYXJjaCIsdCk7cmV0dXJuIHRoaXN9LGRlc3Ryb3k6ZnVuY3Rpb24oKXtpZih0aGlzLiRjb250cm9sJiZ0aGlzLiRqVUkpe3ZhciB0PXRoaXMuJGpVSS5kYXRhKCk7dGhpcy4kY29udHJvbC5vZmYoIi5uYi1zdWdnZXN0Iik7dGhpcy4kalVJLm9mZigiLm5iLXN1Z2dlc3QiKTsKdCYmdC51aVN1Z2dlc3QmJnRoaXMuJGpVSS5zdWdnZXN0KCJkZXN0cm95Iil9dGhpcy50cmlnZ2VyKCJuYi1kZXN0cm95ZWQiLHRoaXMpO3RoaXMubmJkZXN0cm95KCl9fSwiYmFzZSIpfSgpO25iLmRlZmluZSgidGFicyIse29uaW5pdDpmdW5jdGlvbigpe3RoaXMuJG5vZGUudGFicygpfX0sImJhc2UiKTtuYi5kZWZpbmUoInRvZ2dsZXIiLHtldmVudHM6e2NsaWNrOiJ0b2dnbGUifSxvbmluaXQ6ZnVuY3Rpb24oKXt0aGlzLiRjb250cm9sPXRoaXMuJG5vZGUuZmluZCgiLl9uYi10b2dnbGVyLWNoZWNrYm94Iik7dGhpcy50cmlnZ2VyKCJuYi1pbml0ZWQiLHRoaXMpO3JldHVybiB0aGlzfSxzZXRWYWx1ZTpmdW5jdGlvbih0KXt0aGlzLiRjb250cm9sLmF0dHIoInZhbHVlIix0KTt0aGlzLnRyaWdnZXIoIm5iLXZhbHVlLXNldCIsdGhpcyk7cmV0dXJuIHRoaXN9LGdldFZhbHVlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuJGNvbnRyb2wucHJvcCgidmFsdWUiKX0sdG9nZ2xlOmZ1bmN0aW9uKCl7aWYodGhpcy5pc0VuYWJsZWQoKSl7dGhpcy5pc0NoZWNrZWQoKT90aGlzLnVuY2hlY2soKTp0aGlzLmNoZWNrKCk7CnRoaXMudHJpZ2dlcigibmItY2hhbmdlZCIsdGhpcyl9cmV0dXJuIHRoaXN9LGdldE5hbWU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy4kY29udHJvbC5hdHRyKCJuYW1lIil9LHNldE5hbWU6ZnVuY3Rpb24odCl7dGhpcy4kY29udHJvbC5hdHRyKCJuYW1lIix0KTt0aGlzLnRyaWdnZXIoIm5iLW5hbWUtc2V0Iix0aGlzKTtyZXR1cm4gdGhpc30sZGlzYWJsZTpmdW5jdGlvbigpe3RoaXMuJGNvbnRyb2wucHJvcCgiZGlzYWJsZWQiLCEwKTt0aGlzLiRub2RlLmFkZENsYXNzKCJfbmItaXMtZGlzYWJsZWQiKTt0aGlzLnRyaWdnZXIoIm5iLWRpc2FibGVkIix0aGlzKTtyZXR1cm4gdGhpc30sZW5hYmxlOmZ1bmN0aW9uKCl7dGhpcy4kY29udHJvbC5wcm9wKCJkaXNhYmxlZCIsITEpO3RoaXMuJG5vZGUucmVtb3ZlQ2xhc3MoIl9uYi1pcy1kaXNhYmxlZCIpO3RoaXMudHJpZ2dlcigibmItZW5hYmxlZCIsdGhpcyk7cmV0dXJuIHRoaXN9LGlzRW5hYmxlZDpmdW5jdGlvbigpe3JldHVybiF0aGlzLiRjb250cm9sLnByb3AoImRpc2FibGVkIikKfSxmb2N1czpmdW5jdGlvbigpe2lmKHRoaXMuaXNFbmFibGVkKCkmJiF0aGlzLiRub2RlLmhhc0NsYXNzKCJfbmItaXMtZm9jdXNlZCIpKXt0aGlzLiRub2RlLmFkZENsYXNzKCJfbmItaXMtZm9jdXNlZCIpLmZvY3VzKCk7dGhpcy5mb2N1c2VkPSEwO3RoaXMuJGNvbnRyb2wuZm9jdXMoKTt0aGlzLnRyaWdnZXIoIm5iLWZvY3VzZWQiLHRoaXMpfXJldHVybiB0aGlzfSxibHVyOmZ1bmN0aW9uKCl7dGhpcy4kbm9kZS5yZW1vdmVDbGFzcygiX25iLWlzLWZvY3VzZWQiKS5ibHVyKCk7dGhpcy5mb2N1c2VkPSExO3RoaXMudHJpZ2dlcigibmItYmx1cmVkIix0aGlzKTtyZXR1cm4gdGhpc30saXNDaGVja2VkOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuJGNvbnRyb2wucHJvcCgiY2hlY2tlZCIpfSxjaGVjazpmdW5jdGlvbigpe2lmKHRoaXMuaXNFbmFibGVkKCkmJiF0aGlzLmlzQ2hlY2tlZCgpKXt0aGlzLiRjb250cm9sLnByb3Aoe2NoZWNrZWQ6ITB9KTt0aGlzLiRub2RlLmFkZENsYXNzKCJfbmItaXMtY2hlY2tlZCIpOwp0aGlzLnRyaWdnZXIoIm5iLWNoZWNrZWQiLHRoaXMpfXJldHVybiB0aGlzfSx1bmNoZWNrOmZ1bmN0aW9uKCl7aWYodGhpcy5pc0VuYWJsZWQoKSYmdGhpcy5pc0NoZWNrZWQoKSl7dGhpcy4kY29udHJvbC5wcm9wKHtjaGVja2VkOiExfSk7dGhpcy4kbm9kZS5yZW1vdmVDbGFzcygiX25iLWlzLWNoZWNrZWQiKTt0aGlzLnRyaWdnZXIoIm5iLXVuY2hlY2tlZCIsdGhpcyl9cmV0dXJuIHRoaXN9LGRlc3Ryb3k6ZnVuY3Rpb24oKXt0aGlzLnRyaWdnZXIoIm5iLWRlc3Ryb3llZCIsdGhpcyk7dGhpcy5uYmRlc3Ryb3koKX19LCJiYXNlIik7bmIuZGVmaW5lKCJ0b29sdGlwLWpxLXRvZ2dsZXIiLHtldmVudHM6e21vdXNlb3Zlcjoib25tb3VzZWVudGVyIn0sb25tb3VzZWVudGVyOmZ1bmN0aW9uKCl7aWYodGhpcy4kbm9kZS5oYXNDbGFzcygiX25iLWlzLWRpc2FibGVkIikpcmV0dXJuITA7dmFyIHQ9dGhpcy5uYmRhdGEoKVt0aGlzLm5hbWVdLGU9e2NvbnRlbnQ6dC5jb250ZW50LGl0ZW1zOiIqIix0b29sdGlwQ2xhc3M6Im5iLXRvb2x0aXAgbmItaXNsYW5kIF9uYi1zbWFsbC1mbHktaXNsYW5kIn07CnQucG9zaXRpb24mJihlLnBvc2l0aW9uPXQucG9zaXRpb24pO3RoaXMuJG5vZGUudG9vbHRpcChlKTt0aGlzLiRub2RlLnRvb2x0aXAoIm9wZW4iKX19LCJiYXNlIik7bmIuZGVmaW5lKCJjaGVja2JveC1ncm91cCIse19vbkl0ZW1DaGFuZ2VkOmZ1bmN0aW9uKCl7dGhpcy50cmlnZ2VyKCJuYi1jaGFuZ2VkIix0aGlzKX0sb25pbml0OmZ1bmN0aW9uKCl7dmFyIHQ9JC5wcm94eSh0aGlzLl9vbkl0ZW1DaGFuZ2VkLHRoaXMpO3RoaXMuaXRlbXM9dGhpcy4kbm9kZS5maW5kKCIubmItY2hlY2tib3giKS5tYXAoZnVuY3Rpb24oKXt2YXIgZT1uYi5ibG9jayh0aGlzKTtlLm9uKCJuYi1jaGVja2VkIix0KTsiY2hlY2tib3giPT09ZS5nZXRUeXBlKCkmJmUub24oIm5iLXVuY2hlY2tlZCIsdCk7cmV0dXJuIGV9KTt0aGlzLnRyaWdnZXIoIm5iLWluaXRlZCIsdGhpcyl9LGlzQ2hlY2tlZDpmdW5jdGlvbigpe2Zvcih2YXIgdD0wO3Q8dGhpcy5pdGVtcy5sZW5ndGg7dCsrKWlmKHRoaXMuaXRlbXNbdF0uaXNDaGVja2VkKCkpcmV0dXJuITA7CnJldHVybiExfSxnZXRMYWJlbDpmdW5jdGlvbigpe2Zvcih2YXIgdD0wO3Q8dGhpcy5pdGVtcy5sZW5ndGg7dCsrKWlmKHRoaXMuaXRlbXNbdF0uaXNDaGVja2VkKCkpcmV0dXJuIHRoaXMuaXRlbXNbdF0uZ2V0TGFiZWwoKX0sZ2V0VmFsdWU6ZnVuY3Rpb24oKXtmb3IodmFyIHQ9MDt0PHRoaXMuaXRlbXMubGVuZ3RoO3QrKylpZih0aGlzLml0ZW1zW3RdLmlzQ2hlY2tlZCgpKXJldHVybiB0aGlzLml0ZW1zW3RdLmdldFZhbHVlKCl9LGdldENoZWNrZWRWYWx1ZXM6ZnVuY3Rpb24oKXtmb3IodmFyIHQ9W10sZT10aGlzLml0ZW1zLmxlbmd0aCxpPS0xOysraTxlOyl7dmFyIHM9dGhpcy5pdGVtc1tpXTtzLmlzQ2hlY2tlZCgpJiZ0LnB1c2gocy5nZXRWYWx1ZSgpKX1yZXR1cm4gdH0sc2V0VmFsdWU6ZnVuY3Rpb24odCl7Zm9yKHZhciBlPTA7ZTx0aGlzLml0ZW1zLmxlbmd0aDtlKyspaWYodGhpcy5pdGVtc1tlXS5nZXRWYWx1ZSgpPT10KXt0aGlzLml0ZW1zW2VdLmNoZWNrKCk7dGhpcy50cmlnZ2VyKCJuYi12YWx1ZS1zZXQiLHRoaXMpOwpicmVha31yZXR1cm4gdGhpc30sZ2V0TmFtZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLml0ZW1zWzBdLmdldE5hbWUoKX0sZGVzdHJveTpmdW5jdGlvbigpe3RoaXMudHJpZ2dlcigibmItZGVzdHJveWVkIix0aGlzKTt0aGlzLm5iZGVzdHJveSgpfX0sImJhc2UiKTtuYi4kYmxvY2s9ZnVuY3Rpb24odCxlKXt2YXIgaT0kKGV8fGRvY3VtZW50KSxzPWkuZmluZCh0KVswXTtyZXR1cm4gcz9uYi5ibG9jayhzKTpudWxsfTtuYi4kYnVsaz1mdW5jdGlvbih0LGUsaSxzKXtzPV8udG9BcnJheShhcmd1bWVudHMpLnNsaWNlKDIpO2lmKF8uaXNTdHJpbmcoZSkpe2k9ZTtlPWRvY3VtZW50fWVsc2Ugcz1zLnNsaWNlKDEpO3ZhciBuPSQoZSksbz1uLmZpbmQodCk7MCE9PXQubGFzdEluZGV4T2YoIi5uYi0iLDApJiYobz1vLmZpbmQoIltkYXRhLW5iXSIpKTtvLmVhY2goZnVuY3Rpb24odCxlKXt2YXIgbj1uYi5ibG9jayhlKXx8e307Xy5pc0Z1bmN0aW9uKG5baV0pJiZuW2ldLmFwcGx5KG4scykKfSl9O25iLmlzQW55U2VsZWN0T3BlbmVkPWZ1bmN0aW9uKCl7dmFyIHQ9JCgnW2RhdGEtbmI9InNlbGVjdCJdJyk7cmV0dXJuIF8uYW55KHQsZnVuY3Rpb24odCl7cmV0dXJuKG5iLmJsb2NrKHQpfHx7fSkuaXNPcGVufSl9O0phbmUuZGlzYWJsZUJ1dHRvbj1mdW5jdGlvbih0KXskKHQpLmVhY2goZnVuY3Rpb24oKXt2YXIgdD1uYi5ibG9jayh0aGlzKTt0JiZ0LmRpc2FibGUoKX0pfTtKYW5lLmVuYWJsZUJ1dHRvbj1mdW5jdGlvbih0KXskKHQpLmVhY2goZnVuY3Rpb24oKXt2YXIgdD1uYi5ibG9jayh0aGlzKTt0JiZ0LmVuYWJsZSgpfSl9O0phbmUuZW5hYmxlSW5wdXQ9SmFuZS5lbmFibGVCdXR0b247bmIuQmxvY2sucHJvdG90eXBlLmdldFlhdGVNb2R1bGVOYW1lPWZ1bmN0aW9uKCl7cmV0dXJuImphbmUtY29tbW9uIn07d2luZG93Lm5iPW5ifSk7</ActualData>
          </HTTPData>
        </HTTPDataSet>
        <IsExternalData>false</IsExternalData>
      </HTTPBody>
      <TcpPackets>
        <PacketInfo time="57692468" offset="0" length="16384" />
        <PacketInfo time="57692484" offset="16384" length="16384" />
        <PacketInfo time="57692484" offset="32768" length="16384" />
        <PacketInfo time="57692484" offset="49152" length="16384" />
        <PacketInfo time="57692500" offset="65536" length="2012" />
      </TcpPackets>
    </HTTPResponse>
  </HTTPTask>
</HTTPSnapshot>