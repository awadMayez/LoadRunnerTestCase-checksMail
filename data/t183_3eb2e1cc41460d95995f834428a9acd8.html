Jane.module("jane.common.js",function(){if(function(e,t){"use strict";"function"==typeof define&&define.amd?define(t):"object"==typeof exports?module.exports=t():e.returnExports=t()}(this,function(){function e(e){var t=typeof e;return null===e||"undefined"===t||"boolean"===t||"number"===t||"string"===t}var t,n=Array.prototype,r=Object.prototype,i=Function.prototype,o=String.prototype,a=Number.prototype,s=n.slice,u=n.splice,c=n.push,l=n.unshift,d=i.call,f=r.toString,h=Array.isArray||function(e){return"[object Array]"===f.call(e)
},p="function"==typeof Symbol&&"symbol"==typeof Symbol.toStringTag,g=Function.prototype.toString,m=function(e){try{return g.call(e),!0}catch(t){return!1}},v="[object Function]",_="[object GeneratorFunction]";t=function(e){if("function"!=typeof e)return!1;if(p)return m(e);var t=f.call(e);return t===v||t===_};var y,b=RegExp.prototype.exec,w=function(e){try{return b.call(e),!0}catch(t){return!1}},C="[object RegExp]";y=function(e){return"object"!=typeof e?!1:p?w(e):f.call(e)===C};var D,x=String.prototype.valueOf,T=function(e){try{return x.call(e),!0
}catch(t){return!1}},A="[object String]";D=function(e){return"string"==typeof e?!0:"object"!=typeof e?!1:p?T(e):f.call(e)===A};var k=function(e){var n=f.call(e),r="[object Arguments]"===n;return r||(r=!h(e)&&null!==e&&"object"==typeof e&&"number"==typeof e.length&&e.length>=0&&t(e.callee)),r},S=function(e){var t,n=Object.defineProperty&&function(){try{return Object.defineProperty({},"x",{}),!0}catch(e){return!1}}();return t=n?function(e,t,n,r){!r&&t in e||Object.defineProperty(e,t,{configurable:!0,enumerable:!1,writable:!0,value:n})
}:function(e,t,n,r){!r&&t in e||(e[t]=n)},function(n,r,i){for(var o in r)e.call(r,o)&&t(n,o,r[o],i)}}(r.hasOwnProperty),E={ToInteger:function(e){var t=+e;return t!==t?t=0:0!==t&&t!==1/0&&t!==-(1/0)&&(t=(t>0||-1)*Math.floor(Math.abs(t))),t},ToPrimitive:function(n){var r,i,o;if(e(n))return n;if(i=n.valueOf,t(i)&&(r=i.call(n),e(r)))return r;if(o=n.toString,t(o)&&(r=o.call(n),e(r)))return r;throw new TypeError},ToObject:function(e){if(null==e)throw new TypeError("can't convert "+e+" to object");return Object(e)
},ToUint32:function(e){return e>>>0}},M=function(){};S(i,{bind:function(e){var n=this;if(!t(n))throw new TypeError("Function.prototype.bind called on incompatible "+n);for(var r,i=s.call(arguments,1),o=function(){if(this instanceof r){var t=n.apply(this,i.concat(s.call(arguments)));return Object(t)===t?t:this}return n.apply(e,i.concat(s.call(arguments)))},a=Math.max(0,n.length-i.length),u=[],c=0;a>c;c++)u.push("$"+c);return r=Function("binder","return function ("+u.join(",")+"){ return binder.apply(this, arguments); }")(o),n.prototype&&(M.prototype=n.prototype,r.prototype=new M,M.prototype=null),r
}});var N=d.bind(r.hasOwnProperty),O=function(){var e=[1,2],t=e.splice();return 2===e.length&&h(t)&&0===t.length}();S(n,{splice:function(){return 0===arguments.length?[]:u.apply(this,arguments)}},!O);var F=function(){var e={};return n.splice.call(e,0,0,1),1===e.length}();S(n,{splice:function(e,t){if(0===arguments.length)return[];var n=arguments;return this.length=Math.max(E.ToInteger(this.length),0),arguments.length>0&&"number"!=typeof t&&(n=s.call(arguments),n.length<2?n.push(this.length-e):n[1]=E.ToInteger(t)),u.apply(this,n)
}},!F);var I=1!==[].unshift(0);S(n,{unshift:function(){return l.apply(this,arguments),this.length}},I),S(Array,{isArray:h});var R=Object("a"),P="a"!==R[0]||!(0 in R),B=function(e){var t=!0,n=!0;return e&&(e.call("foo",function(e,n,r){"object"!=typeof r&&(t=!1)}),e.call([1],function(){"use strict";n="string"==typeof this},"x")),!!e&&t&&n};S(n,{forEach:function(e){var n=E.ToObject(this),r=P&&D(this)?this.split(""):n,i=arguments[1],o=-1,a=r.length>>>0;if(!t(e))throw new TypeError;for(;++o<a;)o in r&&e.call(i,r[o],o,n)
}},!B(n.forEach)),S(n,{map:function(e){var n=E.ToObject(this),r=P&&D(this)?this.split(""):n,i=r.length>>>0,o=Array(i),a=arguments[1];if(!t(e))throw new TypeError(e+" is not a function");for(var s=0;i>s;s++)s in r&&(o[s]=e.call(a,r[s],s,n));return o}},!B(n.map)),S(n,{filter:function(e){var n,r=E.ToObject(this),i=P&&D(this)?this.split(""):r,o=i.length>>>0,a=[],s=arguments[1];if(!t(e))throw new TypeError(e+" is not a function");for(var u=0;o>u;u++)u in i&&(n=i[u],e.call(s,n,u,r)&&a.push(n));return a
}},!B(n.filter)),S(n,{every:function(e){var n=E.ToObject(this),r=P&&D(this)?this.split(""):n,i=r.length>>>0,o=arguments[1];if(!t(e))throw new TypeError(e+" is not a function");for(var a=0;i>a;a++)if(a in r&&!e.call(o,r[a],a,n))return!1;return!0}},!B(n.every)),S(n,{some:function(e){var n=E.ToObject(this),r=P&&D(this)?this.split(""):n,i=r.length>>>0,o=arguments[1];if(!t(e))throw new TypeError(e+" is not a function");for(var a=0;i>a;a++)if(a in r&&e.call(o,r[a],a,n))return!0;return!1}},!B(n.some));var L=!1;
n.reduce&&(L="object"==typeof n.reduce.call("es5",function(e,t,n,r){return r})),S(n,{reduce:function(e){var n=E.ToObject(this),r=P&&D(this)?this.split(""):n,i=r.length>>>0;if(!t(e))throw new TypeError(e+" is not a function");if(!i&&1===arguments.length)throw new TypeError("reduce of empty array with no initial value");var o,a=0;if(arguments.length>=2)o=arguments[1];else for(;;){if(a in r){o=r[a++];break}if(++a>=i)throw new TypeError("reduce of empty array with no initial value")}for(;i>a;a++)a in r&&(o=e.call(void 0,o,r[a],a,n));
return o}},!L);var j=!1;n.reduceRight&&(j="object"==typeof n.reduceRight.call("es5",function(e,t,n,r){return r})),S(n,{reduceRight:function(e){var n=E.ToObject(this),r=P&&D(this)?this.split(""):n,i=r.length>>>0;if(!t(e))throw new TypeError(e+" is not a function");if(!i&&1===arguments.length)throw new TypeError("reduceRight of empty array with no initial value");var o,a=i-1;if(arguments.length>=2)o=arguments[1];else for(;;){if(a in r){o=r[a--];break}if(--a<0)throw new TypeError("reduceRight of empty array with no initial value")
}if(0>a)return o;do a in r&&(o=e.call(void 0,o,r[a],a,n));while(a--);return o}},!j);var $=Array.prototype.indexOf&&-1!==[0,1].indexOf(1,2);S(n,{indexOf:function(e){var t=P&&D(this)?this.split(""):E.ToObject(this),n=t.length>>>0;if(!n)return-1;var r=0;for(arguments.length>1&&(r=E.ToInteger(arguments[1])),r=r>=0?r:Math.max(0,n+r);n>r;r++)if(r in t&&t[r]===e)return r;return-1}},$);var z=Array.prototype.lastIndexOf&&-1!==[0,1].lastIndexOf(0,-3);S(n,{lastIndexOf:function(e){var t=P&&D(this)?this.split(""):E.ToObject(this),n=t.length>>>0;
if(!n)return-1;var r=n-1;for(arguments.length>1&&(r=Math.min(r,E.ToInteger(arguments[1]))),r=r>=0?r:n-Math.abs(r);r>=0;r--)if(r in t&&e===t[r])return r;return-1}},z);var U=!{toString:null}.propertyIsEnumerable("toString"),H=function(){}.propertyIsEnumerable("prototype"),W=!N("x","0"),V=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],q=V.length;S(Object,{keys:function(e){var n=t(e),r=k(e),i=null!==e&&"object"==typeof e,o=i&&D(e);if(!i&&!n&&!r)throw new TypeError("Object.keys called on a non-object");
var a=[],s=H&&n;if(o&&W||r)for(var u=0;u<e.length;++u)a.push(String(u));if(!r)for(var c in e)s&&"prototype"===c||!N(e,c)||a.push(String(c));if(U)for(var l=e.constructor,d=l&&l.prototype===e,f=0;q>f;f++){var h=V[f];d&&"constructor"===h||!N(e,h)||a.push(h)}return a}});var Y=Object.keys&&function(){return 2===Object.keys(arguments).length}(1,2),K=Object.keys;S(Object,{keys:function(e){return K(k(e)?n.slice.call(e):e)}},!Y);var G=-621987552e5,X="-000001",J=Date.prototype.toISOString&&-1===new Date(G).toISOString().indexOf(X);
S(Date.prototype,{toISOString:function(){var e,t,n,r,i;if(!isFinite(this))throw new RangeError("Date.prototype.toISOString called on non-finite value.");for(r=this.getUTCFullYear(),i=this.getUTCMonth(),r+=Math.floor(i/12),i=(i%12+12)%12,e=[i+1,this.getUTCDate(),this.getUTCHours(),this.getUTCMinutes(),this.getUTCSeconds()],r=(0>r?"-":r>9999?"+":"")+("00000"+Math.abs(r)).slice(r>=0&&9999>=r?-4:-6),t=e.length;t--;)n=e[t],10>n&&(e[t]="0"+n);return r+"-"+e.slice(0,2).join("-")+"T"+e.slice(2).join(":")+"."+("000"+this.getUTCMilliseconds()).slice(-3)+"Z"
}},J);var Q=!1;try{Q=Date.prototype.toJSON&&null===new Date(0/0).toJSON()&&-1!==new Date(G).toJSON().indexOf(X)&&Date.prototype.toJSON.call({toISOString:function(){return!0}})}catch(Z){}Q||(Date.prototype.toJSON=function(){var e,t=Object(this),n=E.ToPrimitive(t);if("number"==typeof n&&!isFinite(n))return null;if(e=t.toISOString,"function"!=typeof e)throw new TypeError("toISOString property is not callable");return e.call(t)});var et=1e15===Date.parse("+033658-09-27T01:46:40.000Z"),tt=!isNaN(Date.parse("2012-04-04T24:00:00.500Z"))||!isNaN(Date.parse("2012-11-31T23:59:59.000Z")),nt=isNaN(Date.parse("2000-01-01T00:00:00.000Z"));
(!Date.parse||nt||tt||!et)&&(Date=function(e){function t(n,r,i,o,a,s,u){var c=arguments.length;if(this instanceof e){var l=1===c&&String(n)===n?new e(t.parse(n)):c>=7?new e(n,r,i,o,a,s,u):c>=6?new e(n,r,i,o,a,s):c>=5?new e(n,r,i,o,a):c>=4?new e(n,r,i,o):c>=3?new e(n,r,i):c>=2?new e(n,r):c>=1?new e(n):new e;return l.constructor=t,l}return e.apply(this,arguments)}function n(e,t){var n=t>1?1:0;return o[t]+Math.floor((e-1969+n)/4)-Math.floor((e-1901+n)/100)+Math.floor((e-1601+n)/400)+365*(e-1970)}function r(t){return Number(new e(1970,0,1,0,0,0,t))
}var i=new RegExp("^(\\d{4}|[+-]\\d{6})(?:-(\\d{2})(?:-(\\d{2})(?:T(\\d{2}):(\\d{2})(?::(\\d{2})(?:(\\.\\d{1,}))?)?(Z|(?:([-+])(\\d{2}):(\\d{2})))?)?)?)?$"),o=[0,31,59,90,120,151,181,212,243,273,304,334,365];for(var a in e)t[a]=e[a];return t.now=e.now,t.UTC=e.UTC,t.prototype=e.prototype,t.prototype.constructor=t,t.parse=function(t){var o=i.exec(t);if(o){var a,s=Number(o[1]),u=Number(o[2]||1)-1,c=Number(o[3]||1)-1,l=Number(o[4]||0),d=Number(o[5]||0),f=Number(o[6]||0),h=Math.floor(1e3*Number(o[7]||0)),p=Boolean(o[4]&&!o[8]),g="-"===o[9]?1:-1,m=Number(o[10]||0),v=Number(o[11]||0);
return(d>0||f>0||h>0?24:25)>l&&60>d&&60>f&&1e3>h&&u>-1&&12>u&&24>m&&60>v&&c>-1&&c<n(s,u+1)-n(s,u)&&(a=60*(24*(n(s,u)+c)+l+m*g),a=1e3*(60*(a+d+v*g)+f)+h,p&&(a=r(a)),a>=-864e13&&864e13>=a)?a:0/0}return e.parse.apply(this,arguments)},t}(Date)),Date.now||(Date.now=function(){return(new Date).getTime()});var rt=a.toFixed&&("0.000"!==8e-5.toFixed(3)||"1"!==.9.toFixed(0)||"1.25"!==1.255.toFixed(2)||"1000000000000000128"!==0xde0b6b3a7640080.toFixed(0)),it={base:1e7,size:6,data:[0,0,0,0,0,0],multiply:function(e,t){for(var n=-1;++n<it.size;)t+=e*it.data[n],it.data[n]=t%it.base,t=Math.floor(t/it.base)
},divide:function(e){for(var t=it.size,n=0;--t>=0;)n+=it.data[t],it.data[t]=Math.floor(n/e),n=n%e*it.base},numToString:function(){for(var e=it.size,t="";--e>=0;)if(""!==t||0===e||0!==it.data[e]){var n=String(it.data[e]);""===t?t=n:t+="0000000".slice(0,7-n.length)+n}return t},pow:function mt(e,t,n){return 0===t?n:t%2===1?mt(e,t-1,n*e):mt(e*e,t/2,n)},log:function(e){for(var t=0;e>=4096;)t+=12,e/=4096;for(;e>=2;)t+=1,e/=2;return t}};S(a,{toFixed:function(e){var t,n,r,i,o,a,s,u;if(t=Number(e),t=t!==t?0:Math.floor(t),0>t||t>20)throw new RangeError("Number.toFixed called with invalid number of decimals");
if(n=Number(this),n!==n)return"NaN";if(-1e21>=n||n>=1e21)return String(n);if(r="",0>n&&(r="-",n=-n),i="0",n>1e-21)if(o=it.log(n*it.pow(2,69,1))-69,a=0>o?n*it.pow(2,-o,1):n/it.pow(2,o,1),a*=4503599627370496,o=52-o,o>0){for(it.multiply(0,a),s=t;s>=7;)it.multiply(1e7,0),s-=7;for(it.multiply(it.pow(10,s,1),0),s=o-1;s>=23;)it.divide(1<<23),s-=23;it.divide(1<<s),it.multiply(1,1),it.divide(2),i=it.numToString()}else it.multiply(0,a),it.multiply(1<<-o,0),i=it.numToString()+"0.00000000000000000000".slice(2,2+t);
return t>0?(u=i.length,i=t>=u?r+"0.0000000000000000000".slice(0,t-u+2)+i:r+i.slice(0,u-t)+"."+i.slice(u-t)):i=r+i,i}},rt);var ot=o.split;2!=="ab".split(/(?:ab)*/).length||4!==".".split(/(.?)(.?)/).length||"t"==="tesst".split(/(s)*/)[1]||4!=="test".split(/(?:)/,-1).length||"".split(/.?/).length||".".split(/()()/).length>1?!function(){var e="undefined"==typeof/()??/.exec("")[1];o.split=function(t,n){var r=this;if("undefined"==typeof t&&0===n)return[];if(!y(t))return ot.call(this,t,n);var i,o,a,s,u=[],l=(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.extended?"x":"")+(t.sticky?"y":""),d=0;
for(t=new RegExp(t.source,l+"g"),r+="",e||(i=new RegExp("^"+t.source+"$(?!\\s)",l)),n="undefined"==typeof n?-1>>>0:E.ToUint32(n),o=t.exec(r);o&&(a=o.index+o[0].length,!(a>d&&(u.push(r.slice(d,o.index)),!e&&o.length>1&&o[0].replace(i,function(){for(var e=1;e<arguments.length-2;e++)"undefined"==typeof arguments[e]&&(o[e]=void 0)}),o.length>1&&o.index<r.length&&c.apply(u,o.slice(1)),s=o[0].length,d=a,u.length>=n)));)t.lastIndex===o.index&&t.lastIndex++,o=t.exec(r);return d===r.length?(s||!t.test(""))&&u.push(""):u.push(r.slice(d)),u.length>n?u.slice(0,n):u
}}():"0".split(void 0,0).length&&(o.split=function(e,t){return"undefined"==typeof e&&0===t?[]:ot.call(this,e,t)});var at=o.replace,st=function(){var e=[];return"x".replace(/x(.)?/g,function(t,n){e.push(n)}),1===e.length&&"undefined"==typeof e[0]}();st||(o.replace=function(e,n){var r=t(n),i=y(e)&&/\)[*?]/.test(e.source);if(r&&i){var o=function(t){var r=arguments.length,i=e.lastIndex;e.lastIndex=0;var o=e.exec(t)||[];return e.lastIndex=i,o.push(arguments[r-2],arguments[r-1]),n.apply(this,o)};return at.call(this,e,o)
}return at.call(this,e,n)});var ut=o.substr,ct="".substr&&"b"!=="0b".substr(-1);S(o,{substr:function(e,t){return ut.call(this,0>e&&(e=this.length+e)<0?0:e,t)}},ct);var lt="	\n\f\r   ᠎             　\u2028\u2029﻿",dt="​",ft="["+lt+"]",ht=new RegExp("^"+ft+ft+"*"),pt=new RegExp(ft+ft+"*$"),gt=o.trim&&(lt.trim()||!dt.trim());S(o,{trim:function(){if("undefined"==typeof this||null===this)throw new TypeError("can't convert "+this+" to object");return String(this).replace(ht,"").replace(pt,"")}},gt),(8!==parseInt(lt+"08")||22!==parseInt(lt+"0x16"))&&(parseInt=function(e){var t=/^0[xX]/;
return function(n,r){return n=String(n).trim(),Number(r)||(r=t.test(n)?16:10),e(n,r)}}(parseInt))}),function(e,t,n,r){"use strict";function i(e,t){for(var n=0,r=e.length;r>n;n++)g(e[n],t)}function o(e){for(var t,n=0,r=e.length;r>n;n++)t=e[n],C(t,L[s(t)])}function a(e){return function(t){nt(t)&&(g(t,e),i(t.querySelectorAll(j),e))}}function s(e){var t=e.getAttribute("is"),n=e.nodeName.toUpperCase(),r=z.call(B,t?I+t.toUpperCase():F+n);return t&&r>-1&&!u(n,t)?-1:r}function u(e,t){return-1<j.indexOf(e+'[is="'+t+'"]')
}function c(e){var t=e.currentTarget,n=e.attrChange,r=e.prevValue,i=e.newValue;pt&&t.attributeChangedCallback&&"style"!==e.attrName&&t.attributeChangedCallback(e.attrName,n===e[k]?null:r,n===e[E]?null:i)}function l(e){var t=a(e);return function(e){m.push(t,e.target)}}function d(e){ht&&(ht=!1,e.currentTarget.removeEventListener(N,d)),i((e.target||t).querySelectorAll(j),e.detail===T?T:x),tt&&p()}function f(e,t){var n=this;ot.call(n,e,t),v.call(n,{target:n})}function h(e,t){Q(e,t),b?b.observe(e,ut):(ft&&(e.setAttribute=f,e[D]=y(e),e.addEventListener(O,v)),e.addEventListener(M,c)),e.createdCallback&&pt&&(e.created=!0,e.createdCallback(),e.created=!1)
}function p(){for(var e,t=0,n=rt.length;n>t;t++)e=rt[t],$.contains(e)||(rt.splice(t,1),g(e,T))}function g(e,t){var n,r=s(e);r>-1&&(w(e,L[r]),r=0,t!==x||e[x]?t!==T||e[T]||(e[x]=!1,e[T]=!0,r=1):(e[T]=!1,e[x]=!0,r=1,tt&&z.call(rt,e)<0&&rt.push(e)),r&&(n=e[t+"Callback"])&&n.call(e))}if(!(r in t)){var m,v,_,y,b,w,C,D="__"+r+(1e5*Math.random()>>0),x="attached",T="detached",A="extends",k="ADDITION",S="MODIFICATION",E="REMOVAL",M="DOMAttrModified",N="DOMContentLoaded",O="DOMSubtreeModified",F="<",I="=",R=/^[A-Z][A-Z0-9]*(?:-[A-Z0-9]+)+$/,P=["ANNOTATION-XML","COLOR-PROFILE","FONT-FACE","FONT-FACE-SRC","FONT-FACE-URI","FONT-FACE-FORMAT","FONT-FACE-NAME","MISSING-GLYPH"],B=[],L=[],j="",$=t.documentElement,z=B.indexOf||function(e){for(var t=this.length;t--&&this[t]!==e;);return t
},U=n.prototype,H=U.hasOwnProperty,W=U.isPrototypeOf,V=n.defineProperty,q=n.getOwnPropertyDescriptor,Y=n.getOwnPropertyNames,K=n.getPrototypeOf,G=n.setPrototypeOf,X=!!n.__proto__,J=n.create||function gt(e){return e?(gt.prototype=e,new gt):this},Q=G||(X?function(e,t){return e.__proto__=t,e}:Y&&q?function(){function e(e,t){for(var n,r=Y(t),i=0,o=r.length;o>i;i++)n=r[i],H.call(e,n)||V(e,n,q(t,n))}return function(t,n){do e(t,n);while((n=K(n))&&!W.call(n,t));return t}}():function(e,t){for(var n in t)e[n]=t[n];
return e}),Z=e.MutationObserver||e.WebKitMutationObserver,et=(e.HTMLElement||e.Element||e.Node).prototype,tt=!W.call(et,$),nt=tt?function(e){return 1===e.nodeType}:function(e){return W.call(et,e)},rt=tt&&[],it=et.cloneNode,ot=et.setAttribute,at=et.removeAttribute,st=t.createElement,ut=Z&&{attributes:!0,characterData:!0,attributeOldValue:!0},ct=Z||function(){ft=!1,$.removeEventListener(M,ct)},lt=e.requestAnimationFrame||e.webkitRequestAnimationFrame||e.mozRequestAnimationFrame||e.msRequestAnimationFrame||function(e){setTimeout(e,10)
},dt=!1,ft=!0,ht=!0,pt=!0;G||X?(w=function(e,t){W.call(t,e)||h(e,t)},C=h):(w=function(e,t){e[D]||(e[D]=n(!0),h(e,t))},C=w),tt?(ft=!1,function(){var e=q(et,"addEventListener"),t=e.value,n=function(e){var t=new CustomEvent(M,{bubbles:!0});t.attrName=e,t.prevValue=this.getAttribute(e),t.newValue=null,t[E]=t.attrChange=2,at.call(this,e),this.dispatchEvent(t)},r=function(e,t){var n=this.hasAttribute(e),r=n&&this.getAttribute(e),i=new CustomEvent(M,{bubbles:!0});ot.call(this,e,t),i.attrName=e,i.prevValue=n?r:null,i.newValue=t,n?i[S]=i.attrChange=1:i[k]=i.attrChange=0,this.dispatchEvent(i)
},i=function(e){var t,n=e.currentTarget,r=n[D],i=e.propertyName;r.hasOwnProperty(i)&&(r=r[i],t=new CustomEvent(M,{bubbles:!0}),t.attrName=r.name,t.prevValue=r.value||null,t.newValue=r.value=n[i]||null,null==t.prevValue?t[k]=t.attrChange=0:t[S]=t.attrChange=1,n.dispatchEvent(t))};e.value=function(e,o,a){e===M&&this.attributeChangedCallback&&this.setAttribute!==r&&(this[D]={className:{name:"class",value:this.className}},this.setAttribute=r,this.removeAttribute=n,t.call(this,"propertychange",i)),t.call(this,e,o,a)
},V(et,"addEventListener",e)}()):Z||($.addEventListener(M,ct),$.setAttribute(D,1),$.removeAttribute(D),ft&&(v=function(e){var t,n,r,i=this;if(i===e.target){t=i[D],i[D]=n=y(i);for(r in n){if(!(r in t))return _(0,i,r,t[r],n[r],k);if(n[r]!==t[r])return _(1,i,r,t[r],n[r],S)}for(r in t)if(!(r in n))return _(2,i,r,t[r],n[r],E)}},_=function(e,t,n,r,i,o){var a={attrChange:e,currentTarget:t,attrName:n,prevValue:r,newValue:i};a[o]=e,c(a)},y=function(e){for(var t,n,r={},i=e.attributes,o=0,a=i.length;a>o;o++)t=i[o],n=t.name,"setAttribute"!==n&&(r[n]=t.value);
return r})),t[r]=function(e,n){if(r=e.toUpperCase(),dt||(dt=!0,Z?(b=function(e,t){function n(e,t){for(var n=0,r=e.length;r>n;t(e[n++]));}return new Z(function(r){for(var i,o,a=0,s=r.length;s>a;a++)i=r[a],"childList"===i.type?(n(i.addedNodes,e),n(i.removedNodes,t)):(o=i.target,pt&&o.attributeChangedCallback&&"style"!==i.attributeName&&o.attributeChangedCallback(i.attributeName,i.oldValue,o.getAttribute(i.attributeName)))})}(a(x),a(T)),b.observe(t,{childList:!0,subtree:!0})):(m=[],lt(function v(){for(;m.length;)m.shift().call(null,m.shift());
lt(v)}),t.addEventListener("DOMNodeInserted",l(x)),t.addEventListener("DOMNodeRemoved",l(T))),t.addEventListener(N,d),t.addEventListener("readystatechange",d),t.createElement=function(e,n){var r=st.apply(t,arguments),i=""+e,o=z.call(B,(n?I:F)+(n||i).toUpperCase()),a=o>-1;return n&&(r.setAttribute("is",n=n.toLowerCase()),a&&(a=u(i.toUpperCase(),n))),pt=!t.createElement.innerHTMLHelper,a&&C(r,L[o]),r},et.cloneNode=function(e){var t=it.call(this,!!e),n=s(t);return n>-1&&C(t,L[n]),e&&o(t.querySelectorAll(j)),t
}),-2<z.call(B,I+r)+z.call(B,F+r))throw new Error("A "+e+" type is already registered");if(!R.test(r)||-1<z.call(P,r))throw new Error("The type "+e+" is invalid");var r,c=function(){return h?t.createElement(p,r):t.createElement(p)},f=n||U,h=H.call(f,A),p=h?n[A].toUpperCase():r,g=B.push((h?I:F)+r)-1;return j=j.concat(j.length?",":"",h?p+'[is="'+e.toLowerCase()+'"]':p),c.prototype=L[g]=H.call(f,"prototype")?f.prototype:J(et),i(t.querySelectorAll(j),x),c}}}(window,document,Object,"registerElement"),function(){function e(e,t){if(e!==t){var n=null===e,r=e===C,i=e===e,o=null===t,a=t===C,s=t===t;
if(e>t&&!o||!i||n&&!a&&s||r&&s)return 1;if(t>e&&!n||!s||o&&!r&&i||a&&i)return-1}return 0}function t(e,t,n){for(var r=e.length,i=n?r:-1;n?i--:++i<r;)if(t(e[i],i,e))return i;return-1}function n(e,t,n){if(t!==t)return h(e,n);for(var r=n-1,i=e.length;++r<i;)if(e[r]===t)return r;return-1}function r(e){return"function"==typeof e||!1}function i(e){return null==e?"":e+""}function o(e,t){for(var n=-1,r=e.length;++n<r&&t.indexOf(e.charAt(n))>-1;);return n}function a(e,t){for(var n=e.length;n--&&t.indexOf(e.charAt(n))>-1;);return n
}function s(t,n){return e(t.criteria,n.criteria)||t.index-n.index}function u(t,n,r){for(var i=-1,o=t.criteria,a=n.criteria,s=o.length,u=r.length;++i<s;){var c=e(o[i],a[i]);if(c){if(i>=u)return c;var l=r[i];return c*("asc"===l||l===!0?1:-1)}}return t.index-n.index}function c(e){return zt[e]}function l(e){return Ut[e]}function d(e,t,n){return t?e=Vt[e]:n&&(e=qt[e]),"\\"+e}function f(e){return"\\"+qt[e]}function h(e,t,n){for(var r=e.length,i=t+(n?0:-1);n?i--:++i<r;){var o=e[i];if(o!==o)return i}return-1
}function p(e){return!!e&&"object"==typeof e}function g(e){return 160>=e&&e>=9&&13>=e||32==e||160==e||5760==e||6158==e||e>=8192&&(8202>=e||8232==e||8233==e||8239==e||8287==e||12288==e||65279==e)}function m(e,t){for(var n=-1,r=e.length,i=-1,o=[];++n<r;)e[n]===t&&(e[n]=z,o[++i]=n);return o}function v(e,t){for(var n,r=-1,i=e.length,o=-1,a=[];++r<i;){var s=e[r],u=t?t(s,r,e):s;r&&n===u||(n=u,a[++o]=s)}return a}function _(e){for(var t=-1,n=e.length;++t<n&&g(e.charCodeAt(t)););return t}function y(e){for(var t=e.length;t--&&g(e.charCodeAt(t)););return t
}function b(e){return Ht[e]}function w(g){function K(e){if(p(e)&&!Eu(e)&&!(e instanceof zt)){if(e instanceof et)return e;if(ts.call(e,"__chain__")&&ts.call(e,"__wrapped__"))return hi(e)}return new et(e)}function Q(){}function et(e,t,n){this.__wrapped__=e,this.__actions__=n||[],this.__chain__=!!t}function zt(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=Ss,this.__views__=[]}function Ut(){var e=new zt(this.__wrapped__);return e.__actions__=nn(this.__actions__),e.__dir__=this.__dir__,e.__filtered__=this.__filtered__,e.__iteratees__=nn(this.__iteratees__),e.__takeCount__=this.__takeCount__,e.__views__=nn(this.__views__),e
}function Ht(){if(this.__filtered__){var e=new zt(this);e.__dir__=-1,e.__filtered__=!0}else e=this.clone(),e.__dir__*=-1;return e}function Wt(){var e=this.__wrapped__.value(),t=this.__dir__,n=Eu(e),r=0>t,i=n?e.length:0,o=qr(0,i,this.__views__),a=o.start,s=o.end,u=s-a,c=r?s:a-1,l=this.__iteratees__,d=l.length,f=0,h=Ds(u,this.__takeCount__);if(!n||B>i||i==u&&h==u)return rr(e,this.__actions__);var p=[];e:for(;u--&&h>f;){c+=t;for(var g=-1,m=e[c];++g<d;){var v=l[g],_=v.iteratee,y=v.type,b=_(m);if(y==j)m=b;
else if(!b){if(y==L)continue e;break e}}p[f++]=m}return p}function Vt(){this.__data__={}}function qt(e){return this.has(e)&&delete this.__data__[e]}function Yt(e){return"__proto__"==e?C:this.__data__[e]}function Kt(e){return"__proto__"!=e&&ts.call(this.__data__,e)}function Gt(e,t){return"__proto__"!=e&&(this.__data__[e]=t),this}function Xt(e){var t=e?e.length:0;for(this.data={hash:vs(null),set:new ds};t--;)this.push(e[t])}function Jt(e,t){var n=e.data,r="string"==typeof t||Ro(t)?n.set.has(t):n.hash[t];
return r?0:-1}function Qt(e){var t=this.data;"string"==typeof e||Ro(e)?t.set.add(e):t.hash[e]=!0}function tn(e,t){for(var n=-1,r=e.length,i=-1,o=t.length,a=za(r+o);++n<r;)a[n]=e[n];for(;++i<o;)a[n++]=t[i];return a}function nn(e,t){var n=-1,r=e.length;for(t||(t=za(r));++n<r;)t[n]=e[n];return t}function rn(e,t){for(var n=-1,r=e.length;++n<r&&t(e[n],n,e)!==!1;);return e}function on(e,t){for(var n=e.length;n--&&t(e[n],n,e)!==!1;);return e}function an(e,t){for(var n=-1,r=e.length;++n<r;)if(!t(e[n],n,e))return!1;
return!0}function sn(e,t,n,r){for(var i=-1,o=e.length,a=r,s=a;++i<o;){var u=e[i],c=+t(u);n(c,a)&&(a=c,s=u)}return s}function un(e,t){for(var n=-1,r=e.length,i=-1,o=[];++n<r;){var a=e[n];t(a,n,e)&&(o[++i]=a)}return o}function cn(e,t){for(var n=-1,r=e.length,i=za(r);++n<r;)i[n]=t(e[n],n,e);return i}function ln(e,t){for(var n=-1,r=t.length,i=e.length;++n<r;)e[i+n]=t[n];return e}function dn(e,t,n,r){var i=-1,o=e.length;for(r&&o&&(n=e[++i]);++i<o;)n=t(n,e[i],i,e);return n}function fn(e,t,n,r){var i=e.length;
for(r&&i&&(n=e[--i]);i--;)n=t(n,e[i],i,e);return n}function hn(e,t){for(var n=-1,r=e.length;++n<r;)if(t(e[n],n,e))return!0;return!1}function pn(e,t){for(var n=e.length,r=0;n--;)r+=+t(e[n])||0;return r}function gn(e,t){return e===C?t:e}function mn(e,t,n,r){return e!==C&&ts.call(r,n)?e:t}function vn(e,t,n){for(var r=-1,i=$u(t),o=i.length;++r<o;){var a=i[r],s=e[a],u=n(s,t[a],a,e,t);(u===u?u===s:s!==s)&&(s!==C||a in e)||(e[a]=u)}return e}function _n(e,t){return null==t?e:bn(t,$u(t),e)}function yn(e,t){for(var n=-1,r=null==e,i=!r&&Jr(e),o=i?e.length:0,a=t.length,s=za(a);++n<a;){var u=t[n];
s[n]=i?Qr(u,o)?e[u]:C:r?C:e[u]}return s}function bn(e,t,n){n||(n={});for(var r=-1,i=t.length;++r<i;){var o=t[r];n[o]=e[o]}return n}function wn(e,t,n){var r=typeof e;return"function"==r?t===C?e:ar(e,t,n):null==e?Sa:"object"==r?$n(e):t===C?Ia(e):zn(e,t)}function Cn(e,t,n,r,i,o,a){var s;if(n&&(s=i?n(e,r,i):n(e)),s!==C)return s;if(!Ro(e))return e;var u=Eu(e);if(u){if(s=Yr(e),!t)return nn(e,s)}else{var c=rs.call(e),l=c==Y;if(c!=X&&c!=U&&(!l||i))return $t[c]?Gr(e,c,t):i?e:{};if(s=Kr(l?{}:e),!t)return _n(s,e)
}o||(o=[]),a||(a=[]);for(var d=o.length;d--;)if(o[d]==e)return a[d];return o.push(e),a.push(s),(u?rn:On)(e,function(r,i){s[i]=Cn(r,t,n,i,e,o,a)}),s}function Dn(e,t,n){if("function"!=typeof e)throw new Xa($);return fs(function(){e.apply(C,n)},t)}function xn(e,t){var r=e?e.length:0,i=[];if(!r)return i;var o=-1,a=Hr(),s=a===n,u=s&&t.length>=B?gr(t):null,c=t.length;u&&(a=Jt,s=!1,t=u);e:for(;++o<r;){var l=e[o];if(s&&l===l){for(var d=c;d--;)if(t[d]===l)continue e;i.push(l)}else a(t,l,0)<0&&i.push(l)}return i
}function Tn(e,t){var n=!0;return Ps(e,function(e,r,i){return n=!!t(e,r,i)}),n}function An(e,t,n,r){var i=r,o=i;return Ps(e,function(e,a,s){var u=+t(e,a,s);(n(u,i)||u===r&&u===o)&&(i=u,o=e)}),o}function kn(e,t,n,r){var i=e.length;for(n=null==n?0:+n||0,0>n&&(n=-n>i?0:i+n),r=r===C||r>i?i:+r||0,0>r&&(r+=i),i=n>r?0:r>>>0,n>>>=0;i>n;)e[n++]=t;return e}function Sn(e,t){var n=[];return Ps(e,function(e,r,i){t(e,r,i)&&n.push(e)}),n}function En(e,t,n,r){var i;return n(e,function(e,n,o){return t(e,n,o)?(i=r?n:e,!1):void 0
}),i}function Mn(e,t,n,r){r||(r=[]);for(var i=-1,o=e.length;++i<o;){var a=e[i];p(a)&&Jr(a)&&(n||Eu(a)||Ao(a))?t?Mn(a,t,n,r):ln(r,a):n||(r[r.length]=a)}return r}function Nn(e,t){return Ls(e,t,ta)}function On(e,t){return Ls(e,t,$u)}function Fn(e,t){return js(e,t,$u)}function In(e,t){for(var n=-1,r=t.length,i=-1,o=[];++n<r;){var a=t[n];Io(e[a])&&(o[++i]=a)}return o}function Rn(e,t,n){if(null!=e){n!==C&&n in di(e)&&(t=[n]);for(var r=0,i=t.length;null!=e&&i>r;)e=e[t[r++]];return r&&r==i?e:C}}function Pn(e,t,n,r,i,o){return e===t?!0:null==e||null==t||!Ro(e)&&!p(t)?e!==e&&t!==t:Bn(e,t,Pn,n,r,i,o)
}function Bn(e,t,n,r,i,o,a){var s=Eu(e),u=Eu(t),c=H,l=H;s||(c=rs.call(e),c==U?c=X:c!=X&&(s=Wo(e))),u||(l=rs.call(t),l==U?l=X:l!=X&&(u=Wo(t)));var d=c==X,f=l==X,h=c==l;if(h&&!s&&!d)return jr(e,t,c);if(!i){var p=d&&ts.call(e,"__wrapped__"),g=f&&ts.call(t,"__wrapped__");if(p||g)return n(p?e.value():e,g?t.value():t,r,i,o,a)}if(!h)return!1;o||(o=[]),a||(a=[]);for(var m=o.length;m--;)if(o[m]==e)return a[m]==t;o.push(e),a.push(t);var v=(s?Lr:$r)(e,t,n,r,i,o,a);return o.pop(),a.pop(),v}function Ln(e,t,n){var r=t.length,i=r,o=!n;
if(null==e)return!i;for(e=di(e);r--;){var a=t[r];if(o&&a[2]?a[1]!==e[a[0]]:!(a[0]in e))return!1}for(;++r<i;){a=t[r];var s=a[0],u=e[s],c=a[1];if(o&&a[2]){if(u===C&&!(s in e))return!1}else{var l=n?n(u,c,s):C;if(!(l===C?Pn(c,u,n,!0):l))return!1}}return!0}function jn(e,t){var n=-1,r=Jr(e)?za(e.length):[];return Ps(e,function(e,i,o){r[++n]=t(e,i,o)}),r}function $n(e){var t=Wr(e);if(1==t.length&&t[0][2]){var n=t[0][0],r=t[0][1];return function(e){return null==e?!1:e[n]===r&&(r!==C||n in di(e))}}return function(e){return Ln(e,t)
}}function zn(e,t){var n=Eu(e),r=ei(e)&&ri(t),i=e+"";return e=fi(e),function(o){if(null==o)return!1;var a=i;if(o=di(o),!(!n&&r||a in o)){if(o=1==e.length?o:Rn(o,Gn(e,0,-1)),null==o)return!1;a=Ai(e),o=di(o)}return o[a]===t?t!==C||a in o:Pn(t,o[a],C,!0)}}function Un(e,t,n,r,i){if(!Ro(e))return e;var o=Jr(t)&&(Eu(t)||Wo(t)),a=o?C:$u(t);return rn(a||t,function(s,u){if(a&&(u=s,s=t[u]),p(s))r||(r=[]),i||(i=[]),Hn(e,t,u,Un,n,r,i);else{var c=e[u],l=n?n(c,s,u,e,t):C,d=l===C;d&&(l=s),l===C&&(!o||u in e)||!d&&(l===l?l===c:c!==c)||(e[u]=l)
}}),e}function Hn(e,t,n,r,i,o,a){for(var s=o.length,u=t[n];s--;)if(o[s]==u)return void(e[n]=a[s]);var c=e[n],l=i?i(c,u,n,e,t):C,d=l===C;d&&(l=u,Jr(u)&&(Eu(u)||Wo(u))?l=Eu(c)?c:Jr(c)?nn(c):[]:zo(u)||Ao(u)?l=Ao(c)?Go(c):zo(c)?c:{}:d=!1),o.push(u),a.push(l),d?e[n]=r(l,u,i,o,a):(l===l?l!==c:c===c)&&(e[n]=l)}function Wn(e){return function(t){return null==t?C:t[e]}}function Vn(e){var t=e+"";return e=fi(e),function(n){return Rn(n,e,t)}}function qn(e,t){for(var n=e?t.length:0;n--;){var r=t[n];if(r!=i&&Qr(r)){var i=r;
hs.call(e,r,1)}}return e}function Yn(e,t){return e+_s(As()*(t-e+1))}function Kn(e,t,n,r,i){return i(e,function(e,i,o){n=r?(r=!1,e):t(n,e,i,o)}),n}function Gn(e,t,n){var r=-1,i=e.length;t=null==t?0:+t||0,0>t&&(t=-t>i?0:i+t),n=n===C||n>i?i:+n||0,0>n&&(n+=i),i=t>n?0:n-t>>>0,t>>>=0;for(var o=za(i);++r<i;)o[r]=e[r+t];return o}function Xn(e,t){var n;return Ps(e,function(e,r,i){return n=t(e,r,i),!n}),!!n}function Jn(e,t){var n=e.length;for(e.sort(t);n--;)e[n]=e[n].value;return e}function Qn(e,t,n){var r=zr(),i=-1;
t=cn(t,function(e){return r(e)});var o=jn(e,function(e){var n=cn(t,function(t){return t(e)});return{criteria:n,index:++i,value:e}});return Jn(o,function(e,t){return u(e,t,n)})}function Zn(e,t){var n=0;return Ps(e,function(e,r,i){n+=+t(e,r,i)||0}),n}function er(e,t){var r=-1,i=Hr(),o=e.length,a=i===n,s=a&&o>=B,u=s?gr():null,c=[];u?(i=Jt,a=!1):(s=!1,u=t?[]:c);e:for(;++r<o;){var l=e[r],d=t?t(l,r,e):l;if(a&&l===l){for(var f=u.length;f--;)if(u[f]===d)continue e;t&&u.push(d),c.push(l)}else i(u,d,0)<0&&((t||s)&&u.push(d),c.push(l))
}return c}function tr(e,t){for(var n=-1,r=t.length,i=za(r);++n<r;)i[n]=e[t[n]];return i}function nr(e,t,n,r){for(var i=e.length,o=r?i:-1;(r?o--:++o<i)&&t(e[o],o,e););return n?Gn(e,r?0:o,r?o+1:i):Gn(e,r?o+1:0,r?i:o)}function rr(e,t){var n=e;n instanceof zt&&(n=n.value());for(var r=-1,i=t.length;++r<i;){var o=t[r];n=o.func.apply(o.thisArg,ln([n],o.args))}return n}function ir(e,t,n){var r=0,i=e?e.length:r;if("number"==typeof t&&t===t&&Ns>=i){for(;i>r;){var o=r+i>>>1,a=e[o];(n?t>=a:t>a)&&null!==a?r=o+1:i=o
}return i}return or(e,t,Sa,n)}function or(e,t,n,r){t=n(t);for(var i=0,o=e?e.length:0,a=t!==t,s=null===t,u=t===C;o>i;){var c=_s((i+o)/2),l=n(e[c]),d=l!==C,f=l===l;if(a)var h=f||r;else h=s?f&&d&&(r||null!=l):u?f&&(r||d):null==l?!1:r?t>=l:t>l;h?i=c+1:o=c}return Ds(o,Ms)}function ar(e,t,n){if("function"!=typeof e)return Sa;if(t===C)return e;switch(n){case 1:return function(n){return e.call(t,n)};case 3:return function(n,r,i){return e.call(t,n,r,i)};case 4:return function(n,r,i,o){return e.call(t,n,r,i,o)
};case 5:return function(n,r,i,o,a){return e.call(t,n,r,i,o,a)}}return function(){return e.apply(t,arguments)}}function sr(e){var t=new as(e.byteLength),n=new ps(t);return n.set(new ps(e)),t}function ur(e,t,n){for(var r=n.length,i=-1,o=Cs(e.length-r,0),a=-1,s=t.length,u=za(s+o);++a<s;)u[a]=t[a];for(;++i<r;)u[n[i]]=e[i];for(;o--;)u[a++]=e[i++];return u}function cr(e,t,n){for(var r=-1,i=n.length,o=-1,a=Cs(e.length-i,0),s=-1,u=t.length,c=za(a+u);++o<a;)c[o]=e[o];for(var l=o;++s<u;)c[l+s]=t[s];for(;++r<i;)c[l+n[r]]=e[o++];
return c}function lr(e,t){return function(n,r,i){var o=t?t():{};if(r=zr(r,i,3),Eu(n))for(var a=-1,s=n.length;++a<s;){var u=n[a];e(o,u,r(u,a,n),n)}else Ps(n,function(t,n,i){e(o,t,r(t,n,i),i)});return o}}function dr(e){return _o(function(t,n){var r=-1,i=null==t?0:n.length,o=i>2?n[i-2]:C,a=i>2?n[2]:C,s=i>1?n[i-1]:C;for("function"==typeof o?(o=ar(o,s,5),i-=2):(o="function"==typeof s?s:C,i-=o?1:0),a&&Zr(n[0],n[1],a)&&(o=3>i?C:o,i=1);++r<i;){var u=n[r];u&&e(t,u,o)}return t})}function fr(e,t){return function(n,r){var i=n?Us(n):0;
if(!ni(i))return e(n,r);for(var o=t?i:-1,a=di(n);(t?o--:++o<i)&&r(a[o],o,a)!==!1;);return n}}function hr(e){return function(t,n,r){for(var i=di(t),o=r(t),a=o.length,s=e?a:-1;e?s--:++s<a;){var u=o[s];if(n(i[u],u,i)===!1)break}return t}}function pr(e,t){function n(){var i=this&&this!==Zt&&this instanceof n?r:e;return i.apply(t,arguments)}var r=vr(e);return n}function gr(e){return vs&&ds?new Xt(e):null}function mr(e){return function(t){for(var n=-1,r=Ta(da(t)),i=r.length,o="";++n<i;)o=e(o,r[n],n);return o
}}function vr(e){return function(){var t=arguments;switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3]);case 5:return new e(t[0],t[1],t[2],t[3],t[4]);case 6:return new e(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6])}var n=Rs(e.prototype),r=e.apply(n,t);return Ro(r)?r:n}}function _r(e){function t(n,r,i){i&&Zr(n,r,i)&&(r=C);var o=Br(n,e,C,C,C,C,C,r);
return o.placeholder=t.placeholder,o}return t}function yr(e,t){return _o(function(n){var r=n[0];return null==r?r:(n.push(t),e.apply(C,n))})}function br(e,t){return function(n,r,i){if(i&&Zr(n,r,i)&&(r=C),r=zr(r,i,3),1==r.length){n=Eu(n)?n:li(n);var o=sn(n,r,e,t);if(!n.length||o!==t)return o}return An(n,r,e,t)}}function wr(e,n){return function(r,i,o){if(i=zr(i,o,3),Eu(r)){var a=t(r,i,n);return a>-1?r[a]:C}return En(r,i,e)}}function Cr(e){return function(n,r,i){return n&&n.length?(r=zr(r,i,3),t(n,r,e)):-1
}}function Dr(e){return function(t,n,r){return n=zr(n,r,3),En(t,n,e,!0)}}function xr(e){return function(){for(var t,n=arguments.length,r=e?n:-1,i=0,o=za(n);e?r--:++r<n;){var a=o[i++]=arguments[r];if("function"!=typeof a)throw new Xa($);!t&&et.prototype.thru&&"wrapper"==Ur(a)&&(t=new et([],!0))}for(r=t?-1:n;++r<n;){a=o[r];var s=Ur(a),u="wrapper"==s?zs(a):C;t=u&&ti(u[0])&&u[1]==(N|k|E|O)&&!u[4].length&&1==u[9]?t[Ur(u[0])].apply(t,u[3]):1==a.length&&ti(a)?t[s]():t.thru(a)}return function(){var e=arguments,r=e[0];
if(t&&1==e.length&&Eu(r)&&r.length>=B)return t.plant(r).value();for(var i=0,a=n?o[i].apply(this,e):r;++i<n;)a=o[i].call(this,a);return a}}}function Tr(e,t){return function(n,r,i){return"function"==typeof r&&i===C&&Eu(n)?e(n,r):t(n,ar(r,i,3))}}function Ar(e){return function(t,n,r){return("function"!=typeof n||r!==C)&&(n=ar(n,r,3)),e(t,n,ta)}}function kr(e){return function(t,n,r){return("function"!=typeof n||r!==C)&&(n=ar(n,r,3)),e(t,n)}}function Sr(e){return function(t,n,r){var i={};return n=zr(n,r,3),On(t,function(t,r,o){var a=n(t,r,o);
r=e?a:r,t=e?t:a,i[r]=t}),i}}function Er(e){return function(t,n,r){return t=i(t),(e?t:"")+Fr(t,n,r)+(e?"":t)}}function Mr(e){var t=_o(function(n,r){var i=m(r,t.placeholder);return Br(n,e,C,r,i)});return t}function Nr(e,t){return function(n,r,i,o){var a=arguments.length<3;return"function"==typeof r&&o===C&&Eu(n)?e(n,r,i,a):Kn(n,zr(r,o,4),i,a,t)}}function Or(e,t,n,r,i,o,a,s,u,c){function l(){for(var y=arguments.length,b=y,w=za(y);b--;)w[b]=arguments[b];if(r&&(w=ur(w,r,i)),o&&(w=cr(w,o,a)),p||v){var D=l.placeholder,A=m(w,D);
if(y-=A.length,c>y){var k=s?nn(s):C,S=Cs(c-y,0),N=p?A:C,O=p?C:A,F=p?w:C,I=p?C:w;t|=p?E:M,t&=~(p?M:E),g||(t&=~(x|T));var R=[e,t,n,F,N,I,O,k,u,S],P=Or.apply(C,R);return ti(e)&&Hs(P,R),P.placeholder=D,P}}var B=f?n:this,L=h?B[e]:e;return s&&(w=ui(w,s)),d&&u<w.length&&(w.length=u),this&&this!==Zt&&this instanceof l&&(L=_||vr(e)),L.apply(B,w)}var d=t&N,f=t&x,h=t&T,p=t&k,g=t&A,v=t&S,_=h?C:vr(e);return l}function Fr(e,t,n){var r=e.length;if(t=+t,r>=t||!bs(t))return"";var i=t-r;return n=null==n?" ":n+"",va(n,ms(i/n.length)).slice(0,i)
}function Ir(e,t,n,r){function i(){for(var t=-1,s=arguments.length,u=-1,c=r.length,l=za(c+s);++u<c;)l[u]=r[u];for(;s--;)l[u++]=arguments[++t];var d=this&&this!==Zt&&this instanceof i?a:e;return d.apply(o?n:this,l)}var o=t&x,a=vr(e);return i}function Rr(e){var t=Va[e];return function(e,n){return n=n===C?0:+n||0,n?(n=cs(10,n),t(e*n)/n):t(e)}}function Pr(e){return function(t,n,r,i){var o=zr(r);return null==r&&o===wn?ir(t,n,e):or(t,n,o(r,i,1),e)}}function Br(e,t,n,r,i,o,a,s){var u=t&T;if(!u&&"function"!=typeof e)throw new Xa($);
var c=r?r.length:0;if(c||(t&=~(E|M),r=i=C),c-=i?i.length:0,t&M){var l=r,d=i;r=i=C}var f=u?C:zs(e),h=[e,t,n,r,i,l,d,o,a,s];if(f&&(ii(h,f),t=h[1],s=h[9]),h[9]=null==s?u?0:e.length:Cs(s-c,0)||0,t==x)var p=pr(h[0],h[2]);else p=t!=E&&t!=(x|E)||h[4].length?Or.apply(C,h):Ir.apply(C,h);var g=f?$s:Hs;return g(p,h)}function Lr(e,t,n,r,i,o,a){var s=-1,u=e.length,c=t.length;if(u!=c&&!(i&&c>u))return!1;for(;++s<u;){var l=e[s],d=t[s],f=r?r(i?d:l,i?l:d,s):C;if(f!==C){if(f)continue;return!1}if(i){if(!hn(t,function(e){return l===e||n(l,e,r,i,o,a)
}))return!1}else if(l!==d&&!n(l,d,r,i,o,a))return!1}return!0}function jr(e,t,n){switch(n){case W:case V:return+e==+t;case q:return e.name==t.name&&e.message==t.message;case G:return e!=+e?t!=+t:e==+t;case J:case Z:return e==t+""}return!1}function $r(e,t,n,r,i,o,a){var s=$u(e),u=s.length,c=$u(t),l=c.length;if(u!=l&&!i)return!1;for(var d=u;d--;){var f=s[d];if(!(i?f in t:ts.call(t,f)))return!1}for(var h=i;++d<u;){f=s[d];var p=e[f],g=t[f],m=r?r(i?g:p,i?p:g,f):C;if(!(m===C?n(p,g,r,i,o,a):m))return!1;h||(h="constructor"==f)
}if(!h){var v=e.constructor,_=t.constructor;if(v!=_&&"constructor"in e&&"constructor"in t&&!("function"==typeof v&&v instanceof v&&"function"==typeof _&&_ instanceof _))return!1}return!0}function zr(e,t,n){var r=K.callback||Aa;return r=r===Aa?wn:r,n?r(e,t,n):r}function Ur(e){for(var t=e.name+"",n=Is[t],r=n?n.length:0;r--;){var i=n[r],o=i.func;if(null==o||o==e)return i.name}return t}function Hr(e,t,r){var i=K.indexOf||xi;return i=i===xi?n:i,e?i(e,t,r):i}function Wr(e){for(var t=na(e),n=t.length;n--;)t[n][2]=ri(t[n][1]);
return t}function Vr(e,t){var n=null==e?C:e[t];return Lo(n)?n:C}function qr(e,t,n){for(var r=-1,i=n.length;++r<i;){var o=n[r],a=o.size;switch(o.type){case"drop":e+=a;break;case"dropRight":t-=a;break;case"take":t=Ds(t,e+a);break;case"takeRight":e=Cs(e,t-a)}}return{start:e,end:t}}function Yr(e){var t=e.length,n=new e.constructor(t);return t&&"string"==typeof e[0]&&ts.call(e,"index")&&(n.index=e.index,n.input=e.input),n}function Kr(e){var t=e.constructor;return"function"==typeof t&&t instanceof t||(t=Ya),new t
}function Gr(e,t,n){var r=e.constructor;switch(t){case tt:return sr(e);case W:case V:return new r(+e);case nt:case rt:case it:case ot:case at:case st:case ut:case ct:case lt:var i=e.buffer;return new r(n?sr(i):i,e.byteOffset,e.length);case G:case Z:return new r(e);case J:var o=new r(e.source,Et.exec(e));o.lastIndex=e.lastIndex}return o}function Xr(e,t,n){null==e||ei(t,e)||(t=fi(t),e=1==t.length?e:Rn(e,Gn(t,0,-1)),t=Ai(t));var r=null==e?e:e[t];return null==r?C:r.apply(e,n)}function Jr(e){return null!=e&&ni(Us(e))
}function Qr(e,t){return e="number"==typeof e||Ot.test(e)?+e:-1,t=null==t?Os:t,e>-1&&e%1==0&&t>e}function Zr(e,t,n){if(!Ro(n))return!1;var r=typeof t;if("number"==r?Jr(n)&&Qr(t,n.length):"string"==r&&t in n){var i=n[t];return e===e?e===i:i!==i}return!1}function ei(e,t){var n=typeof e;if("string"==n&&Ct.test(e)||"number"==n)return!0;if(Eu(e))return!1;var r=!wt.test(e);return r||null!=t&&e in di(t)}function ti(e){var t=Ur(e),n=K[t];if("function"!=typeof n||!(t in zt.prototype))return!1;if(e===n)return!0;
var r=zs(n);return!!r&&e===r[0]}function ni(e){return"number"==typeof e&&e>-1&&e%1==0&&Os>=e}function ri(e){return e===e&&!Ro(e)}function ii(e,t){var n=e[1],r=t[1],i=n|r,o=N>i,a=r==N&&n==k||r==N&&n==O&&e[7].length<=t[8]||r==(N|O)&&n==k;if(!o&&!a)return e;r&x&&(e[2]=t[2],i|=n&x?0:A);var s=t[3];if(s){var u=e[3];e[3]=u?ur(u,s,t[4]):nn(s),e[4]=u?m(e[3],z):nn(t[4])}return s=t[5],s&&(u=e[5],e[5]=u?cr(u,s,t[6]):nn(s),e[6]=u?m(e[5],z):nn(t[6])),s=t[7],s&&(e[7]=nn(s)),r&N&&(e[8]=null==e[8]?t[8]:Ds(e[8],t[8])),null==e[9]&&(e[9]=t[9]),e[0]=t[0],e[1]=i,e
}function oi(e,t){return e===C?t:Mu(e,t,oi)}function ai(e,t){e=di(e);for(var n=-1,r=t.length,i={};++n<r;){var o=t[n];o in e&&(i[o]=e[o])}return i}function si(e,t){var n={};return Nn(e,function(e,r,i){t(e,r,i)&&(n[r]=e)}),n}function ui(e,t){for(var n=e.length,r=Ds(t.length,n),i=nn(e);r--;){var o=t[r];e[r]=Qr(o,n)?i[o]:C}return e}function ci(e){for(var t=ta(e),n=t.length,r=n&&e.length,i=!!r&&ni(r)&&(Eu(e)||Ao(e)),o=-1,a=[];++o<n;){var s=t[o];(i&&Qr(s,r)||ts.call(e,s))&&a.push(s)}return a}function li(e){return null==e?[]:Jr(e)?Ro(e)?e:Ya(e):aa(e)
}function di(e){return Ro(e)?e:Ya(e)}function fi(e){if(Eu(e))return e;var t=[];return i(e).replace(Dt,function(e,n,r,i){t.push(r?i.replace(kt,"$1"):n||e)}),t}function hi(e){return e instanceof zt?e.clone():new et(e.__wrapped__,e.__chain__,nn(e.__actions__))}function pi(e,t,n){t=(n?Zr(e,t,n):null==t)?1:Cs(_s(t)||1,1);for(var r=0,i=e?e.length:0,o=-1,a=za(ms(i/t));i>r;)a[++o]=Gn(e,r,r+=t);return a}function gi(e){for(var t=-1,n=e?e.length:0,r=-1,i=[];++t<n;){var o=e[t];o&&(i[++r]=o)}return i}function mi(e,t,n){var r=e?e.length:0;
return r?((n?Zr(e,t,n):null==t)&&(t=1),Gn(e,0>t?0:t)):[]}function vi(e,t,n){var r=e?e.length:0;return r?((n?Zr(e,t,n):null==t)&&(t=1),t=r-(+t||0),Gn(e,0,0>t?0:t)):[]}function _i(e,t,n){return e&&e.length?nr(e,zr(t,n,3),!0,!0):[]}function yi(e,t,n){return e&&e.length?nr(e,zr(t,n,3),!0):[]}function bi(e,t,n,r){var i=e?e.length:0;return i?(n&&"number"!=typeof n&&Zr(e,t,n)&&(n=0,r=i),kn(e,t,n,r)):[]}function wi(e){return e?e[0]:C}function Ci(e,t,n){var r=e?e.length:0;return n&&Zr(e,t,n)&&(t=!1),r?Mn(e,t):[]
}function Di(e){var t=e?e.length:0;return t?Mn(e,!0):[]}function xi(e,t,r){var i=e?e.length:0;if(!i)return-1;if("number"==typeof r)r=0>r?Cs(i+r,0):r;else if(r){var o=ir(e,t);return i>o&&(t===t?t===e[o]:e[o]!==e[o])?o:-1}return n(e,t,r||0)}function Ti(e){return vi(e,1)}function Ai(e){var t=e?e.length:0;return t?e[t-1]:C}function ki(e,t,n){var r=e?e.length:0;if(!r)return-1;var i=r;if("number"==typeof n)i=(0>n?Cs(r+n,0):Ds(n||0,r-1))+1;else if(n){i=ir(e,t,!0)-1;var o=e[i];return(t===t?t===o:o!==o)?i:-1
}if(t!==t)return h(e,i,!0);for(;i--;)if(e[i]===t)return i;return-1}function Si(){var e=arguments,t=e[0];if(!t||!t.length)return t;for(var n=0,r=Hr(),i=e.length;++n<i;)for(var o=0,a=e[n];(o=r(t,a,o))>-1;)hs.call(t,o,1);return t}function Ei(e,t,n){var r=[];if(!e||!e.length)return r;var i=-1,o=[],a=e.length;for(t=zr(t,n,3);++i<a;){var s=e[i];t(s,i,e)&&(r.push(s),o.push(i))}return qn(e,o),r}function Mi(e){return mi(e,1)}function Ni(e,t,n){var r=e?e.length:0;return r?(n&&"number"!=typeof n&&Zr(e,t,n)&&(t=0,n=r),Gn(e,t,n)):[]
}function Oi(e,t,n){var r=e?e.length:0;return r?((n?Zr(e,t,n):null==t)&&(t=1),Gn(e,0,0>t?0:t)):[]}function Fi(e,t,n){var r=e?e.length:0;return r?((n?Zr(e,t,n):null==t)&&(t=1),t=r-(+t||0),Gn(e,0>t?0:t)):[]}function Ii(e,t,n){return e&&e.length?nr(e,zr(t,n,3),!1,!0):[]}function Ri(e,t,n){return e&&e.length?nr(e,zr(t,n,3)):[]}function Pi(e,t,r,i){var o=e?e.length:0;if(!o)return[];null!=t&&"boolean"!=typeof t&&(i=r,r=Zr(e,t,i)?C:t,t=!1);var a=zr();return(null!=r||a!==wn)&&(r=a(r,i,3)),t&&Hr()===n?v(e,r):er(e,r)
}function Bi(e){if(!e||!e.length)return[];var t=-1,n=0;e=un(e,function(e){return Jr(e)?(n=Cs(e.length,n),!0):void 0});for(var r=za(n);++t<n;)r[t]=cn(e,Wn(t));return r}function Li(e,t,n){var r=e?e.length:0;if(!r)return[];var i=Bi(e);return null==t?i:(t=ar(t,n,4),cn(i,function(e){return dn(e,t,C,!0)}))}function ji(){for(var e=-1,t=arguments.length;++e<t;){var n=arguments[e];if(Jr(n))var r=r?ln(xn(r,n),xn(n,r)):n}return r?er(r):[]}function $i(e,t){var n=-1,r=e?e.length:0,i={};for(!r||t||Eu(e[0])||(t=[]);++n<r;){var o=e[n];
t?i[o]=t[n]:o&&(i[o[0]]=o[1])}return i}function zi(e){var t=K(e);return t.__chain__=!0,t}function Ui(e,t,n){return t.call(n,e),e}function Hi(e,t,n){return t.call(n,e)}function Wi(){return zi(this)}function Vi(){return new et(this.value(),this.__chain__)}function qi(e){for(var t,n=this;n instanceof Q;){var r=hi(n);t?i.__wrapped__=r:t=r;var i=r;n=n.__wrapped__}return i.__wrapped__=e,t}function Yi(){var e=this.__wrapped__,t=function(e){return e.reverse()};if(e instanceof zt){var n=e;return this.__actions__.length&&(n=new zt(this)),n=n.reverse(),n.__actions__.push({func:Hi,args:[t],thisArg:C}),new et(n,this.__chain__)
}return this.thru(t)}function Ki(){return this.value()+""}function Gi(){return rr(this.__wrapped__,this.__actions__)}function Xi(e,t,n){var r=Eu(e)?an:Tn;return n&&Zr(e,t,n)&&(t=C),("function"!=typeof t||n!==C)&&(t=zr(t,n,3)),r(e,t)}function Ji(e,t,n){var r=Eu(e)?un:Sn;return t=zr(t,n,3),r(e,t)}function Qi(e,t){return iu(e,$n(t))}function Zi(e,t,n,r){var i=e?Us(e):0;return ni(i)||(e=aa(e),i=e.length),n="number"!=typeof n||r&&Zr(t,n,r)?0:0>n?Cs(i+n,0):n||0,"string"==typeof e||!Eu(e)&&Ho(e)?i>=n&&e.indexOf(t,n)>-1:!!i&&Hr(e,t,n)>-1
}function eo(e,t,n){var r=Eu(e)?cn:jn;return t=zr(t,n,3),r(e,t)}function to(e,t){return eo(e,Ia(t))}function no(e,t,n){var r=Eu(e)?un:Sn;return t=zr(t,n,3),r(e,function(e,n,r){return!t(e,n,r)})}function ro(e,t,n){if(n?Zr(e,t,n):null==t){e=li(e);var r=e.length;return r>0?e[Yn(0,r-1)]:C}var i=-1,o=Ko(e),r=o.length,a=r-1;for(t=Ds(0>t?0:+t||0,r);++i<t;){var s=Yn(i,a),u=o[s];o[s]=o[i],o[i]=u}return o.length=t,o}function io(e){return ro(e,Ss)}function oo(e){var t=e?Us(e):0;return ni(t)?t:$u(e).length}function ao(e,t,n){var r=Eu(e)?hn:Xn;
return n&&Zr(e,t,n)&&(t=C),("function"!=typeof t||n!==C)&&(t=zr(t,n,3)),r(e,t)}function so(e,t,n){if(null==e)return[];n&&Zr(e,t,n)&&(t=C);var r=-1;t=zr(t,n,3);var i=jn(e,function(e,n,i){return{criteria:t(e,n,i),index:++r,value:e}});return Jn(i,s)}function uo(e,t,n,r){return null==e?[]:(r&&Zr(t,n,r)&&(n=C),Eu(t)||(t=null==t?[]:[t]),Eu(n)||(n=null==n?[]:[n]),Qn(e,t,n))}function co(e,t){return Ji(e,$n(t))}function lo(e,t){if("function"!=typeof t){if("function"!=typeof e)throw new Xa($);var n=e;e=t,t=n
}return e=bs(e=+e)?e:0,function(){return--e<1?t.apply(this,arguments):void 0}}function fo(e,t,n){return n&&Zr(e,t,n)&&(t=C),t=e&&null==t?e.length:Cs(+t||0,0),Br(e,N,C,C,C,C,t)}function ho(e,t){var n;if("function"!=typeof t){if("function"!=typeof e)throw new Xa($);var r=e;e=t,t=r}return function(){return--e>0&&(n=t.apply(this,arguments)),1>=e&&(t=C),n}}function po(e,t,n){function r(){h&&ss(h),c&&ss(c),g=0,c=h=p=C}function i(t,n){n&&ss(n),c=h=p=C,t&&(g=gu(),l=e.apply(f,u),h||c||(u=f=C))}function o(){var e=t-(gu()-d);
0>=e||e>t?i(p,c):h=fs(o,e)}function a(){i(v,h)}function s(){if(u=arguments,d=gu(),f=this,p=v&&(h||!_),m===!1)var n=_&&!h;else{c||_||(g=d);var r=m-(d-g),i=0>=r||r>m;i?(c&&(c=ss(c)),g=d,l=e.apply(f,u)):c||(c=fs(a,r))}return i&&h?h=ss(h):h||t===m||(h=fs(o,t)),n&&(i=!0,l=e.apply(f,u)),!i||h||c||(u=f=C),l}var u,c,l,d,f,h,p,g=0,m=!1,v=!0;if("function"!=typeof e)throw new Xa($);if(t=0>t?0:+t||0,n===!0){var _=!0;v=!1}else Ro(n)&&(_=!!n.leading,m="maxWait"in n&&Cs(+n.maxWait||0,t),v="trailing"in n?!!n.trailing:v);
return s.cancel=r,s}function go(e,t){if("function"!=typeof e||t&&"function"!=typeof t)throw new Xa($);var n=function(){var r=arguments,i=t?t.apply(this,r):r[0],o=n.cache;if(o.has(i))return o.get(i);var a=e.apply(this,r);return n.cache=o.set(i,a),a};return n.cache=new go.Cache,n}function mo(e){if("function"!=typeof e)throw new Xa($);return function(){return!e.apply(this,arguments)}}function vo(e){return ho(2,e)}function _o(e,t){if("function"!=typeof e)throw new Xa($);return t=Cs(t===C?e.length-1:+t||0,0),function(){for(var n=arguments,r=-1,i=Cs(n.length-t,0),o=za(i);++r<i;)o[r]=n[t+r];
switch(t){case 0:return e.call(this,o);case 1:return e.call(this,n[0],o);case 2:return e.call(this,n[0],n[1],o)}var a=za(t+1);for(r=-1;++r<t;)a[r]=n[r];return a[t]=o,e.apply(this,a)}}function yo(e){if("function"!=typeof e)throw new Xa($);return function(t){return e.apply(this,t)}}function bo(e,t,n){var r=!0,i=!0;if("function"!=typeof e)throw new Xa($);return n===!1?r=!1:Ro(n)&&(r="leading"in n?!!n.leading:r,i="trailing"in n?!!n.trailing:i),po(e,t,{leading:r,maxWait:+t,trailing:i})}function wo(e,t){return t=null==t?Sa:t,Br(t,E,C,[e],[])
}function Co(e,t,n,r){return t&&"boolean"!=typeof t&&Zr(e,t,n)?t=!1:"function"==typeof t&&(r=n,n=t,t=!1),"function"==typeof n?Cn(e,t,ar(n,r,3)):Cn(e,t)}function Do(e,t,n){return"function"==typeof t?Cn(e,!0,ar(t,n,3)):Cn(e,!0)}function xo(e,t){return e>t}function To(e,t){return e>=t}function Ao(e){return p(e)&&Jr(e)&&ts.call(e,"callee")&&!ls.call(e,"callee")}function ko(e){return e===!0||e===!1||p(e)&&rs.call(e)==W}function So(e){return p(e)&&rs.call(e)==V}function Eo(e){return!!e&&1===e.nodeType&&p(e)&&!zo(e)
}function Mo(e){return null==e?!0:Jr(e)&&(Eu(e)||Ho(e)||Ao(e)||p(e)&&Io(e.splice))?!e.length:!$u(e).length}function No(e,t,n,r){n="function"==typeof n?ar(n,r,3):C;var i=n?n(e,t):C;return i===C?Pn(e,t,n):!!i}function Oo(e){return p(e)&&"string"==typeof e.message&&rs.call(e)==q}function Fo(e){return"number"==typeof e&&bs(e)}function Io(e){return Ro(e)&&rs.call(e)==Y}function Ro(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function Po(e,t,n,r){return n="function"==typeof n?ar(n,r,3):C,Ln(e,Wr(t),n)
}function Bo(e){return $o(e)&&e!=+e}function Lo(e){return null==e?!1:Io(e)?os.test(es.call(e)):p(e)&&Nt.test(e)}function jo(e){return null===e}function $o(e){return"number"==typeof e||p(e)&&rs.call(e)==G}function zo(e){var t;if(!p(e)||rs.call(e)!=X||Ao(e)||!ts.call(e,"constructor")&&(t=e.constructor,"function"==typeof t&&!(t instanceof t)))return!1;var n;return Nn(e,function(e,t){n=t}),n===C||ts.call(e,n)}function Uo(e){return Ro(e)&&rs.call(e)==J}function Ho(e){return"string"==typeof e||p(e)&&rs.call(e)==Z
}function Wo(e){return p(e)&&ni(e.length)&&!!jt[rs.call(e)]}function Vo(e){return e===C}function qo(e,t){return t>e}function Yo(e,t){return t>=e}function Ko(e){var t=e?Us(e):0;return ni(t)?t?nn(e):[]:aa(e)}function Go(e){return bn(e,ta(e))}function Xo(e,t,n){var r=Rs(e);return n&&Zr(e,t,n)&&(t=C),t?_n(r,t):r}function Jo(e){return In(e,ta(e))}function Qo(e,t,n){var r=null==e?C:Rn(e,fi(t),t+"");return r===C?n:r}function Zo(e,t){if(null==e)return!1;var n=ts.call(e,t);if(!n&&!ei(t)){if(t=fi(t),e=1==t.length?e:Rn(e,Gn(t,0,-1)),null==e)return!1;
t=Ai(t),n=ts.call(e,t)}return n||ni(e.length)&&Qr(t,e.length)&&(Eu(e)||Ao(e))}function ea(e,t,n){n&&Zr(e,t,n)&&(t=C);for(var r=-1,i=$u(e),o=i.length,a={};++r<o;){var s=i[r],u=e[s];t?ts.call(a,u)?a[u].push(s):a[u]=[s]:a[u]=s}return a}function ta(e){if(null==e)return[];Ro(e)||(e=Ya(e));var t=e.length;t=t&&ni(t)&&(Eu(e)||Ao(e))&&t||0;for(var n=e.constructor,r=-1,i="function"==typeof n&&n.prototype===e,o=za(t),a=t>0;++r<t;)o[r]=r+"";for(var s in e)a&&Qr(s,t)||"constructor"==s&&(i||!ts.call(e,s))||o.push(s);
return o}function na(e){e=di(e);for(var t=-1,n=$u(e),r=n.length,i=za(r);++t<r;){var o=n[t];i[t]=[o,e[o]]}return i}function ra(e,t,n){var r=null==e?C:e[t];return r===C&&(null==e||ei(t,e)||(t=fi(t),e=1==t.length?e:Rn(e,Gn(t,0,-1)),r=null==e?C:e[Ai(t)]),r=r===C?n:r),Io(r)?r.call(e):r}function ia(e,t,n){if(null==e)return e;var r=t+"";t=null!=e[r]||ei(t,e)?[r]:fi(t);for(var i=-1,o=t.length,a=o-1,s=e;null!=s&&++i<o;){var u=t[i];Ro(s)&&(i==a?s[u]=n:null==s[u]&&(s[u]=Qr(t[i+1])?[]:{})),s=s[u]}return e}function oa(e,t,n,r){var i=Eu(e)||Wo(e);
if(t=zr(t,r,4),null==n)if(i||Ro(e)){var o=e.constructor;n=i?Eu(e)?new o:[]:Rs(Io(o)?o.prototype:C)}else n={};return(i?rn:On)(e,function(e,r,i){return t(n,e,r,i)}),n}function aa(e){return tr(e,$u(e))}function sa(e){return tr(e,ta(e))}function ua(e,t,n){return t=+t||0,n===C?(n=t,t=0):n=+n||0,e>=Ds(t,n)&&e<Cs(t,n)}function ca(e,t,n){n&&Zr(e,t,n)&&(t=n=C);var r=null==e,i=null==t;if(null==n&&(i&&"boolean"==typeof e?(n=e,e=1):"boolean"==typeof t&&(n=t,i=!0)),r&&i&&(t=1,i=!1),e=+e||0,i?(t=e,e=0):t=+t||0,n||e%1||t%1){var o=As();
return Ds(e+o*(t-e+us("1e-"+((o+"").length-1))),t)}return Yn(e,t)}function la(e){return e=i(e),e&&e.charAt(0).toUpperCase()+e.slice(1)}function da(e){return e=i(e),e&&e.replace(Ft,c).replace(At,"")}function fa(e,t,n){e=i(e),t+="";var r=e.length;return n=n===C?r:Ds(0>n?0:+n||0,r),n-=t.length,n>=0&&e.indexOf(t,n)==n}function ha(e){return e=i(e),e&&vt.test(e)?e.replace(gt,l):e}function pa(e){return e=i(e),e&&Tt.test(e)?e.replace(xt,d):e||"(?:)"}function ga(e,t,n){e=i(e),t=+t;var r=e.length;if(r>=t||!bs(t))return e;
var o=(t-r)/2,a=_s(o),s=ms(o);return n=Fr("",s,n),n.slice(0,a)+e+n}function ma(e,t,n){return(n?Zr(e,t,n):null==t)?t=0:t&&(t=+t),e=ba(e),Ts(e,t||(Mt.test(e)?16:10))}function va(e,t){var n="";if(e=i(e),t=+t,1>t||!e||!bs(t))return n;do t%2&&(n+=e),t=_s(t/2),e+=e;while(t);return n}function _a(e,t,n){return e=i(e),n=null==n?0:Ds(0>n?0:+n||0,e.length),e.lastIndexOf(t,n)==n}function ya(e,t,n){var r=K.templateSettings;n&&Zr(e,t,n)&&(t=n=C),e=i(e),t=vn(_n({},n||t),r,mn);var o,a,s=vn(_n({},t.imports),r.imports,mn),u=$u(s),c=tr(s,u),l=0,d=t.interpolate||It,h="__p += '",p=Ka((t.escape||It).source+"|"+d.source+"|"+(d===bt?St:It).source+"|"+(t.evaluate||It).source+"|$","g"),g="//# sourceURL="+("sourceURL"in t?t.sourceURL:"lodash.templateSources["+ ++Lt+"]")+"\n";
e.replace(p,function(t,n,r,i,s,u){return r||(r=i),h+=e.slice(l,u).replace(Rt,f),n&&(o=!0,h+="' +\n__e("+n+") +\n'"),s&&(a=!0,h+="';\n"+s+";\n__p += '"),r&&(h+="' +\n((__t = ("+r+")) == null ? '' : __t) +\n'"),l=u+t.length,t}),h+="';\n";var m=t.variable;m||(h="with (obj) {\n"+h+"\n}\n"),h=(a?h.replace(dt,""):h).replace(ft,"$1").replace(ht,"$1;"),h="function("+(m||"obj")+") {\n"+(m?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(o?", __e = _.escape":"")+(a?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+h+"return __p\n}";
var v=Ju(function(){return Wa(u,g+"return "+h).apply(C,c)});if(v.source=h,Oo(v))throw v;return v}function ba(e,t,n){var r=e;return(e=i(e))?(n?Zr(r,t,n):null==t)?e.slice(_(e),y(e)+1):(t+="",e.slice(o(e,t),a(e,t)+1)):e}function wa(e,t,n){var r=e;return e=i(e),e?e.slice((n?Zr(r,t,n):null==t)?_(e):o(e,t+"")):e}function Ca(e,t,n){var r=e;return e=i(e),e?(n?Zr(r,t,n):null==t)?e.slice(0,y(e)+1):e.slice(0,a(e,t+"")+1):e}function Da(e,t,n){n&&Zr(e,t,n)&&(t=C);var r=F,o=I;if(null!=t)if(Ro(t)){var a="separator"in t?t.separator:a;
r="length"in t?+t.length||0:r,o="omission"in t?i(t.omission):o}else r=+t||0;if(e=i(e),r>=e.length)return e;var s=r-o.length;if(1>s)return o;var u=e.slice(0,s);if(null==a)return u+o;if(Uo(a)){if(e.slice(s).search(a)){var c,l,d=e.slice(0,s);for(a.global||(a=Ka(a.source,(Et.exec(a)||"")+"g")),a.lastIndex=0;c=a.exec(d);)l=c.index;u=u.slice(0,null==l?s:l)}}else if(e.indexOf(a,s)!=s){var f=u.lastIndexOf(a);f>-1&&(u=u.slice(0,f))}return u+o}function xa(e){return e=i(e),e&&mt.test(e)?e.replace(pt,b):e}function Ta(e,t,n){return n&&Zr(e,t,n)&&(t=C),e=i(e),e.match(t||Pt)||[]
}function Aa(e,t,n){return n&&Zr(e,t,n)&&(t=C),p(e)?Ea(e):wn(e,t)}function ka(e){return function(){return e}}function Sa(e){return e}function Ea(e){return $n(Cn(e,!0))}function Ma(e,t){return zn(e,Cn(t,!0))}function Na(e,t,n){if(null==n){var r=Ro(t),i=r?$u(t):C,o=i&&i.length?In(t,i):C;(o?o.length:r)||(o=!1,n=t,t=e,e=this)}o||(o=In(t,$u(t)));var a=!0,s=-1,u=Io(e),c=o.length;n===!1?a=!1:Ro(n)&&"chain"in n&&(a=n.chain);for(;++s<c;){var l=o[s],d=t[l];e[l]=d,u&&(e.prototype[l]=function(t){return function(){var n=this.__chain__;
if(a||n){var r=e(this.__wrapped__),i=r.__actions__=nn(this.__actions__);return i.push({func:t,args:arguments,thisArg:e}),r.__chain__=n,r}return t.apply(e,ln([this.value()],arguments))}}(d))}return e}function Oa(){return Zt._=is,this}function Fa(){}function Ia(e){return ei(e)?Wn(e):Vn(e)}function Ra(e){return function(t){return Rn(e,fi(t),t+"")}}function Pa(e,t,n){n&&Zr(e,t,n)&&(t=n=C),e=+e||0,n=null==n?1:+n||0,null==t?(t=e,e=0):t=+t||0;for(var r=-1,i=Cs(ms((t-e)/(n||1)),0),o=za(i);++r<i;)o[r]=e,e+=n;
return o}function Ba(e,t,n){if(e=_s(e),1>e||!bs(e))return[];var r=-1,i=za(Ds(e,Es));for(t=ar(t,n,1);++r<e;)Es>r?i[r]=t(r):t(r);return i}function La(e){var t=++ns;return i(e)+t}function ja(e,t){return(+e||0)+(+t||0)}function $a(e,t,n){return n&&Zr(e,t,n)&&(t=C),t=zr(t,n,3),1==t.length?pn(Eu(e)?e:li(e),t):Zn(e,t)}g=g?en.defaults(Zt.Object(),g,en.pick(Zt,Bt)):Zt;{var za=g.Array,Ua=g.Date,Ha=g.Error,Wa=g.Function,Va=g.Math,qa=g.Number,Ya=g.Object,Ka=g.RegExp,Ga=g.String,Xa=g.TypeError,Ja=za.prototype,Qa=Ya.prototype,Za=Ga.prototype,es=Wa.prototype.toString,ts=Qa.hasOwnProperty,ns=0,rs=Qa.toString,is=Zt._,os=Ka("^"+es.call(ts).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),as=g.ArrayBuffer,ss=g.clearTimeout,us=g.parseFloat,cs=Va.pow,ls=Qa.propertyIsEnumerable,ds=Vr(g,"Set"),fs=g.setTimeout,hs=Ja.splice,ps=g.Uint8Array,gs=Vr(g,"WeakMap"),ms=Va.ceil,vs=Vr(Ya,"create"),_s=Va.floor,ys=Vr(za,"isArray"),bs=g.isFinite,ws=Vr(Ya,"keys"),Cs=Va.max,Ds=Va.min,xs=Vr(Ua,"now"),Ts=g.parseInt,As=Va.random,ks=qa.NEGATIVE_INFINITY,Ss=qa.POSITIVE_INFINITY,Es=4294967295,Ms=Es-1,Ns=Es>>>1,Os=9007199254740991,Fs=gs&&new gs,Is={};
K.support={}}K.templateSettings={escape:_t,evaluate:yt,interpolate:bt,variable:"",imports:{_:K}};var Rs=function(){function e(){}return function(t){if(Ro(t)){e.prototype=t;var n=new e;e.prototype=C}return n||{}}}(),Ps=fr(On),Bs=fr(Fn,!0),Ls=hr(),js=hr(!0),$s=Fs?function(e,t){return Fs.set(e,t),e}:Sa,zs=Fs?function(e){return Fs.get(e)}:Fa,Us=Wn("length"),Hs=function(){var e=0,t=0;return function(n,r){var i=gu(),o=P-(i-t);if(t=i,o>0){if(++e>=R)return n}else e=0;return $s(n,r)}}(),Ws=_o(function(e,t){return p(e)&&Jr(e)?xn(e,Mn(t,!1,!0)):[]
}),Vs=Cr(),qs=Cr(!0),Ys=_o(function(e){for(var t=e.length,r=t,i=za(d),o=Hr(),a=o===n,s=[];r--;){var u=e[r]=Jr(u=e[r])?u:[];i[r]=a&&u.length>=120?gr(r&&u):null}var c=e[0],l=-1,d=c?c.length:0,f=i[0];e:for(;++l<d;)if(u=c[l],(f?Jt(f,u):o(s,u,0))<0){for(var r=t;--r;){var h=i[r];if((h?Jt(h,u):o(e[r],u,0))<0)continue e}f&&f.push(u),s.push(u)}return s}),Ks=_o(function(t,n){n=Mn(n);var r=yn(t,n);return qn(t,n.sort(e)),r}),Gs=Pr(),Xs=Pr(!0),Js=_o(function(e){return er(Mn(e,!1,!0))}),Qs=_o(function(e,t){return Jr(e)?xn(e,t):[]
}),Zs=_o(Bi),eu=_o(function(e){var t=e.length,n=t>2?e[t-2]:C,r=t>1?e[t-1]:C;return t>2&&"function"==typeof n?t-=2:(n=t>1&&"function"==typeof r?(--t,r):C,r=C),e.length=t,Li(e,n,r)}),tu=_o(function(e){return e=Mn(e),this.thru(function(t){return tn(Eu(t)?t:[di(t)],e)})}),nu=_o(function(e,t){return yn(e,Mn(t))}),ru=lr(function(e,t,n){ts.call(e,n)?++e[n]:e[n]=1}),iu=wr(Ps),ou=wr(Bs,!0),au=Tr(rn,Ps),su=Tr(on,Bs),uu=lr(function(e,t,n){ts.call(e,n)?e[n].push(t):e[n]=[t]}),cu=lr(function(e,t,n){e[n]=t}),lu=_o(function(e,t,n){var r=-1,i="function"==typeof t,o=ei(t),a=Jr(e)?za(e.length):[];
return Ps(e,function(e){var s=i?t:o&&null!=e?e[t]:C;a[++r]=s?s.apply(e,n):Xr(e,t,n)}),a}),du=lr(function(e,t,n){e[n?0:1].push(t)},function(){return[[],[]]}),fu=Nr(dn,Ps),hu=Nr(fn,Bs),pu=_o(function(e,t){if(null==e)return[];var n=t[2];return n&&Zr(t[0],t[1],n)&&(t.length=1),Qn(e,Mn(t),[])}),gu=xs||function(){return(new Ua).getTime()},mu=_o(function(e,t,n){var r=x;if(n.length){var i=m(n,mu.placeholder);r|=E}return Br(e,r,t,n,i)}),vu=_o(function(e,t){t=t.length?Mn(t):Jo(e);for(var n=-1,r=t.length;++n<r;){var i=t[n];
e[i]=Br(e[i],x,e)}return e}),_u=_o(function(e,t,n){var r=x|T;if(n.length){var i=m(n,_u.placeholder);r|=E}return Br(t,r,e,n,i)}),yu=_r(k),bu=_r(S),wu=_o(function(e,t){return Dn(e,1,t)}),Cu=_o(function(e,t,n){return Dn(e,t,n)}),Du=xr(),xu=xr(!0),Tu=_o(function(e,t){if(t=Mn(t),"function"!=typeof e||!an(t,r))throw new Xa($);var n=t.length;return _o(function(r){for(var i=Ds(r.length,n);i--;)r[i]=t[i](r[i]);return e.apply(this,r)})}),Au=Mr(E),ku=Mr(M),Su=_o(function(e,t){return Br(e,O,C,C,C,Mn(t))}),Eu=ys||function(e){return p(e)&&ni(e.length)&&rs.call(e)==H
},Mu=dr(Un),Nu=dr(function(e,t,n){return n?vn(e,t,n):_n(e,t)}),Ou=yr(Nu,gn),Fu=yr(Mu,oi),Iu=Dr(On),Ru=Dr(Fn),Pu=Ar(Ls),Bu=Ar(js),Lu=kr(On),ju=kr(Fn),$u=ws?function(e){var t=null==e?C:e.constructor;return"function"==typeof t&&t.prototype===e||"function"!=typeof e&&Jr(e)?ci(e):Ro(e)?ws(e):[]}:ci,zu=Sr(!0),Uu=Sr(),Hu=_o(function(e,t){if(null==e)return{};if("function"!=typeof t[0]){var t=cn(Mn(t),Ga);return ai(e,xn(ta(e),t))}var n=ar(t[0],t[1],3);return si(e,function(e,t,r){return!n(e,t,r)})}),Wu=_o(function(e,t){return null==e?{}:"function"==typeof t[0]?si(e,ar(t[0],t[1],3)):ai(e,Mn(t))
}),Vu=mr(function(e,t,n){return t=t.toLowerCase(),e+(n?t.charAt(0).toUpperCase()+t.slice(1):t)}),qu=mr(function(e,t,n){return e+(n?"-":"")+t.toLowerCase()}),Yu=Er(),Ku=Er(!0),Gu=mr(function(e,t,n){return e+(n?"_":"")+t.toLowerCase()}),Xu=mr(function(e,t,n){return e+(n?" ":"")+(t.charAt(0).toUpperCase()+t.slice(1))}),Ju=_o(function(e,t){try{return e.apply(C,t)}catch(n){return Oo(n)?n:new Ha(n)}}),Qu=_o(function(e,t){return function(n){return Xr(n,e,t)}}),Zu=_o(function(e,t){return function(n){return Xr(e,n,t)
}}),ec=Rr("ceil"),tc=Rr("floor"),nc=br(xo,ks),rc=br(qo,Ss),ic=Rr("round");return K.prototype=Q.prototype,et.prototype=Rs(Q.prototype),et.prototype.constructor=et,zt.prototype=Rs(Q.prototype),zt.prototype.constructor=zt,Vt.prototype["delete"]=qt,Vt.prototype.get=Yt,Vt.prototype.has=Kt,Vt.prototype.set=Gt,Xt.prototype.push=Qt,go.Cache=Vt,K.after=lo,K.ary=fo,K.assign=Nu,K.at=nu,K.before=ho,K.bind=mu,K.bindAll=vu,K.bindKey=_u,K.callback=Aa,K.chain=zi,K.chunk=pi,K.compact=gi,K.constant=ka,K.countBy=ru,K.create=Xo,K.curry=yu,K.curryRight=bu,K.debounce=po,K.defaults=Ou,K.defaultsDeep=Fu,K.defer=wu,K.delay=Cu,K.difference=Ws,K.drop=mi,K.dropRight=vi,K.dropRightWhile=_i,K.dropWhile=yi,K.fill=bi,K.filter=Ji,K.flatten=Ci,K.flattenDeep=Di,K.flow=Du,K.flowRight=xu,K.forEach=au,K.forEachRight=su,K.forIn=Pu,K.forInRight=Bu,K.forOwn=Lu,K.forOwnRight=ju,K.functions=Jo,K.groupBy=uu,K.indexBy=cu,K.initial=Ti,K.intersection=Ys,K.invert=ea,K.invoke=lu,K.keys=$u,K.keysIn=ta,K.map=eo,K.mapKeys=zu,K.mapValues=Uu,K.matches=Ea,K.matchesProperty=Ma,K.memoize=go,K.merge=Mu,K.method=Qu,K.methodOf=Zu,K.mixin=Na,K.modArgs=Tu,K.negate=mo,K.omit=Hu,K.once=vo,K.pairs=na,K.partial=Au,K.partialRight=ku,K.partition=du,K.pick=Wu,K.pluck=to,K.property=Ia,K.propertyOf=Ra,K.pull=Si,K.pullAt=Ks,K.range=Pa,K.rearg=Su,K.reject=no,K.remove=Ei,K.rest=Mi,K.restParam=_o,K.set=ia,K.shuffle=io,K.slice=Ni,K.sortBy=so,K.sortByAll=pu,K.sortByOrder=uo,K.spread=yo,K.take=Oi,K.takeRight=Fi,K.takeRightWhile=Ii,K.takeWhile=Ri,K.tap=Ui,K.throttle=bo,K.thru=Hi,K.times=Ba,K.toArray=Ko,K.toPlainObject=Go,K.transform=oa,K.union=Js,K.uniq=Pi,K.unzip=Bi,K.unzipWith=Li,K.values=aa,K.valuesIn=sa,K.where=co,K.without=Qs,K.wrap=wo,K.xor=ji,K.zip=Zs,K.zipObject=$i,K.zipWith=eu,K.backflow=xu,K.collect=eo,K.compose=xu,K.each=au,K.eachRight=su,K.extend=Nu,K.iteratee=Aa,K.methods=Jo,K.object=$i,K.select=Ji,K.tail=Mi,K.unique=Pi,Na(K,K),K.add=ja,K.attempt=Ju,K.camelCase=Vu,K.capitalize=la,K.ceil=ec,K.clone=Co,K.cloneDeep=Do,K.deburr=da,K.endsWith=fa,K.escape=ha,K.escapeRegExp=pa,K.every=Xi,K.find=iu,K.findIndex=Vs,K.findKey=Iu,K.findLast=ou,K.findLastIndex=qs,K.findLastKey=Ru,K.findWhere=Qi,K.first=wi,K.floor=tc,K.get=Qo,K.gt=xo,K.gte=To,K.has=Zo,K.identity=Sa,K.includes=Zi,K.indexOf=xi,K.inRange=ua,K.isArguments=Ao,K.isArray=Eu,K.isBoolean=ko,K.isDate=So,K.isElement=Eo,K.isEmpty=Mo,K.isEqual=No,K.isError=Oo,K.isFinite=Fo,K.isFunction=Io,K.isMatch=Po,K.isNaN=Bo,K.isNative=Lo,K.isNull=jo,K.isNumber=$o,K.isObject=Ro,K.isPlainObject=zo,K.isRegExp=Uo,K.isString=Ho,K.isTypedArray=Wo,K.isUndefined=Vo,K.kebabCase=qu,K.last=Ai,K.lastIndexOf=ki,K.lt=qo,K.lte=Yo,K.max=nc,K.min=rc,K.noConflict=Oa,K.noop=Fa,K.now=gu,K.pad=ga,K.padLeft=Yu,K.padRight=Ku,K.parseInt=ma,K.random=ca,K.reduce=fu,K.reduceRight=hu,K.repeat=va,K.result=ra,K.round=ic,K.runInContext=w,K.size=oo,K.snakeCase=Gu,K.some=ao,K.sortedIndex=Gs,K.sortedLastIndex=Xs,K.startCase=Xu,K.startsWith=_a,K.sum=$a,K.template=ya,K.trim=ba,K.trimLeft=wa,K.trimRight=Ca,K.trunc=Da,K.unescape=xa,K.uniqueId=La,K.words=Ta,K.all=Xi,K.any=ao,K.contains=Zi,K.eq=No,K.detect=iu,K.foldl=fu,K.foldr=hu,K.head=wi,K.include=Zi,K.inject=fu,Na(K,function(){var e={};
return On(K,function(t,n){K.prototype[n]||(e[n]=t)}),e}(),!1),K.sample=ro,K.prototype.sample=function(e){return this.__chain__||null!=e?this.thru(function(t){return ro(t,e)}):ro(this.value())},K.VERSION=D,rn(["bind","bindKey","curry","curryRight","partial","partialRight"],function(e){K[e].placeholder=K}),rn(["drop","take"],function(e,t){zt.prototype[e]=function(n){var r=this.__filtered__;if(r&&!t)return new zt(this);n=null==n?1:Cs(_s(n)||0,0);var i=this.clone();return r?i.__takeCount__=Ds(i.__takeCount__,n):i.__views__.push({size:n,type:e+(i.__dir__<0?"Right":"")}),i
},zt.prototype[e+"Right"]=function(t){return this.reverse()[e](t).reverse()}}),rn(["filter","map","takeWhile"],function(e,t){var n=t+1,r=n!=j;zt.prototype[e]=function(e,t){var i=this.clone();return i.__iteratees__.push({iteratee:zr(e,t,1),type:n}),i.__filtered__=i.__filtered__||r,i}}),rn(["first","last"],function(e,t){var n="take"+(t?"Right":"");zt.prototype[e]=function(){return this[n](1).value()[0]}}),rn(["initial","rest"],function(e,t){var n="drop"+(t?"":"Right");zt.prototype[e]=function(){return this.__filtered__?new zt(this):this[n](1)
}}),rn(["pluck","where"],function(e,t){var n=t?"filter":"map",r=t?$n:Ia;zt.prototype[e]=function(e){return this[n](r(e))}}),zt.prototype.compact=function(){return this.filter(Sa)},zt.prototype.reject=function(e,t){return e=zr(e,t,1),this.filter(function(t){return!e(t)})},zt.prototype.slice=function(e,t){e=null==e?0:+e||0;var n=this;return n.__filtered__&&(e>0||0>t)?new zt(n):(0>e?n=n.takeRight(-e):e&&(n=n.drop(e)),t!==C&&(t=+t||0,n=0>t?n.dropRight(-t):n.take(t-e)),n)},zt.prototype.takeRightWhile=function(e,t){return this.reverse().takeWhile(e,t).reverse()
},zt.prototype.toArray=function(){return this.take(Ss)},On(zt.prototype,function(e,t){var n=/^(?:filter|map|reject)|While$/.test(t),r=/^(?:first|last)$/.test(t),i=K[r?"take"+("last"==t?"Right":""):t];i&&(K.prototype[t]=function(){var t=r?[1]:arguments,o=this.__chain__,a=this.__wrapped__,s=!!this.__actions__.length,u=a instanceof zt,c=t[0],l=u||Eu(a);l&&n&&"function"==typeof c&&1!=c.length&&(u=l=!1);var d=function(e){return r&&o?i(e,1)[0]:i.apply(C,ln([e],t))},f={func:Hi,args:[d],thisArg:C},h=u&&!s;
if(r&&!o)return h?(a=a.clone(),a.__actions__.push(f),e.call(a)):i.call(C,this.value())[0];if(!r&&l){a=h?a:new zt(this);var p=e.apply(a,t);return p.__actions__.push(f),new et(p,o)}return this.thru(d)})}),rn(["join","pop","push","replace","shift","sort","splice","split","unshift"],function(e){var t=(/^(?:replace|split)$/.test(e)?Za:Ja)[e],n=/^(?:push|sort|unshift)$/.test(e)?"tap":"thru",r=/^(?:join|pop|replace|shift)$/.test(e);K.prototype[e]=function(){var e=arguments;return r&&!this.__chain__?t.apply(this.value(),e):this[n](function(n){return t.apply(n,e)
})}}),On(zt.prototype,function(e,t){var n=K[t];if(n){var r=n.name+"",i=Is[r]||(Is[r]=[]);i.push({name:t,func:n})}}),Is[Or(C,T).name]=[{name:"wrapper",func:C}],zt.prototype.clone=Ut,zt.prototype.reverse=Ht,zt.prototype.value=Wt,K.prototype.chain=Wi,K.prototype.commit=Vi,K.prototype.concat=tu,K.prototype.plant=qi,K.prototype.reverse=Yi,K.prototype.toString=Ki,K.prototype.run=K.prototype.toJSON=K.prototype.valueOf=K.prototype.value=Gi,K.prototype.collect=K.prototype.map,K.prototype.head=K.prototype.first,K.prototype.select=K.prototype.filter,K.prototype.tail=K.prototype.rest,K
}var C,D="3.10.1",x=1,T=2,A=4,k=8,S=16,E=32,M=64,N=128,O=256,F=30,I="...",R=150,P=16,B=200,L=1,j=2,$="Expected a function",z="__lodash_placeholder__",U="[object Arguments]",H="[object Array]",W="[object Boolean]",V="[object Date]",q="[object Error]",Y="[object Function]",K="[object Map]",G="[object Number]",X="[object Object]",J="[object RegExp]",Q="[object Set]",Z="[object String]",et="[object WeakMap]",tt="[object ArrayBuffer]",nt="[object Float32Array]",rt="[object Float64Array]",it="[object Int8Array]",ot="[object Int16Array]",at="[object Int32Array]",st="[object Uint8Array]",ut="[object Uint8ClampedArray]",ct="[object Uint16Array]",lt="[object Uint32Array]",dt=/\b__p \+= '';/g,ft=/\b(__p \+=) '' \+/g,ht=/(__e\(.*?\)|\b__t\)) \+\n'';/g,pt=/&(?:amp|lt|gt|quot|#39|#96);/g,gt=/[&<>"'`]/g,mt=RegExp(pt.source),vt=RegExp(gt.source),_t=/<%-([\s\S]+?)%>/g,yt=/<%([\s\S]+?)%>/g,bt=/<%=([\s\S]+?)%>/g,wt=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\n\\]|\\.)*?\1)\]/,Ct=/^\w*$/,Dt=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\n\\]|\\.)*?)\2)\]/g,xt=/^[:!,]|[\\^$.*+?()[\]{}|\/]|(^[0-9a-fA-Fnrtuvx])|([\n\r\u2028\u2029])/g,Tt=RegExp(xt.source),At=/[\u0300-\u036f\ufe20-\ufe23]/g,kt=/\\(\\)?/g,St=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Et=/\w*$/,Mt=/^0[xX]/,Nt=/^\[object .+?Constructor\]$/,Ot=/^\d+$/,Ft=/[\xc0-\xd6\xd8-\xde\xdf-\xf6\xf8-\xff]/g,It=/($^)/,Rt=/['\n\r\u2028\u2029\\]/g,Pt=function(){var e="[A-Z\\xc0-\\xd6\\xd8-\\xde]",t="[a-z\\xdf-\\xf6\\xf8-\\xff]+";
return RegExp(e+"+(?="+e+t+")|"+e+"?"+t+"|"+e+"+|[0-9]+","g")}(),Bt=["Array","ArrayBuffer","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Math","Number","Object","RegExp","Set","String","_","clearTimeout","isFinite","parseFloat","parseInt","setTimeout","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap"],Lt=-1,jt={};jt[nt]=jt[rt]=jt[it]=jt[ot]=jt[at]=jt[st]=jt[ut]=jt[ct]=jt[lt]=!0,jt[U]=jt[H]=jt[tt]=jt[W]=jt[V]=jt[q]=jt[Y]=jt[K]=jt[G]=jt[X]=jt[J]=jt[Q]=jt[Z]=jt[et]=!1;
var $t={};$t[U]=$t[H]=$t[tt]=$t[W]=$t[V]=$t[nt]=$t[rt]=$t[it]=$t[ot]=$t[at]=$t[G]=$t[X]=$t[J]=$t[Z]=$t[st]=$t[ut]=$t[ct]=$t[lt]=!0,$t[q]=$t[Y]=$t[K]=$t[Q]=$t[et]=!1;var zt={À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",Ç:"C",ç:"c",Ð:"D",ð:"d",È:"E",É:"E",Ê:"E",Ë:"E",è:"e",é:"e",ê:"e",ë:"e",Ì:"I",Í:"I",Î:"I",Ï:"I",ì:"i",í:"i",î:"i",ï:"i",Ñ:"N",ñ:"n",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",Ù:"U",Ú:"U",Û:"U",Ü:"U",ù:"u",ú:"u",û:"u",ü:"u",Ý:"Y",ý:"y",ÿ:"y",Æ:"Ae",æ:"ae",Þ:"Th",þ:"th",ß:"ss"},Ut={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","`":"&#96;"},Ht={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'","&#96;":"`"},Wt={"function":!0,object:!0},Vt={0:"x30",1:"x31",2:"x32",3:"x33",4:"x34",5:"x35",6:"x36",7:"x37",8:"x38",9:"x39",A:"x41",B:"x42",C:"x43",D:"x44",E:"x45",F:"x46",a:"x61",b:"x62",c:"x63",d:"x64",e:"x65",f:"x66",n:"x6e",r:"x72",t:"x74",u:"x75",v:"x76",x:"x78"},qt={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Yt=Wt[typeof exports]&&exports&&!exports.nodeType&&exports,Kt=Wt[typeof module]&&module&&!module.nodeType&&module,Gt=Yt&&Kt&&"object"==typeof global&&global&&global.Object&&global,Xt=Wt[typeof self]&&self&&self.Object&&self,Jt=Wt[typeof window]&&window&&window.Object&&window,Qt=Kt&&Kt.exports===Yt&&Yt,Zt=Gt||Jt!==(this&&this.window)&&Jt||Xt||this,en=w();
"function"==typeof define&&"object"==typeof define.amd&&define.amd?(Zt._=en,define(function(){return en})):Yt&&Kt?Qt?(Kt.exports=en)._=en:Yt._=en:Zt._=en}.call(this),function(){"use strict";function e(e){e=e||{};var t="(?:(?:[a-z]+:)?//)",n="(?:\\S+(?::\\S*)?@)?",i=r.v4().source,o="(?:(?:[a-z\\u00a1-\\uffff0-9]-*)*[a-z\\u00a1-\\uffff0-9]+)",a="(?:\\.(?:[a-z\\u00a1-\\uffff0-9]-*)*[a-z\\u00a1-\\uffff0-9]+)*",s="(?:\\.(?:[a-z\\u00a1-\\uffff]{2,}))",u="(?::\\d{2,5})?",c='(?:[/?#][^\\s"]*)?',l=["(?:"+t+"|www\\.)"+n,"(?:localhost|"+i+"|"+o+a+s+")",u,c].join("");
return e.exact?new RegExp("(?:^"+l+"$)","i"):new RegExp(l,"ig")}var t="(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])(?:\\.(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])){3}",n="(?:(?:[0-9a-fA-F:]){1,4}(?:(?::(?:[0-9a-fA-F]){1,4}|:)){2,7})+",r=function(e){return e=e||{},e.exact?new RegExp("(?:^"+t+"$)|(?:^"+n+"$)"):new RegExp("(?:"+t+")|(?:"+n+")","g")};r.v4=function(e){return e=e||{},e.exact?new RegExp("^"+t+"$"):new RegExp(t,"g")},r.v6=function(e){return e=e||{},e.exact?new RegExp("^"+n+"$"):new RegExp(n,"g")
},window.Daria.urlRegex=e}(),_.mixin({filterValuesContainingPropValue:function(e,t,n){var r=_.partial(_.contains,n),i=function(e){return e[t]},o=_.compose(r,i);return _.filter(e,o)}}),function(){var e={},t={};e.addLinks=function(e){for(var n in e)t[n]=e[n]},e.link=function(e){return"@"===e.charAt(0)?t[e.substr(1)]||'[borschik] Undefined link "'+e+'"':e},"undefined"==typeof window&&"undefined"!=typeof module?module.exports=e:window.borschik=e}(),function(e,t,n){function r(e,t){return typeof e===t}function i(){var e,t,n,i,o,a,s;
for(var u in b)if(b.hasOwnProperty(u)){if(e=[],t=b[u],t.name&&(e.push(t.name.toLowerCase()),t.options&&t.options.aliases&&t.options.aliases.length))for(n=0;n<t.options.aliases.length;n++)e.push(t.options.aliases[n].toLowerCase());for(i=r(t.fn,"function")?t.fn():t.fn,o=0;o<e.length;o++)a=e[o],s=a.split("."),1===s.length?C[s[0]]=i:(!C[s[0]]||C[s[0]]instanceof Boolean||(C[s[0]]=new Boolean(C[s[0]])),C[s[0]][s[1]]=i),y.push((i?"":"no-")+s.join("-"))}}function o(e){var t=x.className,n=C._config.classPrefix||"";
if(T&&(t=t.baseVal),C._config.enableJSClass){var r=new RegExp("(^|\\s)"+n+"no-js(\\s|$)");t=t.replace(r,"$1"+n+"js$2")}C._config.enableClasses&&(t+=" "+n+e.join(" "+n),T?x.className.baseVal=t:x.className=t)}function a(e,t){if("object"==typeof e)for(var n in e)S(e,n)&&a(n,e[n]);else{e=e.toLowerCase();var r=e.split("."),i=C[r[0]];if(2==r.length&&(i=i[r[1]]),"undefined"!=typeof i)return C;t="function"==typeof t?t():t,1==r.length?C[r[0]]=t:(!C[r[0]]||C[r[0]]instanceof Boolean||(C[r[0]]=new Boolean(C[r[0]])),C[r[0]][r[1]]=t),o([(t&&0!=t?"":"no-")+r.join("-")]),C._trigger(e,t)
}return C}function s(){return"function"!=typeof t.createElement?t.createElement(arguments[0]):T?t.createElementNS.call(t,"http://www.w3.org/2000/svg",arguments[0]):t.createElement.apply(t,arguments)}function u(e,t){return!!~(""+e).indexOf(t)}function c(e){return e.replace(/([a-z])-([a-z])/g,function(e,t,n){return t+n.toUpperCase()}).replace(/^-/,"")}function l(e,t){return function(){return e.apply(t,arguments)}}function d(e,t,n){var i;for(var o in e)if(e[o]in t)return n===!1?e[o]:(i=t[e[o]],r(i,"function")?l(i,n||t):i);
return!1}function f(e){return e.replace(/([A-Z])/g,function(e,t){return"-"+t.toLowerCase()}).replace(/^ms-/,"-ms-")}function h(){var e=t.body;return e||(e=s(T?"svg":"body"),e.fake=!0),e}function p(e,n,r,i){var o,a,u,c,l="modernizr",d=s("div"),f=h();if(parseInt(r,10))for(;r--;)u=s("div"),u.id=i?i[r]:l+(r+1),d.appendChild(u);return o=s("style"),o.type="text/css",o.id="s"+l,(f.fake?f:d).appendChild(o),f.appendChild(d),o.styleSheet?o.styleSheet.cssText=e:o.appendChild(t.createTextNode(e)),d.id=l,f.fake&&(f.style.background="",f.style.overflow="hidden",c=x.style.overflow,x.style.overflow="hidden",x.appendChild(f)),a=n(d,e),f.fake?(f.parentNode.removeChild(f),x.style.overflow=c,x.offsetHeight):d.parentNode.removeChild(d),!!a
}function g(t,r){var i=t.length;if("CSS"in e&&"supports"in e.CSS){for(;i--;)if(e.CSS.supports(f(t[i]),r))return!0;return!1}if("CSSSupportsRule"in e){for(var o=[];i--;)o.push("("+f(t[i])+":"+r+")");return o=o.join(" or "),p("@supports ("+o+") { #modernizr { position: absolute; } }",function(e){return"absolute"==getComputedStyle(e,null).position})}return n}function m(e,t,i,o){function a(){d&&(delete B.style,delete B.modElem)}if(o=r(o,"undefined")?!1:o,!r(i,"undefined")){var l=g(e,i);if(!r(l,"undefined"))return l
}for(var d,f,h,p,m,v=["modernizr","tspan","samp"];!B.style&&v.length;)d=!0,B.modElem=s(v.shift()),B.style=B.modElem.style;for(h=e.length,f=0;h>f;f++)if(p=e[f],m=B.style[p],u(p,"-")&&(p=c(p)),B.style[p]!==n){if(o||r(i,"undefined"))return a(),"pfx"==t?p:!0;try{B.style[p]=i}catch(_){}if(B.style[p]!=m)return a(),"pfx"==t?p:!0}return a(),!1}function v(e,t,n,i,o){var a=e.charAt(0).toUpperCase()+e.slice(1),s=(e+" "+R.join(a+" ")+a).split(" ");return r(t,"string")||r(t,"undefined")?m(s,t,i,o):(s=(e+" "+k.join(a+" ")+a).split(" "),d(s,t,n))
}function _(e,t,r){return v(e,n,n,t,r)}var y=[],b=[],w={_version:"3.3.1",_config:{classPrefix:"",enableClasses:!0,enableJSClass:!0,usePrefixes:!0},_q:[],on:function(e,t){var n=this;setTimeout(function(){t(n[e])},0)},addTest:function(e,t,n){b.push({name:e,fn:t,options:n})},addAsyncTest:function(e){b.push({name:null,fn:e})}},C=function(){};C.prototype=w,C=new C,C.addTest("blobconstructor",function(){try{return!!new Blob}catch(e){return!1}},{aliases:["blob-constructor"]}),C.addTest("geolocation","geolocation"in navigator),C.addTest("filereader",!!(e.File&&e.FileList&&e.FileReader));
var D=w._config.usePrefixes?" -webkit- -moz- -o- -ms- ".split(" "):["",""];w._prefixes=D;var x=t.documentElement,T="svg"===x.nodeName.toLowerCase(),A="Moz O ms Webkit",k=w._config.usePrefixes?A.toLowerCase().split(" "):[];w._domPrefixes=k;var S;!function(){var e={}.hasOwnProperty;S=r(e,"undefined")||r(e.call,"undefined")?function(e,t){return t in e&&r(e.constructor.prototype[t],"undefined")}:function(t,n){return e.call(t,n)}}(),w._l={},w.on=function(e,t){this._l[e]||(this._l[e]=[]),this._l[e].push(t),C.hasOwnProperty(e)&&setTimeout(function(){C._trigger(e,C[e])
},0)},w._trigger=function(e,t){if(this._l[e]){var n=this._l[e];setTimeout(function(){var e,r;for(e=0;e<n.length;e++)(r=n[e])(t)},0),delete this._l[e]}},C._q.push(function(){w.addTest=a});var E=function(){function e(e,t){var i;return e?(t&&"string"!=typeof t||(t=s(t||"div")),e="on"+e,i=e in t,!i&&r&&(t.setAttribute||(t=s("div")),t.setAttribute(e,""),i="function"==typeof t[e],t[e]!==n&&(t[e]=n),t.removeAttribute(e)),i):!1}var r=!("onblur"in t.documentElement);return e}();w.hasEvent=E,C.addTest("cssgradients",function(){for(var e,t="background-image:",n="gradient(linear,left top,right bottom,from(#9f9),to(white));",r="",i=0,o=D.length-1;o>i;i++)e=0===i?"to ":"",r+=t+D[i]+"linear-gradient("+e+"left top, #9f9, white);";
C._config.usePrefixes&&(r+=t+"-webkit-"+n);var a=s("a"),u=a.style;return u.cssText=r,(""+u.backgroundImage).indexOf("gradient")>-1});var M=s("input"),N="autocomplete autofocus list placeholder max min multiple pattern required step".split(" "),O={};C.input=function(t){for(var n=0,r=t.length;r>n;n++)O[t[n]]=!!(t[n]in M);return O.list&&(O.list=!(!s("datalist")||!e.HTMLDataListElement)),O}(N);var F="CSS"in e&&"supports"in e.CSS,I="supportsCSS"in e;C.addTest("supports",F||I);var R=w._config.usePrefixes?A.split(" "):[];
w._cssomPrefixes=R;var P={elem:s("modernizr")};C._q.push(function(){delete P.elem});var B={style:P.elem.style};C._q.unshift(function(){delete B.style});{var L=w.testStyles=p;w.testProp=function(e,t,r){return m([e],n,t,r)}}w.testAllProps=v,w.testAllProps=_,C.addTest("cssanimations",_("animationName","a",!0)),C.addTest("borderimage",_("borderImage","url() 1",!0)),C.addTest("csstransforms",function(){return-1===navigator.userAgent.indexOf("Android 2.")&&_("transform","scale(1)",!0)}),C.addTest("csstransforms3d",function(){var e=!!_("perspective","1px",!0),t=C._config.usePrefixes;
if(e&&(!t||"webkitPerspective"in x.style)){var n,r="#modernizr{width:0;height:0}";C.supports?n="@supports (perspective: 1px)":(n="@media (transform-3d)",t&&(n+=",(-webkit-transform-3d)")),n+="{#modernizr{width:7px;height:18px;margin:0;padding:0;border:0}}",L(r+n,function(t){e=7===t.offsetWidth&&18===t.offsetHeight})}return e}),C.addTest("csstransitions",_("transition","all",!0)),C.addTest("classlist","classList"in x),i(),o(y),delete w.addTest,delete w.addAsyncTest;for(var j=0;j<C._q.length;j++)C._q[j]();
e.Modernizr=C}(window,document),Modernizr.addTest("highresdisplay",function(){if(window.matchMedia){var e=window.matchMedia("only screen and (-moz-min-device-pixel-ratio: 1.3), only screen and (-o-min-device-pixel-ratio: 2.6/2), only screen and (-webkit-min-device-pixel-ratio: 1.3), only screen and (min-device-pixel-ratio: 1.3), only screen and (min-resolution: 1.3dppx)");if(e&&e.matches||window.screen.deviceXDPI/window.screen.logicalXDPI>=1.3)return!0}}),Modernizr.addTest("is-pdd",function(){return!!Daria.Config.pddDomain
}),Modernizr.addTest("draganddrop",function(){var e=document.createElement("div");return"draggable"in e||"ondragstart"in e&&"ondrop"in e}),Modernizr.addTest("draganddrop-files",function(){return Boolean(Modernizr.draganddrop&&window.FormData&&Modernizr.filereader)}),Modernizr.addTest("input-multiple",function(){return Boolean(Modernizr.input.multiple&&window.FormData&&Modernizr.filereader)}),Modernizr.addTest("classlist-second-arg",function(){if(!Modernizr.classlist)return!1;var e=document.createElement("div");
return e.classList.add("cl1","cl2"),"cl1"!==e.className}),Modernizr.addTest("msie",function(){return"MSIE"===Jane.UA.BrowserName?document.documentMode:!1}),Modernizr.addTest("webkit",function(){return"WebKit"===Jane.UA.BrowserEngine?Jane.UA.BrowserEngineVersion:!1}),Modernizr.addTest("opera",function(){return"Opera"===Jane.UA.BrowserName?Jane.UA.BrowserVersion:!1}),Modernizr.addTest("mozilla",function(){return"Gecko"===Jane.UA.BrowserEngine?Jane.UA.BrowserEngineVersion:!1}),Modernizr.addTest("edge",function(){return"Edge"===Jane.UA.BrowserEngine?Jane.UA.BrowserEngineVersion:!1
}),Modernizr.addTest("ie9",function(){return"MSIE"===Jane.UA.BrowserName&&9===document.documentMode}),Modernizr.addTest("ie10",function(){return"MSIE"===Jane.UA.BrowserName&&10===document.documentMode}),Modernizr.addTest("ie11",function(){return"MSIE"===Jane.UA.BrowserName&&11===document.documentMode}),Modernizr.addTest("ielt11",function(){return"MSIE"===Jane.UA.BrowserName&&document.documentMode<11}),Modernizr.addTest("ios",function(){return"iOS"===Jane.UA.OSFamily}),Modernizr.addTest("mac",function(){return"MacOS"===Jane.UA.OSFamily
}),function(e){var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";e.atob=e.atob||function(e){e=String(e);var n,r=0,i=[],o=0,a=0;if(e=e.replace(/\s/g,""),e.length%4===0&&(e=e.replace(/=+$/,"")),e.length%4===1)throw new Error("InvalidCharacterError");if(/[^+\/0-9A-Za-z]/.test(e))throw new Error("InvalidCharacterError");for(;r<e.length;)n=t.indexOf(e.charAt(r)),o=o<<6|n,a+=6,24===a&&(i.push(String.fromCharCode(o>>16&255)),i.push(String.fromCharCode(o>>8&255)),i.push(String.fromCharCode(255&o)),a=0,o=0),r+=1;
return 12===a?(o>>=4,i.push(String.fromCharCode(255&o))):18===a&&(o>>=2,i.push(String.fromCharCode(o>>8&255)),i.push(String.fromCharCode(255&o))),i.join("")}}(this),!window.console){var e=function(){};window.console={log:e,info:e,warn:e,error:e,assert:e,dir:e,clear:e,profile:e,profileEnd:e}}(function(e){"use strict";e.Transitions={_names:{transition:"transitionend",OTransition:"oTransitionEnd",WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend"},_parseTimes:function(e){for(var t,n=e.split(/,\s*/),r=0;r<n.length;r++)t=n[r],n[r]=parseFloat(t),t.match(/\ds/)&&(n[r]=1e3*n[r]);
return n},getEvent:function(){var e=!1;for(var t in this._names)if("undefined"!=typeof document.body.style[t]){e=this._names[t];break}return this.getEvent=function(){return e},e},animFrame:function(e){var t=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame;return this.animFrame=t?function(e){return t.call(window,e)}:function(e){return setTimeout(e,10)},this.animFrame(e)},isSupported:function(){return this.getEvent()!==!1
}},e.extend(e.fn,{afterTransition:function(t,n){if("undefined"==typeof n&&(n=t,t=1),!e.Transitions.isSupported()){for(var r=0;r<this.length;r++)n.call(this[r],{type:"aftertransition",elapsedTime:0,propertyName:"",currentTarget:this[r]});return this}for(var r=0;r<this.length;r++){var i=e(this[r]),o=i.css("transition-property").split(/,\s*/),a=i.css("transition-duration"),s=i.css("transition-delay");a=e.Transitions._parseTimes(a),s=e.Transitions._parseTimes(s);for(var u,c,l,d,f,h=0;h<o.length;h++)u=o[h],c=a[1==a.length?0:h],l=s[1==s.length?0:h],d=l+c*t,f=c*t/1e3,function(t,r,i,o){setTimeout(function(){e.Transitions.animFrame(function(){n.call(t[0],{type:"aftertransition",elapsedTime:o,propertyName:r,currentTarget:t[0]})
})},i)}(i,u,d,f)}return this},transitionEnd:function(t){for(var n=0;n<this.length;n++)this[n].addEventListener(e.Transitions.getEvent(),function(e){t.call(this,e)});return this}})}).call(this,jQuery),vow.Queue=function(){function e(e){this._pendingTasks=[],this._params=n(r,e),this._curWeight=0,this._isRunScheduled=!1,this._isStopped=!0,this._processedBuffer=[],this._stats={pendingTasksCount:0,processingTasksCount:0,processedTasksCount:0}}var t=_.defer,n=function(){for(var e={},t=0,n=arguments.length;n>t;t++){var r=arguments[t];
if(r)for(var i in r)r.hasOwnProperty(i)&&(e[i]=r[i])}return e},r={weightLimit:100},i={weight:1,priority:1};return e.prototype={enqueue:function(e,t){var n=this._buildTask(e,t);if(n.params.weight>this._params.weightLimit)throw Error("task with weight of "+n.params.weight+" can't be performed in queue with limit of "+this._params.weightLimit);return this._enqueueTask(n),this._isStopped||this._scheduleRun(),n.defer.promise().always(function(){this._stats.processingTasksCount--,this._stats.processedTasksCount++
},this),n.defer.promise()},start:function(){if(this._isStopped){this._isStopped=!1;var e=this._processedBuffer;e.length&&(this._processedBuffer=[],t(function(){for(;e.length;)e.shift()()})),this._hasPendingTasks()&&this._scheduleRun()}},stop:function(){this._isStopped=!0},isStarted:function(){return!this._isStopped},setParams:function(e){"undefined"!=typeof e.weightLimit&&(this._params.weightLimit=e.weightLimit,this._scheduleRun())},getStats:function(){return this._stats},_buildTask:function(e,t){return{fn:e,params:n(i,t),defer:vow.defer()}
},_enqueueTask:function(e){var t=this._pendingTasks,n=t.length;for(this._stats.pendingTasksCount++;n;){if(t[n-1].params.priority>=e.params.priority)return void(n===t.length?t.push(e):t.splice(n,0,e));n--}t.unshift(e)},_scheduleRun:function(){this._isRunScheduled||(this._isRunScheduled=!0,t(this._run.bind(this)))},_run:function(){for(this._isRunScheduled=!1;this._hasPendingTasks()&&this._allowRunTask(this._pendingTasks[0]);)this._runTask(this._pendingTasks.shift())},_hasPendingTasks:function(){return!!this._pendingTasks.length
},_allowRunTask:function(e){return this._curWeight+e.params.weight<=this._params.weightLimit},_runTask:function(e){this._curWeight+=e.params.weight,this._stats.pendingTasksCount--,this._stats.processingTasksCount++;var t=vow.invoke(e.fn);t.progress(e.defer.notify,e.defer).always(function(){this._curWeight-=e.params.weight,this._isStopped?this._processedBuffer.push(function(){e.defer.resolve(t)}):(e.defer.resolve(t),this._scheduleRun())},this)}},e}(),jQuery.fx.off=!(Modernizr.csstransitions||Modernizr.ie9),Object.defineProperty(Function.prototype,"lazy",{value:function(e){function t(){var t=this,o=arguments;
n(),i=setTimeout(function(){r.apply(t,o)},e)}function n(){clearTimeout(i)}var r=this,i=null;return t.reset=n,t.exec=function(){n(),r.apply(this===t?null:this,arguments)},t}}),window.Lego={messages:{},block:{},params:{id:"mail","passport-host":Daria.Config["passport-host"],"social-host":Daria.Config["social-host"]}},Lego.block["i-social"]=function(e){function t(e){function t(){var e;if(!o.yaWindow)return!0;try{e=o.yaWindow.closed}catch(t){e=!0}return e}function n(){t()&&(o.wTimer=clearInterval(o.wTimer),o.onFailure({status:"error"}))
}function r(e){var t,r=o.popupName,i=500,a=280,s=Math.round((screen.availWidth-i)/2),u=Math.round((screen.availHeight-a)/2),c="scrollbars=yes, resizable=1, menubar=0, toolbar=0, status=0, location=0, directories=0, left="+s+", top="+u+", width="+i+", height="+a,l={};for(t in o.paramsDefault)l[t]=o.paramsDefault[t];for(t in e)l[t]=e[t];var d=["ddom="+(l.ddom||(location.hostname==document.domain?"":document.domain))];l.retpath+=(l.retpath.match("#")?"&":"#")+d.join("&");var f=o.url,h=[];for(var p in l)h.push(encodeURIComponent(p)+"="+encodeURIComponent(l[p]));
f+=h.join("&"),o.yaWindow=window.open(f,r,c),o.yaWindow.focus(),o.yaWindow&&(o.wTimer=setInterval(n,500))}function i(){this.handlers={onSuccess:null,onFailure:null},o.wTimer=clearInterval(o.wTimer),t()||o.yaWindow.close(),o.yaWindow=!1}var o=this;this.url=e.startUrl+"?",delete e.startUrl,this.popupName=e.popupName,this.yaWindow=null,this.wTimer=null,this.paramsDefault=e,this.start=function(e,t,n){i(),o.handlers={onSuccess:e,onFailure:t},r(n)},this.onSuccess=function(){i();var e=o.handlers.onSuccess;
e&&e()},this.onFailure=function(){i();var e=o.handlers.onFailure;e&&e()}}Lego.block["i-social"].Broker=t;var n=Lego.block["i-social"].defaultParams={startUrl:Lego.params["social-startUrl"]||(Lego.params["social-host"]||"//social.yandex.ru")+"/broker/start",retpath:Lego.params["social-retpath"]||location.protocol+"//"+location.host+Lego.params["lego-path"]+"/blocks/i-social/closer/i-social__closer.html",consumer:Lego.params.id||"morda",popupName:"social_"+(Lego.params.id||"morda"),application:"",action_if_anonymous:"authorize",result_location:"fragment"};
return Lego.block["i-social"].broker=new t($.extend(n,e)),Lego.block["i-social"].broker},function(){function e(t,n){var r=this;$.extend(this,e.DEFAULT_OPTS,n),nb&&t instanceof nb.Block?(this.nbInput=t,this.input=t.$control):this.input=$(t),["show","hide","hideIfClickOutside","keydownHandler","selectDate"].forEach(function(e){"function"==typeof r[e]&&(r[e]=r[e].bind(r))}),this.selectDateLazy=_.throttle(function(){r.visible&&r.selectDate()},50,{trailing:!0}),$(document).on("hide-calendar",this.hide),this.build(),this.selectDate(),this.hide()
}var t=".b-mail-calendar__table__cell:not(.b-mail-calendar__table__cell_disabled)";e.DEFAULT_OPTS={usePosition:!1,container:"body",start_of_week:1,hideOnScroll:!1,autoOrientation:!1,visible:!1},e.prototype={build:function(){var e=this;this.$popup=$(Jane.tt("common:calendar")),this.$nav=this.$popup.find(".js-navigation"),this.tbody=this.$popup.find(".js-table-body"),this.yearNameSpan=this.$nav.find(".b-mail-calendar__controls__year-name"),this.monthNameSpan=this.$nav.find(".b-mail-calendar__controls__month-name");
for(var n="",r=0;7>r;r++){var i=0==r?" b-mail-calendar__table__cell_first":6==r?" b-mail-calendar__table__cell_last":"";n+="<th class='b-mail-calendar__table__cell"+i+"'>"+this.dayName((r+e.start_of_week)%7)+"</th>"}this.$popup.find(".js-row-h").html(n),$(this.container).append(this.$popup),this.$popup.on("click",".prev:not(.b-link_disabled)",function(){e.moveMonthBy(-1)}).on("click",".next:not(.b-link_disabled)",function(){e.moveMonthBy(1)}).on("click",t,function(t){e.changeInput($(t.currentTarget).attr("date"))
}).on("mousedown click",function(e){e.preventDefault(),e.stopPropagation()}),this.input.on("keydown keyup change",function(){e.selectDateLazy()}),this.hideOnScroll&&$(document).on("scroll",this.hide)},updateOptions:function(e){$.extend(this,e),this._needRepaint=!0},selectMonth:function(e){var t=new Date(e.getFullYear(),e.getMonth(),1);if(this._needRepaint||!this.currentMonth||this.currentMonth.getFullYear()!==t.getFullYear()||this.currentMonth.getMonth()!==t.getMonth()){this._needRepaint=!1,this.currentMonth=t;
for(var n=this.rangeStart(e),r=this.rangeEnd(e),i=this.daysBetween(n,r),o="",a=this.getRangeDate(this.minDate),s=this.getRangeDate(this.maxDate),u=0;i>=u;u++){var c=new Date(n.getFullYear(),n.getMonth(),n.getDate()+u,12,0),l=this.isDayOff(c)?" b-mail-calendar__table__cell_day-off":"";this.isFirstDayOfWeek(c)&&(o+="<tr class='b-mail-calendar__table__row'>"),o+=a&&a>c||s&&c>s?'<td class="b-mail-calendar__table__cell b-mail-calendar__table__cell_disabled"><a class="b-mail-calendar__table__i">'+c.getDate()+"</a></td>":c.getMonth()==e.getMonth()?'<td class="b-mail-calendar__table__cell'+l+'" date="'+this.dateToString(c)+'"><a class="b-mail-calendar__table__i">'+c.getDate()+"</a></td>":'<td class="b-mail-calendar__table__cell b-mail-calendar__table__cell_inactive" date="'+this.dateToString(c)+'"><a class="b-mail-calendar__table__i">'+c.getDate()+"</a></td>",this.isLastDayOfWeek(c)&&(o+="</tr>")
}this.tbody.empty().append(o),this.$popup.removeClass("UNUSED"),this.monthNameSpan.empty().append(this.monthName(e.getMonth())),this.yearNameSpan.empty().append(this.currentMonth.getFullYear());var d;a&&(d=this.currentMonth>(a&&a.setDate(1)&&a.setHours(0)),this.$nav.find(".prev").toggleClass("b-link_disabled",!d)),s&&(d=this.currentMonth<(s&&s.setDate(1)&&s.setHours(0)),this.$nav.find(".next").toggleClass("b-link_disabled",!d)),$('td[date="'+this.dateToString(new Date)+'"]',this.tbody).addClass("b-mail-calendar__table__cell_today")
}$(".b-mail-calendar__table__cell_selected",this.tbody).removeClass("b-mail-calendar__table__cell_selected"),$('td[date^="'+this.selectedDateString.substr(0,10)+'"]',this.tbody).addClass("b-mail-calendar__table__cell_selected")},getRangeDate:function(e){var t,n,r;if(e instanceof Date)return t=e.getFullYear()||!1,n=e.getMonth()||!1,r=e.getDate()||!1,new Date(t,n,r,12,0)},selectDate:function(e){"undefined"==typeof e&&(e=this.stringToDate(this.getInputVal())),e||(e=new Date),this.selectedDate=e,this.selectedDateString=this.dateToString(this.selectedDate),this.selectMonth(this.selectedDate)
},changeInput:function(e){this.setInputVal(e),this.selectDate(),this.onSelect(e),this.hide()},setInputVal:function(e){this.nbInput?this.nbInput.setValue(e):this.input.val(e),this.onSelect&&this.onSelect(e)},getInputVal:function(){return this.nbInput?this.nbInput.getValue():this.input.val()},show:function(){ns.events.trigger("date-input:close-calendar"),ns.events.on("date-input:close-calendar",this.hide),this.visible=!0,this.$popup.css("display","block"),$([window,document.body]).click(this.hideIfClickOutside),this.input.off(".date-input"),$(document.body).keydown(this.keydownHandler),this.selectDate(),this.setPosition()
},hide:function(){this.visible=!1,this.$popup.css("display","none"),$([window,document.body]).off("click",this.hideIfClickOutside),this.input.on("focus.date-input click.date-input",this.show),$(document.body).off("keydown",this.keydownHandler),ns.events.off("date-input:close-calendar",this.hide)},hideIfClickOutside:function(e){var t=this.nbInput?this.nbInput.$control[0]:this.input[0],n=this.$popup[0];t===e.target||$.contains(t,e.target)||n===e.target||$.contains(n,e.target)||this.hide()},keydownHandler:function(e){var t=Jane.Common.keyCode,n=e.keyCode;
if(n===t.TAB)this.hide();else if(n===t.ESC)this.hide(),e.stopPropagation();else if(this.useKeyboard){switch(n){case t.ENTER:this.changeInput(this.selectedDateString);break;case t.PAGEUP:this.moveDateMonthBy(e.ctrlKey?-12:-1);break;case t.PAGEDOWN:this.moveDateMonthBy(e.ctrlKey?12:1);break;case t.UP:this.moveDateBy(-7);break;case t.DOWN:this.moveDateBy(7);break;case t.LEFT:this.moveDateBy(-1);break;case t.RIGHT:this.moveDateBy(1)}e.preventDefault()}},stringToDate:function(e){var t;if(this.isSimpleDateFormat){if(t=e.trim().match(/^(\d{1,2})\.(\d{1,2})\.(\d{4})$/))return new Date(t[3],Number(t[2])-1,t[1],12)
}else if(t=e.match(/^(\d{1,2}) ([^\s]+) (\d{4})$/))return new Date(t[3],this.monthName(t[2]),t[1],12);return null},dateToString:function(e){if(this.isSimpleDateFormat){var t=Jane.Common.n;return t(e.getDate())+"."+t(e.getMonth()+1)+"."+e.getFullYear()}return e.getDate()+" "+this.shortMonthName(e.getMonth())+" "+e.getFullYear()},setPosition:function(){var e=0,t=0,n=Boolean(this.nbInput);n&&(e=7,t=1);var r,i=n?this.nbInput.$node:this.input;r=this.usePosition?i.position():i.offset();var o=r.left+t,a=r.top+i.outerHeight()+e,s=$(window),u=s.width();
if(this.autoOrientation){var c=s.scrollTop(),l=c+s.height(),d=this.$popup.outerHeight(),f=i.offset().top+d+6;f>l&&(a=r.top-d-e)}var h=this.$popup.outerWidth();o+h>u&&(o=u-h-15),this.$popup.css($.extend({},this.addStyle,{top:a,left:o})),this.ieframe&&this.ieframe.css({width:this.$popup.outerWidth(),height:this.$popup.outerHeight()})},moveDateBy:function(e){var t=new Date(this.selectedDate.getFullYear(),this.selectedDate.getMonth(),this.selectedDate.getDate()+e);this.selectDate(t)},moveDateMonthBy:function(e){var t=new Date(this.selectedDate.getFullYear(),this.selectedDate.getMonth()+e,this.selectedDate.getDate());
t.getMonth()==this.selectedDate.getMonth()+e+1&&t.setDate(0),this.selectDate(t)},moveMonthBy:function(e){var t=new Date(this.currentMonth.getFullYear(),this.currentMonth.getMonth()+e,this.currentMonth.getDate());this.selectMonth(t)},monthName:function(e){return Jane.Date.monthName(e)},shortMonthName:function(e){return Jane.Date.shortMonthName(e)},dayName:function(e){return Jane.Date.weekDay(e)},indexFor:function(e,t){for(var n=0;n<e.length;n++)if(t==e[n])return n},daysBetween:function(e,t){return e=Date.UTC(e.getFullYear(),e.getMonth(),e.getDate()),t=Date.UTC(t.getFullYear(),t.getMonth(),t.getDate()),(t-e)/864e5
},changeDayTo:function(e,t,n){var r=n*(Math.abs(t.getDay()-e-7*n)%7);return new Date(t.getFullYear(),t.getMonth(),t.getDate()+r)},rangeStart:function(e){return this.changeDayTo(this.start_of_week,new Date(e.getFullYear(),e.getMonth()),-1)},rangeEnd:function(e){return this.changeDayTo((this.start_of_week-1)%7,new Date(e.getFullYear(),e.getMonth()+1,0),1)},isFirstDayOfWeek:function(e){return e.getDay()==this.start_of_week},isLastDayOfWeek:function(e){return e.getDay()==(this.start_of_week-1)%7},isDayOff:function(e){return 6==e.getDay()||0==e.getDay()
},onSelect:function(){}},$.fn.date_input=function(t){return this.each(function(){new e(this,t)})},Jane.DateInput=e}(),function(e){"use strict";function t(t){var n=t.data;t.isDefaultPrevented()||(t.preventDefault(),e(t.target).ajaxSubmit(n))}function n(t){var n=t.target,r=e(n);if(!r.is("[type=submit],[type=image]")){var i=r.closest("[type=submit]");if(0===i.length)return;n=i[0]}var o=this;if(o.clk=n,"image"==n.type)if(void 0!==t.offsetX)o.clk_x=t.offsetX,o.clk_y=t.offsetY;else if("function"==typeof e.fn.offset){var a=r.offset();
o.clk_x=t.pageX-a.left,o.clk_y=t.pageY-a.top}else o.clk_x=t.pageX-n.offsetLeft,o.clk_y=t.pageY-n.offsetTop;setTimeout(function(){o.clk=o.clk_x=o.clk_y=null},100)}function r(){if(e.fn.ajaxSubmit.debug){var t="[jquery.form] "+Array.prototype.join.call(arguments,"");window.console&&window.console.log?window.console.log(t):window.opera&&window.opera.postError&&window.opera.postError(t)}}var i={};i.fileapi=void 0!==e("<input type='file'/>").get(0).files,i.formdata=void 0!==window.FormData;var o=!!e.fn.prop;
e.fn.attr2=function(){if(!o)return this.attr.apply(this,arguments);var e=this.prop.apply(this,arguments);return e&&e.jquery||"string"==typeof e?e:this.attr.apply(this,arguments)},e.fn.ajaxSubmit=function(t){function n(n){var r,i,o=e.param(n,t.traditional).split("&"),a=o.length,s=[];for(r=0;a>r;r++)o[r]=o[r].replace(/\+/g," "),i=o[r].split("="),s.push([decodeURIComponent(i[0]),decodeURIComponent(i[1])]);return s}function a(r){for(var i=new FormData,o=0;o<r.length;o++)i.append(r[o].name,r[o].value);
if(t.extraData){var a=n(t.extraData);for(o=0;o<a.length;o++)a[o]&&i.append(a[o][0],a[o][1])}t.data=null;var s=e.extend(!0,{},e.ajaxSettings,t,{contentType:!1,processData:!1,cache:!1,type:u||"POST"});t.uploadProgress&&(s.xhr=function(){var n=e.ajaxSettings.xhr();return n.upload&&n.upload.addEventListener("progress",function(e){var n=0,r=e.loaded||e.position,i=e.total;e.lengthComputable&&(n=Math.ceil(r/i*100)),t.uploadProgress(e,r,i,n)},!1),n}),s.data=null;var c=s.beforeSend;return s.beforeSend=function(e,t){t.data=i,c&&c.call(this,e,t)
},e.ajax(s)}function s(n){function i(e){var t=null;try{e.contentWindow&&(t=e.contentWindow.document)}catch(n){r("cannot get iframe.contentWindow document: "+n)}if(t)return t;try{t=e.contentDocument?e.contentDocument:e.document}catch(n){r("cannot get iframe.contentDocument: "+n),t=e.document}return t}function a(){function t(){try{var e=i(v).readyState;r("state = "+e),e&&"uninitialized"==e.toLowerCase()&&setTimeout(t,50)}catch(n){r("Server abort: ",n," (",n.name,")"),s(A),C&&clearTimeout(C),C=void 0
}}var n=d.attr2("target"),o=d.attr2("action");D.setAttribute("target",p),(!u||/post/i.test(u))&&D.setAttribute("method","POST"),o!=f.url&&D.setAttribute("action",f.url),f.skipEncodingOverride||u&&!/post/i.test(u)||d.attr({encoding:"multipart/form-data",enctype:"multipart/form-data"}),f.timeout&&(C=setTimeout(function(){w=!0,s(T)},f.timeout));var a=[];try{if(f.extraData)for(var c in f.extraData)f.extraData.hasOwnProperty(c)&&a.push(e.isPlainObject(f.extraData[c])&&f.extraData[c].hasOwnProperty("name")&&f.extraData[c].hasOwnProperty("value")?e('<input type="hidden" name="'+f.extraData[c].name+'">').val(f.extraData[c].value).appendTo(D)[0]:e('<input type="hidden" name="'+c+'">').val(f.extraData[c]).appendTo(D)[0]);
f.iframeTarget||m.appendTo("body"),v.attachEvent?v.attachEvent("onload",s):v.addEventListener("load",s,!1),setTimeout(t,15);try{D.submit()}catch(l){var h=document.createElement("form").submit;h.apply(D)}}finally{D.setAttribute("action",o),n?D.setAttribute("target",n):d.removeAttr("target"),e(a).remove()}}function s(t){if(!_.aborted&&!N){if(M=i(v),M||(r("cannot access response document"),t=A),t===T&&_)return _.abort("timeout"),void x.reject(_,"timeout");if(t==A&&_)return _.abort("server abort"),void x.reject(_,"error","server abort");
if(M&&M.location.href!=f.iframeSrc||w){v.detachEvent?v.detachEvent("onload",s):v.removeEventListener("load",s,!1);var n,o="success";try{if(w)throw"timeout";var a="xml"==f.dataType||M.XMLDocument||e.isXMLDoc(M);if(r("isXml="+a),!a&&window.opera&&(null===M.body||!M.body.innerHTML)&&--O)return r("requeing onLoad callback, DOM not available"),void setTimeout(s,250);var u=M.body?M.body:M.documentElement;_.responseText=u?u.innerHTML:null,_.responseXML=M.XMLDocument?M.XMLDocument:M,a&&(f.dataType="xml"),_.getResponseHeader=function(e){var t={"content-type":f.dataType};
return t[e.toLowerCase()]},u&&(_.status=Number(u.getAttribute("status"))||_.status,_.statusText=u.getAttribute("statusText")||_.statusText);var c=(f.dataType||"").toLowerCase(),l=/(json|script|text)/.test(c);if(l||f.textarea){var d=M.getElementsByTagName("textarea")[0];if(d)_.responseText=d.value,_.status=Number(d.getAttribute("status"))||_.status,_.statusText=d.getAttribute("statusText")||_.statusText;else if(l){var p=M.getElementsByTagName("pre")[0],g=M.getElementsByTagName("body")[0];p?_.responseText=p.textContent?p.textContent:p.innerText:g&&(_.responseText=g.textContent?g.textContent:g.innerText)
}}else"xml"==c&&!_.responseXML&&_.responseText&&(_.responseXML=F(_.responseText));try{E=R(_,c,f)}catch(y){o="parsererror",_.error=n=y||o}}catch(y){r("error caught: ",y),o="error",_.error=n=y||o}_.aborted&&(r("upload aborted"),o=null),_.status&&(o=_.status>=200&&_.status<300||304===_.status?"success":"error"),"success"===o?(f.success&&f.success.call(f.context,E,"success",_),x.resolve(_.responseText,"success",_),h&&e.event.trigger("ajaxSuccess",[_,f])):o&&(void 0===n&&(n=_.statusText),f.error&&f.error.call(f.context,_,o,n),x.reject(_,"error",n),h&&e.event.trigger("ajaxError",[_,f,n])),h&&e.event.trigger("ajaxComplete",[_,f]),h&&!--e.active&&e.event.trigger("ajaxStop"),f.complete&&f.complete.call(f.context,_,o),N=!0,f.timeout&&clearTimeout(C),setTimeout(function(){f.iframeTarget?m.attr("src",f.iframeSrc):m.remove(),_.responseXML=null
},100)}}}var c,l,f,h,p,m,v,_,y,b,w,C,D=d[0],x=e.Deferred();if(x.abort=function(e){_.abort(e)},n)for(l=0;l<g.length;l++)c=e(g[l]),o?c.prop("disabled",!1):c.removeAttr("disabled");if(f=e.extend(!0,{},e.ajaxSettings,t),f.context=f.context||f,p="jqFormIO"+(new Date).getTime(),f.iframeTarget?(m=e(f.iframeTarget),b=m.attr2("name"),b?p=b:m.attr2("name",p)):(m=e('<iframe name="'+p+'" src="'+f.iframeSrc+'" />'),m.css({position:"absolute",top:"-1000px",left:"-1000px"})),v=m[0],_={aborted:0,responseText:null,responseXML:null,status:0,statusText:"n/a",getAllResponseHeaders:function(){},getResponseHeader:function(){},setRequestHeader:function(){},abort:function(t){var n="timeout"===t?"timeout":"aborted";
r("aborting upload... "+n),this.aborted=1;try{v.contentWindow.document.execCommand&&v.contentWindow.document.execCommand("Stop")}catch(i){}m.attr("src",f.iframeSrc),_.error=n,f.error&&f.error.call(f.context,_,n,t),h&&e.event.trigger("ajaxError",[_,f,n]),f.complete&&f.complete.call(f.context,_,n)}},h=f.global,h&&0===e.active++&&e.event.trigger("ajaxStart"),h&&e.event.trigger("ajaxSend",[_,f]),f.beforeSend&&f.beforeSend.call(f.context,_,f)===!1)return f.global&&e.active--,x.reject(),x;if(_.aborted)return x.reject(),x;
y=D.clk,y&&(b=y.name,b&&!y.disabled&&(f.extraData=f.extraData||{},f.extraData[b]=y.value,"image"==y.type&&(f.extraData[b+".x"]=D.clk_x,f.extraData[b+".y"]=D.clk_y)));var T=1,A=2,k=e("meta[name=csrf-token]").attr("content"),S=e("meta[name=csrf-param]").attr("content");S&&k&&(f.extraData=f.extraData||{},f.extraData[S]=k),f.forceSync?a():setTimeout(a,10);var E,M,N,O=50,F=e.parseXML||function(e,t){return window.ActiveXObject?(t=new ActiveXObject("Microsoft.XMLDOM"),t.async="false",t.loadXML(e)):t=(new DOMParser).parseFromString(e,"text/xml"),t&&t.documentElement&&"parsererror"!=t.documentElement.nodeName?t:null
},I=e.parseJSON||function(e){return window.eval("("+e+")")},R=function(t,n,r){var i=t.getResponseHeader("content-type")||"",o="xml"===n||!n&&i.indexOf("xml")>=0,a=o?t.responseXML:t.responseText;return o&&"parsererror"===a.documentElement.nodeName&&e.error&&e.error("parsererror"),r&&r.dataFilter&&(a=r.dataFilter(a,n)),"string"==typeof a&&("json"===n||!n&&i.indexOf("json")>=0?a=I(a):("script"===n||!n&&i.indexOf("javascript")>=0)&&e.globalEval(a)),a};return x}if(!this.length)return r("ajaxSubmit: skipping submit process - no element selected"),this;
var u,c,l,d=this;"function"==typeof t?t={success:t}:void 0===t&&(t={}),u=t.type||this.attr2("method"),c=t.url||this.attr2("action"),l="string"==typeof c?e.trim(c):"",l=l||window.location.href||"",l&&(l=(l.match(/^([^#]+)/)||[])[1]),t=e.extend(!0,{url:l,success:e.ajaxSettings.success,type:u||e.ajaxSettings.type,iframeSrc:/^https/i.test(window.location.href||"")?"javascript:false":"about:blank"},t);var f={};if(this.trigger("form-pre-serialize",[this,t,f]),f.veto)return r("ajaxSubmit: submit vetoed via form-pre-serialize trigger"),this;
if(t.beforeSerialize&&t.beforeSerialize(this,t)===!1)return r("ajaxSubmit: submit aborted via beforeSerialize callback"),this;var h=t.traditional;void 0===h&&(h=e.ajaxSettings.traditional);var p,g=[],m=this.formToArray(t.semantic,g);if(t.data&&(t.extraData=t.data,p=e.param(t.data,h)),t.beforeSubmit&&t.beforeSubmit(m,this,t)===!1)return r("ajaxSubmit: submit aborted via beforeSubmit callback"),this;if(this.trigger("form-submit-validate",[m,this,t,f]),f.veto)return r("ajaxSubmit: submit vetoed via form-submit-validate trigger"),this;
var v=e.param(m,h);p&&(v=v?v+"&"+p:p),"GET"==t.type.toUpperCase()?(t.url+=(t.url.indexOf("?")>=0?"&":"?")+v,t.data=null):t.data=v;var _=[];if(t.resetForm&&_.push(function(){d.resetForm()}),t.clearForm&&_.push(function(){d.clearForm(t.includeHidden)}),!t.dataType&&t.target){var y=t.success||function(){};_.push(function(n){var r=t.replaceTarget?"replaceWith":"html";e(t.target)[r](n).each(y,arguments)})}else t.success&&_.push(t.success);if(t.success=function(e,n,r){for(var i=t.context||this,o=0,a=_.length;a>o;o++)_[o].apply(i,[e,n,r||d,d])
},t.error){var b=t.error;t.error=function(e,n,r){var i=t.context||this;b.apply(i,[e,n,r,d])}}if(t.complete){var w=t.complete;t.complete=function(e,n){var r=t.context||this;w.apply(r,[e,n,d])}}var C=e("input[type=file]:enabled",this).filter(function(){return""!==e(this).val()}),D=C.length>0,x="multipart/form-data",T=d.attr("enctype")==x||d.attr("encoding")==x,A=i.fileapi&&i.formdata;r("fileAPI :"+A);var k,S=(D||T)&&!A;t.iframe!==!1&&(t.iframe||S)?t.closeKeepAlive?e.get(t.closeKeepAlive,function(){k=s(m)
}):k=s(m):k=(D||T)&&A?a(m):e.ajax(t),d.removeData("jqxhr").data("jqxhr",k);for(var E=0;E<g.length;E++)g[E]=null;return this.trigger("form-submit-notify",[this,t]),this},e.fn.ajaxForm=function(i){if(i=i||{},i.delegation=i.delegation&&e.isFunction(e.fn.on),!i.delegation&&0===this.length){var o={s:this.selector,c:this.context};return!e.isReady&&o.s?(r("DOM not ready, queuing ajaxForm"),e(function(){e(o.s,o.c).ajaxForm(i)}),this):(r("terminating; zero elements found by selector"+(e.isReady?"":" (DOM not ready)")),this)
}return i.delegation?(e(document).off("submit.form-plugin",this.selector,t).off("click.form-plugin",this.selector,n).on("submit.form-plugin",this.selector,i,t).on("click.form-plugin",this.selector,i,n),this):this.ajaxFormUnbind().bind("submit.form-plugin",i,t).bind("click.form-plugin",i,n)},e.fn.ajaxFormUnbind=function(){return this.unbind("submit.form-plugin click.form-plugin")},e.fn.formToArray=function(t,n){var r=[];if(0===this.length)return r;var o=this[0],a=t?o.getElementsByTagName("*"):o.elements;
if(!a)return r;var s,u,c,l,d,f,h;for(s=0,f=a.length;f>s;s++)if(d=a[s],c=d.name,c&&!d.disabled)if(t&&o.clk&&"image"==d.type)o.clk==d&&(r.push({name:c,value:e(d).val(),type:d.type}),r.push({name:c+".x",value:o.clk_x},{name:c+".y",value:o.clk_y}));else if(l=e.fieldValue(d,!0),l&&l.constructor==Array)for(n&&n.push(d),u=0,h=l.length;h>u;u++)r.push({name:c,value:l[u]});else if(i.fileapi&&"file"==d.type){n&&n.push(d);var p=d.files;if(p.length)for(u=0;u<p.length;u++)r.push({name:c,value:p[u],type:d.type});
else r.push({name:c,value:"",type:d.type})}else null!==l&&"undefined"!=typeof l&&(n&&n.push(d),r.push({name:c,value:l,type:d.type,required:d.required}));if(!t&&o.clk){var g=e(o.clk),m=g[0];c=m.name,c&&!m.disabled&&"image"==m.type&&(r.push({name:c,value:g.val()}),r.push({name:c+".x",value:o.clk_x},{name:c+".y",value:o.clk_y}))}return r},e.fn.formSerialize=function(t){return e.param(this.formToArray(t))},e.fn.fieldSerialize=function(t){var n=[];return this.each(function(){var r=this.name;if(r){var i=e.fieldValue(this,t);
if(i&&i.constructor==Array)for(var o=0,a=i.length;a>o;o++)n.push({name:r,value:i[o]});else null!==i&&"undefined"!=typeof i&&n.push({name:this.name,value:i})}}),e.param(n)},e.fn.fieldValue=function(t){for(var n=[],r=0,i=this.length;i>r;r++){var o=this[r],a=e.fieldValue(o,t);null===a||"undefined"==typeof a||a.constructor==Array&&!a.length||(a.constructor==Array?e.merge(n,a):n.push(a))}return n},e.fieldValue=function(t,n){var r=t.name,i=t.type,o=t.tagName.toLowerCase();if(void 0===n&&(n=!0),n&&(!r||t.disabled||"reset"==i||"button"==i||("checkbox"==i||"radio"==i)&&!t.checked||("submit"==i||"image"==i)&&t.form&&t.form.clk!=t||"select"==o&&-1==t.selectedIndex))return null;
if("select"==o){var a=t.selectedIndex;if(0>a)return null;for(var s=[],u=t.options,c="select-one"==i,l=c?a+1:u.length,d=c?a:0;l>d;d++){var f=u[d];if(f.selected){var h=f.value;if(h||(h=f.attributes&&f.attributes.value&&!f.attributes.value.specified?f.text:f.value),c)return h;s.push(h)}}return s}return e(t).val()},e.fn.clearForm=function(t){return this.each(function(){e("input,select,textarea",this).clearFields(t)})},e.fn.clearFields=e.fn.clearInputs=function(t){var n=/^(?:color|date|datetime|email|month|number|password|range|search|tel|text|time|url|week)$/i;
return this.each(function(){var r=this.type,i=this.tagName.toLowerCase();n.test(r)||"textarea"==i?this.value="":"checkbox"==r||"radio"==r?this.checked=!1:"select"==i?this.selectedIndex=-1:"file"==r?/MSIE/.test(navigator.userAgent)?e(this).replaceWith(e(this).clone(!0)):e(this).val(""):t&&(t===!0&&/hidden/.test(r)||"string"==typeof t&&e(this).is(t))&&(this.value="")})},e.fn.resetForm=function(){return this.each(function(){("function"==typeof this.reset||"object"==typeof this.reset&&!this.reset.nodeType)&&this.reset()
})},e.fn.enable=function(e){return void 0===e&&(e=!0),this.each(function(){this.disabled=!e})},e.fn.selected=function(t){return void 0===t&&(t=!0),this.each(function(){var n=this.type;if("checkbox"==n||"radio"==n)this.checked=t;else if("option"==this.tagName.toLowerCase()){var r=e(this).parent("select");t&&r[0]&&"select-one"==r[0].type&&r.find("option").selected(!1),this.selected=t}})},e.fn.ajaxSubmit.debug=!1}("undefined"!=typeof jQuery?jQuery:window.Zepto),function(e){var t={comma:188,backspace:8,tab:9,cmd:Modernizr.opera?17:Modernizr.mozilla?224:[91,93],enter:13,pause:19,capslock:20,esc:27,space:32,pageup:33,pagedown:34,end:35,home:36,left:37,up:38,right:39,down:40,insert:45,"delete":46,f1:112,f2:113,f3:114,f4:115,f5:116,f6:117,f7:118,f8:119,f9:120,f10:121,f11:122,f12:123,"?":191,minus:Modernizr.opera?[109,45]:Modernizr.mozilla?109:[189,109],plus:Modernizr.opera?[61,43,107,187]:Modernizr.mozilla?[61,107]:[187,107]},n={},r={},i=null,o={},a={},s=!1,u=function(t,n){var r=t;
n.ctrl&&(r+="_ctrl"),n.meta&&!Modernizr.msie&&(r+="_meta"),n.alt&&(r+="_alt"),n.shift&&(r+="_shift");var i=function(e,t){return t&&16!==t&&17!==t&&18!==t&&91!==t&&(e+="_"+t),e};if(e.isArray(n.which)){var o=[];return e.each(n.which,function(e,t){o.push(i(r,t))}),o}return i(r,n.which)},c=function(n){var r={},i=n.split("+");return e.each(i,function(e,n){"ctrl"===n||"meta"===n||"alt"===n||"shift"===n?r[n]=!0:r.which=t[n]||n.toUpperCase().charCodeAt()}),r},l=function(t){var n=t.tagName.toLowerCase(),r=t.type,i=["button","reset","submit","radio","checkbox"];
return"input"===n&&e.inArray(r,i)<0||"textarea"===n},d=function(e,t){return"undefined"==typeof t?!0:-1!==e.className.indexOf(t)},f=function(e,t){if("undefined"==typeof t||!t instanceof Array)return!0;for(var n=0;n<t.length;n++)if(e.className.indexOf(t[n])>-1)return!1;return!0},h=function(e){for(var t in r)if(r[t].hasOwnProperty(e))return r[t][e]},p=function(t,n){if(r){var i={ctrl:n.ctrlKey,meta:n.metaKey,alt:n.altKey,shift:n.shiftKey,which:n.which},o=u(t,i),a=h(o),t=ns.page.current.page;if(a&&!nb.isAnySelectOpened()&&!nb.isAnyModalOpened()){var s=l(n.target),c=!1;
e.each(a,function(r,i){if(e.isArray(i.disableAt))for(var o=i.disableAt,r=0,a=o.length;a>r;r++)if(o[r]==t)return;if(!s||i.enableInInput&&d(n.target,i.namedInput)&&f(n.target,i.filterInput)){var u=i.action,l=null;l=u?ns.action.run(u,{}):i.handler(n),ns&&ns.action&&ns.action.run("trigger-hotkey-pressed",{shortcut:i}),l===!0||c||(n.preventDefault(),c=!0);var h=document.activeElement;return!s&&h&&"A"===h.nodeName&&e(h).blur(),l}})}}};e.Shortcuts={},e.Shortcuts.switchList=function(t){var a=r;null!==i&&(a=i);
for(var s in a)o.hasOwnProperty(s)||s===t||delete a[s];return n[t]?void e.Shortcuts.enableList(t):!1},e.Shortcuts.modalListOn=function(e){return n[e]?(null===i&&(i=r),r={},void(r[e]=n[e])):!1},e.Shortcuts.modalListOff=function(t){null!==i&&(r=i,i=null,e.Shortcuts.refresh(t))},e.Shortcuts.disableList=function(e){return n[e]?void(r.hasOwnProperty(e)&&delete r[e]):!1},e.Shortcuts.enableList=function(e){return n[e]?(null!==i&&(i[e]=n[e]),void(r[e]=n[e])):!1},e.Shortcuts.loadList=function(t,n){var r=t.global||!1,i=t.shortcuts||{},a=t.name||"default";
for(var s in i){var u=i[s];u.list=a,u.type=u.type||"down",n&&"undefined"!=typeof u.altMask&&(u.mask=u.altMask),e.Shortcuts.add(u)}r&&(o[a]=1,e.Shortcuts.enableList(a))},e.Shortcuts.start=function(){return s?void 0:(e(document).on("keydown.shortcuts",function(e){var t="true"===e.target.getAttribute("contenteditable");t&&e.target===document.activeElement&&27!==e.which||("keypress"===e.type&&e.which>=97&&e.which<=122&&(e.which=e.which-32),a[e.which]||p("down",e),a[e.which]=!0,p("hold",e),65===e.which&&(e.metaKey||e.ctrlKey)&&(a[e.which]=!1))
}),e(document).on("keyup.shortcuts",function(e){var t="true"===e.target.getAttribute("contenteditable");t||(a[e.which]=!1,p("up",e))}),s=!0,this)},e.Shortcuts.stop=function(){return e(document).off("keypress.shortcuts keydown.shortcuts keyup.shortcuts"),s=!1,this},e.Shortcuts.refresh=function(t){e.Shortcuts.stop(),e.Shortcuts.start(t)},e.Shortcuts.add=function(t){if(!t.mask)throw new Error("$.Shortcuts.add: required parameter 'params.mask' is undefined.");if(!t.handler&&!t.action)throw new Error("$.Shortcuts.add: required parameter 'params.handler' or 'params.action' is undefined.");
var r=t.type||"down",i=t.list?t.list.replace(/\s+/g,"").split(","):["default"];return e.each(i,function(i,o){n[o]||(n[o]={});var a=n[o],s=t.mask.toLowerCase().replace(/\s+/g,"").split(",");e.each(s,function(n,i){var o=c(i),s=u(r,o);e.isArray(s)||(s=[s]),e.each(s,function(e,n){a[n]||(a[n]=[]),a[n].push(t)})})}),this},e.Shortcuts.remove=function(t){if(!t.mask)throw new Error("$.Shortcuts.remove: required parameter 'params.mask' is undefined.");var r=t.type||"down",i=t.list?t.list.replace(/\s+/g,"").split(","):["default"];
return e.each(i,function(i,o){if(!n[o])return!0;var a=t.mask.toLowerCase().replace(/\s+/g,"").split(",");e.each(a,function(t,i){var a=c(i),s=u(r,a);e.isArray(s)||(s=[s]),e.each(s,function(e,t){delete n[o][t]})})}),this}}(jQuery),function(e){var t=/select|textarea/i,n=/text|password|checkbox|hidden|number/i,r=/checkbox/i,i=/radio/i;e.fn.serializeObject=function(){var o={};return this.map(function(){return this.elements?jQuery.makeArray(this.elements):this}).filter(function(){return this.name&&!this.disabled&&(t.test(this.nodeName)||n.test(this.type)||i.test(this.type)&&this.checked)
}).each(function(){var t=r.test(this.type)&&!this.checked?"":e(this).val(),n=this.name;"undefined"!=typeof o[n]?e.isArray(o[n])?o[n].push(t):o[n]=[o[n],t]:o[n]=t}),o}}(jQuery),function(e,t,n){var r={client:{},full:{},scroll:{}},i=function(){if("onmousewheel"in n)return"mw";try{var e=t.createEvent("MouseScrollEvents");e.initMouseEvent("DOMMouseScroll",!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null);var i=e.HORIZONTAL_AXIS,o=e.VERTICAL_AXIS;return r.client[i]="clientWidht",r.client[o]="clientHeight",r.full[i]="scrollWidth",r.full[o]="scrollHeight",r.scroll[i]="scrollLeft",r.scroll[o]="scrollTop",r.x=i,r.y=o,e=null,"mpx"
}catch(a){if(t.addEventListener)return"dms"}return"none"}(),o={mpx:function(e,t,n){this.addEventListener("DOMMouseScroll",function(e){var t=e.axis,n=this[r.full[t]],i=this[r.client[t]],o=this[r.scroll[t]]+e.detail;o>0&&n-i>o&&e.preventDefault()},!1),this.addEventListener("MozMousePixelScroll",function(e){var t=e.detail,i=e.axis;this[r.scroll[i]]=this[r.scroll[i]]+t,n.call(this,u(e))},!1)},dms:function(e,t,n){this.addEventListener("DOMMouseScroll",function(e){n.call(this,u(e))},!1)}},a={};a.mw=a.mpx=a.dms=function(e){e.handler=s(e.handler)
},e.event.special.mousewheel={setup:o[i],add:a[i]};var s=function(e){return function(t){var n="wheelDeltaX"in t?t.wheelDeltaX:t.originalEvent.wheelDeltaX,r="wheelDeltaY"in t?t.wheelDeltaY:t.originalEvent.wheelDeltaY;e.call(this,t,t.wheelDelta,n,r)}},u=function(t){var n=0-t.detail,i=t.axis,t=e.event.fix(t);return t.type="mousewheel",t.wheelDelta=n,t.wheelDeltaX=i===r.x?n:0,t.wheelDeltaY=i===r.y?n:0,t}}(jQuery,document,window),function(e){"use strict";function t(e){var t={};if(void 0===e.selectionStart){e.focus();
var n=document.selection.createRange();t.length=n.text.length,n.moveStart("character",-e.value.length),t.end=n.text.length,t.start=t.end-t.length}else t.start=e.selectionStart,t.end=e.selectionEnd,t.length=t.end-t.start;return t}function n(e,t,n){if(void 0===e.selectionStart){e.focus();var r=e.createTextRange();r.collapse(!0),r.moveEnd("character",n),r.moveStart("character",t),r.select()}else e.selectionStart=t,e.selectionEnd=n}function r(t,n){e.each(n,function(e,r){"function"==typeof r?n[e]=r(t,n,e):"function"==typeof t.autoNumeric[r]&&(n[e]=t.autoNumeric[r](t,n,e))
})}function i(e,t){"string"==typeof e[t]&&(e[t]*=1)}function o(e,t){r(e,t),t.oEvent=null,t.tagList=["B","CAPTION","CITE","CODE","DD","DEL","DIV","DFN","DT","EM","H1","H2","H3","H4","H5","H6","INS","KDB","LABEL","LI","OUTPUT","P","Q","S","SAMPLE","SPAN","STRONG","TD","TH","U","VAR"];var n=t.vMax.toString().split("."),o=t.vMin||0===t.vMin?t.vMin.toString().split("."):[];if(i(t,"vMax"),i(t,"vMin"),i(t,"mDec"),t.allowLeading=!0,t.aNeg=t.vMin<0?"-":"",n[0]=n[0].replace("-",""),o[0]=o[0].replace("-",""),t.mInt=Math.max(n[0].length,o[0].length,1),null===t.mDec){var a=0,s=0;
n[1]&&(a=n[1].length),o[1]&&(s=o[1].length),t.mDec=Math.max(a,s)}null===t.altDec&&t.mDec>0&&("."===t.aDec&&","!==t.aSep?t.altDec=",":","===t.aDec&&"."!==t.aSep&&(t.altDec="."));var u=t.aNeg?"([-\\"+t.aNeg+"]?)":"(-?)";t.aNegRegAutoStrip=u,t.skipFirstAutoStrip=new RegExp(u+"[^-"+(t.aNeg?"\\"+t.aNeg:"")+"\\"+t.aDec+"\\d].*?(\\d|\\"+t.aDec+"\\d)"),t.skipLastAutoStrip=new RegExp("(\\d\\"+t.aDec+"?)[^\\"+t.aDec+"\\d]\\D*$");var c="-"+t.aNum+"\\"+t.aDec;return t.allowedAutoStrip=new RegExp("[^"+c+"]","gi"),t.numRegAutoStrip=new RegExp(u+"(?:\\"+t.aDec+"?(\\d+\\"+t.aDec+"\\d+)|(\\d*(?:\\"+t.aDec+"\\d*)?))"),t
}function a(e,t,n){if(t.aSign)for(;e.indexOf(t.aSign)>-1;)e=e.replace(t.aSign,"");e=e.replace(t.skipFirstAutoStrip,"$1$2"),e=e.replace(t.skipLastAutoStrip,"$1"),e=e.replace(t.allowedAutoStrip,""),t.altDec&&(e=e.replace(t.altDec,t.aDec));var r=e.match(t.numRegAutoStrip);if(e=r?[r[1],r[2],r[3]].join(""):"",("allow"===t.lZero||"keep"===t.lZero)&&"strip"!==n){var i=[],o="";i=e.split(t.aDec),-1!==i[0].indexOf("-")&&(o="-",i[0]=i[0].replace("-","")),i[0].length>t.mInt&&"0"===i[0].charAt(0)&&(i[0]=i[0].slice(1)),e=o+i.join(t.aDec)
}if(n&&"deny"===t.lZero||n&&"allow"===t.lZero&&t.allowLeading===!1){var a="^"+t.aNegRegAutoStrip+"0*(\\d"+("leading"===n?")":"|$)");a=new RegExp(a),e=e.replace(a,"$1$2")}return e}function s(e,t,n){return t=t.split(","),"set"===n||"focusout"===n?(e=e.replace("-",""),e=t[0]+e+t[1]):"get"!==n&&"focusin"!==n&&"pageLoad"!==n||e.charAt(0)!==t[0]||(e=e.replace(t[0],"-"),e=e.replace(t[1],"")),e}function u(e,t,n){if(t&&n){var r=e.split(t);r[1]&&r[1].length>n&&(n>0?(r[1]=r[1].substring(0,n),e=r.join(t)):e=r[0])
}return e}function c(e,t,n){return t&&"."!==t&&(e=e.replace(t,".")),n&&"-"!==n&&(e=e.replace(n,"-")),e.match(/\d/)||(e+="0"),e}function l(e,t){var n=e.indexOf("."),r=+e;if(-1!==n)if(1e-6>r&&r>-1)e=+e,1e-6>e&&e>0&&(e=(e+10).toString(),e=e.substring(1)),0>e&&e>-1&&(e=(e-10).toString(),e="-"+e.substring(2)),e=e.toString();else{var i=e.split(".");void 0!==i[1]&&(0===+i[1]?e=i[0]:(i[1]=i[1].replace(/0*$/,""),e=i.join(".")))}return"keep"===t.lZero?e:e.replace(/^0*(\d)/,"$1")}function d(e,t,n){return n&&"-"!==n&&(e=e.replace("-",n)),t&&"."!==t&&(e=e.replace(".",t)),e
}function f(t,n){t=a(t,n),t=u(t,n.aDec,n.mDec),t=c(t,n.aDec,n.aNeg);var r=+t;return"set"===n.oEvent&&(r<n.vMin||r>n.vMax)&&e.error("The value ("+r+") from the 'set' method falls outside of the vMin / vMax range"),r>=n.vMin&&r<=n.vMax}function h(e,t,n){return""===e||e===t.aNeg?"zero"===t.wEmpty?e+"0":"sign"===t.wEmpty||n?e+t.aSign:e:null}function p(e,t){e=a(e,t);var n=e.replace(",","."),r=h(e,t,!0);if(null!==r)return r;var i="";i=2===t.dGroup?/(\d)((\d)(\d{2}?)+)$/:4===t.dGroup?/(\d)((\d{4}?)+)$/:/(\d)((\d{3}?)+)$/;
var o=e.split(t.aDec);t.altDec&&1===o.length&&(o=e.split(t.altDec));var u=o[0];if(t.aSep)for(;i.test(u);)u=u.replace(i,"$1"+t.aSep+"$2");if(0!==t.mDec&&o.length>1?(o[1].length>t.mDec&&(o[1]=o[1].substring(0,t.mDec)),e=u+t.aDec+o[1]):e=u,t.aSign){var c=-1!==e.indexOf(t.aNeg);e=e.replace(t.aNeg,""),e="p"===t.pSign?t.aSign+e:e+t.aSign,c&&(e=t.aNeg+e)}return"set"===t.oEvent&&0>n&&null!==t.nBracket&&(e=s(e,t.nBracket,t.oEvent)),e}function g(e,t){e=""===e?"0":e.toString(),i(t,"mDec");var n="",r=0,o="",a="boolean"==typeof t.aPad||null===t.aPad?t.aPad?t.mDec:0:+t.aPad,s=function(e){var t=0===a?/(\.[1-9]*)0*$/:1===a?/(\.\d[1-9]*)0*$/:new RegExp("(\\.\\d{"+a+"}[1-9]*)0*$");
return e=e.replace(t,"$1"),0===a&&(e=e.replace(/\.$/,"")),e};"-"===e.charAt(0)&&(o="-",e=e.replace("-","")),e.match(/^\d/)||(e="0"+e),"-"===o&&0===+e&&(o=""),(+e>0&&"keep"!==t.lZero||e.length>0&&"allow"===t.lZero)&&(e=e.replace(/^0*(\d)/,"$1"));var u=e.lastIndexOf("."),c=-1===u?e.length-1:u,l=e.length-1-c;if(l<=t.mDec){if(n=e,a>l)for(-1===u&&(n+=".");a>l;){var d="000000".substring(0,a-l);n+=d,l+=d.length}else l>a?n=s(n):0===l&&0===a&&(n=n.replace(/\.$/,""));return o+n}var f=u+t.mDec,h=+e.charAt(f+1),p=e.substring(0,f+1).split(""),g="."===e.charAt(f)?e.charAt(f-1)%2:e.charAt(f)%2;
if(h>4&&"S"===t.mRound||h>4&&"A"===t.mRound&&""===o||h>5&&"A"===t.mRound&&"-"===o||h>5&&"s"===t.mRound||h>5&&"a"===t.mRound&&""===o||h>4&&"a"===t.mRound&&"-"===o||h>5&&"B"===t.mRound||5===h&&"B"===t.mRound&&1===g||h>0&&"C"===t.mRound&&""===o||h>0&&"F"===t.mRound&&"-"===o||h>0&&"U"===t.mRound)for(r=p.length-1;r>=0;r-=1)if("."!==p[r]){if(p[r]=+p[r]+1,p[r]<10)break;r>0&&(p[r]="0")}return p=p.slice(0,f+1),n=s(p.join("")),0===+n?n:o+n}function m(t,n){this.settings=n,this.that=t,this.$that=e(t),this.formatted=!1,this.settingsClone=o(this.$that,this.settings),this.value=t.value
}function v(t){return"string"==typeof t&&(t=t.replace(/\[/g,"\\[").replace(/\]/g,"\\]"),t="#"+t.replace(/(:|\.)/g,"\\$1")),e(t)}function _(e,t,n){var r=e.data("autoNumeric");r||(r={},e.data("autoNumeric",r));var i=r.holder;return(void 0===i&&t||n)&&(i=new m(e.get(0),t),r.holder=i),i}m.prototype={init:function(e){this.value=this.that.value,this.settingsClone=o(this.$that,this.settings),this.ctrlKey=e.ctrlKey,this.cmdKey=e.metaKey,this.shiftKey=e.shiftKey,this.selection=t(this.that),("keydown"===e.type||"keyup"===e.type)&&(this.kdCode=e.keyCode),this.which=e.which,this.processed=!1,this.formatted=!1
},setSelection:function(e,t,r){e=Math.max(e,0),t=Math.min(t,this.that.value.length),this.selection={start:e,end:t,length:t-e},(void 0===r||r)&&n(this.that,e,t)},setPosition:function(e,t){this.setSelection(e,e,t)},getBeforeAfter:function(){var e=this.value,t=e.substring(0,this.selection.start),n=e.substring(this.selection.end,e.length);return[t,n]},getBeforeAfterStriped:function(){var e=this.getBeforeAfter();return e[0]=a(e[0],this.settingsClone),e[1]=a(e[1],this.settingsClone),e},normalizeParts:function(e,t){var n=this.settingsClone;
t=a(t,n);var r=t.match(/^\d/)?!0:"leading";e=a(e,n,r),""!==e&&e!==n.aNeg||"deny"!==n.lZero||t>""&&(t=t.replace(/^0*(\d)/,"$1"));var i=e+t;if(n.aDec){var o=i.match(new RegExp("^"+n.aNegRegAutoStrip+"\\"+n.aDec));o&&(e=e.replace(o[1],o[1]+"0"),i=e+t)}return"zero"!==n.wEmpty||i!==n.aNeg&&""!==i||(e+="0"),[e,t]},setValueParts:function(e,t){var n=this.settingsClone,r=this.normalizeParts(e,t),i=r.join(""),o=r[0].length;return f(i,n)?(i=u(i,n.aDec,n.mDec),o>i.length&&(o=i.length),this.value=i,this.setPosition(o,!1),!0):!1
},signPosition:function(){var e=this.settingsClone,t=e.aSign,n=this.that;if(t){var r=t.length;if("p"===e.pSign){var i=e.aNeg&&n.value&&n.value.charAt(0)===e.aNeg;return i?[1,r+1]:[0,r]}var o=n.value.length;return[o-r,o]}return[1e3,-1]},expandSelectionOnSign:function(e){var t=this.signPosition(),n=this.selection;n.start<t[1]&&n.end>t[0]&&((n.start<t[0]||n.end>t[1])&&this.value.substring(Math.max(n.start,t[0]),Math.min(n.end,t[1])).match(/^\s*$/)?n.start<t[0]?this.setSelection(n.start,t[0],e):this.setSelection(t[1],n.end,e):this.setSelection(Math.min(n.start,t[0]),Math.max(n.end,t[1]),e))
},checkPaste:function(){if(void 0!==this.valuePartsBeforePaste){var e=this.getBeforeAfter(),t=this.valuePartsBeforePaste;delete this.valuePartsBeforePaste,e[0]=e[0].substr(0,t[0].length)+a(e[0].substr(t[0].length),this.settingsClone),this.setValueParts(e[0],e[1])||(this.value=t.join(""),this.setPosition(t[0].length,!1))}},skipAllways:function(e){var t=this.kdCode,n=this.which,r=this.ctrlKey,i=this.cmdKey,o=this.shiftKey;if((r||i)&&"keyup"===e.type&&void 0!==this.valuePartsBeforePaste||o&&45===t)return this.checkPaste(),!1;
if(t>=112&&123>=t||t>=91&&93>=t||t>=9&&31>=t||8>t&&(0===n||n===t)||144===t||145===t||45===t)return!0;if((r||i)&&65===t)return!0;if((r||i)&&(67===t||86===t||88===t))return"keydown"===e.type&&this.expandSelectionOnSign(),(86===t||45===t)&&("keydown"===e.type||"keypress"===e.type?void 0===this.valuePartsBeforePaste&&(this.valuePartsBeforePaste=this.getBeforeAfter()):this.checkPaste()),"keydown"===e.type||"keypress"===e.type||67===t;if(r||i)return!0;if(37===t||39===t){var a=this.settingsClone.aSep,s=this.selection.start,u=this.that.value;
return"keydown"===e.type&&a&&!this.shiftKey&&(37===t&&u.charAt(s-2)===a?this.setPosition(s-1):39===t&&u.charAt(s+1)===a&&this.setPosition(s+1)),!0}return t>=34&&40>=t?!0:!1},processAllways:function(){var e;return 8===this.kdCode||46===this.kdCode?(this.selection.length?(this.expandSelectionOnSign(!1),e=this.getBeforeAfterStriped(),this.setValueParts(e[0],e[1])):(e=this.getBeforeAfterStriped(),8===this.kdCode?e[0]=e[0].substring(0,e[0].length-1):e[1]=e[1].substring(1,e[1].length),this.setValueParts(e[0],e[1])),!0):!1
},processKeypress:function(){var e=this.settingsClone,t=String.fromCharCode(this.which),n=this.getBeforeAfterStriped(),r=n[0],i=n[1];return t===e.aDec||e.altDec&&t===e.altDec||("."===t||","===t)&&110===this.kdCode?e.mDec&&e.aDec?e.aNeg&&i.indexOf(e.aNeg)>-1?!0:r.indexOf(e.aDec)>-1?!0:i.indexOf(e.aDec)>0?!0:(0===i.indexOf(e.aDec)&&(i=i.substr(1)),this.setValueParts(r+e.aDec,i),!0):!0:"-"===t||"+"===t?e.aNeg?(""===r&&i.indexOf(e.aNeg)>-1&&(r=e.aNeg,i=i.substring(1,i.length)),r=r.charAt(0)===e.aNeg?r.substring(1,r.length):"-"===t?e.aNeg+r:r,this.setValueParts(r,i),!0):!0:t>="0"&&"9">=t?(e.aNeg&&""===r&&i.indexOf(e.aNeg)>-1&&(r=e.aNeg,i=i.substring(1,i.length)),e.vMax<=0&&e.vMin<e.vMax&&-1===this.value.indexOf(e.aNeg)&&"0"!==t&&(r=e.aNeg+r),this.setValueParts(r+t,i),!0):!0
},formatQuick:function(){var e=this.settingsClone,t=this.getBeforeAfterStriped(),n=this.value;if((""===e.aSep||""!==e.aSep&&-1===n.indexOf(e.aSep))&&(""===e.aSign||""!==e.aSign&&-1===n.indexOf(e.aSign))){var r=[],i="";r=n.split(e.aDec),r[0].indexOf("-")>-1&&(i="-",r[0]=r[0].replace("-",""),t[0]=t[0].replace("-","")),r[0].length>e.mInt&&"0"===t[0].charAt(0)&&(t[0]=t[0].slice(1)),t[0]=i+t[0]}var o=p(this.value,this.settingsClone),a=o.length;if(o){var s=t[0].split(""),u=0;for(u;u<s.length;u+=1)s[u].match("\\d")||(s[u]="\\"+s[u]);
var c=new RegExp("^.*?"+s.join(".*?")),l=o.match(c);l?(a=l[0].length,(0===a&&o.charAt(0)!==e.aNeg||1===a&&o.charAt(0)===e.aNeg)&&e.aSign&&"p"===e.pSign&&(a=this.settingsClone.aSign.length+("-"===o.charAt(0)?1:0))):e.aSign&&"s"===e.pSign&&(a-=e.aSign.length)}this.that.value=o,this.setPosition(a),this.formatted=!0}};var y={init:function(t){return this.each(function(){var r=e(this),i=r.data("autoNumeric"),o=r.data();if("object"==typeof i)return this;var u={aNum:"0123456789",aSep:",",dGroup:"3",aDec:".",altDec:null,aSign:"",pSign:"p",vMax:"999999999.99",vMin:"0.00",mDec:null,mRound:"S",aPad:!0,nBracket:null,wEmpty:"empty",lZero:"allow",aForm:!0,onSomeEvent:function(){}};
if(i=e.extend({},u,o,t),i.aDec===i.aSep)return e.error("autoNumeric will not function properly when the decimal character aDec: '"+i.aDec+"' and thousand separator aSep: '"+i.aSep+"' are the same character"),this;r.data("autoNumeric",i),i.lastSetValue="",i.runOnce=!1;var l=_(r,i);if(-1===e.inArray(r.prop("tagName"),i.tagList)&&"INPUT"!==r.prop("tagName"))return e.error("The <"+r.prop("tagName")+"> is not supported by autoNumeric()"),this;if(i.runOnce===!1&&i.aForm){if(r.is("input[type=text], input[type=hidden], input:not([type])")){var m=!0;
""===r[0].value&&"empty"===i.wEmpty&&(r[0].value="",m=!1),""===r[0].value&&"sign"===i.wEmpty&&(r[0].value=i.aSign,m=!1),m&&r.autoNumeric("set",r.val())}-1!==e.inArray(r.prop("tagName"),i.tagList)&&""!==r.text()&&r.autoNumeric("set",r.text())}i.runOnce=!0,r.is("input[type=text], input[type=hidden], input:not([type])")&&(r.on("keydown.autoNumeric",function(t){return l=_(r),l.settings.aDec===l.settings.aSep?(e.error("autoNumeric will not function properly when the decimal character aDec: '"+l.settings.aDec+"' and thousand separator aSep: '"+l.settings.aSep+"' are the same character"),this):l.that.readOnly?(l.processed=!0,!0):(l.init(t),l.settings.oEvent="keydown",l.skipAllways(t)?(l.processed=!0,!0):l.processAllways()?(l.processed=!0,l.formatQuick(),t.preventDefault(),!1):(l.formatted=!1,!0))
}),r.on("keypress.autoNumeric",function(e){var t=_(r),n=t.processed;return t.init(e),t.settings.oEvent="keypress",t.skipAllways(e)?!0:n?(e.preventDefault(),!1):t.processAllways()||t.processKeypress()?(t.formatQuick(),e.preventDefault(),!1):void(t.formatted=!1)}),r.on("keyup.autoNumeric",function(e){var t=_(r);t.init(e),t.settings.oEvent="keyup";var i=t.skipAllways(e);return t.kdCode=0,delete t.valuePartsBeforePaste,r[0].value===t.settings.aSign&&("s"===t.settings.pSign?n(this,0,0):n(this,t.settings.aSign.length,t.settings.aSign.length)),i?!0:""===this.value?!0:void(t.formatted||t.formatQuick())
}),r.on("focusin.autoNumeric",function(){var e=_(r);if(e.settingsClone.oEvent="focusin",null!==e.settingsClone.nBracket){var t=r.val();r.val(s(t,e.settingsClone.nBracket,e.settingsClone.oEvent))}e.inVal=r.val();var i=h(e.inVal,e.settingsClone,!0);null!==i&&(r.val(i),"s"===e.settings.pSign?n(this,0,0):n(this,e.settings.aSign.length,e.settings.aSign.length))}),r.on("focusout.autoNumeric",function(){var e=_(r),t=e.settingsClone,n=r.val(),i=n;e.settingsClone.oEvent="focusout";var o="";"allow"===t.lZero&&(t.allowLeading=!1,o="leading"),""!==n&&(n=a(n,t,o),null===h(n,t)&&f(n,t,r[0])?(n=c(n,t.aDec,t.aNeg),n=g(n,t),n=d(n,t.aDec,t.aNeg)):n="");
var u=h(n,t,!1);null===u&&(u=p(n,t)),u!==i&&r.val(u),u!==e.inVal&&(r.change(),delete e.inVal),null!==t.nBracket&&r.autoNumeric("get")<0&&(e.settingsClone.oEvent="focusout",r.val(s(r.val(),t.nBracket,t.oEvent)))}))})},destroy:function(){return e(this).each(function(){var t=e(this);t.off(".autoNumeric"),t.removeData("autoNumeric")})},update:function(t){return e(this).each(function(){var n=v(e(this)),r=n.data("autoNumeric");if("object"!=typeof r)return e.error("You must initialize autoNumeric('init', {options}) prior to calling the 'update' method"),this;
var i=n.autoNumeric("get");return r=e.extend(r,t),_(n,r,!0),r.aDec===r.aSep?(e.error("autoNumeric will not function properly when the decimal character aDec: '"+r.aDec+"' and thousand separator aSep: '"+r.aSep+"' are the same character"),this):(n.data("autoNumeric",r),""!==n.val()||""!==n.text()?n.autoNumeric("set",i):void 0)})},set:function(t){return e(this).each(function(){var n=v(e(this)),r=n.data("autoNumeric"),i=t.toString(),o=t.toString();return"object"!=typeof r?(e.error("You must initialize autoNumeric('init', {options}) prior to calling the 'set' method"),this):(o===n.attr("value")&&(i=i.replace(",",".")),o!==n.attr("value")&&r.runOnce===!1&&(i=a(i,r)),e.isNumeric(+i)?(i=l(i,r),r.oEvent="set",r.lastSetValue=i,i.toString(),""!==i&&(i=g(i,r)),i=d(i,r.aDec,r.aNeg),f(i,r)||(i=g("",r)),i=p(i,r),n.is("input[type=text], input[type=hidden], input:not([type])")?n.val(i):-1!==e.inArray(n.prop("tagName"),r.tagList)?n.text(i):(e.error("The <"+n.prop("tagName")+"> is not supported by autoNumeric()"),!1)):"")
})},get:function(){var t=v(e(this)),n=t.data("autoNumeric");if("object"!=typeof n)return e.error("You must initialize autoNumeric('init', {options}) prior to calling the 'get' method"),this;n.oEvent="get";var r="";if(t.is("input[type=text], input[type=hidden], input:not([type])"))r=t.eq(0).val();else{if(-1===e.inArray(t.prop("tagName"),n.tagList))return e.error("The <"+t.prop("tagName")+"> is not supported by autoNumeric()"),!1;r=t.eq(0).text()}return""===r&&"empty"===n.wEmpty||r===n.aSign&&("sign"===n.wEmpty||"empty"===n.wEmpty)?"":(null!==n.nBracket&&""!==r&&(r=s(r,n.nBracket,n.oEvent)),(n.runOnce||n.aForm===!1)&&(r=a(r,n)),r=c(r,n.aDec,n.aNeg),0===+r&&"keep"!==n.lZero&&(r="0"),"keep"===n.lZero?r:r=l(r,n))
},getString:function(){var t=!1,n=v(e(this)),r=n.serialize(),i=r.split("&"),o=0;for(o;o<i.length;o+=1){var a=i[o].split("="),s=e('*[name="'+decodeURIComponent(a[0])+'"]').data("autoNumeric");"object"==typeof s&&null!==a[1]&&void 0!==e('*[name="'+decodeURIComponent(a[0])+'"]').data("autoNumeric")&&(a[1]=e('input[name="'+decodeURIComponent(a[0])+'"]').autoNumeric("get"),i[o]=a.join("="),t=!0)}return t===!0?i.join("&"):(e.error("You must initialize autoNumeric('init', {options}) prior to calling the 'getString' method"),this)
},getArray:function(){var t=!1,n=v(e(this)),r=n.serializeArray();return e.each(r,function(n,r){var i=e('*[name="'+decodeURIComponent(r.name)+'"]').data("autoNumeric");"object"==typeof i&&(""!==r.value&&void 0!==e('*[name="'+decodeURIComponent(r.name)+'"]').data("autoNumeric")&&(r.value=e('input[name="'+decodeURIComponent(r.name)+'"]').autoNumeric("get").toString()),t=!0)}),t===!0?r:(e.error("You must initialize autoNumeric('init', {options}) prior to calling the 'getArray' method"),this)},getSettings:function(){var t=v(e(this));
return t.eq(0).data("autoNumeric")}};e.fn.autoNumeric=function(t){return y[t]?y[t].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof t&&t?void e.error('Method "'+t+'" is not supported by autoNumeric()'):y.init.apply(this,arguments)}}(jQuery);var t=function(){function e(){if(!U){for(var e=B.length,t=0;e>t;t++)B[t]();U=!0}}function n(e){U?e():B[B.length]=e}function r(){P?i():o()}function i(){var e,t=navigator.plugins["Shockwave Flash"]||window.ActiveXObject;try{e=t.description||function(){return new t("ShockwaveFlash.ShockwaveFlash").GetVariable("$version")
}()}catch(n){e="Unavailable"}e=e.split(" ")[2],e?(e=e.split(/\.|,/g),V.pv=[parseInt(e[0],10),parseInt(e[1],10),parseInt(e[2],10)]):V.pv=[0,0,0],o()}function o(){var e=L.length;if(e>0)for(var t=0;e>t;t++){var n=L[t].id,r=L[t].callbackFn,i={success:!1,id:n};if(V.pv[0]>0){var o=g(n);if(o)if(!v(L[t].swfVersion)||V.wk&&V.wk<312)if(L[t].expressInstall&&s()){var l={};l.data=L[t].expressInstall,l.width=o.getAttribute("width")||"0",l.height=o.getAttribute("height")||"0",o.getAttribute("class")&&(l.styleclass=o.getAttribute("class")),o.getAttribute("align")&&(l.align=o.getAttribute("align"));
for(var d={},f=o.getElementsByTagName("param"),h=f.length,p=0;h>p;p++)"movie"!=f[p].getAttribute("name").toLowerCase()&&(d[f[p].getAttribute("name")]=f[p].getAttribute("value"));u(l,d,n,r)}else c(o),r&&r(i);else y(n,!0),r&&(i.success=!0,i.ref=a(n),r(i))}else if(y(n,!0),r){var m=a(n);m&&typeof m.SetVariable!=k&&(i.success=!0,i.ref=m),r(i)}}}function a(e){var t=null,n=g(e);if(n&&"OBJECT"==n.nodeName)if(typeof n.SetVariable!=k)t=n;else{var r=n.getElementsByTagName(S)[0];r&&(t=r)}return t}function s(){return!H&&v("6.0.65")&&(V.win||V.mac)&&!(V.wk&&V.wk<312)
}function u(e,t,n,r){H=!0,D=r||null,x={success:!1,id:n};var i=g(n);if(i){"OBJECT"==i.nodeName?(w=l(i),C=null):(w=i,C=n),e.id=O,(typeof e.width==k||!/%$/.test(e.width)&&parseInt(e.width,10)<310)&&(e.width="310"),(typeof e.height==k||!/%$/.test(e.height)&&parseInt(e.height,10)<137)&&(e.height="137"),I.title=I.title.slice(0,47)+" - Flash Player Installation";var o=V.ie&&V.win?"ActiveX":"PlugIn",a="MMredirectURL="+F.location.toString().replace(/&/g,"%26")+"&MMplayerType="+o+"&MMdoctitle="+I.title;if(typeof t.flashvars!=k?t.flashvars+="&"+a:t.flashvars=a,V.ie&&V.win&&4!=i.readyState){var s=m("div");
n+="SWFObjectNew",s.setAttribute("id",n),i.parentNode.insertBefore(s,i),i.style.display="none",function(){4==i.readyState?i.parentNode.removeChild(i):setTimeout(arguments.callee,10)}()}d(e,t,n)}}function c(e){if(V.ie&&V.win&&4!=e.readyState){var t=m("div");e.parentNode.insertBefore(t,e),t.parentNode.replaceChild(l(e),t),e.style.display="none",function(){4==e.readyState?e.parentNode.removeChild(e):setTimeout(arguments.callee,10)}()}else e.parentNode.replaceChild(l(e),e)}function l(e){var t=m("div");
if(V.win&&V.ie)t.innerHTML=e.innerHTML;else{var n=e.getElementsByTagName(S)[0];if(n){var r=n.childNodes;if(r)for(var i=r.length,o=0;i>o;o++)1==r[o].nodeType&&"PARAM"==r[o].nodeName||8==r[o].nodeType||t.appendChild(r[o].cloneNode(!0))}}return t}function d(e,t,n){var r,i=g(n);if(V.wk&&V.wk<312)return r;if(i)if(typeof e.id==k&&(e.id=n),V.ie&&V.win){var o="";for(var a in e)e[a]!=Object.prototype[a]&&("data"==a.toLowerCase()?t.movie=e[a]:"styleclass"==a.toLowerCase()?o+=' class="'+e[a]+'"':"classid"!=a.toLowerCase()&&(o+=" "+a+'="'+e[a]+'"'));
var s="";for(var u in t)t[u]!=Object.prototype[u]&&(s+='<param name="'+u+'" value="'+t[u]+'" />');i.outerHTML='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"'+o+">"+s+"</object>",j[j.length]=e.id,r=g(e.id)}else{var c=m(S);c.setAttribute("type",N);for(var l in e)e[l]!=Object.prototype[l]&&("styleclass"==l.toLowerCase()?c.setAttribute("class",e[l]):"classid"!=l.toLowerCase()&&c.setAttribute(l,e[l]));for(var d in t)t[d]!=Object.prototype[d]&&"movie"!=d.toLowerCase()&&f(c,d,t[d]);i.parentNode.replaceChild(c,i),r=c
}return r}function f(e,t,n){var r=m("param");r.setAttribute("name",t),r.setAttribute("value",n),e.appendChild(r)}function h(e){var t=g(e);t&&"OBJECT"==t.nodeName&&(V.ie&&V.win?(t.style.display="none",function(){4==t.readyState?p(e):setTimeout(arguments.callee,10)}()):t.parentNode.removeChild(t))}function p(e){var t=g(e);if(t){for(var n in t)"function"==typeof t[n]&&(t[n]=null);t.parentNode.removeChild(t)}}function g(e){var t=null;try{t=I.getElementById(e)}catch(n){}return t}function m(e){return I.createElement(e)
}function v(e){var t=V.pv,n=e.split(".");return n[0]=parseInt(n[0],10),n[1]=parseInt(n[1],10)||0,n[2]=parseInt(n[2],10)||0,t[0]>n[0]||t[0]==n[0]&&t[1]>n[1]||t[0]==n[0]&&t[1]==n[1]&&t[2]>=n[2]?!0:!1}function _(e,t,n,r){if(!V.ie||!V.mac){var i=I.getElementsByTagName("head")[0];if(i){var o=n&&"string"==typeof n?n:"screen";if(r&&(T=null,A=null),!T||A!=o){var a=m("style");a.setAttribute("type","text/css"),a.setAttribute("media",o),T=i.appendChild(a),V.ie&&V.win&&typeof I.styleSheets!=k&&I.styleSheets.length>0&&(T=I.styleSheets[I.styleSheets.length-1]),A=o
}V.ie&&V.win?T&&typeof T.addRule==S&&T.addRule(e,t):T&&typeof I.createTextNode!=k&&T.appendChild(I.createTextNode(e+" {"+t+"}"))}}}function y(e,t){if(W){var n=t?"visible":"hidden",r=g(e);U&&r&&r.style?r.style.visibility=n:_("#"+e,"visibility:"+n)}}function b(e){var t=/[\\\"<>\.;]/,n=null!=t.exec(e);return n&&typeof encodeURIComponent!=k?encodeURIComponent(e):e}{var w,C,D,x,T,A,k="undefined",S="object",E="Shockwave Flash",M="ShockwaveFlash.ShockwaveFlash",N="application/x-shockwave-flash",O="SWFObjectExprInst",F=window,I=document,R=navigator,P=!1,B=[r],L=[],j=[],z=[],U=!1,H=!1,W=!0,V=function(){var e=typeof I.getElementById!=k&&typeof I.getElementsByTagName!=k&&typeof I.createElement!=k,t=R.userAgent.toLowerCase(),n=R.platform.toLowerCase(),r=/win/.test(n?n:t),i=/mac/.test(n?n:t),o=/webkit/.test(t)?parseFloat(t.replace(/^.*webkit\/(\d+(\.\d+)?).*$/,"$1")):!1,a=!1,s=[0,0,0],u=null;
if(typeof R.plugins!=k&&typeof R.plugins[E]==S)u=R.plugins[E].description,!u||typeof R.mimeTypes!=k&&R.mimeTypes[N]&&!R.mimeTypes[N].enabledPlugin||(P=!0,a=!1,u=u.replace(/^.*\s+(\S+\s+\S+$)/,"$1"),s[0]=parseInt(u.replace(/^(.*)\..*$/,"$1"),10),s[1]=parseInt(u.replace(/^.*\.(.*)\s.*$/,"$1"),10),s[2]=/[a-zA-Z]/.test(u)?parseInt(u.replace(/^.*[a-zA-Z]+(.*)$/,"$1"),10):0);else if(typeof F.ActiveXObject!=k)try{var c=new ActiveXObject(M);c&&(u=c.GetVariable("$version"),u&&(a=!0,u=u.split(" ")[1].split(","),s=[parseInt(u[0],10),parseInt(u[1],10),parseInt(u[2],10)]))
}catch(l){}return{w3:e,pv:s,wk:o,ie:a,win:r,mac:i}}();!function(){$(e)}(),function(){V.ie&&V.win&&window.attachEvent("onunload",function(){for(var e=z.length,n=0;e>n;n++)z[n][0].detachEvent(z[n][1],z[n][2]);for(var r=j.length,i=0;r>i;i++)h(j[i]);for(var o in V)V[o]=null;V=null;for(var a in t)t[a]=null;t=null})}()}return{registerObject:function(e,t,n,r){if(V.w3&&e&&t){var i={};i.id=e,i.swfVersion=t,i.expressInstall=n,i.callbackFn=r,L[L.length]=i,y(e,!1)}else r&&r({success:!1,id:e})},getObjectById:function(e){return V.w3?a(e):void 0
},embedSWF:function(e,t,r,i,o,a,c,l,f,h){var p={success:!1,id:t};V.w3&&!(V.wk&&V.wk<312)&&e&&t&&r&&i&&o?(y(t,!1),n(function(){r+="",i+="";var n={};if(f&&typeof f===S)for(var g in f)n[g]=f[g];n.data=e,n.width=r,n.height=i;var m={};if(l&&typeof l===S)for(var _ in l)m[_]=l[_];if(c&&typeof c===S)for(var b in c)typeof m.flashvars!=k?m.flashvars+="&"+b+"="+c[b]:m.flashvars=b+"="+c[b];if(v(o)){var w=d(n,m,t);n.id==t&&y(t,!0),p.success=!0,p.ref=w}else{if(a&&s())return n.data=a,void u(n,m,t,h);y(t,!0)}h&&h(p)
})):h&&h(p)},switchOffAutoHideShow:function(){W=!1},ua:V,getFlashPlayerVersion:function(){return{major:V.pv[0],minor:V.pv[1],release:V.pv[2]}},hasFlashPlayerVersion:v,createSWF:function(e,t,n){return V.w3?d(e,t,n):void 0},showExpressInstall:function(e,t,n,r){V.w3&&s()&&u(e,t,n,r)},removeSWF:function(e){V.w3&&h(e)},createCSS:function(e,t,n,r){V.w3&&_(e,t,n,r)},addDomLoadEvent:n,getQueryParamValue:function(e){var t=I.location.search||I.location.hash;if(t){if(/\?/.test(t)&&(t=t.split("?")[1]),null==e)return b(t);
for(var n=t.split("&"),r=0;r<n.length;r++)if(n[r].substring(0,n[r].indexOf("="))==e)return b(n[r].substring(n[r].indexOf("=")+1))}return""},expressInstallCallback:function(){if(H){var e=g(O);e&&w&&(e.parentNode.replaceChild(w,e),C&&(y(C,!0),V.ie&&V.win&&(w.style.display="block")),D&&D(x)),H=!1}}}}();window.swfobject=t,function(e){function t(e){if(e&&(e=String(e),e=e.replace(a,""))){var t=e.split(i),n=t[0].match(u)||[];return n.length&&e.charAt(0).match(u)&&(n=n.slice(1)),e=-1!==e.indexOf("@")&&s.test(e)?e.charAt(0):2===t[0].length?t[0]:n.length?t[0].charAt(0)+n[0]:t.length>1?t[0].charAt(0)+t[1].charAt(0):t[0].charAt(0),e.toUpperCase()
}}function n(e){var n=t(e);return n?r(n):void 0}function r(e){return e?encodeURI(e).replace(o,""):e}var i=/[^a-z\u0430-\u044f\u04510-9]/i,o=/%/g,a=/['"()<>]/g,s=/^[a-z\u0430-\u044f\u04510-9]/i,u=/[A-Z\u0410-\u042f\u0401]/g,c={extractMonogram:t,createMonogram:n,encodeMonogram:r};return e.Daria&&(e.Daria.Monogram=c),c}(this),function(){"use strict";function e(e,t){var n,r=document.createElement(e||"div");for(n in t)r[n]=t[n];return r}function t(e){for(var t=1,n=arguments.length;n>t;t++)e.appendChild(arguments[t]);
return e}function n(e,t,n,r){var i=["opacity",t,~~(100*e),n,r].join("-"),o=.01+n/r*100,a=Math.max(1-(1-e)/t*(100-o),e),s=l.substring(0,l.indexOf("Animation")).toLowerCase(),u=s&&"-"+s+"-"||"";return f[i]||(h.insertRule("@"+u+"keyframes "+i+"{0%{opacity:"+a+"}"+o+"%{opacity:"+e+"}"+(o+.01)+"%{opacity:1}"+(o+t)%100+"%{opacity:"+e+"}100%{opacity:"+a+"}}",h.cssRules.length),f[i]=1),i}function r(e,t){var n,r,i=e.style;for(t=t.charAt(0).toUpperCase()+t.slice(1),r=0;r<d.length;r++)if(n=d[r]+t,void 0!==i[n])return n;
return void 0!==i[t]?t:void 0}function i(e,t){for(var n in t)e.style[r(e,n)||n]=t[n];return e}function o(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)void 0===e[r]&&(e[r]=n[r])}return e}function a(e){for(var t={x:e.offsetLeft,y:e.offsetTop};e=e.offsetParent;)t.x+=e.offsetLeft,t.y+=e.offsetTop;return t}function s(e,t){return"string"==typeof e?e:e[t%e.length]}function u(e){return"undefined"==typeof this?new u(e):void(this.opts=o(e||{},u.defaults,p))}function c(){function n(t,n){return e("<"+t+' xmlns="urn:schemas-microsoft.com:vml" class="spin-vml">',n)
}h.addRule(".spin-vml","behavior:url(#default#VML)"),u.prototype.lines=function(e,r){function o(){return i(n("group",{coordsize:l+" "+l,coordorigin:-c+" "+-c}),{width:l,height:l})}function a(e,a,u){t(f,t(i(o(),{rotation:360/r.lines*e+"deg",left:~~a}),t(i(n("roundrect",{arcsize:r.corners}),{width:c,height:r.width,left:r.radius,top:-r.width>>1,filter:u}),n("fill",{color:s(r.color,e),opacity:r.opacity}),n("stroke",{opacity:0}))))}var u,c=r.length+r.width,l=2*c,d=2*-(r.width+r.length)+"px",f=i(o(),{position:"absolute",top:d,left:d});
if(r.shadow)for(u=1;u<=r.lines;u++)a(u,-2,"progid:DXImageTransform.Microsoft.Blur(pixelradius=2,makeshadow=1,shadowopacity=.3)");for(u=1;u<=r.lines;u++)a(u);return t(e,f)},u.prototype.opacity=function(e,t,n,r){var i=e.firstChild;r=r.shadow&&r.lines||0,i&&t+r<i.childNodes.length&&(i=i.childNodes[t+r],i=i&&i.firstChild,i=i&&i.firstChild,i&&(i.opacity=n))}}var l,d=["webkit","Moz","ms","O"],f={},h=function(){var n=e("style",{type:"text/css"});return t(document.getElementsByTagName("head")[0],n),n.sheet||n.styleSheet
}(),p={lines:12,length:7,width:5,radius:10,rotate:0,corners:1,color:"#000",direction:1,speed:1,trail:100,opacity:.25,fps:20,zIndex:2e9,className:"spinner",top:"auto",left:"auto",position:"relative"};u.defaults={},o(u.prototype,{spin:function(t){this.stop();var n,r,o=this,s=o.opts,u=o.el=i(e(0,{className:s.className}),{position:s.position,width:0,zIndex:s.zIndex}),c=s.radius+s.length+s.width;if(t&&(t.insertBefore(u,t.firstChild||null),r=a(t),n=a(u),i(u,{left:("auto"==s.left?r.x-n.x+(t.offsetWidth>>1):parseInt(s.left,10)+c)+"px",top:("auto"==s.top?r.y-n.y+(t.offsetHeight>>1):parseInt(s.top,10)+c)+"px"})),u.setAttribute("role","progressbar"),o.lines(u,o.opts),!l){var d,f=0,h=(s.lines-1)*(1-s.direction)/2,p=s.fps,g=p/s.speed,m=(1-s.opacity)/(g*s.trail/100),v=g/s.lines;
!function _(){f++;for(var e=0;e<s.lines;e++)d=Math.max(1-(f+(s.lines-e)*v)%g*m,s.opacity),o.opacity(u,e*s.direction+h,d,s);o.timeout=o.el&&setTimeout(_,~~(1e3/p))}()}return o},stop:function(){var e=this.el;return e&&(clearTimeout(this.timeout),e.parentNode&&e.parentNode.removeChild(e),this.el=void 0),this},lines:function(r,o){function a(t,n){return i(e(),{position:"absolute",width:o.length+o.width+"px",height:o.width+"px",background:t,boxShadow:n,transformOrigin:"left",transform:"rotate("+~~(360/o.lines*c+o.rotate)+"deg) translate("+o.radius+"px,0)",borderRadius:(o.corners*o.width>>1)+"px"})
}for(var u,c=0,d=(o.lines-1)*(1-o.direction)/2;c<o.lines;c++)u=i(e(),{position:"absolute",top:1+~(o.width/2)+"px",transform:o.hwaccel?"translate3d(0,0,0)":"",opacity:o.opacity,animation:l&&n(o.opacity,o.trail,d+c*o.direction,o.lines)+" "+1/o.speed+"s linear infinite"}),o.shadow&&t(u,i(a("#000","0 0 4px #000"),{top:"2px"})),t(r,t(u,a(s(o.color,c),"0 0 1px rgba(0,0,0,.1)")));return r},opacity:function(e,t,n){t<e.childNodes.length&&(e.childNodes[t].style.opacity=n)}});var g=i(e("group"),{behavior:"url(#default#VML)"});
!r(g,"transform")&&g.adj?c():l=r(g,"animation"),window.Spinner=u}(),function(e,n,r,i,o){i.Common={},i.Common.n=function(e){return 10>e?"0"+Number(e):String(e)},i.Common.nop=function(){},i.Common._true=function(){return!0},i.Common._false=function(){return!1},i.Common.keyCode={ENTER:13,LEFT:37,UP:38,RIGHT:39,DOWN:40,DEL:46,TAB:9,RETURN:13,ESC:27,COMMA:188,SEMI:Modernizr.msie?186:59,PAGEUP:33,PAGEDOWN:34,BACKSPACE:8,SHIFT:16,CTRL:17,ALT:18,META:91,COMMA_CHAR:44,SEMI_CHAR:59,SPACE_CHAR:32,L_CHAR:76},function(){"use strict";
i.String={},function(){var e="\\u0041-\\u005A\\u0061-\\u007A\\u00AA\\u00B5\\u00BA\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0370-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u048A-\\u0527\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0620-\\u064A\\u066E\\u066F\\u0671-\\u06D3\\u06D5\\u06E5\\u06E6\\u06EE\\u06EF\\u06FA-\\u06FC\\u06FF\\u0710\\u0712-\\u072F\\u074D-\\u07A5\\u07B1\\u07CA-\\u07EA\\u07F4\\u07F5\\u07FA\\u0800-\\u0815\\u081A\\u0824\\u0828\\u0840-\\u0858\\u08A0\\u08A2-\\u08AC\\u0904-\\u0939\\u093D\\u0950\\u0958-\\u0961\\u0971-\\u0977\\u0979-\\u097F\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BD\\u09CE\\u09DC\\u09DD\\u09DF-\\u09E1\\u09F0\\u09F1\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A59-\\u0A5C\\u0A5E\\u0A72-\\u0A74\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABD\\u0AD0\\u0AE0\\u0AE1\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3D\\u0B5C\\u0B5D\\u0B5F-\\u0B61\\u0B71\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BD0\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C33\\u0C35-\\u0C39\\u0C3D\\u0C58\\u0C59\\u0C60\\u0C61\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBD\\u0CDE\\u0CE0\\u0CE1\\u0CF1\\u0CF2\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D\\u0D4E\\u0D60\\u0D61\\u0D7A-\\u0D7F\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0E01-\\u0E30\\u0E32\\u0E33\\u0E40-\\u0E46\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB0\\u0EB2\\u0EB3\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EDC-\\u0EDF\\u0F00\\u0F40-\\u0F47\\u0F49-\\u0F6C\\u0F88-\\u0F8C\\u1000-\\u102A\\u103F\\u1050-\\u1055\\u105A-\\u105D\\u1061\\u1065\\u1066\\u106E-\\u1070\\u1075-\\u1081\\u108E\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u1700-\\u170C\\u170E-\\u1711\\u1720-\\u1731\\u1740-\\u1751\\u1760-\\u176C\\u176E-\\u1770\\u1780-\\u17B3\\u17D7\\u17DC\\u1820-\\u1877\\u1880-\\u18A8\\u18AA\\u18B0-\\u18F5\\u1900-\\u191C\\u1950-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19C1-\\u19C7\\u1A00-\\u1A16\\u1A20-\\u1A54\\u1AA7\\u1B05-\\u1B33\\u1B45-\\u1B4B\\u1B83-\\u1BA0\\u1BAE\\u1BAF\\u1BBA-\\u1BE5\\u1C00-\\u1C23\\u1C4D-\\u1C4F\\u1C5A-\\u1C7D\\u1CE9-\\u1CEC\\u1CEE-\\u1CF1\\u1CF5\\u1CF6\\u1D00-\\u1DBF\\u1E00-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u2071\\u207F\\u2090-\\u209C\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2183\\u2184\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CEE\\u2CF2\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D80-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2E2F\\u3005\\u3006\\u3031-\\u3035\\u303B\\u303C\\u3041-\\u3096\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA61F\\uA62A\\uA62B\\uA640-\\uA66E\\uA67F-\\uA697\\uA6A0-\\uA6E5\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA793\\uA7A0-\\uA7AA\\uA7F8-\\uA801\\uA803-\\uA805\\uA807-\\uA80A\\uA80C-\\uA822\\uA840-\\uA873\\uA882-\\uA8B3\\uA8F2-\\uA8F7\\uA8FB\\uA90A-\\uA925\\uA930-\\uA946\\uA960-\\uA97C\\uA984-\\uA9B2\\uA9CF\\uAA00-\\uAA28\\uAA40-\\uAA42\\uAA44-\\uAA4B\\uAA60-\\uAA76\\uAA7A\\uAA80-\\uAAAF\\uAAB1\\uAAB5\\uAAB6\\uAAB9-\\uAABD\\uAAC0\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEA\\uAAF2-\\uAAF4\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uABC0-\\uABE2\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D\\uFB1F-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF21-\\uFF3A\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC";
i.String.REG={},i.String.REG.NONLETTER_STR=new RegExp("^[^"+e+"0-9]+$","i"),i.String.REG.NON_PRINTERED_CHARS=/^[\s\uFEFF\xA0]*$/,i.String.REG.NON_EMPTY_STRING=/[^\n\r\t\x20]+/,i.String.REG.RTRIM=/[ \s\xA0]+$/g,i.String.REG.LTRIM=/^[ \s\xA0]+/g,i.String.REG.MULTILINE=/.*/gm,i.String.REG.NEWLINE_DUPLICATE=/[\r\n]+/gm,i.String.REG.CLASS_SEP=/[\t\r\n\f]/g}(),i.String.countLines=function(e){return e?String(e).split("\n").length:0},i.String.countActualLines=function(e){if(!e)return 0;var t=String(e).split("\n").filter(function(e){return!i.String.REG.NON_PRINTERED_CHARS.test(e)
});return t.length},i.String.rtrim=function(e){return e.replace(i.String.REG.RTRIM,"")},i.String.ltrim=function(e){return e.replace(i.String.REG.LTRIM,"")},i.String.removeNonLetterString=function(e){return e.replace(i.String.REG.MULTILINE,i.String._removeNonLetterStringTrim).replace(i.String.REG.NEWLINE_DUPLICATE,"\n")},i.String._removeNonLetterStringTrim=function(e){return e.trim()},i.String.substrWord=function(e,t,n){if(e.length<=t+n)return e;var r=e.lastIndexOf(" ",t+n);return-1!==r?e.substring(t,r):e.substr(t,n)
}}(),i.Array={remove:function(e,t){var n=e.indexOf(t);return n>-1&&e.splice(n,1),n}},function(e){function t(e,t,n){for("undefined"==typeof n&&(n=10),"undefined"==typeof t&&(t=0);n>parseInt(e,10)&&n>1;n/=10)e=t.toString()+e;return e.toString()}var n=/^%(Date_[a-zA-Z0-9_]+|[#\^]?[v]|[cDFrRTxXGnpPtuUwYzZs%]|[#\^!~]{0,2}[aAbBfh]|[0\-_]?[CdegHIjmMSVWyl])$/,r=function(){"use strict";function e(e,n,r){var i=n;if("undefined"==typeof i&&(i=new Date),"number"==typeof i&&(i=new Date(i)),!(i instanceof Date)||"Invalid Date"===String(i))return null;
r&&(i=new Date(i.getTime()+6e4*i.getTimezoneOffset())),t.date=i;for(var u=5;e.match(a)&&u;)e=e.replace(o,t),u--;return e.replace(s,t)}function t(e,n,r,i,o,a){n=""+n,r=""+r,n=n.replace(/^[#_0\^\-!~]+/,"");var s=u[n];if(!s)return e;var c=!1;return-1===r.indexOf("!")&&1===n.length&&(r.indexOf("~")>-1||"bBf".indexOf(n)>-1&&/%[0\-_]?d[\s]+$/.test(a.substr(0,o)))&&(c=!0),s(t.date,r,i,c)}function n(e,t,n,r){if("-"===t)return e;for("_"===t&&(t=" "),"undefined"==typeof n&&(n=0),"undefined"==typeof r&&(r=10),("undefined"==typeof t||""===t)&&(t=n);r>e|0&&r>1;r/=10)e=t.toString()+e;
return e.toString()}function r(e,t){return e=""+e,t=""+t,t.indexOf("#")>-1?e.toLowerCase():t.indexOf("^")>-1?e.toUpperCase():e.substr(0,1).toUpperCase()+e.substr(1)}var i={a:["Вс","Пн","Вт","Ср","Чт","Пт","Сб"],A:["Воскресенье","Понедельник","Вторник","Среда","Четверг","Пятница","Суббота"],b:["Янв","Фев","Мар","Апр","Май","Июн","Июл","Авг","Сен","Окт","Ноя","Дек"],B:["Январь","Февраль","Март","Апрель","Май","Июнь","Июль","Август","Сентябрь","Октябрь","Ноябрь","Декабрь"],f:["янв.","фев.","мар.","апр.","май","июн.","июл.","авг.","сен.","окт.","ноя.","дек."],c:"%Y-%m-%d %H:%M:%S",P:["дп","пп"],r:"%I:%M:%S %p",x:"%m/%d/%y",X:"%H:%M:%S",day:["Вчера","Сегодня","Завтра"],Bg:["января","февраля","марта","апреля","мая","июня","июля","августа","сентября","октября","ноября","декабря"],bg:["Янв","Фев","Мар","Апр","Мая","Июн","Июл","Авг","Сен","Окт","Ноя","Дек"],fg:["янв.","фев.","мар.","апр.","мая","июн.","июл.","авг.","сен.","окт.","ноя.","дек."],Date_dBY_year_in_HM:"%-d %#B %Y года в %-H:%M",Date_dBY_year:"%-d %#B %Y года",Date_dBY:"%-d %#B %Y",Date_AdBY:"%A, %-d %#B %Y",Date_dBA:"%-d %#B, %A",Date_df_in_HM:"%-d %#f в %-H:%M",Date_dfY:"%-d %#f %Y",Date_dB_in_HM:"%-d %#B в %-H:%M",Date_dB:"%-d %#B",Date_df:"%-d %#f",Date_dm__dot:"%d.%m",Date_HM__colon:"%H:%M",Date_today_at_HM:"сегодня в %-H:%M",Date_dmy_at_HM:"%d.%m.%y в %-H:%M",Date_db_in_HM:"%-d %#b в %-H:%M",Date_dmy__dot:"%d.%m.%y"},o=/%(Date_[a-zA-Z0-9_]+|([#\^]?)[v]|[cDFrRTxX])/g,a=/%(Date_[a-zA-Z0-9_]+|[#\^]?[v]|[cDFrRTxX])/,s=/%(([#\^!~]{0,2})[aAbBfh]|([0\-_]?)[CdegHIjmMSVWyl]|[GnpPtuUwYzZs%])/g,u={a:function(e,t){return r(i.a[e.getDay()],t)
},A:function(e,t){return r(i.A[e.getDay()],t)},b:function(e,t,n,o){return r(i[o?"bg":"b"][e.getMonth()],t)},h:function(e,t,n,r){return u.b(e,t,n,r)},f:function(e,t,n,o){return r(i[o?"fg":"f"][e.getMonth()],t)},B:function(e,t,n,o){return r(i[o?"Bg":"B"][e.getMonth()],t)},c:function(){return i.c},C:function(e,t,r){return n(e.getFullYear()/100|0,r,0)},d:function(e,t,r){return n(e.getDate(),r,0)},D:function(){return"%m/%d/%y"},e:function(e,t,r){return n(e.getDate(),r," ")},F:function(){return"%Y-%m-%d"
},g:function(e,t,r){return n(u.G(e)%100,r,0)},G:function(e){var t=0|e.getFullYear(),n=0|u.V(e),r=0|u.W(e);return r>n?t++:0===r&&n>=52&&t--,t},H:function(e,t,r){return n(e.getHours(),r,0)},I:function(e,t,r){var i=e.getHours()%12;return n(0===i?12:i,r,0)},j:function(e,t,r){var i=e-new Date(e.getFullYear(),0,1),o=1+i/6e4/60/24|0;return n(o,r,0,100)},m:function(e,t,r){return n(e.getMonth()+1,r,0)},M:function(e,t,r){return n(e.getMinutes(),r,0)},n:function(){return"\n"},p:function(e){var t=e.getHours()>=12?1:0;
return(""+i.P[t]).toUpperCase()},P:function(e){var t=e.getHours()>=12?1:0;return""+i.P[t]},r:function(){return i.r},R:function(){return"%H:%M"},S:function(e,t,r){return n(e.getSeconds(),r,0)},t:function(){return"	"},T:function(){return"%H:%M:%S"},u:function(e){var t=e.getDay();return 0===t?7:t},U:function(e){var t=0|u.j(e),r=6-e.getDay(),i=(t+r)/7|0;return n(i,0)},V:function(e,t,r){var i=0|u.W(e),o=new Date(""+e.getFullYear()+"/1/1").getDay(),a=i+(o>4||1>=o?0:1);return 53===a&&new Date(""+e.getFullYear()+"/12/31").getDay()<4?a=1:0===a&&(a=u.V(new Date(""+(e.getFullYear()-1)+"/12/31"))),n(a,r,0)
},w:function(e){return e.getDay()},W:function(e,t,r){var i=0|u.j(e),o=7-u.u(e)|0,a=(i+o)/7|0;return n(a,r,0,10)},x:function(){return i.x},X:function(){return i.X},y:function(e,t,r){return n(e.getFullYear()%100,r,0)},Y:function(e){return e.getFullYear()},z:function(e){var t=e.getTimezoneOffset(),r=n(0|Math.abs(t/60),0),i=n(t%60,0);return(t>0?"-":"+")+r+i},l:function(e,t,r){var i=e.getHours()%12;return n(0===i?12:i,r," ")},s:function(e){return e.getTime()/1e3|0},"%":function(){return"%"},v:function(e,t){var n=new Date,o=e.getTime()+6e4*e.getTimezoneOffset(),a=n.getTime()+6e4*n.getTimezoneOffset(),s=Math.ceil((o-a)/6e4/60/24)+1;
return i.day[s]?r(i.day[s],t):"%d %"+t+"B"},Date_iso:function(){return"%Y-%m-%dT%H:%M:%S"},Date_dBY_year_in_HM:function(){return i.Date_dBY_year_in_HM},Date_dBY_year:function(){return i.Date_dBY_year},Date_dBY:function(){return i.Date_dBY},Date_dBA:function(){return i.Date_dBA},Date_AdBY:function(){return i.Date_AdBY},Date_df_in_HM:function(){return i.Date_df_in_HM},Date_dfY:function(){return i.Date_dfY},Date_dB_in_HM:function(){return i.Date_dB_in_HM},Date_dmY__dot:function(){return"%d.%m.%Y"},Date_dB:function(){return i.Date_dB
},Date_df:function(){return i.Date_df},Date_FT:function(){return"%F %T"},Date_dmY__minus:function(){return"%d-%m-%Y"},Date_dm__dot:function(){return i.Date_dm__dot},Date_HM__colon:function(){return i.Date_HM__colon},Date_today_at_HM:function(){return i.Date_today_at_HM},Date_dmy_at_HM:function(){return i.Date_dmy_at_HM},Date_db_in_HM:function(){return i.Date_db_in_HM},Date_db:function(){return"%-d %#b"},Date_dmy__dot:function(){return i.Date_dmy__dot}};return e}();e.Date={},function(){var t=function(){var e=Date.UTC.apply(this,arguments);
this._utcDate=new Date(e)},n=function(){};n.prototype=Date.prototype,t.prototype=new n,t.prototype.constructor=t,t.parseISOTime=function(e){var n=/(\d{4})-(\d{2})-(\d{2})T(\d{2}):(\d{2}):(\d{2})/,r=e.match(n);return new t(r[1],r[2]-1,r[3],r[4]||0,r[5]||0,r[6]||0,r[7]||0)},t.parseDate=function(e){var n=/^(\d{4})-(\d{2})-(\d{2})$/,r=String(e).match(n);return new t(r[1],r[2]-1,r[3],0,0,0,0)},t.completeDigit=function(e){if(Math.abs(e)<10){var t=0>e?"-":"";return t+"0"+e}return String(e)},t.convertDate=function(e){return new t(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds())
};var r=function(e){var n,r=["FullYear","Month","Date","Hours","Minutes","Seconds","Milliseconds"],i=r.length;for(n=0;i>n;n++){var o=r[n],a=e+o,s=e+"UTC"+o;!function(e){t.prototype[a]=function(){return this._utcDate[e].apply(this._utcDate,arguments)}}(s)}};r("get"),r("set"),t.prototype.getTime=function(){return this._utcDate.getTime()},t.prototype.toString=function(){return this.toISOString()},t.prototype.toISOString=function(){return this.getFullYear()+"-"+t.completeDigit(this.getMonth()+1)+"-"+t.completeDigit(this.getDate())+"T"+t.completeDigit(this.getHours())+":"+t.completeDigit(this.getMinutes())+":"+t.completeDigit(this.getSeconds())
},e.Date.LocalDate=t}(),e.Date.SECOND=1e3,e.Date.MINUTE=60*e.Date.SECOND,e.Date.HOUR=60*e.Date.MINUTE,e.Date.DAY=24*e.Date.HOUR,e.Date.WEEK=7*e.Date.DAY,e.Date.MONTH=30*e.Date.DAY,e.Date.YEAR=365*e.Date.DAY,e.Date.format=function(e,t,i){if(!n.test(e))throw new Error("Не следует самому писать форматы даты, потому что в разных локалях числа могут меняться местами");return"string"==typeof t&&(t=/^\d+$/.test(t)?Number(t):new Date(t)),r(e,t,i)},e.Date.monthName=function(t){return e.i18n.index(["Январь","Февраль","Март","Апрель","Май","Июнь","Июль","Август","Сентябрь","Октябрь","Ноябрь","Декабрь"],t)
},e.Date.shortMonthName=function(t){return e.i18n.index(["Янв","Фев","Мар","Апр","Май","Июн","Июл","Авг","Сен","Окт","Ноя","Дек"],t)},e.Date.weekDay=function(t){return e.i18n.index(["Вс","Пн","Вт","Ср","Чт","Пт","Сб"],t)},e.Date.humanDate=function(n){var r=new Date;r.setHours(0),r.setMinutes(0),r.setSeconds(0);var i=new Date(r.getTime()+864e5);return n>r&&i>n?"сегодня в "+n.getHours()+":"+t(n.getMinutes()):e.Date.format("%Date_dmY__dot",n)},e.Date.humanDate2=function(n){var r=new Date;r.setHours(0),r.setMinutes(0),r.setSeconds(0);
var i=new Date(r.getTime()+864e5),o=new Date(i.getTime()+864e5),a=n.getHours(),s=t(n.getMinutes());return n>r&&i>n?"сегодня в "+a+":"+s:n>i&&o>n?"завтра в "+a+":"+s:e.Date.format("%Date_dB_in_HM",n)},e.Date.monthName=function(t){return e.i18n.index(["Январь","Февраль","Март","Апрель","Май","Июнь","Июль","Август","Сентябрь","Октябрь","Ноябрь","Декабрь"],t)},e.Date.shortMonthName=function(t){return e.i18n.index(["Янв","Фев","Мар","Апр","Май","Июн","Июл","Авг","Сен","Окт","Ноя","Дек"],t)},e.Date.weekDay=function(t){return e.i18n.index(["Вс","Пн","Вт","Ср","Чт","Пт","Сб"],t)
},e.Date.humanDate=function(n){var r=new Date;r.setHours(0),r.setMinutes(0),r.setSeconds(0);var i=new Date(r.getTime()+864e5);return n>r&&i>n?"сегодня в "+n.getHours()+":"+t(n.getMinutes()):e.Date.format("%Date_dmY__dot",n)},e.Date.humanDate2=function(n){var r=new Date;r.setHours(0),r.setMinutes(0),r.setSeconds(0);var i=new Date(r.getTime()+864e5),o=new Date(i.getTime()+864e5),a=n.getHours(),s=t(n.getMinutes());return n>r&&i>n?"сегодня в "+a+":"+s:n>i&&o>n?"завтра в "+a+":"+s:e.Date.format("%Date_dB_in_HM",n)
},e.Date.getInterval=function(t){"string"==typeof t&&(t=Number(t)),"number"==typeof t&&(t=new Date(t));var n=new Date(o.now()),r=n.getDate(),i=n.getMonth(),a=n.getFullYear(),s=t.getDate(),u=t.getMonth(),c=t.getFullYear(),l=a-c,d=i-u;0>d&&(l--,d=12+d);var f=r-s;0>f&&(d--,f=new Date(a,i,0).getDate()+f);var h=[];return l>0&&h.push(e.i18n.convert([l+" год",l+" года",l+" лет"],l)),d>0&&h.push(e.i18n.convert([d+" месяц",d+" месяца",d+" месяцев"],d)),f>0&&h.push(e.i18n.convert([f+" день",f+" дня",f+" дней"],f)),h.join(", ")
};var i=[["янв","фев","мар","апр","ма","июн","июл","авг","сен","окт","ноя","дек"],["января","февраля","марта","апреля","мая","июня","июля","августа","сентября","октября","ноября","декабря"],["январь","февраль","март","апрель","май","июнь","июль","август","сентябрь","октябрь","ноябрь","декабрь"],["jan","feb","mar","apr","may","jun","jul","aug","sep","oct","nov","dec"],["january","frbruary","march","april","may","june","july","august","september","october","november","december"],["Yanvar","Fevral","Mart","Aprel","May","İyun","İyul","Avqust","Sentyabr","Oktyabr","Noyabr","Dekabr"],["Студзень","Люты","Сакавік","Красавік","Травень","Чэрвень","Ліпень","Жнівень","Верасень","Кастрычнік","Лістапад","Снежань"],["січень","лютий","березень","квітень","травень","червень","липень","серпень","вересень","жовтень","листопад","грудень"],["гыйнвар","февраль","март","апрель","май","июнь","июль","август","сентябрь","октябрь","ноябрь","декабрь"],["Ocak","Şubat","Mart","Nisan","Mayıs","Haziran","Temmuz","Ağustos","Eylül","Ekim","Kasım","Aralık"],["ianuarie","februarie","martie","aprilie","mai","iunie","iulie","august","septembrie","octombrie","noiembrie","decembrie"],["қаңтар","ақпан","наурыз","сәуір","мамыр","маусым","шілде","тамыз","қыркүйек","қазан","қараша","желтоқсан"],["იანვარი","თებერვალი","მარტი","აპრილი","მაისი","ივნისი","ივლისი","აგვისტო","სექტემბერი","ოქტომბერი","ნოემბერი","დეკემბერი"],["հունվար","փետրվար","մարտ","ապրիլ","մայիս","հունիս","հուլիս","օգոստոս","սեպտեմբեր","հոկտեմբեր","նոյեմբեր","դեկտեմբեր"]].map(function(e){return e.map(function(e){return e.toLowerCase()
})});e.Date.getMonthByName=function(e){e=e.replace(/\.$/,"").toLowerCase();for(var t=-1,n=0,r=i.length;r>n&&(t=i[n].indexOf(e),-1===t);n++);return t},e.Date.daysIntervalLocalization=function(t,n){var r={weeks:function(t){return n?e.i18n.convert([t+" недели",t+" недель",t+" недель"],t):e.i18n.convert([t+" неделю",t+" недели",t+" недель"],t)},days:function(t){return n?e.i18n.convert([t+" дня",t+" дней",t+" дней"],t):e.i18n.convert([t+" день",t+" дня",t+" дней"],t)},hours:function(t){return n?e.i18n.convert([t+" часа",t+" часов",t+" часов"],t):e.i18n.convert([t+" час",t+" часа",t+" часов"],t)
},minutes:function(t){return n?e.i18n.convert([t+" минуты",t+" минут",t+" минут"],t):e.i18n.convert([t+" минута",t+" минуты",t+" минут"],t)}},i=_(r).keys().map(function(e){return t[e]?r[e](t[e]):null}).compact().value().join(" ");return i},e.Date.getDaysInterval=function(t,n){var r=n.getTime()-t.getTime(),i=Math.floor(r/e.Date.DAY);r-=i*e.Date.DAY;var o=Math.floor(r/e.Date.HOUR);r-=o*e.Date.HOUR;var a=Math.round(r/e.Date.MINUTE),s={days:i,hours:o,minutes:a};return this.daysIntervalLocalization(s)
},e.Date.dateWithCustomTimeZone=function(t,n){var r=n*e.Date.HOUR,i=function(){return-new Date(t).getTimezoneOffset()*e.Date.MINUTE},o=t+r-i(),a=new Date(o);return _.extend(a,{isCustomTimezone:!0,timezoneHours:n,timezoneMs:r,getTimezoneOffset:function(){return-this.timezoneMs/e.Date.MINUTE},getTime:function(){var e=this._getTime();return e+(this._getUserTimezone()-this.timezoneMs)},_getUserTimezone:i,_getTime:a.getTime}),a},e.Date.clone=function(t){return t instanceof Date?t.isCustomTimezone?e.Date.dateWithCustomTimeZone(t.getTime(),t.timezoneHours):t instanceof e.Date.LocalDate?e.Date.LocalDate.convertDate(t):new Date(t.getTime()):_.clone(t)
},e.Date.toCalendarISODate=function(t){return"string"!=typeof t&&(t instanceof Date&&(t=t.getTime()),t+=60*o.tz_offset*1e3,t=e.Date.format("%Date_iso",t)+"Z"),t},e.Date.isDateTheDayBeforeNow=function(e){var t=new Date(o.now());return e=new Date(e),t.getTime()-e.getTime()>=864e5},e.Date.dateToDay=function(e){return e instanceof Date||(e=new Date(e)),new Date(e.getFullYear(),e.getMonth(),e.getDate())},e.Date.isSameDay=function(e,t){return e.getFullYear()===t.getFullYear()&&e.getMonth()===t.getMonth()&&e.getDate()===t.getDate()
},e.Date.daysBetween=function(e,t){return e=Date.UTC(e.getFullYear(),e.getMonth(),e.getDate()),t=Date.UTC(t.getFullYear(),t.getMonth(),t.getDate()),(t-e)/864e5},e.Date.parseCalendarDate=function(e){var t=String(e||"").match(/(\d{4})-(\d{2})-(\d{2}) (\d{2}):(\d{2}):(\d{2})/);return t&&7===t.length?new Date(parseInt(t[1],10),parseInt(t[2],10)-1,parseInt(t[3],10),parseInt(t[4],10),parseInt(t[5],10),parseInt(t[6],10)):null},e.Date.getHours=function(e){return e.getHours()+e.getMinutes()/60}}(i),function(){"use strict";
i.DOM={};var t=i.DOM;t.BLOCK_NODES=["ADDRESS","BLOCKQUOTE","CENTER","DIV","FIELDSET","FORM","H1","H2","H3","H4","H5","H6","HR","ISINDEX","MENU","OL","P","PRE","TABLE","UL"],t.classRemove=function(e){if(1===e.nodeType){var t=Array.prototype.slice.call(arguments);if(t.shift(),!Modernizr.classlist||t.length>1&&!Modernizr["classlist-second-arg"]){for(var n,r=e.className?(" "+e.className+" ").replace(i.String.REG.CLASS_SEP," "):"",o=!1,a=0;n=t[a++];)for(;-1!==r.indexOf(" "+n+" ");)r=r.replace(" "+n+" "," "),o=!0;
o&&(e.className=r.trim())}else e.classList.remove.apply(e.classList,t)}},t.classAdd=function(e){if(1===e.nodeType){var t=Array.prototype.slice.call(arguments);if(t.shift(),!Modernizr.classlist||t.length>1&&!Modernizr["classlist-second-arg"]){for(var n,r=e.className?(" "+e.className+" ").replace(i.String.REG.CLASS_SEP," "):" ",o=!1,a=0;n=t[a++];)-1===r.indexOf(" "+n+" ")&&(r+=n+" ",o=!0);o&&(e.className=r.trim())}else e.classList.add.apply(e.classList,t)}},t.classToggle=function(e,n){1===e.nodeType&&(e.classList&&e.classList.toggle?e.classList.toggle(n):t.classContains(e,n)?t.classRemove(e,n):t.classAdd(e,n))
},t.classContains=function(e,t){return 1!==e.nodeType?!1:e.classList?e.classList.contains(t):-1!==(" "+e.className+" ").replace(i.String.REG.CLASS_SEP," ").indexOf(" "+t+" ")},t.hasAttribute=function(e,t){var n=e.nodeType;return 3===n||8===n||2===n?!1:e.hasAttribute(t)},t.isEmptyText=function(e){return i.String.REG.NON_PRINTERED_CHARS.test(e)},t.isEmptyTextNode=function(e){return 3===e.nodeType&&t.isEmptyText(e.nodeValue)},t.isEmptyPreNode=function(e){var n=e.childNodes.length;return 1===e.nodeType&&"PRE"===e.nodeName&&(0===n||1===n&&t.isEmptyTextNode(e.firstChild))
},t.isBr=function(e){return 1===e.nodeType&&"BR"===e.nodeName},t.isDiv=function(e){return 1===e.nodeType&&"DIV"===e.nodeName},t.isBlockquote=function(e){return 1===e.nodeType&&"BLOCKQUOTE"===e.nodeName},t.isBlockNode=function(e){return 1===e.nodeType&&-1!==t.BLOCK_NODES.indexOf(e.nodeName)},t.isNewlineNode=function(e){return 1===e.nodeType&&(-1!==["BR","HR","IMG"].indexOf(e.nodeName)||t.isBlockNode(e))},t.isParent=r.contains,t.insertBefore=function(e,t){return e.parentNode.insertBefore(t,e)},t.insertAfter=function(e,t){return e.nextSibling?e.parentNode.insertBefore(t,e.nextSibling):e.parentNode.appendChild(t)
},t.removeNode=function(e){return e.parentNode?e.parentNode.removeChild(e):void 0},t.replaceNode=function(e,t){return e&&e.parentNode?(e.parentNode.replaceChild(t,e),!0):!1},t.passByParents=function(e,n,r){r=r||e.ownerDocument;for(var i=e.parentNode;i&&i!==r&&t.isParent(r,i);){if(!n(i))return!1;i=i.parentNode}return!0},t._preventEventHandler=function(e){e.preventDefault(),e.stopPropagation()},t.preventClicks=function(e){e.addEventListener("click",t._preventEventHandler),e.addEventListener("contextmenu",t._preventEventHandler)
},t._urlClickHandler=function(n,r){e.open(n,"_blank"),t._preventEventHandler(r)},t.setUrlClickHandler=function(e,n){e.addEventListener("click",t._urlClickHandler.bind(null,n))},t._testTextWrap=function(e,n){return 3===e.nodeType?i.String.REG.NON_EMPTY_STRING.test(e.nodeValue)?!0:"undefined"!=typeof n?n&&e.previousSibling?t._testTextWrap(e.previousSibling):!n&&e.nextSibling?t._testTextWrap(e.nextSibling):!1:!1:!t.isNewlineNode(e)},t.bubblingDivContent=function(e,n){if(!e.hasChildNodes())return e;n=n||function(){return!0
};for(var r,i,o,a,s,u,c,l,d,f=[e.firstChild],h=e.ownerDocument.createElement("br");r=f.shift();){if(s=[],i=r.nextSibling,u=r.parentNode,t.isDiv(r))if(l=n(r),d=r.hasChildNodes(),l&&u){if(o=r.previousSibling,o&&o!==a&&t._testTextWrap(o,!0)&&(a=o,u.insertBefore(h.cloneNode(!1),r)),d)for(;r.firstChild;)c=i?u.insertBefore(r.firstChild,i):u.appendChild(r.firstChild),t.isDiv(c)&&s.push(c);i&&t._testTextWrap(i,!1)&&u.insertBefore(h.cloneNode(!1),i),u.removeChild(r)}else if(d){c=r.firstChild;do t.isDiv(c)&&s.push(c);
while(c=c.nextSibling)}i&&-1===f.indexOf(i)&&s.push(i),f=s.concat(f)}return h=null,e},t.eachBefore=function(e,n,r){var i,o;do{if(r&&!t.isParent(r,e))return;for(i=e;i=i.previousSibling;)if(o=t.eachInnerPrevious(i,n),"undefined"!=typeof o&&!o)return!1}while(e=e.parentNode)},t.eachBeforeText=function(e,n,r){var i="",o=/[\n\r]+/g;t.eachBefore(e,function(e){return 3===e.nodeType?i=e.nodeValue.replace(o," ")+i:t.isNewlineNode(e)&&(i="\n"+i),n?n(e,i):!0},r)},t.eachAfter=function(e,n,r){var i,o;do{if(r&&!t.isParent(r,e))return;
for(i=e;i=i.nextSibling;)if(o=t.eachInnerFollowing(i,n),"undefined"!=typeof o&&!o)return!1}while(e=e.parentNode)},t.eachInnerFollowing=function(e,t){for(var n,r,i,o=[e];n=o.pop();){if(r=t&&t(n,o),"undefined"!=typeof r&&!r)return!1;if("next"!==r&&1===n.nodeType&&n.hasChildNodes())for(i=n.childNodes.length;i--;)o.push(n.childNodes[i])}return!0},t.eachInnerFollowingText=function(e,n){var r="",i=/[\n\r]+/g,o=e.ownerDocument.createElement("br");t.eachInnerFollowing(e,function(a,s){return a===e?!0:(3===a.nodeType?r+=a.nodeValue.replace(i," "):t.isNewlineNode(a)&&(a.hasChildNodes()?(a.previousSibling&&t._testTextWrap(a.previousSibling,!0)&&(r+="\n"),a.nextSibling&&s.push(o.cloneNode(!1))):r+="\n"),n?n(a,r):!0)
}),o=null},t.eachInnerPrevious=function(e,t){for(var n,r,i,o,a=[e];n=a.pop();){if(r=t&&t(n,a),"undefined"!=typeof r&&!r)return!1;if("next"!==r&&1===n.nodeType&&n.hasChildNodes())for(o=n.childNodes.length,i=0;o>i;i++)a.push(n.childNodes[i])}return!0},t.removeEmptyNodeBefore=function(e,n,r){for(var i,o,a,s,u,c;e;){if(r&&!t.isParent(r,e))return!0;for(i=e.previousSibling,e=e.parentNode;i;)for(o=[i],i=i.previousSibling;u=o.pop();)if(3!==u.nodeType){if(c=n&&n(u),"undefined"!=typeof c&&!c)return!1;if("next"!==c)if(u.hasChildNodes())for(s=u.childNodes.length,o.push(u),a=0;s>a;a++)o.push(u.childNodes[a]);
else u.parentNode.removeChild(u)}else{if(!t.isEmptyTextNode(u))return;u.parentNode.removeChild(u)}}return!0},t.removeEmptyNodeAfter=function(e,n,r){for(var i,o,a,s,u;e;){if(r&&!t.isParent(r,e))return!0;for(i=e.nextSibling,e=e.parentNode;i;)for(o=[i],i=i.nextSibling;s=o.pop();)if(3!==s.nodeType){if(u=n&&n(s),"undefined"!=typeof u&&!u)return!1;if("next"!==u)if(s.hasChildNodes())for(a=s.childNodes.length,o.push(s);a--;)o.push(s.childNodes[a]);else s.parentNode.removeChild(s)}else{if(!t.isEmptyTextNode(s))return;
s.parentNode.removeChild(s)}}return!0},t.refineNode=function(e,t){for(var n,r,o=[e],a=function(e,t){t.forEach(function(t){e.removeAttribute(t)})};o.length;){if(n=o.pop(),n.hasChildNodes())for(r=n.childNodes.length;r--;)o.push(n.childNodes[r]);n.nodeType===n.ELEMENT_NODE?Array.isArray(t)&&a(n,t):i.DOM.removeNode(n)}},t.createRefinedNode=function(e,t){var n=e.cloneNode(!0);return this.refineNode(n,t),n},t.deleteRangeContents=function(e,n){if(e.compareDocumentPosition){var r=e.compareDocumentPosition(n);
if(r&&r!==Node.DOCUMENT_POSITION_FOLLOWING)return!1}else if(t.isParent(e,n)||t.isParent(n,e))return!1;if(e===n)return e.parentNode.removeChild(e),!0;var i=function(){for(var r,i,o,a=e;a;)for(i=a,r=a.nextSibling,a=a.parentNode,i.childNodes.length&&i!==e||i.parentNode.removeChild(i);r;){if(i=r,r=r.nextSibling,i===n)return i.parentNode.removeChild(i),!0;if(t.isParent(i,n)){o=i;break}i.parentNode.removeChild(i)}return o}();if(!i)return!1;if(i===!0)return!0;for(var o,a,s,u=n;(o=u.parentNode)&&(s=u.previousSibling,u!==i);)for(u.childNodes.length&&u!==n||u.parentNode.removeChild(u),u=o;s;)a=s.previousSibling,s.parentNode.removeChild(s),s=a;
return!0},t.scrollIntoView=function(e,t){t=t||{},e.scrollIntoView(Modernizr.mozilla>=36?t:"start"===t.block)},t.placeInViewport=function(t,n,i,o){var a=r(t);n=n||{},i=i||{nodePositionBelow:"bottom",nodePositionAbove:"top"},o=o||e;var s=r(o),u=a.offset().top,c=u+a.outerHeight(),l=s.scrollTop(),d=l+s.height();c>d?this._scrollToViewportEdge(t,n,i.nodePositionBelow,o):l>u&&this._scrollToViewportEdge(t,n,i.nodePositionAbove,o)},t._scrollToViewportEdge=function(e,t,n,r){"top"===n?this._scrollToViewPortTop(e,t,r):"bottom"===n&&this._scrollToViewPortBottom(e,t,r)
},t._scrollToViewPortTop=function(t,n,i){var o=r(i||e);t.scrollIntoView(),n&&n.top&&o.scrollTop(o.scrollTop()-n.top)},t._scrollToViewPortBottom=function(e){e.scrollIntoView(!1)}}(),i.watcher={_watches:{},_checking:{}},ns.events.on("watcher.check",function(e,t){i.watcher.set(t),delete i.watcher._checking[t]}),i.watcher.$=function(e){var t=this._watches[e];return t||(t=this._watches[e]={checklist:{},deps:[]}),t},i.watcher.watch=function(e,t){t=r.extend(this.$(e),t);var n=this;return r.each(t.deps,function(t,r){var i=n.$(r);
i.checklist[e]=1}),t.debug&&(ns.events.off(e+".change",i.watcher._debug),ns.events.on(e+".change",i.watcher._debug)),t},i.watcher._debug=function(e,t){console.log(e,": ",t.oldValue," -> ",t.value)},i.watcher.set=function(e,t,n){var r=this.$(e);n=n||{};var i=n.lock,o=n.force;if(!r.locked||void 0!==i){void 0!==i&&(r.locked=i);var a=r.value;void 0===t&&r.get&&(t=r.get()),void 0===t&&(t=r.value),r.value=t,n.silent||this._compare(e,t,a,o)}},i.watcher._compare=function(e,t,n,i){var o=this.$(e);if(o.strict&&t!==n||t!=n||i){var a={value:t,oldValue:n};
ns.events.trigger(e+".change",a,!0);var s=this;r.each(o.checklist,function(e){s.check(e)})}},i.watcher.check=function(e){var t=this._checking;t[e]||(t[e]=!0,ns.events.trigger("watcher.check",e,!0))},i.watcher.get=function(e){return this.$(e).value},i.watcher.watch("pageKey"),i.watcher.watch("selectedCount"),i.watcher.watch("selected",{get:function(){return o.is3pane()&&ns.page.current.params.ids||"message"==ns.page.current.page||"compose"==ns.page.current.page||i.watcher.get("selectedCount")>0},deps:["selectedCount","pageKey"],value:!1}),function(){function e(e){var n=e.target;
if(e.target&&"IMG"==e.target.tagName){for(var r=[t(n)],o=15,a=n.src;n.parentNode&&o;)n=n.parentNode,r.unshift(t(n)),o--;r=r.join(" "),i.ErrorLog.send({errorType:"imgError",selector:r,src:a})}}function t(e){var t=e.tagName||"";return e.id&&(t+="#"+e.id),e.className&&(t+="."+e.className.replace(/\s+/g,".")),t}n.addEventListener&&n.addEventListener("error",e,!0)}(),o.Mixins={},e.requestIdleCallback=e.requestIdleCallback||function(e){var t=Date.now();return setTimeout(function(){e({didTimeout:!1,timeRemaining:function(){return Math.max(0,50-(Date.now()-t))
}})},1)},e.cancelIdleCallback=e.cancelIdleCallback||function(e){clearTimeout(e)},function(){o.createDelayedIdleCallback=function(t,n){var r,o,a,s=function(){return e.requestIdleCallback(function(e){o=null;var r;if(e.didTimeout)r=t();else if("once"===n.runMode)r=t();else if("max"===n.runMode)for(r=!0;e.timeRemaining()>0&&r;)r=t();r&&a()},{timeout:n.idleTimeout})};return a=function(){r||o||(r=setTimeout(function(){r=null,o=s()},n.delay))},a.cancel=function(){o&&(e.cancelIdleCallback(o),o=null),r&&(clearTimeout(r),r=null)
},a.forceExecute=function(){var e=n.forcedExecutionLoopLimit||100;this.cancel();for(var r=!0;r&&e--;)r=t();r&&i.ErrorLog.send({errorType:"Daria.createDelayedIdleCallback.forceExecute.loopLimitExceeded",callbackName:n.logName})},a}}(),r(e).on("beforeunload",function(){var e=o.addUnloadText._texts=[];return ns.events.trigger("beforeunload"),e.length?e.join("\n"):void 0}),o.addUnloadText=function(e){var t=o.addUnloadText._texts;e&&r.isArray(t)&&t.push(e)},function(t,r){function o(e){var n=null;return e&&(n=e.getBoundingClientRect(),null==n.width&&(n=t.extend({},n,{width:n.right-n.left,height:n.bottom-n.top}))),n
}t.fn.rect=function(){return o(this[0])},r.Spinner=new Spinner({cnes:10,length:8,width:4,radius:12,color:"#aabde0",speed:1.4,trail:80,shadow:!1}),r.Dimensions={rect:o},r._getModelsJsonView=function(e,n,r){return t.isPlainObject(r.models)||(r.models={}),e=e.map(Array.isArray(n)?function(e,r){return t.isPlainObject(n[r])?{model:e,params:n[r]}:{model:e}}:function(e){return{model:e,params:n}}),e.forEach(function(e){r.models[e.model]={status:"ok"},r.models[e.model][e.model]=ns.Model.get(e.model,e.params).getData()
}),r},i.tt=function(t,o,a,s){s=s||{},o=o||{};var u,c,l=t.split(":");1===l.length?(u=t,c="common"):(c=l[0]||"common",u=l.slice(1).join(":")||""),Array.isArray(a)&&a.length&&(o=r._getModelsJsonView(a,s,o)),r.DEBUG&&console.log("Jane.tt:",'mode="'+t+'"','-> module="'+c+'"','mode="'+u+'"',"data=",o);var d=n.createElement("div");try{return d.innerHTML=yr.run(c,o,u),d.firstChild}catch(f){return i.ErrorLog.sendException("yate.run",f,{"yate-mode":u,"yate-module":c}),e.DariaAfterLoad||""!==u||i.onFatalError("yate.run"),d
}},i.extend=function(e,t){var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.superClass=t.prototype,t.prototype.constructor===Object.prototype.constructor&&(t.prototype.constructor=t)},r.extend=i.extend,i.extendClass=function(e){var t=function(){e.apply(this,arguments)};return i.extend(t,e),t},r.augment=function(e,t){for(var n in t)e[n]||(e[n]=t[n])},r._timestampDelta=0,r.now=function(e){var n=t.now()-r._timestampDelta;return e?new Date(n):n},r.passportNow=function(){var e=r.timify({minutes:(new Date).getTimezoneOffset()-r.tz_offset});
return r.now()+e},r.array2obj=function(e,n){n=arguments.length>1?n:!0;var r={};return t.each(e,function(e,t){r[t]=n}),r},r.lowerifyObjectKeys=function(e){var t={};for(var n in e)e.hasOwnProperty(n)&&(t[n.toLowerCase()]=e[n]);return t},r.parseKeys=function(e){for(var t,n=String(e).split(","),r={},i=0;i<n.length;i++)t=n[i].split("="),r[t[0]]=t[1];return r},r.parseQuery=function(e){e=e||"";for(var n=e.split("&"),r={},i=0;i<n.length;i++){var o=n[i].split("="),a=o.shift();if(a){var s=o.join("=");try{s=decodeURIComponent(s)
}catch(u){s=/%\D/.test(s)?s:""}a in r?t.isArray(r[a])?r[a].push(s):r[a]=[r[a],s]:r[a]=s}}return r},r.parseURL=function(e){if(!e)return{};e=e.replace(/^.*?#/,"");var t=/^(.*?)(&((?:.|\s)*))?$/.exec(e),n=r.parseQuery(t[3]);n.hasOwnProperty("_handlers")&&delete n._handlers;var o=t[1].split("/");return 1===o.length?"404"===o[0]||"403"===o[0]?(n._page=o[0],n._service=i.Services.url2pid(e)):(n._page=o[0],n._service="mail"):"contacts"===o[0]&&"chats"===o[1]?(n._page=o[2],n._service="wch"):(n._page=o[1],n._service=o[0]),n
},r.post=function(e,n){var r=t("<form/>").attr({action:e,method:"post"});t.each(n,function(e,n){var i=t('<input type="hidden" name="'+e+'" value="'+n+'"/>');r.append(i)}),t("body").append(r),r[0].submit()},r.numInflict=function(e,n){var r,i=e%10,o=e%100;return r=o>=5&&20>=o?"many":1===i?"one":i>=2&&4>=i?"two":"many",r=n[r],t.isFunction(r)?r(e,r):r},r.setSelection=function(e,t,n){if(t=t||0,n=n||t,e.setSelectionRange)e.setSelectionRange(t,n);else if(e.createTextRange){var r=e.createTextRange();r.collapse(!0),r.moveStart("character",t),r.moveEnd("character",n-t),r.select()
}},r.getSelection=function(e){var t,r,i,o,a,s=0,u=0;try{e.selectionStart&&e.selectionEnd?(s=e.selectionStart,u=e.selectionEnd):(r=n.selection.createRange(),r&&r.parentElement()===e&&(o=e.value.length,t=e.value.replace(/\r\n/g,"\n"),i=e.createTextRange(),i.moveToBookmark(r.getBookmark()),a=e.createTextRange(),a.collapse(!1),i.compareEndPoints("StartToEnd",a)>-1?s=u=o:(s=-i.moveStart("character",-o),s+=t.slice(0,s).split("\n").length-1,i.compareEndPoints("EndToEnd",a)>-1?u=o:(u=-i.moveEnd("character",-o),u+=t.slice(0,u).split("\n").length-1))))
}catch(c){return{start:0,end:0}}return{start:s,end:u}},r.supplant=function(e,t,n){return e.replace(/{([^{}]*)}/g,function(e,r){var i;if(r.indexOf(":")>=0){var o=r.split(/:|\|/),a=o[0];if(!a)return e;if(i=t[a],"number"!=typeof i)return e;var s=i%10,u=i%100;return 1===s&&11!==u?o[1]:s>1&&5>s&&(10>u||u>20)?o[2]:o[3]}return i=t[r],"string"==typeof i||"number"==typeof i?n?String(i):_.escape(String(i)):e})},r.getRandomNumber=function(){return Math.round(1e6*Math.random())},r.randomInteger=function(e,t,n){var r=e+Math.random()*(t+1-e);
return r=Math.floor(r),r===n&&(r=r+1>=t?r-1:r+1),r},r.getRandomString=function(){return Math.random().toString(36).substr(2)},r.capitalize=function(e){return e.substr(0,1).toUpperCase()+e.substr(1)},r.click=function(t,n){if(t.attr("data-click-action")||t.attr("action")){var r=jQuery.Event("click");return n&&n.keyCode&&(r.keyCode=n.keyCode),t.trigger(r),!0}var i=t.attr("href");return i?(e.location.href=i,!0):!1},i.doLogin=function(e,o){i.ErrorLog.send({event:"doLogin",from:e||""}),ns.events.trigger("noauth",o),r.Dialog.close(),t(n).trigger("b-mail-dropdown-closeall"),r.Config["social-host"]?t.ajax({timeout:2e3,dataType:"jsonp",url:r.Config["social-host"]+"/providers.jsonp",success:function(e){r.AuthDialog(e,o)
},error:function(){r.AuthDialog(null,o)}}):r.AuthDialog(null,o)},r.removeDropdowns=function(e){var n=t(e).find(".b-mail-dropdown");n.each(function(){var e=t(this),n=e.data("dropdown-content");n&&t(n).remove(),e.removeData("dropdown-content")})},r.invalidateMailHandlers=function(e,t){r.DEBUG&&console.log("[Daria]","invalidateMailHandlers by",t);var n=["filter-search","message-thread-nearest","message-nearest","messages-pager"];ns.Model.invalidateAll(n),e&&ns.Model.traverse("messages-checked",function(e){e.resetChecked()
});var i=ns.Model.get("messages",ns.page.current.params),o=[];"yes"===i.params.threaded&&(o=i.models.map(function(e){return e.getThreadId()})),ns.Model.invalidate("messages",function(e){return e.params.thread_id?!_.includes(o,e.params.thread_id):e!==i}),ns.forcedRequest(["folders","labels"],ns.page.current.params),i.isUnreadMessagesCollection()&&"xiva.invalid_lcn"===t?i.loadMore(!0):i.refresh()},r.regexpEscape=function(e){return String(e).replace(/([.*+?^=!:${}()|[\]\/\\])/g,"\\$1")}}(jQuery,o),function(){function t(t){var i;
t.source===e&&t.data===r&&(t.stopPropagation(),n.length&&(i=n.shift())())}var n=[],r='{ "message": "zero-timeout" }';o.setZeroTimeout=function(t){n.push(t),e.postMessage(r,"*")},e.addEventListener("message",t,!0)}(),o.showUnsavedComposeDialog=function(e){return e=e||{},e.cancel=e.cancel||r.noop,o.Dialog.open({width:480,body:"<p>Сохранить изменения?</p>",buttons:[{name:"save",value:"Сохранить и перейти",focus:!0,onclick:e.yes},{name:"dont_save",value:"Не сохранять",onclick:e.no},{link:!0,name:"cancel",value:"Отмена"}],oncancel:function(t){e.cancel(t)
}})},o.isRegion=function(e){var t=e;_.isArray(e)||(t=[e]),t=_.map(t,function(e){return String(e)});var n=o.Config.region_parents;return o.getCookie("yandex_gid")&&(n=n.concat(o.getCookie("yandex_gid"))),_.intersection(n,t).length>0},i.getHumanSize=function(e){var t=parseInt(e,10);if(isNaN(t))return"";var n,r,i=["байт","КБ","МБ","ГБ"];return 128>t?(n=t,r=i[0]):1048576>t?(n=t/1024,r=i[1]):1073741824>t?(n=t/1048576,r=i[2]):(n=t/1073741824,r=i[3]),n=10>n?Math.round(10*n)/10:Math.round(n),n=n.toString().replace(".",","),n+" "+r
},i.getAbsoluteUrl=function(e,t){if(/^(?:https?:)?\/\//.test(e))return e;if(/^\//.test(e)&&t){var n=/^(https?:\/\/[^\/]*)(?:\/|$)/.exec(t);if(n)return n[1]+e}else if(t){var r=/^(.*\/)[^\/]*$/.exec(t);if(r)return r[1]+e}return null},i.locate=function(t){e.location=t||"/"},o.forceNodeReflow=function(e){(!Modernizr.opera||Modernizr.webkit)&&e.offsetHeight},o.isCtrlPressed=function(e){if(!e)return!1;var t=e.originalEvent&&e.originalEvent.key;return e.ctrlKey||e.metaKey||"Control"===t},o.isLeftClickWithCtrl=function(e){var t=Modernizr.mac?"metaKey":"ctrlKey";
return 1===e.which&&e[t]},o.isLeftButton=function(e){return 1===e.which&&(!Modernizr.mac||!e.ctrlKey)||Modernizr.msie&&"click"===e.type&&0===e.which},o.isMiddleButton=function(e){return 2===e.which},o.is3pane=function(){return"2pane"!==o.Config.layout},o.is3pv=function(){return"3pane-vertical"===o.Config.layout},o.is3ph=function(){return"3pane-horizontal"===o.Config.layout},o.is2pane=function(){return"2pane"===o.Config.layout},o.isMessagePage=function(){return"message"===ns.page.current.page},o.isSettingsPage=function(){return/^setup*/.test(ns.page.current.page)
},o.isPageWithResizableLeftColumn=function(){return!_.startsWith(ns.page.current.page,"setup")&&"abook"!==ns.page.current.page},o.goHomePage=function(){e.location.href=e.location.pathname+e.location.search},o.toIntFlag=function(e){switch(e){case 1:case"1":case!0:case"true":return 1;default:return 0}},o.getPrevPageSearchContext=function(){var e,t=0,n=ns.page.history.getPrevious(t),r=ns.page.current;if(r.params.fromNotification)return null;for(;n&&(e=ns.router(n),"messages"!==e.page||"search"!==e.params.search);)n="message"===r.page&&"message"===e.page&&r.params.ids===e.params.ids?ns.page.history.getPrevious(++t):void 0;
if(!n)return null;var i={url:n,page:e},o=e.params.request;if(o){if("rpopinfo"===e.params.scope){var a=ns.Model.get("collectors").getById(o);a&&(o=a.email)}i.request=o}return i},o.getThemeId=function(){return ns.Model.get("settings").getSetting("color_scheme")},o.hasSid=function(e){return-1!==o.SIDS.indexOf(String(e))},o.tid2mid=function(e){return"t"===e.charAt(0)?e.substr(1):e},o.showPriorityLabel=function(){return!1},o.arrangeMatchingFirstInline=function(e,t){ns.assert("function"==typeof t,"Daria.arrangeMatchingFirstInline","matcher should be a function");
for(var n=0,r=0;r<e.length;r++)t(e[r])&&(r!==n&&e.splice(n,0,e.splice(r,1)[0]),n++);return e},function(e){e.Metric={},e.Metric.getPath=function(e){var t=ns.page.current.params,n=ns.Model.get("messages",t);if(t){if(t.current_folder){var r=ns.Model.get("folders").getFolderById(t.current_folder)||{};return r?r.user?["Пользовательская папка",r.name]:[r.name]:["Без папки"]}if(t.search)return e&&n.isSearchTopResult(e.get(".mid"))?["Поиск Top Results"]:["Поиск"];if(t.important)return["Фильтр Важные"];if(t.unread)return["Фильтр Непрочитанные"];
if(t.attachments)return["Фильтр С вложениями"];if(t.current_label){var i=ns.Model.get("labels"),o=i.getWaitingForReplyLabel();return t.current_label===o.lid?["Фильтр Ждут Ответа"]:["Метки"]}return["Без папки"]}return["Без папки"]}}(o),function(e){function t(){}e.contextHelpPages={RUS:{message:1113120,contacts:1113487,compose:1113122,trash:1113223,search:1113140,spam:1113148,setup:{"interface":1113091,sender:1113397,collectors:1113142,security:1113446,folders:1113138,filters:1113121,"filters-create":1113121,abook:1113487,chat:1113272,client:1113199,journal:1113469,todo:1124708}},TUR:{message:1121442,contacts:1121408,compose:1121420,search:1121447,spam:1121451,setup:{"interface":1121406,sender:1121429,collectors:1121433,security:1121453,folders:1121445,filters:1121443,"filters-create":1121443,abook:1121408,client:1118704,journal:1121407}},INT:{message:1114243,contacts:1114216,compose:1114252,trash:1114276,search:1114248,spam:1114262,setup:{"interface":1114213,sender:1114258,collectors:1114250,folders:1114245,filters:1114244,"filters-create":1114244,abook:1114216,security:1114267,client:1114232,journal:1114215}}};
var n;ns.events.on("help-link.forceUpdate",function(e,r){"undefined"==typeof r&&(r=n||""),t(r,!0)}),ns.events.on("ns-page-after-load",function(){var r=ns.page.current.page,i=ns.page.current.params,a=e.contextHelpPages;a=a&&a[o.Config.product]?a[o.Config.product]:{};var s,u=0,c=ns.Model.get("folders");if(a&&(s=a[r])&&(u="object"==typeof s?s[i.tab]||0:s),"messages"==r&&"search"===i.search)u=a.search;else if(i.current_folder)for(var l=i.current_folder,d=["spam","trash"],f=0,h=d.length;h>f;f++)if(c.isFolder(l,d[f])){u=a[d[f]];
break}var p=o.Config["pdd-custom-help"];p||(p="/mail/"+(u?"?id="+u:"")),n=p,t(p)})}(i),o.getCookie=function(e,t){if(!e)return!1;var r=" "+_.escape(n.cookie);if(r.length<2)return!1;var i=r.indexOf(" "+e)+1;if(0===i)return!1;if(i+=e.length+1,";"==r.charAt(i-1))return"";var o,a=r.indexOf(";",i);return o=a>0?r.substr(i,a-i):r.substr(i),t?o:decodeURIComponent(o)},o.delCookie=function(e){o.setCookie(e,"",-1)},o.setCookie=function(e,t,r){if("undefined"==typeof r?r={}:"object"!=typeof r&&(r={duration:parseInt(r,10)||0}),"dont_encode"in r||(t=encodeURIComponent(t)),r.path&&(t+="; path="+r.path),r.domain&&(t+="; domain="+r.domain),r.duration){var i=new Date;
i.setTime(i.getTime()+864e5*r.duration),t+="; expires="+i.toGMTString()}n.cookie=e+"="+t},function(){var e=1e3,t=900,n=256;o.metrikaGroup={_paramsQueue:[],addCount:function(e){this._paramsQueue.push(e),this._sendParamsOnIdle()},sendAllImmediate:function(){this._sendParamsOnIdle.forceExecute()},_sendParamsOnIdle:o.createDelayedIdleCallback(function(){return o.metrikaGroup._sendParamsPortion()},{delay:e,idleTimeout:t,runMode:"once",logName:"Daria.metrikaGroup"}),_sendParamsPortion:function(){if(!this._paramsQueue.length)return!1;
try{i.Metrika.counter.params(this._paramsQueue.splice(0,n))}catch(e){}return Boolean(this._paramsQueue.length)}}}(),function(t){function n(e,t){t=t||["pid","cid","path"];for(var n=[],r=t.length,i=0;r>i;i++){var o=t[i],a=e[i];a&&n.push(o+"="+a)}return n}function i(e,t,n,i,a){var s=location.protocol+"//"+o.Config["clck-host"]+"/"+e+"/dtype="+n+"/"+t.join("/");return a||(s+="/rnd="+(r.now()+o.getRandomNumber())),s+="/*"+(i?i:location.href)}t.c=function(){var e=arguments;return Number(e[0])?o.counter(2,e[0],e[1]):a.count.apply(a,e),""
},o.counter=function(e,t){e&&t&&((new Image).src=i("click",n(arguments),"stred"))},o.searchClickCounter=function(e){(new Image).src=i("click",e,"PS",null,!0)};var a={inited:!1,counts:[],counter:null,init:function(n,i){var a=this;if(!n)return this.clear();var s=setTimeout(function(){a.clear(),t.ErrorLog.send({metrika:"init_timeout"})},1e4);o.Libs("Ya.Metrika",function(){i=i?r.extend({},i):{ut:"noindex",trackLinks:!0,trackHash:!0},i.id=n;try{a.counter=e["yaCounter"+n]=new Ya.Metrika(i)}catch(t){return a.clear()
}for(clearTimeout(s),a.inited=!0;a.counts.length;)a.count.apply(a,a.counts.shift());e.addEventListener("beforeunload",function(){o.metrikaGroup.sendAllImmediate()},!1)})},wrap:function(e,t){var n={};return n[t]=e,n},count:function(e){var t=Array.prototype.slice.call(arguments);if(!this.inited)return this.counts.push(t);for(var n=[];t.length;)n=n.concat(t.shift());for(t=n,e=t.pop();t.length;)e=this.wrap(e,t.pop());o.metrikaGroup.addCount(e)},clear:function(){this.count=r.noop,this.counts=[]}};t.Metrika=a
}(i),o.Experiments={},o.Experiments.useMessagesItemMixins=function(){return!0},o.Experiments.showPriorityLabel=function(){return o.hasExperiment("35006")||o.hasExperiment("35007")},i.i18n||(i.i18n={}),i.i18n["if"]=function(e,t,n){return e?t:n},i.i18n.plural=function(e,t,n){return e>1?t:n},i.i18n.index=function(e,t){return e[Number(t)]},i.i18n.camelize=function(e){return e&&e.length?e.charAt(0).toUpperCase()+e.substr(1):void 0},i.i18n.date={fullDate:function(e,t,n,r,o){return e+" "+i.i18n.index(["января","февраля","марта","апреля","мая","июня","июля","августа","сентября","октября","ноября","декабря"],t)+" "+n+" года в "+r+":"+o
},fullDate2:function(e,t,n){return e+" "+i.i18n.index(["января","февраля","марта","апреля","мая","июня","июля","августа","сентября","октября","ноября","декабря"],t)+" "+n+" года"},fullDate5:function(e,t,n,r){return i.i18n.index(["Воскресенье","Понедельник","Вторник","Среда","Четверг","Пятница","Суббота"],e)+", "+t+" "+i.i18n.index(["января","февраля","марта","апреля","мая","июня","июля","августа","сентября","октября","ноября","декабря"],n)+" "+r},monthName:function(e){return i.i18n.index(["Январь","Февраль","Март","Апрель","Май","Июнь","Июль","Август","Сентябрь","Октябрь","Ноябрь","Декабрь"],e)
},shortDate5:function(e,t,n,r){return e+" "+i.i18n.index(["янв.","фев.","мар.","апр.","май","июн.","июл.","авг.","сен.","окт.","ноя.","дек."],t)+" в "+n+":"+r},shortMonthName:function(e){return i.i18n.index(["Янв","Фев","Мар","Апр","Май","Июн","Июл","Авг","Сен","Окт","Ноя","Дек"],e)},weekDayCap:function(e){return i.i18n.index(["Вс","Пн","Вт","Ср","Чт","Пт","Сб"],e)},humanDate:function(e){var t=function(e){return 10>e?"0"+e:e},n=new Date;n.setHours(0),n.setMinutes(0),n.setSeconds(0);var r=new Date(n.getTime()+864e5);
return e>n&&r>e?"сегодня в "+e.getHours()+":"+t(e.getMinutes()):t(e.getDate())+"."+t(e.getMonth()+1)+"."+e.getFullYear()},humanDate2:function(e){var t=function(e){return 10>e?"0"+e:e},n=new Date;n.setHours(0),n.setMinutes(0),n.setSeconds(0);var r=new Date(n.getTime()+864e5),o=new Date(r.getTime()+864e5),a=e.getHours(),s=t(e.getMinutes());return e>n&&r>e?"сегодня в "+a+":"+s:e>r&&o>e?"завтра в "+a+":"+s:e.getDate()+" "+i.i18n.index(["января","февраля","марта","апреля","мая","июня","июля","августа","сентября","октября","ноября","декабря"],e.getMonth())+" в "+a+":"+s
}},function(e,t){function n(e){var t=r[e];return t.status||t.ref()?!0:t.status}var r={};t.Libs=function(i,o){"string"==typeof i&&(i=[i]),o=o||t.nop;var a={n:0,libs:{}},s=e(a);return e.each(i,function(e,t){var i=n(t);i||(r[t].loaders.push(s),a.n++,a.libs[t]=void 0===i)}),a.n?(s.on("daria-libs-loaded",function(e,t){return void 0!==a.libs[t]&&a.n--,a.n?void 0:o.call()}),void e.each(a.libs,function(t,n){var i=r[t];if(n){i.status=!1;var o=i.url;e.getScript(o,function(){e.each(i.loaders,function(e,n){n.trigger("daria-libs-loaded",t)
}),i.loaders=null,i.status=!0})}})):o.call()},t.Libs.add=function(n){e.each(n,function(e,n){if(!(e in r)){r[e]=n;var i=n.url;/^(http|\/)/.test(i)||(n.url=t.Config.staticRoot+"/"+i),n.loaders=[]}})}}(jQuery,o),o.lom={},o.lom._cache=null,o.lom.get=function(){if(!this._cache){try{var e=ns.Model.get("settings");this._cache=JSON.parse(decodeURIComponent(e.getSetting("last_open_msg"))||"{}")}catch(t){}this._cache=_.isPlainObject(this._cache)?this._cache:{}}return this._cache},o.lom.getByParams=function(e){if(this._validParams(e)){var t=this.get();
return t[e.current_folder]}return null},o.lom._validParams=function(e){return o.messages.params4SimplePath(e)&&!ns.Model.get("folders").isFolder(e.current_folder,["trash","spam","draft","template"])},o.lom.save=_.debounce(function(e){if(this._validParams(e)){var t=ns.Model.get("folders"),n=this.get();for(var r in n)t.getFolderById(r)||delete n[r];var i=e.current_folder;n[i]=e.ids||e.thread_id,ns.Model.get("settings").setSettings({last_open_msg:encodeURIComponent(JSON.stringify(n))})}},500),o.lom.deleteFid=function(e){delete this.get()[e]
},o.lom.isLastOpen=function(e){return o.lom.getByParams(ns.page.current.params)===e},i.Page={hash:null,forceHashChange:null,type:null,key:null,selected:!1,selects:{},params:{},loadingHash:null,specialPages:/^(#inbox|#folder|#sent|#spam|#trash|#draft|#template|#archive|#outbox|#label|#unread)($|\W)+/};var a=i.Page;a.forceReload=function(t){var i=e.location;r(n).off("hashchange"),i.replace(t||i.hash),i.reload()},a.params2query=function(e,t,n){function i(e,t){u++&&(s+="&"),s+=e+"="+t}t=t||{},n=n||{};
var o,a,s="",u=0;for(o in e)if("_"!=o.charAt(0)&&!t[o]&&(a=e[o]))if(r.isArray(a)&&n.multipleParam)for(var c=0;c<a.length;c++)i(o,a[c]);else i(o,a);return s},a.params2url=function(e,t){t=t||{};var n,r,i=e._page,s={"goto":1,search:1,current_label:1,current_folder:1,threaded:1},u=ns.Model.get("folders"),c=u.symbols(),l=e.current_folder||u.getFidBySymbol("inbox"),d="";if("messages"==i){if("all"==e["goto"]){s.extra_cond=1;var f=e.extra_cond;"only_new"==f?n="#unread":"only_atta"==f?n="#attachments":f||(n="#all")
}else"search"==e.search?n="#search":e.current_label?n="#label/"+e.current_label:l&&(r=c[l],n=r?"#"+r:"#folder/"+l);o.is3pane()&&e.ids&&(s.ids=1,d="/message/"+e.ids)}else"message"==i&&(s.ids=1,n="#",o.is3pane()&&(r=c[l],n+=r?r+"/":"folder/"+l+"/"),n+="message/"+e.ids);var h=a.params2query(e,s,t);return h&&(n+="/"+h),n+d},a.getCurrentCleanUrl=function(){var e=r.extend({},a.params);return delete e.ids,a.params2url(e)},o.gotNewMail=0,a.fixEmptyImage=function(e,t){var n=r(e);if(1===n.width()||1===n.height())switch(e.onload=r.noop,t){case"setup-avatar":ns.events.trigger("daria:vSetupAvatar:remove");
break;case"message-right":n.parent().addClass("g-hidden error"),ns.events.trigger("message-right.avatar-error",e);break;case"message-right-single":n.attr("src","//yastatic.net/mail/_/6VgjvXIr9S9-D-yvXHk3oOu9Uvk.png");break;case"message-right-link":n.attr("src","//yastatic.net/mail/_/exn6oPWOIS8FlH8enoOAXFs3OnU.png");break;case"collectors":n.attr("src","//yastatic.net/mail/_/CEWV6xEsDsjI_5xEAE2t6ltkdvI.png");break;case"Link-Earth":var i=n.parent().find(".js-icon-stub:eq(0)");n.remove(),i.removeClass("g-hidden");
break;default:n.addClass("g-hidden")}},a.rewriteParams=function(e,t){i.Services.rewriteParams(e,t)},a.isParamsForSearch=function(e){return"search"in e},a.isParamsForSingleThread=function(e){var t=_.keys(e);return 1===t.length&&"thread_id"===t[0]},a.isParamsForMessage=function(e){return e.ids||e.thread_id},a.generateUrl={},a.generateUrl.closeMessage=function(){var e=_.omit(ns.page.current.params,["ids"]);return o.Page.isParamsForSingleThread(e)||delete e.thread_id,ns.router.generateUrl("messages",e)
},a.generateUrl.contentMessage2pane=function(e,t){var n=i.Page.generateUrl.contentMessageCompose(e,t);if(n)return n;var r,o=_.extend({},t),a=e.mid,s=e.count>1;if(s)r="messages",o.thread_id=a;else{if(r="message",this._isFakeThread(e))return this._logFakeThreadErrorOnce(e),"";if(a&&"t"===a.charAt(0)&&a.length>1){var u=ns.Model.get("messages",{thread_id:a});o.ids=u.models[0].params.ids}else o.ids=a}return ns.router.generateUrl(r,o)},a.generateUrl.contentMessage3pane=function(e,t){var n=i.Page.generateUrl.contentMessageCompose(e,t);
if(n)return n;if(this._isFakeThread(e))return this._logFakeThreadErrorOnce(e),"";var r=_.extend({},t),o=ns.page.current.params,a=ns.Model.get("folders"),s=e.mid,u=e.count>1||e.tid===e.mid;if(o.current_folder){this._fixFolderInParams(r,o.current_folder,e);var c=_.pick(ns.page.current.params,["datePager","extra_cond"]);_.assign(r,c)}else if(o.current_label)r.current_label=o.current_label;else if("search"===o.search)_.extend(r,o);else if(o.thread_id){r.current_folder||this._fixFolderInParams(r,o.current_folder,e);
var l=Boolean(r.current_folder||r.default_folder);l||o.current_folder||!e.fid||this._logCurrentFolderLost(a,e),r.thread_id=o.thread_id}return(o.attachments||o.unread)&&no.extend(r,o),u?r.thread_id=s:r.ids=s,"setup"===ns.page.current.page&&(r.current_folder=e.fid),ns.router.generateUrl("messages",r)},a.generateUrl._fixFolderInParams=function(e,t,n){var r,i=ns.Model.get("folders");t&&(r=i.getFolderById(t)||i.getFolderBySymbol(t)),r||(r=i.getFolderById(n.fid)),r?r.symbol?e.default_folder=r.symbol:e.current_folder=r.fid:(t&&(e.current_folder=t),this._logFolderNotFoundOnce(i))
},a.generateUrl._logFolderNotFoundOnce=_.once(function(e){var t=ns.page.current.params;i.ErrorLog.send({errorType:"debug.folder-not-found",current_folder:t.current_folder,mFoldersStatus:e.status,mFoldersData:JSON.stringify(e.getData())})}),a.generateUrl._logCurrentFolderLost=function(e,t){i.ErrorLog.send({errorType:"current_folder_lost",pageParams:JSON.stringify(ns.page.current.params),mFoldersStatus:e.status,messageMid:t.mid,messageFid:t.fid})},a.generateUrl._logFakeThreadErrorOnce=_.once(function(e){i.ErrorLog.send({type:"fake_thread_url_error",message:JSON.stringify(e),pageParams:JSON.stringify(ns.page.current.params)})
}),a.generateUrl._isFakeThread=function(e){return e.mid&&"t"===e.mid||!e.mid&&Boolean(e.FAKE_THREAD_DATA)},a.generateUrl.contentMessageCompose=function(e){var t=ns.Model.get("folders"),n=e.fid,r=e.mid,i=e.count>1;return t.isFolder(n,["draft","outbox","template"])&&!i?ns.router.generateUrl("compose2",{ids:r}):void 0},a.generateUrl.contentMessage=function(e,t){return o.is2pane()?i.Page.generateUrl.contentMessage2pane(e,t):i.Page.generateUrl.contentMessage3pane(e,t)},a.getMessageId=function(e){return e.ids||e.thread_id
},o.Page=i.Page,function(t,n){var i="pageVisible";if("hidden"in t||"msHidden"in t||"mozHidden"in t||"webkitHidden"in t){var o=function(){n.watcher.set(i,!(t.hidden||t.msHidden||t.mozHidden||t.webkitHidden))};o(),t.addEventListener("visibilitychange",o,!1),t.addEventListener("msvisibilitychange",o,!1),t.addEventListener("mozvisibilitychange",o,!1),t.addEventListener("webkitvisibilitychange",o,!1)}else{var a=!Modernizr.webkit&&"hasFocus"in t,s=function(e){var r=null;if(a)try{r=t.hasFocus()}catch(o){}null===r&&(r=!e||!("blur"==e.type||"focusout"==e.type)),n.watcher.set(i,r)
};s(),Modernizr.msie?r(t).on("focusout focusin",s):r(e).on("blur focus",s)}}(n,i),o.router={},o.router.addThreadedParam=function(e){var t=ns.Model.get("folders"),n=t.symbols(),r=e.current_folder,i=r&&r!=n.spam&&r!=n.trash&&r!=n.draft&&r!=n.template,o=ns.Model.get("settings").isThreaded();o&&!e.extra_cond&&!e.datePager&&i?e.threaded="yes":delete e.threaded},o.router.goToLOM=function(e,t){if(o.is2pane())return null;if(e.ids||e.thread_id)return null;var n=o.lom.getByParams(e);if(n&&(t||(o.router.addThreadedParam(e),t=ns.Model.get("messages",e)),t.get(o.supplant('.message[.mid=="{id}"]',{id:n})))){var i=r.extend({},e);
return 0===n.indexOf("t")?i.thread_id=n:i.ids=n,ns.router.generateUrl("messages",i)}return null},o.router.symbolToFid=function(e){var t=ns.Model.get("folders");if(e.default_folder){var n=t.getFolderBySymbol(e.default_folder);n||(n=t.getFolderBySymbol("inbox")),e.current_folder=n.fid,delete e.default_folder}},i.Services.getProjectVersion=function(e){var t=i.Services.getProject(e);return t?t.version:null},i.Services.__needUpdate=!1,i.Services.__updateTimer=null,i.Services.hasNewVersion=function(){return this.__needUpdate
},i.Services.setActualVersion=function(t){t&&t!==o.Config.version&&(this.__updateTimer||(this.__updateTimer=e.setTimeout(function(){this.__needUpdate=!0}.bind(this),12e4)))},i.Services._normalURL=function(e){return e?"#"+e.replace(/^[^#]*#?/,"").replace(/\?ncrnd=\d+$/,"").replace(/\&ncrnd=\d+$/,""):""},i.Services.load=function(e,t){e=this._normalURL(e);var n=this.url2pid(e),r=this.pid2Modules(n,e).modules,o=new vow.Promise(function(e){i.Services.runModules(r,e)});return t&&o.then(t),o},i.Services.isDone=function(e){e=this._normalURL(e);
var t=this.url2pid(e),n=this.pid2Modules(t,e).modules;return this.isModulesReady(n)},i.Services.rewriteParams=function(e,t){this.rewriteParams[e._service](e,t)},i.Services.rewriteParams.jane=o.nop,function(){function t(e,t,n){function r(e,t,n){return e===e&&(void 0!==n&&(e=n>=e?e:n),void 0!==t&&(e=e>=t?e:t)),e}return void 0===n&&(n=t,t=void 0),void 0!==n&&(n=Number(n),n=n===n?n:0),void 0!==t&&(t=Number(t),t=t===t?t:0),r(Number(e),t,n)}var n=".mail-Layout",i=".js-mail-Layout-Panes",a=".js-layout-left",s=".js-layout-first-pane",u=".js-layout-second-pane",c=".js-messages-scroll-area",l=1024,d=60,f=400,h=250,p=570,g=88,m=.6,v="function"==typeof _.clamp?_.clamp:t;
o.resize={elements:{all:[{selector:n,type:"h",params:{handles:"e",minWidth:l},callback:function(){ns.events.trigger("daria:vApp:changeAppWidth")},events:{resize:function(){ns.events.trigger("daria:vApp:changeRightColumSize")}},settingName:"size-view-app"},{selector:a,type:"h",params:{handles:"e",minWidth:d,maxWidth:f},settingName:"size-layout-left",callback:function(){ns.events.trigger("daria:vApp:changeLeftColumWidth")},events:{resize:function(e,t){ns.events.trigger("daria:vApp:changeLeftColumWidth",t),ns.events.trigger("daria:vApp:changeRightColumSize")
}}}],is3paneVertical:[{selector:s,type:"h",params:{handles:"e",minWidth:h},events:{start:function(){o.resize._doNotKeepProportions=!0,o.resize._updateLeftColumnMaxWidthFor3pv(),o.resize._updateFirstPaneMaxWidthFor3pv()},resize:function(){ns.events.trigger("daria:vApp:changeRightColumSize"),o.resize._saveColumnsProportionFor3pv()}},settingName:"size-first-pane-3pv"}],is3paneHorizontal:[{selector:s,scrollAreaSelector:c,type:"v",params:{handles:{s:".js-Mail-MessagesWrap .js-resizer-of-messages-list"},minHeight:g,maxHeightCoefficient:m},settingName:"size-first-pane-3ph",callback:function(){r(".js-Mail-MessagesWrap .js-resizer-of-messages-list").removeClass("is-hidden"),o.resize._updateResizeHandleFor3ph()
},events:{start:function(){o.resize._doNotKeepProportions=!0},resize:function(){o.resize._updateResizeHandleFor3ph(),ns.events.trigger("daria:vApp:changeRightColumSize"),o.resize._saveColumnsProportionFor3ph()}}}]},setMaximumSizes:function(t){function n(e){var n=r(e.selector);e.params.maxWidthCoefficient&&(e.params.maxWidth=parseInt(i*e.params.maxWidthCoefficient,10),t&&n.resizable("option","maxWidth",e.params.maxWidth)),e.params.maxHeightCoefficient&&(e.params.maxHeight=parseInt(o*e.params.maxHeightCoefficient,10),t&&n.resizable("option","maxHeight",e.params.maxHeight))
}var i=e.innerWidth,o=e.innerHeight;_.forEach(this._resizableElements,function(e){n(e)})},expandToViewport:function(){var e=this.elements.all[0],t=parseInt(ns.Model.get("settings").getSetting("size-view-app2"),10)||"100%";r(e.selector).css({width:t})},resetExpandToViewport:function(){var e=this.elements.all[0],t=r(e.selector);this.setSizesFromSettings(t,e.type,e.settingName)},init:function(){var e=this;this.setMaximumSizes(),this.bindResizeEvent(),this.$layout=r(n),this.$layoutPanes=r(i),this.$layoutLeft=r(a),this.$firstPane=r(s),this.$secondPane=r(u),this._resizableElements=this.elements.all,o.is3pv()?this._resizableElements=this._resizableElements.concat(this.elements.is3paneVertical):o.is3ph()&&(this._resizableElements=this._resizableElements.concat(this.elements.is3paneHorizontal)),_.forEach(this._resizableElements,function(t){e._turnOnResize(t)
}),o.isPageWithResizableLeftColumn()&&(o.is3pv()&&(this._updateLeftColumnMaxWidthFor3pv(),this._updateFirstPaneMaxWidthFor3pv(),this._saveColumnsProportionFor3pv(),ns.events.on("daria:vApp:changeAppWidth",this.onAppWidthChange.bind(this))),o.is3ph()&&(this._saveColumnsProportionFor3ph(),ns.events.on("daria:vApp:changeAppWidth",this.onAppHeightChange.bind(this)))),ns.Model.get("settings").on("ns-model-changed.liza_minified",this.adjustToCompactMode.bind(this)),ns.Model.get("settings").on("ns-model-changed.liza_minified_header",this.adjustToCompactMode.bind(this)),_.defer(function(){e.adjustToCompactMode()
})},bindResizeEvent:function(){var e=this;ns.Model.get("dimensions").on("resize",function(t,n){e.setMaximumSizes(!0),ns.events.trigger("daria:vApp:changeAppWidth",{saveRightColumnWidthSettings:!0,saveRightColumnHeightSetting:!0,isLeftResized:r(n.target).hasClass("js-layout-left")}),ns.events.trigger("daria:vApp:changeLeftColumWidth"),ns.events.trigger("daria:vApp:changeRightColumSize")})},_saveColumnsProportionFor3pv:function(){var e=this.$firstPane.width(),t=this.$secondPane.width();this._3pvColumnsProportion=e/(e+t)
},_saveColumnsProportionFor3ph:function(){var e=this.$firstPane.height(),t=this.$secondPane.height();this._3phColumnsProportion=e/(e+t)},_updateLeftColumnMaxWidthFor3pv:function(){var e=this.$layout.width(),t=e-h-p;t=v(t,d,f),this.$layoutLeft.resizable("option","maxWidth",t)},_updateFirstPaneMaxWidthFor3pv:function(){var e=this.$layout.width(),t=this.$layoutLeft.width(),n=this.$layoutLeft.resizable("option","maxWidth");t>n&&(t=n);var r=e-t-p;this.$firstPane.resizable("option","maxWidth",r)},_updateResizeHandleFor3ph:function(){var e=this.elements.is3paneHorizontal[0],t=r(e.scrollAreaSelector),n=r(".js-Mail-MessagesWrap .js-resizer-of-messages-list");
n.css({top:t.scrollTop()+t.height()-n.height()})},onAppWidthChange:function(e,t){if(!this._doNotKeepProportions){this._updateLeftColumnMaxWidthFor3pv(),this._updateFirstPaneMaxWidthFor3pv();var n=this.$layout.width(),r=this.$layoutLeft.width(),i=this.$layoutLeft.resizable("option","maxWidth"),o=this.$firstPane.resizable("option","maxWidth"),a=parseInt(ns.Model.get("settings").getSetting("size-layout-left"),10);t=t||{};var s=r;t.isLeftResized||a>r&&(s=a),s=v(s,d,i);var u=Math.floor((n-s)*this._3pvColumnsProportion);
u=v(u,h,o),u=Math.min(u,n-s-p),this.$layoutLeft.width(s),this.$firstPane.width(u),t.saveRightColumnWidthSettings&&this._saveRightColumnWidthSettingFor3pv(),ns.events.trigger("daria:vApp:changeLeftColumWidth"),ns.events.trigger("daria:vApp:changeRightColumSize")}},onAppHeightChange:function(e,t){if(!this._doNotKeepProportions){var n=this.$layoutPanes.height();t=t||{};var r=Math.floor(n*Math.min(this._3phColumnsProportion,.8));r=Math.max(r,g),this.$firstPane.height(r),this._updateResizeHandleFor3ph(),t.saveRightColumnHeightSetting&&this._saveRightColumnHeightSettingFor3ph(),ns.events.trigger("daria:vApp:changeRightColumSize")
}},reinitResizer:function(){var e=this;this._clearOldSizes(),_.forEach(this.elements.is3paneHorizontal,function(t){e._turnOnResize(t)})},_clearOldSizes:function(){var e=r(".js-resizer-of-messages-list");e.addClass("is-hidden").removeClass("ui-resizable-handle ui-resizable-s");var t=this.$firstPane;t.hasClass("ui-resizable")&&t.resizable("destroy"),t.css(o.is3pv()?{height:"auto"}:o.is3ph()?{width:"auto"}:{height:"auto",width:"auto"}),e.addClass("ui-resizable-handle ui-resizable-s")},_turnOnResize:function(e){var t=r(e.selector);
this.setSizesFromSettings(t,e.type,e.settingName);var n=e.events||{};n.stop=this._onResizeStop.bind(this,e,t),t.resizable(r.extend(e.params,n)),e.callback&&e.callback()},_onResizeStop:function(e,t){o.is3pv()&&(this._updateLeftColumnMaxWidthFor3pv(),this._updateFirstPaneMaxWidthFor3pv(),this._saveRightColumnWidthSettingFor3pv(),this._doNotKeepProportions=!1),o.is3ph()&&(this._updateResizeHandleFor3ph(),this._saveRightColumnHeightSettingFor3ph(),this._doNotKeepProportions=!1),this.saveSizeOnSettings(e,t),this._clearGlobalCursorStyle()
},_clearGlobalCursorStyle:function(){r("body").css("cursor","")},setSizesFromSettings:function(e,t,n){var r=parseInt(ns.Model.get("settings").getSetting(n),10);if(r)if("h"===t)e.width(r);else if("v"===t)e.height(r);else{var i=r.split("|");e.width(i[0]),e.height(i[1])}},saveSizeOnSettings:function(e,t){var n=ns.Model.get("settings"),r=e.settingName;"size-view-app"===r&&n.isCompactMode()&&(r="size-view-app2");var i={};i[r]="h"===e.type?t.width():"v"===e.type?t.height():t.width()+"|"+t.height(),n.setSettings(i)
},_saveRightColumnWidthSettingFor3pv:function(){var e=this.elements.is3paneVertical[0],t=r(e.selector);this.saveSizeOnSettings(e,t)},_saveRightColumnHeightSettingFor3ph:function(){var e=this.elements.is3paneHorizontal[0],t=r(e.selector);this.saveSizeOnSettings(e,t)},adjustToCompactMode:function(){var e=ns.Model.get("settings");e.isCompactHeaderMode()||e.isCompactMode()?this.expandToViewport():this.resetExpandToViewport(),ns.events.trigger("daria:vApp:changeAppWidth")}}}(),function(){function e(){var e,t=ns.page.current.page;
return"messages"===t?e=ns.Model.getKeyAndParams("messages",ns.page.current.params).params:null}function t(){var e,t=ns.page.current.page;return"message"===t?(e=ns.Model.getKeyAndParams("message",ns.page.current.params).params,e.mid=e.ids,delete e.ids,e):null}function n(){var e=ns.page.current.page,t=null;return"abook"===e&&(t=ns.Model.getKeyAndParams("abook-contacts",ns.page.current.params).params),t}o.params={toolbarButtons:function(){var r=ns.page.current.page,i=e()||t()||n()||{};return _.extend(i,{layout:r})
},messagesChecked:function(n){if(n.mid)return{mid:n.mid};var r=e()||t()||{};return r}}}(),function(){o.Clipboard=function(e,t){this._lock=!1,this._needDestroy=!1,this._target=r(e),this._destroyed=!1,this._clipboard=null,this._text="",this._options=_.assign({hoverClass:"hover"},t),_.bindAll(this,["_onLoad","_onMouseenter","_onMouseleave","_onMousedown","_getText"]),this._target.on("mouseenter.clipboard",this._onMouseenter).on("mouseleave.clipboard",this._onMouseleave).on("mousedown.clipboard",this._onMousedown),i.Services.runModules(["jane.clipboard.js"],this._onLoad)
},no.extend(o.Clipboard.prototype,ns.Events),o.Clipboard.canUse=function(){var e;try{e=n.queryCommandSupported("copy"),e&&!Modernizr.msie&&n.execCommand("copy")}catch(r){e=!1}return e?"native":t.hasFlashPlayerVersion("11.0.0")?"flash":!1}(),o.Clipboard.prototype.EV={SUCCESS:"success",ERROR:"error",COMPLETE:"complete",READY:"ready"},o.Clipboard.prototype.destroy=function(){if(this._lock)return void(this._needDestroy=!0);this._needDestroy=!1,this._destroyed=!0,this._text="";for(var e in this.EV)this.off(this.EV[e]);
this._target&&(this._target.off(".clipboard"),this._target=null),this._clipboard&&(this._clipboard.destroy(),this._clipboard=null)},o.Clipboard.prototype.setText=function(e){this._text=e},o.Clipboard.prototype._onLoad=function(){if(!this._destroyed){var e=vow.reject();"native"===o.Clipboard.canUse?e=this._clipboardInit():"flash"===o.Clipboard.canUse&&(e=this._zeroClipboardInit()),e.then(function(){this.trigger(this.EV.SUCCESS)},function(){this.trigger(this.EV.ERROR)},this).always(function(){this._lock=!1,this._needDestroy&&this.destroy(),this.atrigger(this.EV.COMPLETE)
},this)}},o.Clipboard.prototype._onMouseenter=function(){this._target.addClass(this._options.hoverClass)},o.Clipboard.prototype._onMouseleave=function(){this._target.removeClass(this._options.hoverClass)},o.Clipboard.prototype._onMousedown=function(){this._lock=!0},o.Clipboard.prototype._getText=function(){return this._text},o.Clipboard.prototype._clipboardInit=function(){return new vow.Promise(function(e,t){this._clipboard=new Clipboard(this._target[0],{text:this._getText}),this._clipboard.onClick=function(e){Clipboard.prototype.onClick.call(this,e),this.clipboardAction.fakeElem&&this.clipboardAction.fakeElem.blur()
},this._clipboard.on("success",e),this._clipboard.on("error",t),this.atrigger(this.EV.READY)}.bind(this))},o.Clipboard.prototype._zeroClipboardInit=function(){return new vow.Promise(function(e,t){var n=this;this._clipboard=new ZeroClipboard(this._target[0]),this._clipboard.on("ready",function(){n.atrigger(n.EV.READY)}),this._clipboard.on("copy",function(){n._clipboard.setText(n._getText()),e()}),this._clipboard.on("error",t)}.bind(this))}}(),o.assert=function(e,t,n,i){n=n||null;var a,s,u,c=o.DEBUG,l="all-assertions",d="obtrusive-assertions",f=e?"PASS":"FAIL";
switch(c){case n:u="assert-namespace";break;case d:case l:u=c;break;default:u=c?"default-debug":"disable-debug"}var h=function(e){return!r.isArray(e)&&arguments.length&&(e=Array.prototype.slice.call(arguments)),function(t,n){t=t||null,n=n||[],r.each(e,function(e,i){r.isFunction(i)&&i.apply(t,n)})}},p=function(e,t){if(console.assert)console.assert("PASS"===e,t);else if("FAIL"===e)throw new Error(t+": "+e)},g=function(e,t){alert(t+": "+e)},m=function(){};i=i||function(e,t){if("FAIL"===e)throw new Error(t+": "+e)
};var v={"obtrusive-assertions:PASS":h(p),"obtrusive-assertions:FAIL":h(g,p),"all-assertions:PASS":h(p),"all-assertions:FAIL":h(p),"assert-namespace:PASS":h(i,p),"assert-namespace:FAIL":h(i,g,p),"default-debug:PASS":h(p),"default-debug:FAIL":h(p),"disable-debug:PASS":m,"disable-debug:FAIL":m};a=[u,f].join(":"),(s=v[a])(null,[f,t])},function(){var t=/[_-]/g,n={"-":"+",_:"/"};o.base64UrlDecode=function(r){return r=e.atob(r.replace(t,function(e){return n[e]})),decodeURIComponent(escape(r))}}(),function(){"use strict";
i.PromiseHandlerMixin={};var e=i.PromiseHandlerMixin;e._parse=function(e){return e},e._checkSuccessResult=function(){return!0},e._onResponse=function(e,t){var n=this._execDeferred,i=e.getData();if(i){if(!e.isValid())return void n.reject({errorcode:e.getError(),message:"Handler filter exception"})}else if(t&&(i=this.getData()),!i)return n.reject({errorcode:"CONNECTION_ERROR",message:"Error in connection"}),n.promise();i=r.extend(!0,{},i),i.errorcode?n.reject(i):(i=this._parse(i),this._checkSuccessResult(i)?n.resolve(i):n.reject(i))
},e._exec=function(e,t){var n=this;e=e||null,t=t||!1,this._execDeferred=r.Deferred();var i=function(e){n._onResponse.call(n,e[0],t)};return t?ns.request([this.id],e).then(i):ns.forcedRequest([this.id],e).then(i),this._execDeferred.promise()}}(),function(){var t={},n=function(e){return e=e||ns.page.current.params,_.pick(e,"current_label","current_folder","extra_cond")},i=function(e){switch(e){case"abook":case"compose2":break;default:o.scrollRestore.getScrollArea().scrollTop(0)}},a=function(){var e=ns.page.current.page;
_.method(e)(t)||i(e),t[e]=no.true};o.scrollRestore={},o.scrollRestore.getScrollArea=function(){var t;return o.is3pane()&&(t=r(".js-messages-scroll-area")),t&&t.length?t:r(e)},o.scrollRestore.restore=function(e){if(o.scrollRestore._disabled)return!1;var t=ns.page.current.page,r=ns.page.current.params,a=n(),s=o.scrollRestore.getScrollArea();switch(t){case"messages":var u=Boolean(o.is2pane()&&(r.ids||r.thread_id));if(!u){var c=0;!_.isEmpty(e)&&_.isEqual(e.params,a)&&(c=e.position),s.scrollTop(c)}break;
default:i(t)}return!0},o.scrollRestore.save=function(e){return o.scrollRestore._disabled?void 0:{params:n(e),position:o.scrollRestore.getScrollArea().scrollTop()}},o.scrollRestore.disable=function(){o.scrollRestore._disabled=!0},o.scrollRestore.enable=function(){o.scrollRestore._disabled=!1},ns.events.on("ns-page-before-load",function(e,r){if(!_.isEqual(r[0],r[1])&&("messages"!==r[0].page||"messages"!==r[1].page||_.isEmpty(r[0].params)||_.isEmpty(r[1].params)||!_.isEqual(n(r[0].params),n(r[1].params)))){var i;
r[0].page&&(i=o.scrollRestore.save(r[0].params))&&(t[r[0].page]=_.once(o.scrollRestore.restore.bind(null,i)))}}),ns.events.on("ns-page-after-load",a),ns.events.on("ns-page-error-load",a)}(),o.timify=function(e,t){t=t||"milliseconds";var n,r,o={milliseconds:1,seconds:i.Date.SECOND,timestamp:1e3,minutes:i.Date.MINUTE,hours:i.Date.HOUR,days:i.Date.DAY,weeks:i.Date.WEEK,months:i.Date.MONTH,years:31104e6};if(!e)throw new Error("Not provided any time parameter");var a=_.chain(e).pairs().reduce(function(e,t){var n=t[0],r=t[1],i=o[n];
if(i)return e+i*r;throw new TypeError("Unknow time entity in timeSettings")},0).value();if(r=o[t],!r)throw new TypeError("Unknow time entity in timeSettings");return n=o[t],a/n},o.WMI={},o.WMI.ERROR_CODES={AUTH_NO_AUTH:"2001",AUTH_NO_MAILBOX:"2003",AUTH_NO_DOMAIN:"2004",AUTH_NO_PASSWORD:"2008",AUTH_NO_SECURE_COOKIE:"2011",NO_SUCH_MESSAGE:"5000"},i.LAYOUTS=["2pane","3pane-horizontal","3pane-vertical"],i.XIVA_CLIENT_ID="daria",function(t,r){var o='<div class="js-section-items"></div>',a=i.Common.keyCode,s=function(e){this._onKeyInputBinded=this._onKeyInput.bind(this),this._onFocusBinded=this._onFocus.bind(this),this._onFocusOutBinded=this._onFocusOut.bind(this),this._onClickBinded=this._onClick.bind(this),this.options=t.extend({},s.defaults,e),this.sections=this.options.sections||[],this.results=[],this.requests=[],this.$body=null,this.selected=null,this.prevVal="",this.currentValue="",this.selectedIdx=-1,this.firstRender=!0,this.isVisible=!1,this.hasFocus=0,this.lastKeyPressCode=null,this.timeout=null,this.bodyClass="",this.cache={},this._id="autocomplete"+t.now(),t(this.init.bind(this))
};s.utils={trimWords:function(e,t){if(!e)return[""];var n;n=t.lastWord?/\s/:t.multipleSeparator;var r=e.split(n);return r.map(function(e){return e.trim()})},lastWord:function(e,t){if(!t.multiple&&!t.lastWord)return e;var n=this.trimWords(e,t);return _(n).last()},selection:function(e,t,n){e.offsetHeight&&(r.setSelection(e,t,n),e.focus())},highlight:function(e,t){t=r.regexpEscape(t);var n=new RegExp("(?!<[^<>]*)(\\s|>)("+t+")(?![^<>]*>)","i");return e.replace(n,"$1<strong>$2</strong>")}},s.defaults={sections:[],container:n.body,selectFirst:!0,multiple:!1,multipleSeparator:",",excludeSelected:!1,matchCase:!0,minChars:1,delay:100,cacheSize:50,doubleOrient:!1,scroll:!1,blockSubmit:!0,abortRequests:!0,hideOnScroll:!1,topOffset:0,saveSelectionOnBlur:!0,fakeRequestParams:!0},t.extend(s.prototype,{init:function(){this.appendBody(),this.$body&&this.bindResults()
},getCache:function(e){return this.cache[e]},setCache:function(e,t){var n=this.cache;Object.keys(n).length>this.options.cacheSize&&this.flushCache(),n[e]=t},flushCache:function(){this.cache={}},appendBody:function(){this.$body=t(this.options.tpl).appendTo(this.options.container),this.$body&&this.$body.length&&(this.bodyClass=this.$body[0].className)},bindResults:function(){var e=this.options,n=this;this.$body.on("mousedown",e.item,function(r){r.preventDefault(),r.stopPropagation(),t(this).addClass(e.activeClass),n.select(this,r),n.hide()
}).on("mouseenter",e.item,function(){n.$body.find(e.item).removeClass(e.activeClass),t(this).addClass(e.activeClass)}),e.saveSelectionOnBlur||this.$body.on("mouseleave",e.item,function(){t(this).removeClass(e.activeClass)})},_selectIfVisible:function(e,t,n){(this.isVisible||n)&&t.preventDefault(),this.isVisible?this.select(e,t):this.onChange()},select:function(e,n){var i,o,a=this.options,u=this.$body.find(a.item),c=u.length,l="",d=[];if("number"==typeof e)e>c-1?e=0:0>e&&(e=c-1);else if(e=t.inArray(e||u.filter("."+a.activeClass)[0],u),e>-1){if(i=this.results[e],!i)return;
if(l=(a.formatResult||i.section.formatResult||r.nop).call(this,i.data,u[e],n,{dataContext:i}),i.section.onselect&&i.section.onselect.call(this,i.data,e),"string"==typeof l&&a.multiple&&(d=s.utils.trimWords(this.$input.val(),a),d.length>1&&(l=d.slice(0,d.length-1).join(a.multipleSeparator+" ")+a.multipleSeparator+" "+l),l+=a.multipleSeparator+" "),this.prevVal=l,this.abort(),o=this.$input.val(),"string"==typeof l){if(a.lastWord){var f=s.utils.lastWord(o,a),h=o.lastIndexOf(f);l=o.substr(0,h)+l+o.substr(h+f.length)
}this.$input.val(l),s.utils.selection(this.$input[0],l.length,l.length)}var p=!0;i.section.onresult&&(p=!i.section.onresult(i.data,i.$item,n)),a.onresult&&p&&a.onresult.call(this,i.data,n),i.section.isStatic||this.$input.trigger("result",[i.data,i.$item,n,o])}if(this.selected=u[e],this.selectedIdx=e,u.removeClass(a.activeClass),t(this.selected).addClass(a.activeClass),a.scroll&&this.selected){var g=this.$body.find(a.scrollElem)[0],m=g.offsetHeight,v=this.selected.offsetTop+this.selected.offsetHeight;
v-g.scrollTop>m?g.scrollTop=v-m:this.selected.offsetTop<g.scrollTop&&(g.scrollTop=this.selected.scrollTop)}},bindField:function(e){var r=e.field;!r||this.$input&&r==this.$input[0]||(this.$input&&this.destroy(),this.options.hideOnScroll&&t(n).on("scroll."+this._id,this.hide.bind(this)),this.$input=t(r),this.prevVal=this.$input.val(),this.currentValue=e.currentValue,this.hasFocus=e.focus||0,this.$input.on("keydown.autocomplete",this._onKeyInputBinded).on("focusin.autocomplete",this._onFocusBinded).on("focusout.autocomplete",this._onFocusOutBinded).on("click.autocomplete",this._onClickBinded))
},_onKeyInput:function(e){if(this.lastKeyPressCode=e.which,this.options.multiple&&","===t.trim(this.options.multipleSeparator)&&(e.which===a.COMMA_CHAR||e.which===a.SEMI_CHAR||e.which===a.SPACE_CHAR&&1===this.results.length))return this._selectIfVisible(null,e);switch(this.lastKeyPressCode){case a.UP:this._selectIfVisible(this.selectedIdx-1,e);break;case a.DOWN:this._selectIfVisible(this.selectedIdx+1,e);break;case a.PAGEUP:this._selectIfVisible(this.selectedIdx-8,e,!0);break;case a.PAGEDOWN:this._selectIfVisible(this.selectedIdx+8,e,!0);
break;case a.RETURN:this.isVisible&&(this.options.blockSubmit&&e.preventDefault(),this.select(null,e),this.hide());break;case a.TAB:this.isVisible&&(e.preventDefault(),this.select(null,e),this.hide());break;case a.ESC:this.options.dontProcessEscape||(e.preventDefault(),this.hide());break;case a.CTRL:case a.SHIFT:case a.ALT:case a.META:break;default:var n=this;this.keyPressed=!0,clearTimeout(this.timeout),this.timeout=setTimeout(function(){n.onChange(e.type),n.keyPressed=!1},this.options.delay)}},_onFocus:function(){this.hasFocus=1
},_onFocusOut:function(){this.hasFocus=0,setTimeout(this.hide.bind(this),1.5*this.options.delay)},_onClick:function(){var e=_.isNumber(this.options.minClickCount)?this.options.minClickCount:1;this.hasFocus++>=e&&!this.isVisible&&this.onChange()},onChange:function(e){if(this.lastKeyPressCode===a.DEL&&"keypress"!==e)return void this.hide();var t=this.$input.val();""!==t&&t===this.prevVal&&this.isVisible||(this.prevVal=t,t.length>=this.options.minChars&&this.$input.is(":focus")?(this.options.matchCase||(t=t.toLowerCase()),this.fetch(t)):this.hide())
},show:function(){var e=this.$body,t=this.options;"width"in t&&e.css("width",null==t.width?"":t.width),"additionalClass"in t&&e.attr("class",this.bodyClass+" "+(t.additionalClass||"")),this.firstRender&&!this.isVisible&&(this.firstRender=!1,this.setPosition(e,t)),this.$sectionsAnchor.html(this.$sectionsBuffer.children()),this.$sectionsAnchor.add(e).show().removeClass("UNUSED"),this.setPosition(e,t),this.isVisible=!0,t.onrender&&t.onrender(e),t.onshow&&t.onshow.call(this)},hide:function(){this.$body.hide(),this.isVisible=!1,this.selected=null,this.selectedIdx=-1,clearTimeout(this.timeout)
},fetch:function(e){this.options.matchCase||(e=e.toLowerCase());var n=this;if(e&&e in this.cache)return void this.receiveData(e,this.getCache(e));this.abort();var r=this.requests;this.sections.sort(function(r){return t.isFunction(r.beforeRequest)&&!r.beforeRequest(e,n)?1:0}),t.each(this.sections,function(){if("string"==typeof this.url&&this.url.length){if(t.isFunction(this.beforeRequest)&&!this.beforeRequest(e,n))return;var i={},o=this.extraParams||{};t.isFunction(this.contextExtraParams)&&(o=t.extend({},o,this.contextExtraParams())),i[this.param]=_.isFunction(this.getParamFromTerm)?this.getParamFromTerm(e,n.options):s.utils.lastWord(e,n.options);
var a={};t.extend(i,o);var u=this.fakeRequestParams?".0":"";for(var c in i)a[c+u]=i[c];this.fakeRequestParams&&ns.request.addRequestParams(a),r.push(t.ajax({dataType:this.dataType,jsonp:this.jsonp,scriptCharset:this.scriptCharset,cache:!1,url:this.url,data:a}))}else if(!this.url&&this.isStatic){var l=t.Deferred();l.resolve([[{term:e}]]),r.push(l)}}),t.when.apply(this,r).then(function(){if(arguments.length){for(var t=[],i=r.length,o=0,a=arguments.length;a>o&&!(o>=i);o++){var s=n.sections[o],u=(i>1?arguments[o][0]:arguments[o])||[],c=s.parse?s.parse(u,e,n):n.parse(u,s,e);
t.push(c)}n.setCache(e,t),n.receiveData(e,t)}})},abort:function(){if(this.options.abortRequests)for(var e=0,t=this.requests.length;t>e;e++){var n=this.requests[e];4!=n.readyState&&"abort"in n&&n.abort()}this.requests=[]},destroy:function(e){this.abort(),this.timeout&&clearTimeout(this.timeout),this.$input&&(this.$input.off(".autocomplete"),this.$input=null),this.options.hideOnScroll&&t(n).off("scroll."+this._id),e?this.$body.remove():this.hide()},receiveData:function(e,n){var r=this.options;if(n&&n.length&&this.hasFocus){if(r.excludeSelected&&t.isFunction(r.filterItem)){n=[].concat.call(n);
for(var i=0,o=n.length;o>i;i++)n[i]=t.grep(n[i],r.filterItem.bind(this))}this.render(e,n),r.selectFirst&&this.select(0)}else this.hide()},render:function(e,n){var r=!1;this.$sectionsAnchor=this.$body.find(".js-sections"),this.$sectionsBuffer=t("<div>"),this.results=[],this.$body.removeClass("b-mail-suggest_domain");for(var i=0;i<n.length;i++){var a=this.sections[i];if(!a.dontShow){var s,u=n[i],c=!1,l=t(a.tpl||o);s=l.hasClass("js-section-items")?l:l.find(".js-section-items"),a.onfetch&&a.onfetch.call(this,n,!u.length);
for(var d=0;d<u.length;d++){var f=u[d];f.$item&&f.$item.length&&(f.section=a,this.results.push(f),c||-1!==f.data.id||(s.append('<div class="b-mail-suggest__notify">Возможно, вы имели в виду</div>'),this.$body.addClass("b-mail-suggest_domain")),s.append(f.$item),c=!0)}c&&(r=!0,this.$sectionsBuffer.append(l),a.onshow&&a.onshow())}}r?this.show():this.hide()},setPosition:function(r,i){if(r.css({top:"",bottom:"",left:"",right:""}),i.position&&i.position.at&&i.position.my)r.position(i.position),r.css("left","+=1");
else{var o,a=this.$input.offset(),s=this.$input[0].offsetHeight,u=n.body.scrollHeight,c=r.outerHeight();o=i.doubleOrient&&a.top+s+i.topOffset+c+3>=u&&a.top>=c?a.top-i.topOffset-c-2:i.doubleOrientWinHeight&&(i.doubleOrientWinHeightAlwaysOnTop||a.top+s+i.topOffset+this.$input.height()>=t(e).height())?a.top-i.topOffset-c+1:a.top+s+i.topOffset+2;var l=t.extend(i.position||{left:a.left,right:"auto"},{top:o});r.css(l)}},parse:function(e,n,r){for(var i=[],o=0,a=e.length;a>o&&o!==n.max;o++){var s=e[o];if(s){var u=n.formatItem(s,r);
i.push({data:s,$item:u?t(u):null})}}return i},setOptions:function(e){_.extend(this.options,e)}}),r.Autocompleter=s,r.Autocompleter.getRegion=function(){var e;e=-1!=t.inArray(r.Config.locale,["ru","uk","be","tt","tr","en"])?r.Config.locale:"INT"===r.Config.product?"en":"ru";var n=ns.Model.get("languages").get('.languages.lang[.abbr=="'+e+'"].locale_short')[0];return r.Autocompleter.__regionInstance||(r.Autocompleter.__regionInstance=new s({tpl:'<div class="mail-Region-Autocompleter"><div class="mail-Region-Autocompleter_inner"><ul class="mail-Region-Autocompleter-List js-sections"></ul></div></div>',activeClass:"mail-Region-Autocompleter-List-Item_hover",hideOnScroll:!0,doubleOrient:!0,abortRequests:!1,fakeRequestParams:!1,minChars:2,item:".mail-Region-Autocompleter-List-Item",sections:[{url:"//suggest-maps.yandex.ru/suggest-geo",dataType:"jsonp",param:"part",jsonp:"callback",extraParams:{lang:n,n:10,search_type:"weather",v:8},scriptCharset:"utf-8",max:5,tpl:'<div class="js-section-items"></div>',formatItem:function(e){return'<li class="mail-Region-Autocompleter-List-Item">'+e.name+"</li>"
},parse:function(e,n){var r=this,i=e[1],o=_.filter(i,{kind:"weather"}).map(function(e){var i=r.formatItem(e,n);return{data:e,$item:i?t(i):null}});return r.max?_.take(o,r.max):o},onresult:function(e){r.Autocompleter.__regionInstance.$input.val(e.name),ns.Model.get("settings").setSettings({geoid:e.geoid}),ns.Model.get("theme-weather").getWeather()}}]})),r.Autocompleter.__regionInstance}}(jQuery,o),i.FormValidation={reEmail:/[^@]+@[^\.]+(\.[^\.]+)*\.[^\.]{2,}/i,splitContacts:function(e){if(!e)return[];
e=e.replace(/[\s,;]*$/,",");for(var t,n=[],i=!1,o=0,a=0,s=e.length;s>a;a+=1)switch(e.charAt(a)){case",":case";":i||(t=e.substring(o,a),t=r.trim(t),t&&(t=this.contact2obj(t),n.push(t)),o=a+1);break;case'"':"\\"!==e.charAt(a-1)&&'"'!==e.charAt(a+1)&&(i=!i)}if(!n.length){var u=e.match(/<(.*?)>/);u&&n.push({email:u[1],name:u[1]})}return n},getEmailFromString:function(e){var t=e.match(/[-\u0430-\u044f\u0451a-z0-9._]+@[-\u0430-\u044f\u0451a-z0-9._]+/i);return t?t[0]:""},contact2obj:function(e){var t=/^"(.*)"\s*<([^>]+)>$/,n=/^(.*)<([^>]+)>$/,i=e.match(t)||e.match(n);
return i?{name:r.trim(i[1].replace(/\\"/g,'"').replace(/\\\\/g,"\\")),email:r.trim(i[2])}:{email:e.replace(/^['"]|['"]$|\s/g,"")||e}},obj2contact:function(e){var t;return e.email&&(t=e.email,e.name&&(t='"'+e.name.replace(/\\/g,"\\\\").replace(/"/g,'\\"')+'" <'+t+">")),t},checkEmail:function(e){return e.indexOf("@")<0||e.indexOf(".")<0?!1:this.reEmail.test(e)},checkContacts:function(e){var t=this.splitContacts(e),n=t.length;if(!n)return!1;for(var r=0;n>r;r+=1)if(!this.checkEmail(t[r].email))return!1;
return!0},checkPhoneNumber:function(e){var t=e.replace(/^\+\s?(\d)/,"$1").replace(/\s|\D/g,"");return 11===t.length||12===t.length},checkExternalEmail:function(e){if(!o.IS_CORP)return!1;var t=(e||"").match(/@([^.]+)/);return t?!o.email.isCorp(e)&&!o.email.isSupport(e):!1},isUrl:function(e,t){return"string"!=typeof e?!1:(t=_.isPlainObject(t)?t:{},o.urlRegex(_.extend({exact:!0},t)).test(_.trim(e)))}},function(e){function t(e){var t,n,r,i=[],o=[];for(t=e[0]||"",i.push(t),r=1;r<e.length;++r)n=e[r],(n!==a.INLINE||t!==a.INLINE&&t!==a.BLOCK)&&(n===a.BLOCK&&t===a.INLINE?(i[i.length-1]=a.BLOCK,t=a.BLOCK):(i.push(n),t=n));
for(t=i[0]||"",o.push(t),r=1;r<i.length;++r)n=i[r],(n!==a.BLOCK||t!==a.BLOCK)&&(t=n,o.push(n));for(r=0;r<o.length;++r)o[r]===a.BLOCK?o[r]="\n":o[r]===a.INLINE&&(o[r]=" ");return o.join("")}function r(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];_.isArray(n)?Array.prototype.push.apply(e,n):e.push(n)}}var i=">",a={BLOCK:1,INLINE:2},s={ELEMENT_NODE:1,TEXT_NODE:3},u={html2text:function(e){if(!e)return"";var r=n.implementation.createHTMLDocument("").body;r.innerHTML=e,this._isTextInserted=!1;
var i=[];this._convertChildNodes(r,i);var o=t(i);return o.replace(/^[\u0020\u00a0]+$/gm,"").replace(/^\n/,"").replace(/\n$/,"")},text2html:function(e,t){t=t||"div";var n="<"+t+">",r="</"+t+">",i=_.escape(e).replace(/^--[\u0020\u00a0]$/gm,"--&nbsp;");return i=n+i+r,i=i.replace(/\n/g,r+n)},quoteText:function(e){return e=this.normalize(e),e.replace(/^.?/gm,function(e){return e===i?i+e:e?i+" "+e:i})},quoteHtml:function(e){return'<blockquote type="cite">'+e+"</blockquote>"},normalize:function(e){return e=e.replace(/\u0020+/g," ").replace(/^\u0020+|[\u0020\u00a0]+$/gm,"").replace(/\n{3,}/g,"\n\n").replace(/^[\u0020\n\r\t]+|[\u0020\u00a0\n\r\t]+$/g,"")
},_convertChildNodes:function(e,t){for(var n=0;n<e.childNodes.length;++n)this._convertNode(e.childNodes[n],t)},_isBufferContainText:function(e){for(var t=0;t<e.length;t++)if(e[t].length)return!0;return!1},_convertNode:function(n,i){var o;if(n.nodeType===s.ELEMENT_NODE){var u=e(n);if(u.is("BLOCKQUOTE")||u.hasClass("b-quote"))return r(i,a.BLOCK),o=[],this._convertChildNodes(n,o),void r(i,a.BLOCK,this.quoteText(t(o)),a.BLOCK);if(u.hasClass("b-quote__show"))return;if(u.hasClass("normalize"))return o=[],this._convertChildNodes(n,o),void r(i,this.normalize(t(o)),a.BLOCK);
var c=n.tagName.toLowerCase();switch(c){case"h1":case"h2":case"h3":case"h4":case"h5":case"h6":case"pre":case"p":case"ol":case"ul":case"dl":case"table":return this._isTextInserted||this._isBufferContainText(i)?r(i,a.BLOCK,"",a.BLOCK):(r(i,a.BLOCK),this._isTextInserted=!0),this._convertChildNodes(n,i),void r(i,a.BLOCK);case"div":case"address":case"fieldset":case"form":case"dt":case"dd":case"tr":return r(i,a.BLOCK),this._convertChildNodes(n,i),void r(i,a.BLOCK);case"br":return void r(i,"",a.BLOCK);case"hr":return void r(i,a.BLOCK,"----------------------------------------",a.BLOCK);
case"li":return r(i,a.BLOCK,"* "),this._convertChildNodes(n,i),void r(i,a.BLOCK);case"td":case"th":return r(i,a.INLINE),this._convertChildNodes(n,i),void r(i,a.INLINE);default:return void this._convertChildNodes(n,i)}}else n.nodeType===s.TEXT_NODE&&r(i,n.data.replace(/[\u0020\n\r\t]+/g," "))},flatDOMHtml:function(e){var t=n.createElement("div");return t.innerHTML=e,o.Html2Text.flatDOM(t).innerHTML.replace(/^\s+|\s+$/gm,"")},flatDOM:function(e){"normalize"in e&&e.normalize();var t,r=n.createElement("div"),i=[],o=function(e,t,n){for(var i=0;i<n.length;i++)n[i].specified&&t.setAttribute(n[i].nodeName,n[i].value);
return e&&e.nextSibling?e.parentNode.insertBefore(t,e.nextSibling):e?e.parentNode.appendChild(t):r.appendChild(t)};i.push([e,r.appendChild(n.createTextNode("")),[]]);for(var a=1e3;(t=i.pop())&&a;){for(var s=null,u=0,c=t[0].childNodes.length;c>u;u++){var l=t[0].childNodes[u],d=l.tagName&&l.tagName.toLowerCase();1!==l.nodeType||"div"!==d&&"p"!==d?(s||(s=n.createElement("div")),s.appendChild(l.cloneNode(!0))):(s&&(t[1]=o(t[1],s,t[2],t[3])),i.push([l,t[1],l.attributes,l.style.cssText]),s=null)}s&&(o(t[1],s,t[2],t[3]),s=null),a--
}return a?r:e}};o.Html2Text=u}(jQuery),function(t,r,i){function o(){try{navigator.registerProtocolHandler("mailto",location.protocol+"//"+location.host+"/compose?mailto=%s","Яндекс.Почта"),i.c("registerProtocolHandler",location.protocol)}catch(e){i.ErrorLog.sendException("registerProtocolHandler",e)}}var a=r.Config;a["color-scheme"]=r.themeId,Modernizr["input-multiple"]&&(a["input-multiple"]=!0),r.IS_CORP&&(a["is-corp"]=!0),a["timeline-yandex-host"]="//calendar."+(a["is-corp"]?"yandex-team.ru":"yandex.ru"),a["timeline-yandex-host-event"]=a["timeline-yandex-host"]+"/event",a["timeline-yandex-host-week"]=a["timeline-yandex-host"]+"/week",a["is-timeline"]=Boolean("RUS"===a.product),i.Config.MAY_HAVE_NEWS=Boolean(!i.Config.NO_SETTINGS&&r.is2pane()&&"INT"!==r.Config.product&&"TUR"!==r.Config.product&&"kitekat"!==r.themeId&&-1!==["ru","uk","tr"].indexOf(r.Config.locale)),i.Config.MAY_HAVE_ADV=Boolean(!i.Config.NO_SETTINGS&&!r.IS_CORP&&!r.Config.workspace&&"INT"!=r.Config.product&&"kitekat"!=r.themeId),i.Config.MAY_HAVE_SMS_COPY=!Boolean(i.Config.pddDomain)&&"TUR"!==r.Config.product&&!r.IS_CORP&&!r.Config.workspace,i.yaContextCodeLoaded=new vow.Deferred,ns.events.on("pageinit",function(){!i.HAS_AD||e.yandexContextAsyncCallbacks||r.yabs||!function(e,t,n,o,a){e[n]=e[n]||[],e[n].push(function(){r.yabs=new i.Yabs("js-main-rtb"),r.yabs?(i.yaContextCodeLoaded.resolve(),ns.events.trigger("yabs:loaded")):i.yaContextCodeLoaded.reject()
}),a=t.getElementsByTagName("script")[0],o=t.createElement("script"),o.type="text/javascript",o.src="//an.yandex.ru/system/context.js",o.async=!0,o.setAttribute("nonce",r.nonce),a.parentNode.insertBefore(o,a);var s=!1;i.yaContextCodeLoaded.promise().then(function(){s=!0}),setTimeout(function(){s||(i.ADBLOCK=!0,i.ErrorLog.send({type:"adblock"}))},1e4)}(e,n,"yandexContextAsyncCallbacks")}),r.IS_CORP||r.hasYaBar||i.Config.NO_SETTINGS||!navigator.registerProtocolHandler||ns.events.on("pageinit",function(){var t=Modernizr.mozilla&&"mozilla"||Modernizr.opera&&"opera"||Modernizr.webkit&&"webkit",n=ns.Model.get("settings");
return t?"webkit"===t?(o(),void n.recordAttemptToRegisterMAILTOProtocolHandler(t,!0)):r.LS&&r.LS.getItem("rph")?void n.recordAttemptToRegisterMAILTOProtocolHandler(t,!0):void(n.recordAttemptToRegisterMAILTOProtocolHandler(t,!0)&&e.setTimeout(o,3e3)):void 0}),r.IS_CORP||ns.events.on("pageinit",function(){e.setTimeout(function(){t('<iframe id="jane-awaps-speed-test" src="//awaps.yandex.ru/0/9947/001001.htm" style="position:absolute;top:-9999px;left:-9999px"/>').appendTo("body"),e.setTimeout(function(){t("#jane-awaps-speed-test").remove()
},18e4)},2e4)}),ns.events.on("pageinit",_.debounce(function(){i.Config.NO_SETTINGS||r.loadPromoModule(function(){r.WelcomeWizard.shouldShow()?i.Services.runModules(["jane.setup.js"],function(){r.WelcomeWizard.show(),ns.events.on("daria:WelcomeWizard:closed",function(){i.Promo.run(!0)})}):i.Promo.run(!0),ns.events.trigger("modules:promo:loaded")})},1)),ns.events.on("pageinit",function(){var e=new Date,t=ns.Model.get("account-information").getData(),n=(e.getTime()-r.now())/6e4,o=e.getTimezoneOffset()-t.tz_offset;
(Math.abs(n)>10||0!==Math.abs(o))&&i.ErrorLog.send({name:"wrongUserTimeAndTimezone",userTime:e.toString(),difference:Math.round(n),passportTZ:t.timezone,diffTZ:o,regionId:t.region_id})}),ns.events.on("pageinit",function(){var e="yabrowser-mail-notif",t="1",n=navigator.userAgent.match(/YaBrowser\/([.\d]+)/);if(n&&n[1]){var i=parseFloat(n[1].split(".").slice(0,2).join(".")),o=r.getCookie(e)!==t;i>=1.7&&o&&r.setCookie(e,t)}}),ns.events.on("pageinit",function(){i.Config.NO_SETTINGS&&i.c("tech","настройки лежали")
}),ns.events.on("pageinit",function(){_.isArray(r.Config["exp-test-ids"])&&r.Config["exp-test-ids"].forEach(function(e){i.c("stat","eexp",e)}),i.c("stat","puid",r.uid)}),ns.events.on("pageinit",function(){r.Config.pddMetrikaMark&&i.c("user",r.Config.pddMetrikaMark)}),r.UI=r.UI||{},r.UI.IEvent=function(e){function n(n){return i[n]||(s[n]=e[n]||"unique",i[n]=t.Callbacks(s[n])),i[n]}function r(e){if(a[e]){for(var t=0,r=a[e].length;r>t;t++)n(e).add(a[e][t]);delete a[e]}}e=e||{};var i={},o={},a={},s={};
return{_events:{lock:function(e){o[e]=!0,a[e]=[]},unlock:function(e){delete o[e]},empty:function(e){e?(n(e).empty(),delete a[e]):(i={},a={})}},on:function(e,r){if(o[e]){var i=t.inArray(r,a[e]);-1===i&&a[e].push(r)}else n(e).add(r);return this},off:function(e,r){if(o[e]){var i=t.inArray(r,a[e]);-1!==i&&a[e].splice(i,1)}return n(e).remove(r),this},trigger:function(e,t){if(!o[e]){var i=s[e]&&-1!==s[e].indexOf("memory");i||r(e),n(e).fireWith(this,t),i&&r(e)}return this}}},function(){e.Daria||(e.Daria={});
var t=e.Daria,r=function(){this.timers={}};r.prototype.start=function(e){this.timers[e]=(new Date).getTime()},r.prototype.end=function(e){if(this.timers[e]){var t=" "+e+": "+((new Date).getTime()-this.timers[e])+"ms",r=new RegExp("\\s"+e+": \\d+ms"),i=n.title;r.test(i)?i=i.replace(r,t):i+=t,n.title=i}delete this.timers[e]},t.Timer=new r}(),function(e){var n=t(".b-stamp"),i={locked:!1,status:n.hasClass("b-stamp_loading"),start:function(){i.status=!0,n.addClass("b-stamp_loading")},stop:function(){i.status=!1,i.locked||n.removeClass("b-stamp_loading")
}},o={start:r.nop,stop:r.nop};e.Loader=function(t,n){return t instanceof e.Loader?t:void("object"==typeof t?(this.loader=null===t?o:t,this.timeout="number"==typeof n?n:t&&"number"==typeof t.timeout?t.timeout:this.defaultTimeout):(this.loader=i,this.timeout=void 0===t||t===!1||t===!0?this.defaultTimeout:t))},e.Loader.prototype.defaultTimeout=500,e.Loader.prototype.start=function(){this.timer&&(clearTimeout(this.timer),this.timer=null),this.timeout>0?this.timer=setTimeout(this.loader.start,this.timeout):this.loader.start()
},e.Loader.prototype.stop=function(){this.timer&&(clearTimeout(this.timer),this.timer=null),this.loader.stop()},e.Loader.lock=function(t){i.locked=!0,setTimeout(e.Loader.unlock,t)},e.Loader.unlock=function(){i.locked=!1,i.status||i.stop()},e.Loader.createToolbarLoader=function(n){var r=t('<div class="b-toolbar__spinner"/>'),i=t(".b-toolbar_fixed .js-toolbar-item-"+n.action);if(i){var o=function(e){var n=t(".b-toolbar"),o=n.filter(".b-toolbar_fixed");n.removeClass("b-toolbar_in-action"),o.toggleClass("b-toolbar_in-action",e),i.toggleClass("b-toolbar__item_active",e),e?i.find(".b-toolbar__item__label").after(r):i.find(".b-toolbar__spinner").remove()
};return new e.Loader({start:o.bind(null,!0),stop:o.bind(null,!1)},0)}},e.Loader.getActualLoader=function(t,n){var r=e.Loader.createToolbarLoader(t);return r?r:new e.Loader(n)},e.loader=new e.Loader}(i),ns.action.define("dialog.cancel",function(e,t,n,r){ns.events.trigger("dialog.cancel",t,n,r)}),ns.action.define("dialog.action",function(e,n,r,i){var o=t(r).data("dialogAction");ns.events.trigger(o,n,r,i)}),r.Dialog={_isInit:!1,_isOpen:!1,_classHidden:null,_timeoutPosition:null,init:function(){this.webkitWrapper=t("<div></div>").appendTo(n.body),this.$paranja=t('<div class="b-paranja b-paranja_mail"><iframe></iframe></div>').addClass("g-hidden").appendTo(this.webkitWrapper);
var e=i.tt("common:dialog",{});this.$dialog=t(e),this._classHidden?this.$dialog.addClass(this._classHidden):this.$dialog.hide(),this.$dialog.appendTo(this.webkitWrapper),this.$title=this.$dialog.find(".b-popup__header"),this.$body=this.$dialog.find(".b-popup__body"),this.$buttons=this.$dialog.find(".b-popup__confirm"),this._isInit=!0,this._closeBinded=this.close.bind(this),this.bindHandlers()},bindHandlers:function(){ns.events.on("dialog.close",this._closeBinded),ns.events.on("ns-page-before-changed",this._closeBinded),t(e).scroll(this.handleScroll.bind(this))
},toggleClosingOnPageChange:function(e){e!==this._closingOnPageGo&&(ns.events[e?"on":"off"]("ns-page-before-changed",this._closeBinded),this._closingOnPageGo=e)},enableEasyClose:function(){var e=this;t("body").on("click.dialog",function(n){t(n.target).is(".b-popup__box, .b-popup__box *")||e.close()}),this.$paranja.addClass("g-hidden")},isOpen:function(){return this._isOpen},open:function(e){var r=this;if(this._isInit||this.init(),this._isOpen?this.close():ns.events.trigger("dialog.close"),!e.body)throw new Error('Daria.Dialog.open: required parameter "params.body" is missing or undefined.');
t(n).trigger("b-mail-dropdown-closeall"),this._isOpen=!0,this.params=e||{},this.params.width=this.params.width||320,this.params.nbInit=this.params.nbInit!==!1,e.title?this.$title.html(e.title).show():this.$title.hide(),this._additionalClass&&(t.each(this._additionalClass,function(e,t){r.$dialog.removeClass(t)}),this._additionalClass=null),e.additionalClass&&(t.isArray(e.additionalClass)||(e.additionalClass=[e.additionalClass]),this._additionalClass=e.additionalClass,t.each(this._additionalClass,function(e,t){r.$dialog.addClass(t)
})),this.toggleClosingOnPageChange(!e.dontCloseOnPageGo),(e.onTarget&&e.easyclose!==!1||e.easyclose)&&this.enableEasyClose(),this.updateBody(this.params),this._makeActions(),this._makeButtons(),this.$dialog.removeAttr("style"),this.$body.removeAttr("style"),this.position(),this.params.onTarget||e.easyclose||this.$paranja.removeClass("g-hidden"),this._classHidden?this.$dialog.removeClass(this._classHidden):this.$dialog.show();var i=this.$dialog.find(".b-popup__focus-me");i.length||(i=this.$buttons.find(".nb-button")),i[0]&&i[0].focus(),this.params.noShortcuts||t.Shortcuts.modalListOn("dialog");
var o=this.$dialog.find(".b-popup__close");o.removeData("crossClose"),this.params.hideCrossClose&&o.is(":visible")&&(o.addClass("g-hidden"),o.data("crossClose",!0)),t.isFunction(e.onopen)&&e.onopen(this),ns.events.trigger("dialog.open");var a=e.onInit||t.noop;return a.call(this),this},updateBody:function(e){this.replaceBody(e.body)},replaceBody:function(e){this.params.nbInit&&nb.destroy(this.$body),this.$body.html(e),this.params.nbInit&&nb.init(this.$body)},_makeButtons:function(){var e,n=this.params.buttons||[],r=n.length;
if(0===r)return void this.$buttons.hide();for(var o=0;r>o;o+=1){var a,s,u=n[o],c="";u.action?(e=t(i.tt("common:dialog-buttons",{button:u})),t.isFunction(u.onclick)&&ns.events.on(u.action,u.onclick)):(t.isFunction(u.onclick)?(a=u.value||"Продолжить",s="dialog."+u.name,ns.events.on(s,u.onclick)):(a=u.value||"Отменить",s="dialog.cancel"),u.focus&&(c=" b-popup__focus-me"),e=t(i.tt("common:dialog-buttons",{button:u,title:a,action:s,focusClass:c}))),e.appendTo(this.$buttons)}this.$buttons.show()},getButton:function(e){return this.$buttons.find('.nb-button[data-dialog-action="dialog.'+e+'"]')
},toggleButton:function(e,t){this.getButton(e).toggleClass("g-hidden",!t)},setButtonText:function(e,t){this.getButton(e).each(function(){var e=nb.block(this);e&&e.setContent(t)})},disableButton:function(e){i.disableButton(this.getButton(e))},enableButton:function(e){i.enableButton(this.getButton(e))},close:function(e,i,o){if("ns-page-before-changed"!==e||!o&&!i||!/#compose\/+/.test(i)&&!/#compose\/+/.test(o)){if(!this._isOpen)return this;if(t.isFunction(this.params.onclose)){var a=Array.prototype.slice.call(arguments);
a.unshift(this),this.params.onclose.apply(void 0,a)}var s=this.$dialog.find(".b-popup__close");return s.data("crossClose")&&(s.removeClass("g-hidden"),s.removeData("crossClose")),this.$dialog.find(".nb-select").each(function(){var e=nb.block(this);e&&e.close()}),this._classHidden?this.$dialog.addClass(this._classHidden):this.$dialog.hide(),this.params.onTarget||this.$paranja.addClass("g-hidden"),t("body").off("click.dialog"),t(n).trigger("b-mail-dropdown-closeall"),r.removeDropdowns(this.$body[0]),this.$title.empty(),this.hideBody(),this.$buttons.empty(),this._deleteActions(),t.Shortcuts.modalListOff(ns.page.current.page),this._isOpen=!1,ns.events.trigger("dialog.close"),this
}},hideBody:function(){this.params.nbInit&&nb.destroy(this.$body),this.$body.empty()},cancel:function(){this.params&&t.isFunction(this.params.oncancel)&&this.params.oncancel(this),this.close()},_makeActions:function(){ns.events.on("dialog.cancel",this.cancel.bind(this))},_deleteActions:function(){(this.params.buttons||[]).forEach(function(e){t.isFunction(e.onclick)&&ns.events.off("dialog."+e.name)}),ns.events.off("dialog.cancel")},position:function(n){if(this._isOpen){this.$dialog.find(".nb-select").each(function(){var e=nb.block(this);
e&&e.close()});var r,i,o,a=t(e),s=a.height(),u=a.scrollTop();if(this.params.onTarget&&/^(top|right|bottom|left)$/.test(this.params.onTarget.side)){var c=t.extend({},this.params.onTarget);if(c.pos=c.pos||("left"===c.side?"bottom":"left"),c.target){var l=t(c.target),d=l.offset(),f=l.width(),h=l.height();c.x=d.left+(c.hasOwnProperty("x")?c.x:0),"top"==c.side||"bottom"==c.side?c.x+=f/2:"left"==c.side&&(c.x+=f),c.y=d.top+(c.hasOwnProperty("y")?c.y:0),"left"==c.side||"right"==c.side?c.y+=h/2:"top"==c.side&&(c.y+=h)
}this.$paranja.removeClass("b-paranja_mail b-paranja_fade").addClass("b-paranja_transparent"),this.$dialog.addClass("b-popup_contextual"),this.$dialog.css({width:this.params.width}),this.$dialog.find(".b-popup__tail").length?c.needTail===!1&&this.$dialog.find(".b-popup__tail").remove():c.needTail!==!1&&t('<div class="b-popup__tail"><div class="b-popup__tail__i"></div>').appendTo(this.$dialog);var p=this.$dialog.find(".b-popup__tail");p.css({top:"",left:""}),p.removeClass().addClass("b-popup__tail b-popup__tail_"+c.side);
var g=0,m=0;r=this.$dialog.height(),i=this.$dialog.width(),("top"==c.side||"bottom"==c.side)&&(g="left"==c.pos?20:"right"==c.pos?i-30:i/2-10,c.x-=g+12),"left"==c.side&&(g=-10,c.x+=10),"right"==c.side&&(g=i+10,c.x-=g-2),("left"==c.side||"right"==c.side)&&(m="top"==c.pos?20:"bottom"==c.pos?r-30:r/2-10,c.y-=m+10),"top"==c.side&&(m=-10,c.y+=8),"bottom"==c.side&&(m=r,c.y-=m+8),this.$dialog.css({left:c.x+"px",top:c.y+"px"}),p.css({left:g+"px",top:m+"px"}),o=c.y}else{this.$dialog.removeClass("b-popup_contextual"),this.$dialog.find(".b-popup__tail").remove();
var v=this.params.paranjaFade?"b-paranja_fade":"b-paranja_mail";this.$paranja.addClass(v).removeClass("b-paranja_transparent"),this.params.noPosition||(this.$dialog.css({width:this.params.width,"margin-right":-Math.round(this.params.width/2)}),this.params.isMaxHeight&&this.$body.css({position:"relative","max-height":s-80,overflow:"auto"})),r=this.$dialog.height(),o=s>r?(s-r)/2:0}if(!(this.params.noPosition||this.params.onTarget&&this.params.onTarget.target)){var _=this.params.notFixed?0:u;n?this.$dialog.animate({top:_+Math.round(o)},{queue:!1}):this.$dialog.css({top:_+Math.round(o)})
}}},confirm:function(e){var n=this,r=[{name:"submit",value:e.okValue,onclick:function(){n.close("submit"),t.isFunction(e.okHandler)&&e.okHandler()}},{name:"cancel",value:e.cancelValue}];t.extend(e||{},{buttons:r}),this.open(e)},notice:function(e){var n=[{name:"submit",value:"Закрыть"}];t.extend(e||{},{buttons:n}),this.open(e)},handleScroll:function(){this._timeoutPosition&&(e.clearTimeout(this._timeoutPosition),this._timeoutPosition=null),t(n).trigger("b-mail-dropdown-closeall-onscroll"),this.isOpen()&&(this.params.hideOnScroll?this.close():this.params.onTarget||(this._timeoutPosition=e.setTimeout(function(){this.position(!0)
}.bind(this),200)))}},function(){var o,a,s,u,c,l,d,f,h,p=t(n),g=t(e),m=function(e){if(!e||!t.isFunction(e.find))throw new Error("Error(Daria.Dropdown): Node is not jQuery object");return e.find(".b-mail-dropdown__handle, .js-dropdown-handle")},v=function(e){return e.hasClass("b-mail-dropdown_disabled")},_=function(e){return m(e).hasClass("b-mail-dropdown__handle_open")},y=function(){ns.events.trigger("daria:dropdown:close","current"),l&&k(l)},b=function(e){27!=e.keyCode||e.metaKey||e.ctrlKey||e.altKey||e.shiftKey||C()
},w=function(e,n){var r=t(e.target),i=n&&n.selectors;(!r.is(".b-mail-dropdown__box *")&&!r.is(i)||r.is(".b-mail-dropdown__close"))&&C(),r=null},C=function(){ns.events.trigger("daria:dropdown:close","all");var e=!!l;clearTimeout(h),I(),y(),e&&ns.events.trigger("dropdowns-closed")},D=function(){l&&!l.hasClass("js-not-hide-onscroll")&&C()},x=function(){o||(o=t('<div class="b-mail-dropdown__box"></div>'),a=t('<div class="b-popup__tail b-popup__tail_top"><div class="b-popup__tail__i"></div></div>').appendTo(o),u=t('<div class="b-popup__tail b-popup__tail_right"><div class="b-popup__tail__i"></div></div>').appendTo(o),s=t('<div class="b-popup__tail b-popup__tail_bottom"><div class="b-popup__tail__i"></div></div>').appendTo(o),c=t('<div class="b-popup__tail b-popup__tail_left"><div class="b-popup__tail__i"></div></div>').appendTo(o),o.appendTo(n.body))
},T=function(n,r,i){i=i||{},r=r||{},r.horiz=r.horiz||"down",o.width("auto");var d;l&&(d=t(l.data("dropdown-content")).find(".b-mail-dropdown__box__wrapper"),d.css({height:"auto","max-height":"none"}));var f,h=n.offset(),p=n.innerWidth(),m=n.innerHeight(),v=o.innerWidth(),_=o.innerHeight(),y=g.width();switch(r.horiz){case"up":f=h.top-_;break;case"center":f=h.top-(_-m)/2;break;case"top":f=h.top;break;case"bottom":f=h.top+m-_;break;default:f=h.top+m+10}Modernizr.opera&&n.closest(".b-toolbar").hasClass("b-toolbar_fixed")&&(f-=40);
var b;switch(r.vert){case"inright":b=h.left+p+20;break;case"inleft":b=h.left-v-20,r.maxright&&b+v>r.maxright&&(b=r.maxright-v);break;case"left":b=h.left;break;default:b=h.left-(v-p)/2}if(b+v+7>y){var w=i.noRightIndent?0:7;b=y-v-w}if(i.alignToolbar){var C=t(".b-service-tabs"),D=C.offset().top+C.innerHeight();f=h.top+m+10<D?D:f}if(d&&0>f&&(d.height(Math.round(d.height())+f-10),f=10),o.css({top:Math.round(f),left:Math.round(b)}),o.width(o.width()),d){var x=t(e).height()-o.rect().top-70;d.css("max-height",x).scrollTop(0)
}if(d&&"up"===r.horiz&&d.height(d.height()),"hide-tail"in r)a.hide(),s.hide(),u.hide(),c.hide();else{var T;switch(r.tailvert){case"left":T=0;break;case"boxcenter":T=v/2-11;break;default:T=h.left-b+p/2-12}"up"==r.horiz?(s.css({left:Math.round(T)}).show(),a.hide(),u.hide(),c.hide()):(a.css({left:Math.round(T)}).show(),s.hide(),u.hide(),c.hide()),"inleft"==r.vert&&(a.hide(),s.hide(),c.hide(),"bottom"==r.tailhotiz?u.css({bottom:21,top:"auto"}).show():"top"==r.tailhoriz?u.css({top:11,bottom:"auto"}).show():u.css({top:_/2-11,bottom:"auto"}).show()),"inright"===r.vert&&(a.hide(),s.hide(),u.hide(),"bottom"==r.tailhotiz?c.css({bottom:21,top:"auto"}).show():"top"==r.tailhoriz?c.css({top:11,bottom:"auto"}).show():c.css({top:_/2-11,bottom:"auto"}).show())
}},A=function(e,n){x(),C();var i,a=!n.content&&e.data("dropdown-content"),s=r.parseQuery(e.attr("data-params"));if(a?i=t(a):(i=n.content?n.content.appendTo(o):e.find(".b-mail-dropdown__box__content").appendTo(o),e.data("dropdown-content",i[0]),i.data("dropdown-handle",e[0])),i.length){i.add(o).show();var u=n.handle||m(e),c=e.hasClass("b-mail-dropdown_up"),d=t.extend({horiz:c?"up":"down"},s);l=e,T(u,d,n),i.removeClass("UNUSED"),u.addClass("b-mail-dropdown__handle_open"),p.on("keydown.dropdown",b).on("click.dropdown",function(e){w(e,n)
}).on("b-mail-dropdown-closeall",C).on("b-mail-dropdown-closeall-onscroll",D),e.trigger("b-mail-dropdown-open"),T(u,d,n),i.find("input:first").focus()}},k=function(e){var n=m(e);n.removeClass("b-mail-dropdown__handle_open");var r=e.data("dropdown-content");t(r).find(".nb-select").each(function(){var e=nb.block(this);e&&e.close()}),t(r).hide(),o.hide(),Modernizr.msie>8&&t("html").removeClass("UNUSED"),ns.events.trigger("b-mail-dropdown-closed",e),p.off("keydown.dropdown click.dropdown").off("b-mail-dropdown-closeall",C),l=null,e.trigger("b-mail-dropdown-close")
},S=function(e,n){n=n||{};var r=n.dropdown||t(e).closest(".b-mail-dropdown");return l&&l[0]===r[0]&&_(r)?void k(r):v(r)?void ns.events.trigger("daria:dropdown:disabled",r):void A(r,n)},E=function(){clearTimeout(h)},M=function(){F()},N=function(e,t,n){n=n||{},clearTimeout(h),d&&d[0]===e||(h=setTimeout(function(){O(e,t,n.location),n.counter&&i.c(n.counter.cid,n.counter.path),n.callback&&n.callback()},n.timeout||500))},O=function(e,n,r){x(),C();var i=t(e),a=t(n).appendTo(o).show(),s={vert:"left",tailvert:"boxcenter"};
T(i,r||s),o.on("mouseenter",E).on("mouseleave",M).show(),p.on("keydown.dropdown",b).on("click.dropdown",w).on("b-mail-dropdown-closeall",C),d=i,f=a},F=function(){clearTimeout(h),h=setTimeout(function(){I()},500)},I=function(){d&&(o.hide().off("mouseenter",E).off("mouseleave",M),p.off("keydown.dropdown click.dropdown").off("b-mail-dropdown-closeall",C),f.remove(),d=null,f=null)},R=function(){return l},P=function(){return o};r.Dropdown={toggle:S,showHover:N,hideHover:F,closeCurrent:y,closeAll:C,getCurrent:R,getBox:P,getHandleNode:m},ns.events.on("ns-page-before-changed",C),t(e).on("resize",function(){t(n).trigger("b-mail-dropdown-closeall")
})}(),function(t,i){function o(n){p.is_draggable&&(n&&n.preventDefault(),m.on("mousemove",v).on("mouseover",y).on("mouseup",b).on("focusout",_),Modernizr.msie||t(e).on("blur",b))}var a,s,u=t.contains,c=function(){var e=t(".b-drag-helper:eq(0)");return 0===e.length?(this.$control=t('<div class="b-drag-helper g-hidden"><div class="b-drag-helper__box"><div class="b-drag-helper__box__content"><div class="b-drag-helper__content"><div class="b-drag-helper__item b-drag-helper__item_message"></div></div></div></div></div>'),t("body").append(this.$control)):this.$control=e,this.$control.removeClass("b-drag-helper_few").removeClass("b-drag-helper_many"),this.$message=this.$control.find(".b-drag-helper__item_message").html(""),this
};c.prototype.alignByEvent=function(e,t){t=t||{animate:!1};var n=Math.min(e.pageY+5,a-this.height+e.pageY-e.clientY),r=Math.min(e.pageX+5,s-this.width+e.pageX-e.clientX-2),i={left:r,top:n};t.animate?this.$control.animate(i,function(){this.hide()}.bind(this)):this.$control.css(i)},c.prototype.show=function(){this.$control.removeClass("g-hidden"),this.evaluateDimensions()},c.prototype.evaluateDimensions=function(){this.height=this.$control.height(),this.width=this.$control.width()},c.prototype.hide=function(){this.$control.addClass("g-hidden")
},c.prototype.setText=function(e){this.$message.text(e)};var l=function(){};l.prototype.init=function(){return this.is_active=!1,this.is_draggable=!1,this};var d=function(){};d.prototype={traction:20,init:function(){},getTargetData:function(){return{valid:!1}},testTarget:function(e,t){for(var n,r,i={valid:!1},o=0,a=e.length;a>o;o++)if(n=e[o],r=n.test(t))return i={valid:!0,name:n.name,target:r};return i},onDragStart:function(){},onDrag:function(){},onDragEnd:function(){},onDragEnter:function(){},onDragLeave:function(){},onDragOver:function(){},onDrop:function(){},hilite:function(e){var n=t(e);
n.hasClass("mail-DropArea-Section")||t(e).addClass("g-drop-place_hover")},nohilite:function(e){t(e).removeClass("g-drop-place_hover")},hiliteAll:function(){},nohiliteAll:function(){},getLabelText:function(e){return t(e).attr("data-title")}};var f,h=function(e){for(var n=t(e.target),r=i.DragNDrop._tests,o=0,a=r.length;a>o;o++){var s=r[o],u=s.test(e,n);if(u)return s.result(e,u)}return(new l).init()},p=!1,g=!1,m=t(n),v=function(n){if(!p.is_draggable)return!1;if(g||y(n),n.preventDefault(),p.is_active)p.onDrag(n,g);
else{var r=Math.pow(n.clientX-p.evt.clientX,2),i=Math.pow(n.clientY-p.evt.clientY,2),o=Math.sqrt(r+i);o>=p.traction&&(a=t(e).height(),s=t(e).width(),p.onDragStart(n))}},_=function(e){null===e.toElement&&b.call(this,e)},y=function(e){if(!p.is_active)return!1;var t=p.getTargetData(e.target);t.valid?g?t.target[0]!=g.target[0]&&(p.onDragLeave(e,g),g=t,p.onDragEnter(e,g)):(g=t,p.onDragEnter(e,g)):g&&g.target[0]&&!u(g.target[0],e.target)&&(p.onDragLeave(e,g),g=!1)},b=function(n){p.is_active&&(g?p.onDrop(n,g):p.onDragEnd(n)),m.off("mousemove",v).off("mouseover",y).off("mouseup",b).off("focusout",_),Modernizr.msie||t(e).off("blur",b),p=(new l).init(),g=!1
},w=function(e){1==e.which&&2!=e.buttons&&(p=h(e),o(e))};i.DragNDrop={_tests:[],add:function(e){t.isArray(e)?this._tests=this._tests.concat(e):this._tests.push(e)},EmptyDrag:d,getDragMessageArea:function(){return f||(f=new c),f},startDrag:w,setDragData:function(e){p=e},bindDragEvents:o,_enabled:!1,enable:function(){this._enabled||(m.on("mousedown.daria-dnd",w),ns.Model.get("folders").logDragndropAbility()),this._enabled=!0},disable:function(){m.off("mousedown.daria-dnd"),this._enabled=!1},isEnabled:function(){return this._enabled
}},r.DragNDrop=i.DragNDrop}(jQuery,i),i.share=function(e){function n(e){var t=new Image;t.src=e;var n=t.src;return t.src="",n}var i=t(e.el);if(e.icon)var o=n(e.icon);var a=i.closest(".b-service-tabs__share");a.length&&a.removeClass("g-hidden");var s,u,c;"RUS"===r.Config.product?(s=["odnoklassniki","twitter","vkontakte","facebook"],u=["yaru","moimir","lj","friendfeed","gplus"]):(s=["twitter","facebook"],u=["lj","friendfeed","gplus"]),e.quickServices&&(s=e.quickServices),e.popupBlocks&&(u=e.popupBlocks),c=t.extend({twitter:{}},e.serviceSpecific),e.twitterText&&(c.twitter.title=e.twitterText),e.twitterLink&&(c.twitter.link=e.twitterLink),r.Libs("Ya.share",function(){i.addClass("b-teaser_share"),"big"==e.size&&i.addClass("b-teaser_share_big"),new Ya.share({element:i[0],elementStyle:{type:"link",quickServices:s},l10n:r.Config.locale,title:e.title,description:e.description,link:e.link,image:o,serviceSpecific:c,popupStyle:{blocks:u},onready:function(n){e.onclick&&t(".b-share__handle",n._block).add(t(".b-share-popup__item",n._popup)).click(function(){var n=t(this).data("service");
n&&e.onclick(n)}),e.onready&&e.onready(n)}})})},function(){function e(){}var n;r.nbFormCacher=function(e,t){this.init(e,t)},r.nbFormCacher.prototype={root:null,cache:null,dependenceController:null,changedControls:null,hasChangedControls:0,hasFocusedControls:!1,instanceId:null,dirtyStateClass:"b-setup__inner_show-submit",normalStateClass:"b-setup__inner_no-submit",inputCheckboxClass:"b-form-element__checkbox__input",inputRadioClass:"b-form-element__radio__input",inputTextClass:"b-form-element__input-text",textareaClass:"b-form-element__textarea",resetLinkSelector:".b-setup__inner__reset",init:function(e,t){var n=this;
this.root=e,this.instanceId=t;var r=this.root.find(".daria-form-changeble");r.length&&(this.cache={},this.changedControls=[],r.each(function(){n.addControl(this)}),ns.events.on("cachedvalue.change",function(e,t){t.instance==this.instanceId&&this.onControlChange(t.control)}.bind(this)),this.root.find(this.resetLinkSelector).click(function(e){e.preventDefault(),e.stopPropagation(),this.cancelChanges()}.bind(this)),this.root.find("form").on("onSave",function(){this.applyChanges()}.bind(this)))},addControl:function(t){function n(){e("focus",this),i.hasFocusedControls=i.cache[a].focused=!0,i.changeDisplayMode()
}function r(){e("blur",this),i.hasFocusedControls=i.cache[a].focused=!1,i.changeDisplayMode()}var i=this,o=nb.block(t),a=i.getControlName(o),s=o.getType();i._add(a,o),e(a,o.getType()),("input"===s||"textarea"===s)&&(o.on("nb-focused",n),o.on("focusin",n.bind(o)),o.on("nb-blured",r),o.on("focusout",r.bind(o))),o.on("nb-changed",function(){i.onControlChange(o)})},updateControls:function(){var e=this,t=this.root.find(".daria-form-changeble");t.each(function(t,n){var r=nb.block(n),i=e.getControlName(r);
e.cache[i]||e.addControl(n)})},onControlChange:function(e){var t=this.getControlName(e),n=this.cache[t],r=this.getControlValue(n.control);n.value===r?n.changed&&(n.changed=!1,this.hasChangedControls--):n.changed||(n.changed=!0,this.hasChangedControls++),this.changeDisplayMode()},applyChanges:function(){function e(e){e.blur()}for(var t in this.cache){var n=this.cache[t];n.changed&&(n.value=this.getControlValue(n.control),n.changed=!1,this.hasChangedControls--),n.focused&&n.control.forEach(e)}this.changeDisplayMode()
},cancelChanges:function(){var e=this.cache;for(var t in e){var n=e[t];n.changed&&(this.setControlValue(n.control,n.value),n.changed=!1)}this.changeDisplayMode()},changeDisplayMode:function(){var e=this;if(this.hasChangedControls||this.hasFocusedControls){n&&clearTimeout(n),this.root.removeClass(this.normalStateClass).addClass(this.dirtyStateClass);var t=Object.keys(this.cache).map(function(t){return e.cache[t].changed||null});ns.events.trigger("form-cacher.changed",{instance:this.instanceId,changed:t})
}else n=setTimeout(function(){e.root.addClass(e.normalStateClass).removeClass(e.dirtyStateClass),ns.events.trigger("form-cacher.unchanged",{instance:e.instanceId})},0)},isFormDirty:function(){return!!this.hasChangedControls},getForm:function(){return this._prepareForm(this.root.find("form"))},getControlValue:function(e){e=t.makeArray(e);var n,r=e[0].getType();switch(r){case"checkbox":e.length>1?(n=t.map(t.grep(e,function(e){return e.isChecked()}),function(e){return e.getValue()||""}),n=n.join("|")):n=e[0].isChecked();
break;case"radio":t.each(e,function(e,t){t.isChecked()&&(n=t.getValue())});break;case"select":t.each(e,function(e,t){n=t.getState().value});break;default:t.each(e,function(e,t){n=t.getValue()})}return n},setControlValue:function(e,n){e=t.makeArray(e);var r=e[0].getType(),i=this,o=[];if("radio"===r)t.each(e,function(e,t){t.getValue()==n?(t.isChecked()||o.push(t),t.check()):(t.isChecked()&&o.push(t),t.uncheck())}),t.each(o,function(e,t){t.$node.hasClass("daria-dependence-parent")&&ns.events.trigger("dependence.change",{block:t,instance:i.instanceId})
});else if("checkbox"===r){if(1==e.length){var a=e[0];n?(a.isChecked()||o.push(a),a.check()):(a.isChecked()&&o.push(a),a.uncheck())}else{var s=new RegExp(n);t.each(e,function(e,t){n&&s.test(t.getValue())?(t.isChecked()||o.push(t),t.check()):(t.isChecked()&&o.push(t),t.uncheck())})}t.each(o,function(e,t){t.$node.hasClass("daria-dependence-parent")&&ns.events.trigger("dependence.change",{block:t,instance:i.instanceId})})}else"select"===r?t.each(e,function(e,t){t.setState({value:n})}):t.each(e,function(e,t){t.setValue(n)
})},_add:function(e,t){if(this.cache[e]){var n=this.cache[e];n.control.push(t),"radio"==t.getType()&&n.value||(n.value=this.getControlValue(n.control))}else this.cache[e]={control:[t],value:this.getControlValue(t),changed:!1,focused:!1}},getControlName:function(e){var t=e.getName();return t&&"input"===e.getType()&&(t+="_"+e.id),e.$node.attr("cacher-id")||t},_prepareForm:function(e){var n=["disable_yabbles"],r=t(e);return _.each(n,function(e){var t=r.find("[name="+e+"]");t.is(":checked")?t.attr("checked",!1):t.attr("checked",!0)
}),e}}}(),function(e){var n={inbox:"Входящие",message:"Письмо",sent:"Отправленные",trash:"Удаленные",spam:"Спам",draft:"Черновики",template:"Шаблоны",archive:"Архив",contacts:"Адресная книга"},i={"compose.go":"написать","mailbox.check":"проверить",reply:"ответить","reply-tmpl":"автоответ","reply-all":"ответить всем",forward:"переслать",remove:"удалить","folder-delete":"удалить папку","add-template":"создать шаблон",tospam:"спам",notspam:"не спам",mark:"прочитано",unmark:"не прочитано","folder-mark-as-read":"прочитано для папки","folder-mark-as-unread":"не прочитано для папки",ignore:"игнорировать",unignore:"не игнорировать",archive:"архивировать",sendon:"переадресовать",move:"в папку",infolder:"в папку","folders.move-in-folder":"в папку",label:"метка",template:"автоответ",unsubscribe:"отписаться","toolbar-settings":"настройки тулбара","toolbar-add-button":"добавить кнопку",print:"распечатать",pin:"закрепить",unpin:"открепить",translate:"перевести","filters-create":"создать правило","message-source":"свойства письма","abook.select-all":"Клик Выделить все","abook.compose-go":"Клик Написать","mail-common.person-popup":"Клик Добавить контакт","abook.remove-contacts":"удалить контакт","abook.open-backups-dialog":"Клик Восстановить","abook.groups-dropdown":"Клик Добавить в группу","abook.remove-contacts-from-group":"Клик Удалить из группы","abook.toolbar-more-actions":"Клик Ещё"};
e.ToolbarMetric={},e.ToolbarMetric.tbActive=function(t){if(!/9$/.test(r.uid))return!0;if(!ns.page.currentUrl)return!0;var o=ns.page.currentUrl.match(/^\#([a-z0-9]+)/),a=o&&o[1]||"inbox",s=["Toolbar"];return n[a]?(s.push(n[a]),i[t]?(s.push(i[t]),s.push("активна"),e.c(s),!0):!0):!0},e.ToolbarMetric.tb=function(t){if(!i[t.buttonView.action])return!0;var n=r.Metric.getPath();e.c("Toolbar",n,r.is2pane()?"2pane":"3pane",i[t.buttonView.action],"клик")},e.ToolbarMetric.messageToolbar=function(t){e.c("Toolbar","Письмо",r.is2pane()?"2pane":"3pane",t,"клик")
},e.ToolbarMetric.messageThreadToolbar=function(t){e.c("Toolbar треда",r.Metric.getPath(),r.is2pane()?"2pane":"3pane",t,"клик")},e.ToolbarMetric.abook=function(e){r.vAbook.Metrika.c("Тулбар",e)},e.ToolbarMetric.setMetricsForToolbars=function(t,n,o){t&&i[n]&&("abook-toolbar"===t?e.ToolbarMetric.abook(i[n]):"message-toolbar"===t?e.ToolbarMetric.messageToolbar(i[n]):"toolbar"===t?e.c("Toolbar",r.Metric.getPath(o),r.is2pane()?"2pane":"3pane",i[n],"клик"):"thread-toolbar"===t&&e.ToolbarMetric.messageThreadToolbar(i[n]))
},e.ToolbarMetric.setToolbarMetrics=function(t,n,r,i){n=n||ns.action.getParams(t.currentTarget),n&&n.source&&e.ToolbarMetric.setMetricsForToolbars(n.source,r,i)},e.ToolbarMetric.btnActive=function(t,n){t&&r.uidEnds([9])&&("message-toolbar"===t?e.c("Toolbar","Письмо",r.is2pane()?"2pane":"3pane",n,"показ 0.1"):"toolbar"===t&&e.c("Toolbar",r.Metric.getPath(),r.is2pane()?"2pane":"3pane",n,"показ 0.1"))},e.ToolbarMetric.ub=function(n){if(!ns.page.current.page)return!1;var i=["folders","labels","filters"];
return r.IS_CORP||i.push("collectors"),ns.request(i,{}).then(function(){var i=["User Button"];if(ns.Model.get("folders").getCountUserFolders()>0){if(!/(03|13|23|33|43)$/.test(r.uid))return;i.push("Пользователи с папками")}else if(ns.Model.get("filters").getCountEnableFilters()>0)i.push("Пользователи с фильтрами");else if(ns.Model.get("labels").getUserLabelsCount()>2){if(!/(03|13|23|33|43)$/.test(r.uid))return;i.push("Пользователи с метками")}else if(!r.IS_CORP&&ns.Model.get("collectors").getCount()>0)i.push("Пользователи со сборщиками");
else{if(!/61$/.test(r.uid))return;i.push("Случайная выборка")}switch(ns.page.current.page){case"messages":i.push("Inbox");break;case"message":i.push("Compose");break;default:return}i=i.concat(t.makeArray(n)),e.c(i)}),!0}}(i),function(e){function t(){var e=ns.Model.get("themes").getModifier();return e.indexOf("with-dark-content")>-1}e.Yabs=function(){this._prepareUrls()},e.Yabs.prototype._prepareUrls=function(){var e=Modernizr["is-pdd"];this._DONE_DIRECT_ID="D-I-92550-19",this._isTUR="TUR"===r.Config.product;
var t=r.is3pane()?"3pane":"2pane",n=e?"_pdd":"",i=r.hasExperiment("28006")?"_exp":"",o=/\.ua$/.test(r.Config["yandex-domain"]),a=e?r.Config["pdd-direct"]:null;this._renderOldDirect=a&&!i;var s=null,u=null;this._isTUR&&(s="TUR",u="TUR"),o&&(s="UA",u="UA"),ns.Model.get("settings").isSet("google-ads")&&(s="gads");var c={TUR:"D-I-96386-2",UA:"D-I-92550-23","2pane":"D-I-92550-9","2pane_exp":"D-I-175900-5","2pane_pdd":a?a:"D-I-137740-4","2pane_pdd_exp":"D-I-175900-6"};this._DIRECT_ID=c[u?u:t+n+i];var l={TUR:"R-I-96386-1",UA:"R-I-92550-22",gads:"R-I-92550-21","3pane":"R-I-92550-13","3pane_exp":"R-I-92550-13","3pane_pdd":a?"R-I-"+a+"-1":"R-I-137740-6","3pane_pdd_exp":"R-I-137740-6","2pane":"R-I-92550-11","2pane_exp":"R-I-175900-1","2pane_pdd":a?"R-I-"+a+"-1":"R-I-137740-1","2pane_pdd_exp":"R-I-178429-1"};
this._RTB_ID=l[s?s:t+n+i];var d={uid:r.uid},f=_.extend({},d,{page:"done",awaps_section:this._isTUR?"9079":"9010"});this._EXT_PARAMS="&"+ns.params2query(d),this._DONE_EXT_PARAMS="&"+ns.params2query(f)},e.Yabs.prototype.load=function(e){if(this._canLoadRtb()){var n={};t()&&(n={headerBgColor:"#000",bgColor:"#000",siteBgColor:"#000",titleColor:"#999",urlColor:"#666",hoverColor:"#fff",borderColor:"#262626",textColor:"#999",sitelinksColor:"#666"}),Ya.Context.AdvManager.render({blockId:this._RTB_ID,renderTo:e,async:!0,extParams:"done"===ns.page.current.page?this._DONE_EXT_PARAMS:this._EXT_PARAMS,directSettings:n})
}},e.Yabs.prototype.showDoneDirect=function(e){if(this._canLoadDoneDirect()&&e){var n={};t()&&(n={headerBgColor:"#000",bgColor:"#000",siteBgColor:"#000",titleColor:"#999",urlColor:"#666",hoverColor:"#fff",borderColor:"#262626",textColor:"#999",sitelinksColor:"#666"}),Ya.Context.AdvManager.render({blockId:this._DONE_DIRECT_ID,renderTo:e,async:!0,extParams:this._EXT_PARAMS,directSettings:n})}},e.Yabs.prototype.showDirect=function(e){if(e&&this._DIRECT_ID)if(this._renderOldDirect){var n=this._getOldDirectShowParams();
Ya.Direct.insertInto(this._DIRECT_ID,e,n)}else{var r={};t()&&(r={siteBgColor:"#000",titleColor:"#999",urlColor:"#999",hoverColor:"#fff",borderColor:"#262626",textColor:"#999",sitelinksColor:"#999"}),Ya.Context.AdvManager.render({blockId:this._DIRECT_ID,renderTo:e,async:!0,extParams:this._EXT_PARAMS,directSettings:r})}},e.Yabs.prototype._canLoadRtb=function(){return e.watcher.get("pageVisible")},e.Yabs.prototype._canLoadDoneDirect=function(){return!this._isTUR},e.Yabs.prototype._getOldDirectShowParams=function(){var e={ext_params:this._EXT_PARAMS,site_charset:"utf-8",ad_format:"direct",type:"row",limit:1,font_size:1.1,font_family:"Arial, sans-serif",title_font_size:2,links_underline:!1,favicon:!1},n={site_bg_color:"EAEDF7",title_color:"000000",url_color:"BBBBBB",text_color:"000000",hover_color:"FF0000"},r={site_bg_color:"000000",title_color:"999999",url_color:"999999",hover_color:"FFFFFF",border_color:"262626",text_color:"999999",site_links_color:"999999"};
return _.assign({},e,t()?r:n)}}(i),r.SendMail={__callback:{},__initPostMessage:function(){e.postMessage&&t(e).on("message",function(t){var n=t.originalEvent,r=e.location.protocol+"//"+e.location.hostname;if(n.origin==r&&n.data&&"string"==typeof n.data){var i=n.data.split("@");if(i.length>=2&&/^frame/.test(i[0])&&/^<handlers>/.test(i[1])){var o=i[0],a=i.slice(1).join("@");this.callback(o,a)}}}.bind(this)),this.__initPostMessage=r.nop},_send:function(e,n){var o=this,a="frame"+(new Date).getTime()+r.getRandomNumber(),s=e.$form,u=n?"do-send-json.jsx":"do-send-xhr.jsx",c={frameId:a,"handler.do-send":"1",compose_check:ns.Model.get("account-information").getDataKey("compose-check"),connection_id:i.Config.connection_id,ckey:r.Page.ckey,_uid:r.uid};
e.params&&t.extend(c,e.params),ns.Model.get("settings").isSet("save_sent")||(c.nosave="yes");var l={};t.isFunction(e.success)&&(l.success=e.success),t.isFunction(e.error)&&(l.error=e.error),this.addCallback(a,l),this.__initPostMessage();var d=!1;s.ajaxSubmit({type:"POST",data:c,url:r.handlersPrefix+"/"+u+"?request="+a,beforeSend:function(e,t){n||!t.iframe&&!t.context||(t.url=t.url.replace("do-send-xhr.jsx","do-send.jsx"),d=!0)},complete:function(e,t){if(e&&200==e.status)d?o._onload(a):o.callback(a,e.responseText);
else{var n=e&&413==e.status;i.ErrorLog.send({errorType:"sendmail.send",status:e&&e.status,statustext:t},!n&&e.responseText),n?o.callback(a,'<handlers fake="1"><handler name="do-send"><mail_send><status>attachment_too_big</status></mail_send></handler></handlers>'):d?o.callback(a,"no_data"):o.callback(a,"http_status_0")}}})},sendFormJson:function(e){return this._send(e,!0)},sendForm:function(e){return this._send(e)},callback:function(e,t){var n=this.__callback[e];n&&(n.data=t,this._onload(e))},_onload:function(t){e.setTimeout(function(){this._runCallback(t)
}.bind(this),100)},_runCallback:function(e){var t=this.__callback[e];if(t)if(this.stop(e),t.data){if(t.success)if("<"==t.data.charAt(0)){var n;try{n=t.data}catch(i){return void this._callOnError("BadData",t,"no_data")}r.parseLoginInfo(n)?t.success(n):this._callOnError("NoAuth",t,"no_data")}else if("{"==t.data.charAt(0)){var o;try{o=JSON.parse(t.data)}catch(i){return void this._callOnError("BadData",t,"no_data")}r.parseLoginInfo(o)?t.success(o):this._callOnError("NoAuth",t,"no_data")}else this._callOnError("Exception",t,t.data)
}else this._callOnError("NoResponse",t,"no_data")},_callOnError:function(e,t,n){i.ErrorLog.send({errorType:"sendmail.process_response",status:e,ckey:i.Page.ckey,data:t.data}),t.error&&t.error(n||e)},addCallback:function(e,t){this.__callback[e]=t},stop:function(e){delete this.__callback[e],t("#"+e).empty().remove()}},r.AuthDialog=function(o,a){function s(t,n){switch(e.clearTimeout(X),I.setValue(""),I.disable(),t.status){case"ok":var r=B.getValue().split("@");return r[1]||(r[1]=n),void v(r[0],r[1]);
case"login-empty":case"password-empty":case"account-not-found":case"password-invalid":case"account-disabled":h(t.status);break;case"captcha-invalid":h("captcha-invalid");break;case"captcha-required":break;case"internal-exception":return h("internal-exception"),void l();default:return void(t.url?e.location=t.url:l())}K=t.captcha_url,K&&(K=K.replace(/^http:/,"https:"),P.attr("src",K),I.enable(),R.removeClass("g-hidden")),m(),F.prop("disabled",!1).val(t.idkey?t.idkey:""),"captcha-required"===t.status&&K||L.setValue(""),u(),_()
}function u(){e.setTimeout(function(){B.getValue()?L.getValue()?I.focus():L.focus():B.focus()},50)}function c(){i.ErrorLog.send({errorType:"noPassportResponse"}),_(),s({status:"internal-exception"})}function l(){e.location.href="http://www."+r.Config["yandex-domain"]+"/"}function d(){return i.Config.pddDomain}function f(){return e.location.protocol+"//"+e.location.host+"/neo2/"}function h(e){J=e,O.html(Y[e]).removeClass("g-hidden")}function p(e){e&&J!=e||(O.addClass("g-hidden"),J=null)}function g(){t(n).trigger("b-mail-dropdown-closeall"),z.addClass("b-mail-domik__button_loading")
}function m(){z.removeClass("b-mail-domik__button_loading")}function v(i,o){y(),r.login!==i||d()!==o||ns.Model.get("account-information").hasMA()?(t(n).off("hashchange"),t(e).off("beforeunload"),e.location=f(o)):ns.events.trigger("getauth")}function _(){W&&W.empty().remove(),V&&V.empty().remove(),W=V=null}function y(){H=null,delete r.AuthDialog.onResponse,delete r.AuthDialog.close,t(e).off("message",r.AuthDialog._onPostMessage),N.empty().remove(),N=null,_(),e.clearTimeout(q),e.clearTimeout(X)}var b=r.WMI.ERROR_CODES;
if(a=a||{},!t(".b-auth-dialog")[0]){var w="postMessage"in e;w&&t(e).on("message",r.AuthDialog._onPostMessage);var C=r.getCookie("yandex_login");(C===!1||a.error_code===b.AUTH_NO_MAILBOX||a.error_code===b.AUTH_NO_PASSWORD)&&(C="");var D=d(),x=[],T=[],A=0;o=t.isArray(o)?o:[];for(var k=0,S=o.length;S>k;k++){var E=o[k];E.enabled&&(E.primary?x.push(E):(A%2===0?T.push({provider:[E]}):T[Math.floor(A/2)].provider.push(E),A++))}var M=T.length?T[T.length-1].provider:[];1===M.length&&M.push(!0);var N=t(i.tt("auth-dialog",{login:C.split("@")[0],pdd:D,"social-providers":{"primary-providers":{provider:x},"popup-providers":T}}));
r.AuthDialog.insertToDocument(N),ns.events.trigger("dialog.open");var O=N.find(".b-mail-domik__error"),F=N.find('input[name="idkey"]'),I=nb.$block(".js-authfield-captcha_answer",N),R=N.find(".b-mail-domik__captcha"),P=R.find(".b-captcha__image"),B=nb.$block(".js-authfield-login",N),L=nb.$block(".js-authfield-password",N),j=nb.$block(".js-auth-submit",N),$=nb.$block(".js-auth-cancel",N),z=N.find(".b-mail-domik__button"),U=N.find("input[name=twoweeks]"),H=new Lego.block["i-social"]({retpath:f()+"i-social__closer.html"});
nb.$block(".js-domik-permament",N).on("nb-changed",function(){U.val(this.isChecked()?"no":"yes")}),N.find(".b-mail-domik__social-link").click(function(){return g(),H.start(function(){var e=r.getCookie("yandex_login");e?(e=e.split("@"),e[1]=e[1]||"",v(e[0],e[1])):location.reload()},function(){s({status:"internal-exception"})},{provider:t(this).data("provider")}),!1}),u();var W,V,q=e.setTimeout(function Q(){var t=B.getValue(),n=L.getValue(),r=!/^[-a-z0-9.`!@#$%^&*()_=+\[\]{};:"\\|,<>\/?]*$/i.test(n);
n&&t?j.enable():j.disable(),r?h("login-invalid"):p("login-invalid"),q=e.setTimeout(Q,100)},100),Y={"captcha-invalid":"Неправильно введены контрольные символы. Авторизоваться не удалось","account-disabled":'Ваш логин заблокирован. Чтобы восстановить доступ к нему, обратитесь в <a href="http://feedback.yandex.ru/">службу поддержки Яндекса</a>',"account-not-found":"Неверный логин. Авторизоваться не удалось","password-invalid":"Неверный пароль. Авторизоваться не удалось","login-invalid":"смените раскладку","password-empty":"Вы не ввели пароль","login-empty":"Вы не ввели логин","internal-exception":"При запросе произошла ошибка. Повторите, пожалуйста"},K="",G=1e4,X=null;
N.on("click",".b-captcha-cantread",function(){return P.attr("src",K+"&cantread=1&ncrnd="+Math.floor(1e5*Math.random())),!1}),r.AuthDialog.onResponse=function(e){for(var t=e.split("?")[1].split("&"),n={},r=0,i=t.length;i>r;r++){var o=t[r].split("=");n[o.shift()]=decodeURIComponent(o.join("="))}delete n.ncrnd,s(n,d(e))},r.AuthDialog.close=function(){y(),r.AuthDialog.afterClose()},$.$node.click(function(){return l(),!1}).keydown(function(e){return e&&27==e.keyCode?(l(),!1):void 0}),N.find("form").submit(function(){var n=B.getValue();
e.clearTimeout(X),X=e.setTimeout(c,G),B.setValue(n),p(),R.addClass("g-hidden"),g();var i=f(D)+"login-status.html";t(this).find(".b-captcha__image").removeAttr("src");var o=this.cloneNode(!0);o.className="g-invisible";var a="auth-iframe-"+r.getRandomNumber();return V=t(o).attr("target",a).append('<input type="hidden" name="retpath" value="'+i+'"/>').appendTo("body"),W=t('<iframe class="g-invisible" name="'+a+'" src="javascript:false"></iframe>').appendTo("body"),e.setTimeout(function(){o.submit()},1),!1
});var J}},r.AuthDialog.insertToDocument=function(e){e.appendTo("body")},r.AuthDialog._onPostMessage=function(n){if(t.isFunction(r.AuthDialog.onResponse)){var i,o=n.originalEvent;try{i=t.parseJSON(o.data)["async-auth"]}catch(a){}i&&new RegExp(e.location.host+"$").test(o.origin)&&r.AuthDialog.onResponse(i)}},r.AuthDialog.afterClose=function(){ns.Model.get("account-information").hasMA()?ns.page.forceReload():ns.events.trigger("getauth")},ns.action.define("common.interface-switch",function(t,n,r,o){o.preventDefault(),i.c.apply(i,n.metrika.split(":")),ns.Model.get("settings").setSettingOff("u2709",function(){e.location.replace("/neo2/")
})}),ns.action.define("common.hide-browser-updater",function(){setTimeout(function(){t(".js-updater").remove()},0),r.setCookie("hide-browser-updater","1",{duration:90,path:"/"})}),ns.action.define("common.minimize-browser-updater",function(e,n,i,o){var a={params:n,event:o};t(a.params.currentTarget).closest(".b-updater").addClass("b-updater_folded"),t(".js-updater").height(39),r.setCookie("minimize-updater","1",{duration:90,path:"/"})}),ns.action.define("common.maximize-browser-updater",function(e,n,i,o){var a={params:n,event:o};
t(a.params.currentTarget).closest("body").removeClass("updater-folded"),t(a.params.currentTarget).closest(".b-updater").removeClass("b-updater_folded"),t(".js-updater").height(205),r.setCookie("minimize-updater","",{duration:0,path:"/"})}),ns.action.define("common.trigger",function(e,n,r,i){var o={event:i,params:n},a=o.params.event,s=o.params.noprevent,u=t.extend({$event:o.event},o.params);return"string"==typeof a&&ns.events.trigger(a,u),s?!0:void 0}),ns.action.define("common.back",function(){ns.page.history.back()
}),ns.action.define("common.go",function(e,n,r,i){var o={params:n,event:i},a=o.event&&o.event.currentTarget;if(a&&"A"===a.tagName&&o.params.hasOwnProperty("new_window")){var s=t(a),u={href:s.attr("href")||null,target:s.attr("target")||null};return s.attr({href:o.params.url,target:"_blank"}),setTimeout(function(){s.attr(u)},1e3),!0}ns.page.go(o.params.url)}),ns.action.define("common.hide",function(e,n,r,i){var o={params:n,event:i};o.params.selector&&t(o.params.selector).hide()}),ns.action.define("common.clck",function(e,t){return t&&(t.pid?r.counter(t.pid,t.cid,t.path):t.metrika?i.c(t.metrika.split(":")):i.c(t.cid,t.path)),!0
}),ns.action.define("common.updater-clck",function(e,n){return n&&n.metrika&&i.c(n.metrika.split(":")),r.setZeroTimeout(function(){t(".js-updater").remove()}),!0}),ns.action.define("common.change-lang",function(t,o,a,s){var u={params:o,event:s},c=u.params.lang,l=encodeURIComponent(n.location.href);if(u.params.promo){var d;1==u.params.promo||2==u.params.promo?(ns.Model.get("settings").setSettings({lang_promo:1}),d=["Промо Языков","Первая страница",1==u.params.promo?"Переключение языка "+c:"Переключения языка из выпадушки "+c]):3==u.params.promo&&(ns.Model.get("settings").setSettings({lang_promo:2}),d=["Промо Языков","Вторая страница","Переключения языка из выпадушки "+c]),i.c(d)
}var f=e.location;r.IS_CORP?ns.forcedRequest(["do-staff-settings"],{lang_ui:c}).then(function(t){var n=t[0].get(".status");"ok"===n&&e.location.reload(!0)}):ns.request(["secret-key"]).then(function(e){var t=r.Config,n="https://www."+t["passport-domain"]+"/portal/set/lang/",o=e[0].get(".key");try{f.href=n+"?intl="+c+"&retpath="+l+"&sk="+o}catch(a){i.ErrorLog.send({errorType:"cancel_beforeunload_ie"})}})}),ns.action.define("common.ignore",function(e,t,n,r){var i={params:t,event:r};i.event.preventDefault()
}),ns.action.define("common.copy",function(e,n){var i=t(n.container).find('[data-click-action="common.copy"]');if(i.length){if(!r.Clipboard.canUse)return void i.addClass("g-hidden");var o=new r.Clipboard(i);o.on("ready",function(){this.setText(n.text)}),o.on("complete",function(){this.destroy(),n.onmouseup&&n.onmouseup()})}}),ns.action.define("common.close-share",function(){var e=ns.Model.get("settings"),n=r.themeId.slice(0,18)+"_x";e.setSettingOn(n),i.c(["Тема: "+r.themeId,"Клик по крестику"]),t(".b-service-tabs__share").remove()
}),ns.action.define("common.show-regional-share-popup",function(){ns.action.run("common.show-share-popup",{onCancel:function(){ns.Model.get("settings").setSettings({regional_share_faded:"yes"})}})}),ns.action.define("common.show-zverushki-share-popup",function(){ns.action.run("common.show-share-popup",{onCancel:function(){ns.Model.get("settings").setSettings({zver_share_faded:"yes"})}})}),ns.action.define("common.show-seasons-share-popup",function(){ns.action.run("common.show-share-popup",{onCancel:function(){ns.Model.get("settings").setSettings({seasons_share_faded:"yes"})
}})}),ns.action.define("common.show-galatasaray-share-popup",function(){ns.action.run("common.show-share-popup",{onCancel:function(){ns.Model.get("settings").setSettings({galatasaray_share_faded:"yes"})}})}),ns.action.define("common.show-fenerbahce-share-popup",function(){ns.action.run("common.show-share-popup",{onCancel:function(){ns.Model.get("settings").setSettings({fenerbahce_share_faded:"yes"})}})}),ns.action.define("common.show-besiktas-share-popup",function(){ns.action.run("common.show-share-popup",{onCancel:function(){ns.Model.get("settings").setSettings({besiktas_share_faded:"yes"})
}})}),ns.action.define("common.show-galatasaray-net-share-popup",function(){ns.action.run("common.show-share-popup",{onCancel:function(){ns.Model.get("settings").setSettings({galnet_share_faded:"yes"})}})}),ns.action.define("common.show-owls-net-share-popup",function(){ns.action.run("common.show-share-popup",{onCancel:function(){ns.Model.get("settings").setSettings({owls_share_faded:"yes"})}})}),ns.action.define("common.close-dropdawn-if-curren-page",function(e,t,n,o){var a={params:t,event:o},s=a.event.currentTarget.href.split("#")[1];
return i.c(a.params.metrika.split(":")),ns.page.getCurrentUrl().indexOf(s)>-1?(r.Dropdown.closeAll(),!1):!0}),ns.action.define("common.show-themes-selector",function(e,t,n,r){r.preventDefault(),i.c(t.metrika.split(":")),ns.Model.get("themes-selector").open(),ns.page.go()}),ns.action.define("common.show-share-popup",function(n,i,o,a){var s={params:i,event:a},u=t(".b-service-tabs__share .b-teaser.b-teaser_share"),c=r.Config.product,l="INT"===c||"TUR"===c?25:0;if(1===u.length&&u.is(":visible")){var d=function(){var e=u.offset(),t={top:e.top+40};
t.left=l?e.left-74-l:e.left-50,f.$dialog.offset(t)};t(e).resize(d);var f=r.Dialog.open({body:"Понравилась тема?<br>Расскажите друзьям",onTarget:{target:u,side:"top",pos:l?"right":"center"},width:180,additionalClass:"b-popup_black",onclose:function(){s&&s.params.onCancel&&s.params.onCancel(),u.addClass("b-teaser_fade"),t(e).off("resize",d)}})}}),ns.action.define("common.lang-promo-close",function(e,n,r,o){var a={params:n,event:o};i.c(["Промо Языков","Вторая страница","Закрытие крестиком"]),t(a.event.currentTarget).closest(".b-promo-lang").remove()
}),ns.action.define("common.exitAll",function(e,t,n,o){var a=o.currentTarget.href;i.c("Залогиновая шапка. Правая часть","Меню за логином",'Показали диалог "Выход со всех устройств"'),r.Dialog.open({title:"Внимание!",body:i.tt("mail:js-exit-all-dialog",{"exitall-url":a}),width:380,oncancel:function(){i.c("Залогиновая шапка. Правая часть","Меню за логином",'Диалог "Выход со всех устройств" нажали Отмена')}})}),ns.action.define("common.toggle-birthday-background",function(){ns.Model.get("settings").toggleSetting("no-birthday-skin",function(e){if(e){var n=t("html");
i.c(n.hasClass("m-skin-birthday-bg")?{"Днерожденческий фон":"Вернуть обычное оформление"}:{"Днерожденческий фон":"Праздничное оформление"}),n.toggleClass("m-skin-birthday-bg")}})}),ns.action.define("common.scroll-top",function(){t("html, body").animate({scrollTop:"0px"},"fast")}),ns.action.define("common.logo.clck",function(){return i.c("Марка","Картинка"),!0}),ns.action.define("common.show-hint",function(n,i,o){var a="42em";e.opener&&(a="30em"),i.text||(i=r.parseQuery(t(o).data("params"))),r.Dialog.open({body:i.text,hideOnScroll:i["hide-on-scroll"],onTarget:{target:o,side:i&&i.side||"top",pos:i&&i.pos||"center"},width:i&&i.width?i.width:a})
}),function(){function n(){e.clearTimeout(a),i&&i.removeClass("b-hint_show")}var i,o,a;ns.events.on("pageVisible.change",n),ns.action.define("common.hover-hint",function(s){n();var u=s.params,c=u.text;if(c&&"mouseenter"==s.event.type){i||(i=t('<span class="b-hint"/>').appendTo("body")),o||(o=t(e));var l=t(s.event.currentTarget),d=u.v||"bottom";a=e.setTimeout(function(){if(l.hasClass("daria-hover")){i[0].style.cssText="",i.html(c);var e=r.Dimensions.rect(l[0]);if(e.left||e.right){var t=r.Dimensions.rect(i[0]),n={left:e.left+Math.floor(e.width/2-t.width/2),top:e.top+("top"==d?-t.height-5:e.height)};
n.left+t.width>o.width()-10&&(n.left=e.right-t.width),i.css(n).addClass("b-hint_show")}}},1e3)}})}(),ns.action.define("sound.message",function(e,n,i,o){var a="message";if(n.setup){var s=nb.$block(t(o.target).closest(".js-sound-message"));s.isChecked()||r.Sound.play(a)}else r.Sound.play(a);return!0}),ns.action.define("compose.go",function(e,n){n=n||{};var i={};n.tab&&(i.tab=n.tab),"template"===n.save_symbol&&"reply"===ns.page.current.params.oper&&n.ids?r.vCompose.addReplyTemplate(n.ids):"template"===n.save_symbol&&"forward"===ns.page.current.params.oper&&n.ids?r.vCompose.addForwardTemplate(n.ids):"compose"===ns.page.current.page?r.composeGo(i,{force:n.force}).then(function(){n.restore||r.vCompose.reset(),r.vCompose.setCheckChanges(),r.vCompose.open(n)
}):(r.composeParams=n,r.composeGo(t.extend(i,n),{force:!0}))}),ns.action.define("compose.edit",function(e,t){r.composeGo({ids:t.ids})}),ns.action.define("compose.open",function(e,n){var i=t.extend({},n||{},ns.page.current.params),o=t.makeArray(i.ids),a={};i.tab&&(a.tab=i.tab),i.oper&&(a.oper=i.oper),o.length>0&&(a.ids=o);var s=r.vCompose.notifyNoReplyGetSelectedTime();s&&(a.no_reply_notify_time=s),r.composeGo(a)}),ns.action.define("dropdown.toggle",function(e,t,n,o){n=n||o.currentTarget,r.Dropdown.toggle(n),_.isPlainObject(t)&&(t["dropdown-charset"]&&i.c({"Просмотр письма":{"Развернутая шапка":'клик по "Сменить кодировку"'}}),t.metrika&&i.c(t.metrika.split(":")))
}),ns.action.define("dropdown.adaptive-toggle",function(n,i,o,a){o=o||a.currentTarget;var s=t(o).closest(".b-mail-dropdown"),u=s.offset(),c=u.top,l=t(e).height()-s.height()-u.top;s.attr("data-params","horiz="+(c>l?"up":"down")),r.Dropdown.toggle(o)}),ns.action.define("dropdown.close-current",function(){r.Dropdown.closeCurrent()}),function(){ns.action.define("mailbox.check",function(){ns.events.trigger("fake-loader");var e=ns.page.home;if("messages"===ns.page.current.page)if(r.is2pane()){var t=i.Page.generateUrl.closeMessage();
e=ns.page.go.bind(ns.router,t)}else e=ns.page.go;var n=ns.Model.get("skin-saver-state");n.isPreviewMode()&&n.togglePreviewMode(!1);var o=ns.Model.get("get_user_activity");o.syncLcn().then(function(e){e&&r.invalidateMailHandlers(!0,"mailbox.check")},function(){r.invalidateMailHandlers(!0,"mailbox.check")}).then(function(){e()})})}(),function(){var e;if(r.is2pane()){var n=!1;ns.events.on("ns-page-after-load",function(){if(e=r.uidEnds([1,4,5,8,9]),!n){n=!0;var t=r.minifyMode.isDisabled(),o="themes"==r.getCookie("promo"),a=r.getCookie("nopromo"),s=r.urlParams["open-themes"],u=i.Config.allowThemes;
t&&(o||!a&&s)&&u&&setTimeout(function(){var e={};r.IS_CORP&&(e.promo=!1),ns.action.run("promo-themes.toggle",e),r.delCookie("promo")},16)}}),ns.events.on("b-mail-dropdown-closed",function(e,n){n.hasClass("promo-themes")&&(t(".promo-themes").removeClass("is-checked"),n.blur())})}ns.action.define("promo-themes.all-themes",function(){return i.c("Залогиновая шапка. Правая часть","Темы","Клик по ”Все темы”"),ns.page.currentUrl.indexOf("#setup/interface")>-1?void r.Dropdown.closeAll():void ns.page.go("#setup/interface/")
}),ns.action.define("promo-themes.update",function(e,n,o,a){var s={event:a,params:n},u=!1;s.event&&s.event.currentTarget&&(u=t(s.event.currentTarget).closest(".inline-wizard").length),u?r.setCookie("iwizard-theme-change","1",1):"khl"!=s.params.color_scheme&&r.setCookie("promo","themes",365),ns.action.run("settings.update-color-scheme",s.params,null,s.event);var c=t(".js-themes-popup-handler").data("color-schemes-dropdown-metrika");c||(c="Обычная выпадушка тем"),i.c(["Залогиновая шапка. Правая часть","Темы",c,"Клики",s.params.color_scheme])
}),ns.action.define("promo-themes.close",function(){return r.setCookie("nopromo","1",14),!0}),ns.action.define("promo-themes.toggle",function(n,o,a,s){var u={event:s,params:o},c=t(".js-themes-popup-handler"),l=c.hasClass("is-checked"),d="Обычная выпадушка тем";u.params.promoMetrika?d="Развёрнутая выпадушка тем":e&&(d="Новая выпадушка тем"),c.data("color-schemes-dropdown-metrika",d),l||i.c("Залогиновая шапка. Правая часть","Темы",d,"Показы");var f={promo:!1,"is-new":e};f.promo="promo"in u.params?u.params.promo:ns.Model.get("settings-color-schemes").isPromoNeeded(),c.data("color-schemes-dropdown")||(c.append(i.tt("color-schemes-dropdown",f,["settings-color-schemes","settings","account-information"])),c.data("color-schemes-dropdown",!0)),ns.events.trigger("dialog.close"),c.toggleClass("is-checked"),r.Dropdown.toggle(c[0],{dropdown:c,noRightIndent:!0,alignToolbar:!0})
})}(),ns.action.define("collector.create",function(e,n,i,o){o.preventDefault();var a=t(i).closest("form"),s=n.owner;t.data(a[0],"settings").validate()&&(ns.Model.get("collectors").getCount()<10?r.Collectors.Creator.run(a,s):r.Dialog.notice({title:"Внимание",body:"<p>Можно создать не более 10 сборщиков почты. Чтобы создать новый сборщик, сначала удалите один из старых.</p>"}))}),function(){function e(e){e=e||{};var o=i.tt("common:settings-dropdown",e);t(o).appendTo("body");var a=nb.block(o),s=["ka","hy"],u=["az","kk","tt","tr","ro"];
-1!==_.indexOf(s,r.Config.locale)?a.$node.find(".settings-popup").css({width:"860px"}):-1!==_.indexOf(u,r.Config.locale)&&a.$node.find(".settings-popup").css({width:"780px"}),a.$node.on("click",".settings-popup-top A",function(){a.close()}),a.on("nb-opened",function(){if(t(".js-header-settings:eq(0)").addClass("is-active"),t(".js-news-notification").addClass("is-hidden"),n){var e=t(".settings-popup-bottom"),r=t({});r.queue(function(t){e.find(".settings-popup-title-link-content").animate({opacity:1},300,"swing",t)
}),r.queue(function(t){e.find(".settings-popup-title-misc").animate({opacity:1},300,"swing",t)}),e.find(".settings-popup-list-item").each(function(e,n){var i=t(n);r.queue(function(e){return i[0]?void i.animate({opacity:1,top:"+=20px"},100,"swing",e):void e()})}),r.queue(function(t){e.find(".settings-popup-blog").animate({opacity:1},100,"swing",t)}),r.queue(function(t){e.addClass("settings-popup_animated"),e.find(".settings-popup-list-link_prev").animate({opacity:1},100,"swing",t)}),r.queue(function(){e.removeClass("settings-popup_updated")
}),n=!1}}),a.on("nb-closed",function(){t(".js-header-settings:eq(0)").removeClass("is-active")}),t(".js-header-settings").addClass("nb").attr("data-nb-popup-toggler","{id: 'settings-dropdown'}").attr("data-nb","popup-toggler"),nb.$block(".js-header-settings")}var n=!1;ns.events.on("pageinit",function(){e()})}(),ns.action.define("settings.update-color-scheme",function(n,o){var a=r.is3pane(),s=o.color_scheme,u="yes"==o.promo,c=ns.Model.get("settings").getSetting("color_scheme"),l={event:"themeChanged",from:c,to:s},d=ns.Model.get("settings-color-schemes").getSchemeById(s),f={color_scheme:s},h="2pane";
if(u&&(r.getCookie("default_color_scheme")||r.setCookie("default_color_scheme",c,{duration:.4}),r.setCookie("Daria.Page.params",t.param(ns.page.current.params),{duration:5/1440}),i.c({"Done-Promo":"Переключились на "+s})),!u&&r.getCookie("default_color_scheme")&&r.delCookie("default_color_scheme"),a||s!=c){if(o.place&&(l.place=o.place),"PromoBubble"===o.place?(("khl"!==s||ns.Model.get("settings").isSet("khl-skin"))&&r.setCookie("show_themes_promo",s),d.region&&(f["no_bubble_reg_"+d.region]="yes")):"4"===ns.Model.get("settings").getSetting("inline-wizard-step")?r.delCookie("promo"):"$body"in r.Dialog&&0!==r.Dialog.$body.find(".block-wizard").length&&(r.delCookie("promo"),r.setCookie("wizard","interface")),o.from_bubble&&(l.newyear_bubble=!0),i.ErrorLog.send(t.extend({date:(new Date).getTime()},l)),"3pane"===s&&(h="3pane-"+o.layout,f={}),h!==r.Config.layout){var p=Math.max(0,t.inArray(h,i.LAYOUTS));
f.layout=p}var g=ns.Model.get("settings-color-schemes").getData().promo;g&&g.id===s&&(f[ns.Model.get("settings").getPromoThemeSettingName(!0)]=s),ns.Model.get("settings").setSettings(f,function(){var t=ns.router.generateUrl("setup",{tab:"interface",layout:"2pane"});if("3pane"===s&&ns.page.getCurrentUrl()===t){var n=ns.router.generateUrl("setup",{tab:"interface",layout:"3pane"});i.Page.forceReload(n)}else e.location.reload()})}}),ns.action.define("settings.set-bears-theme",function(){i.c({"Мишки тедди бабл":"клик по кнопке"}),r.setCookie("show_themes_promo","bears"),ns.action.run("settings.update-color-scheme",{color_scheme:"bears",from_bubble:!0})
}),ns.action.define("news-popup.prev-page",function(e,n,r,o){var a={event:o,params:n},s=t(r),u=s.closest(".settings-popup-bottom"),c=Number(a.params.prev),l=c+1;u.find(".settings-popup-bottom-page-"+l).addClass("g-hidden");var d=u.find(".settings-popup-bottom-page-"+c);if(d.length)d.removeClass("g-hidden");else{var f=jpath(ns.Model.get("header-news").getData(),'.pages[.id == "'+c+'"]')[0];u.append(i.tt("settings-popup-news",f))}t(".b-mail-dropdown__box").addClass("repaint-box-shadow").removeClass("repaint-box-shadow"),i.c("Залогиновая шапка. Правая часть","Настройки",'Клик по "Предыдущий месяц"')
}),ns.action.define("news-popup.next-page",function(e,n,r,o){var a={event:o,params:n},s=t(r),u=s.closest(".settings-popup-bottom"),c=a.params.next,l=Number(c)-1;u.find(".settings-popup-bottom-page-"+l).addClass("g-hidden"),u.find(".settings-popup-bottom-page-"+c).removeClass("g-hidden"),t(".b-mail-dropdown__box").addClass("repaint-box-shadow").removeClass("repaint-box-shadow"),i.c("Залогиновая шапка. Правая часть","Настройки",'Клик по "Следующий месяц"')}),t.ajaxSetup({cache:!0,traditional:!0}),r.Libs.add({Atom:{url:"//yastatic.net/daas/atom.js",ref:function(){return e.Atom
}},"jQuery.Form":{url:"mail/modules/common/js/jquery/jquery.form.js",ref:function(){return t.fn.ajaxSubmit}},"Ya.share":{url:"//yastatic.net/share/share.js",ref:function(){return e.Ya&&Ya.share}},"Ya.Metrika":{url:"//mc.yandex.ru/metrika/watch.js",ref:function(){return e.Ya&&Ya.Metrika}},"Ya.Maps":{url:function(){var e=r.Config.locale,t=r.Config["yandex-domain"].split(".").pop().toUpperCase();return t="COM"===t?"US":t,"//api-maps.yandex.ru/2.1/?lang="+e+"_"+t}(),ref:function(){return e.ymaps}},html2canvas:{url:"mail/modules/common/js/external/html2canvas.js",ref:function(){return e.html2canvas
}},Wookmark:{url:"mail/modules/common/js/jquery/jquery.wookmark.min.js",ref:function(){return t.fn.wookmark}},DiskWidgetSaveApi:{url:"//yastatic.net/disk/widget-save/api/0.1.0/widget-save-api.min.js",ref:function(){return e.WidgetSaveApi}}}),i.init=function(e){r.isFatalError||(e=e.filter(function(e){return"message"!==e.id}),ns.request(e).then(function(){return ns.events.trigger("daria-before-init"),ns.events.off("daria-before-init"),ns.init(),i.loadTime.timeEnd("pageinit"),i.loadTime.time("first-draw"),r.firstDraw=Date.now(),ns.page.go().then(null,function(e){return e&&"expired"===e.error?Vow.resolve():e&&"NO_MESSAGE"===e.error?Vow.resolve():(i.onFatalError("FirstDraw"),i.ErrorLog.sendException("FirstDraw",e),Vow.reject(e))
}).then(r.afterFirstDraw)},function(e){if(e&&e.invalidModels){var t=ns.Model.collectErrorData(e.invalidModels);i.ErrorLog.send({errorType:"FirstRequest"},JSON.stringify(t))}else i.ErrorLog.sendException("FirstRequest",e);return Vow.reject(e)}))},r.Transport=function(e){this.url=e,this._queue=new vow.Queue({weightLimit:1}),this._msgQueue=[],this._enqueue=_.debounce(this._enqueue,200),this._onConnectBackend=this._onConnectBackend.bind(this),this._onDisconnectBackend=this._onDisconnectBackend.bind(this)
},r.Transport.prototype={onmessage:function(e){r.Transport.log("new message",e);var t;try{t=JSON.parse(e),"calendar"===t.service&&(t.message=JSON.parse(t.message)),t.raw_data&&(t.raw_data=JSON.parse(t.raw_data))}catch(n){return i.ErrorLog.send({errorType:"xiva.json_parse"},e),this._socket.sendConfirm(),!1}return"ping"===t.operation?(t["server-interval-sec"]&&this._socket.updatePingEventTimeout(t["server-interval-sec"]),!1):(this._socket.sendConfirm(t),this.processMessage(t,e),!0)},processMessage:function(e,t){if(e.uid&&e.uid!==r.uid){if(e.raw_data&&"transfer"===e.raw_data.operation)return;
return void("insert"===e.operation?ns.events.trigger("xiva.mail.multi.insert",e):ns.events.trigger("xiva.mail.multi.update",e))}return _.contains(["calendar","mail"],e.service)&&i.ErrorLog.send({ts:Date.now(),msg:JSON.stringify(e),type:"xivaMsg"}),"calendar"===e.service?void this.sendCommonEvent(e):"mail"===e.service&&e.operation&&e.lcn?void this.enqueue(e):(r.Transport.log("unknown message",t),void i.ErrorLog.send({errorType:"xiva.unknown.message"},t))},enqueue:function(e){this._msgQueue.push(e),this._enqueue()
},sendCommonEvent:function(e){var t=["xiva",e.service,e.operation].join(".");ns.events.trigger(t,e)},abort:function(){return this._socket&&(this._socket.abort(),delete this._socket),this},connect:function(){var e=r.Transport.Backend;e.test()||i.ErrorLog.send({event:"xiva.no_websocket"}),r.Transport.log("Transport","create"),this._socket=new r.Transport.Backend(this.url,this.onmessage.bind(this)),this._socket.on("connect",this._onConnectBackend),this._socket.on("disconnect",this._onDisconnectBackend)
},onLine:function(){return _.get(this._socket,"_opened",!1)},_enqueue:function(){this._queue.stop(),this._msgQueue.forEach(function(e){var t=r.Xiva.handlers[e.operation];return _.isFunction(t)?void this._queue.enqueue(t.bind(r.Xiva.handlers,e),{weight:1,priority:-e.lcn}):void i.ErrorLog.send({event:"xiva.mail.unhandled",data:JSON.stringify(e)})},this),this._msgQueue=[],this._queue.start()},_onConnectBackend:function(){this.atrigger("online")},_onDisconnectBackend:function(){this.atrigger("offline")
}},no.extend(r.Transport.prototype,ns.Events),r.Transport.__instance=null,r.Transport.getInstance=function(e){if(null===r.Transport.__instance&&e!==!1||e){r.Transport.abortInstance();var t=new r.Transport(e);t.connect(),r.Transport.__instance=t}return r.Transport.__instance},r.Transport.abortInstance=function(){r.Transport.__instance&&(r.Transport.__instance.abort(),r.Transport.__instance=null)},r.Transport.LOG_MAX_ENTRIES=100,r.Transport.LOG=[],r.Transport.log=function(e,t){var n={msg:t,tm:(new Date).toString(),type:e||""};
r.Transport.LOG.push(n),r.Transport.LOG.length>r.Transport.LOG_MAX_ENTRIES&&r.Transport.LOG.splice(0,1)},r.Transport.Backend=function(e,t){this.url=e,this.msgProcessor=t,this._aborted=!1,this._reconnectCnt=0,this._reconnectTimer=null,this._pingEventTimer=null,this._pingEventTimeout=65e3,this._opened=!1,this.__onOpenTimer=null,this.__ON_OPEN_TIMEOUT=6e4,this._onWindowFocus=null,this._watchWindowFocus(),this.reconnect(!0)},r.Transport.Backend.prototype={sendConfirm:function(e){var t={reaction:"ack",parsed:Boolean(e)};
e&&"server_notify_id"in e&&(t.server_notify_id=e.server_notify_id),this.sendMessage(t)},updatePingEventTimeout:function(e){this._pingEventTimeout=1e3*(e+5)},__successConnect:function(){this._reconnectCnt=0},_onOpen:function(t){this.__clearReconnectTimer(),this.__clearOnOpenTimer(),this.__onOpenTimer=e.setTimeout(this.__successConnect.bind(this),this.__ON_OPEN_TIMEOUT);var n=this._opened;this._opened=!0,this._aborted=!1,n||this.atrigger("connect"),t&&ns.Model.get("get_user_activity").syncLcn()},_watchWindowFocus:function(){this._onWindowFocus=function(){return this._aborted?void t(e).off("focus",this._onWindowFocus):void(this._opened||this.reconnect(!0))
}.bind(this),t(e).on("focus",this._onWindowFocus)},_unwatchWindowFocus:function(){this._onWindowFocus&&(t(e).off("focus",this._onWindowFocus),this._onWindowFocus=null)},_onClose:function(){var e=this._opened;this._opened=!1,this.__clearOnOpenTimer(),this.__clearReconnectTimer(),this.disablePingEventCheck(),e&&this.atrigger("disconnect")},abort:function(){this._aborted=!0,this._closeConnection(),this._unwatchWindowFocus(),this.off("connect"),this.off("disconnect")},_closeConnection:function(){this._onClose(),this.transportAbort()
},reconnect:function(t){if(!this._aborted){this._closeConnection();var n;t?n=0:(n=this._reconnectCnt?Math.min(3e4+3e3*this._reconnectCnt,6e4):0,this._reconnectCnt++),this._reconnectTimer=e.setTimeout(function(){this.connect(!t)}.bind(this),n)}},enablePingEventCheck:function(){this.disablePingEventCheck(),this._pingEventTimer=e.setTimeout(function(e){return function(){r.Transport.log("Backend","reconnect because ping"),e.reconnect()}}(this),this._pingEventTimeout)},disablePingEventCheck:function(){null!==this._pingEventTimer&&e.clearTimeout(this._pingEventTimer),this._pingEventTimer=null
},__clearOnOpenTimer:function(){null!==this.__onOpenTimer&&e.clearTimeout(this.__onOpenTimer),this.__onOpenTimer=null},__clearReconnectTimer:function(){null!==this._reconnectTimer&&e.clearTimeout(this._reconnectTimer),this._reconnectTimer=null},connect:function(e){if(!this.ws||!this._opened){this.ws=new WebSocket(this.url.toString());var t=this;this.ws.onopen=function(){r.Transport.log("WebSocket","open"),t._onOpen(e)},this.ws.onmessage=function(e){t.enablePingEventCheck(),t.msgProcessor(e.data)},this.ws.onclose=function(){r.Transport.log("WebSocket","close"),t.reconnect()
},this.ws.onerror=function(){r.Transport.log("WebSocket:error",arguments),t.reconnect()},this.enablePingEventCheck()}},sendMessage:function(e){this.ws&&this.ws.send(JSON.stringify(e))},transportAbort:function(){this.ws&&(this.ws.onopen=this.ws.onmessage=this.ws.onclose=this.ws.onerror=null);try{this.ws&&this.ws.close(1e3)}catch(e){}this.ws=null}},no.extend(r.Transport.Backend.prototype,ns.Events),r.Transport.Backend.test=function(){return Boolean(e.WebSocket)},r.TransportWrapper=function(){function e(){r.Transport.abortInstance();
var e=[];e.push(r.uid),ns.Model.get("account-information").getMA().forEach(function(t){e.push(t.uid)});var o=t.url("");o.path("/v1/subscribe/").proto("wss").host(i.Config.xivaHost).addParam("uid",e.join(",")).addParam("service",n.join(",")).addParam("client","u2709").addParam("session",i.Config.connection_id),r.Transport.getInstance(o)}var n=["mail","calendar"];e(),ns.events.on("noauth",function(){r.Transport.abortInstance()}),ns.events.on("getauth",e)},ns.events.on("pageinit",function(){r.TransportWrapper()
}),function(t){function n(e){return decodeURIComponent(e.replace(/\+/g,"%20"))}function r(e,n,r){u.undef(e[n])&&(e[n]=[]),t.isArray(r)?e[n]=e[n].concat(r):e[n].push(r)}function i(e,t){for(var n=e[t],r=n.length,i=new Array(r),o=d(t),a=0;r>a;a++)i[a]=o+"="+d(n[a]);return i}function o(e){for(var t,i,o,a={},s=e.replace(/\+/g,"%20").split("&"),u=0,c=s.length;c>u;u++)t=s[u].split("="),i=t.shift(),i&&(o=t.length>1?t.join("="):t[0]||"",r(a,n(i),n(o)));return a}var a,s="undefined",u={def:function(e){return typeof e!=s
},undef:function(e){return typeof e==s},string:function(e){return"string"==typeof e}},c=/^((((\w+):)\/\/)(([\w\-\.]+)(\:(\d+))?))?(\/?[^\?#]*)?(\?([^#]*))?(#(.*))?$/,l=/^(([\w]+:)?\/\/)?(([\d\w]|%[a-fA-f\d]{2,2})+(:([\d\w]|%[a-fA-f\d]{2,2})+)?@)?([\d\w][-\d\w]{0,253}[\d\w]\.)+[\w]{2,4}(:[\d]+)?(\/([-+_~.\d\w]|%[a-fA-f\d]{2,2})*)*(\?(&?([-+_~.\d\w]|%[a-fA-f\d]{2,2})=?)*)?(#([-+_~.\d\w]|%[a-fA-f\d]{2,2})*)?$/,d=encodeURIComponent,f={proto:"Proto",host:"Host",port:"Port",path:"Path",hash:"Hash"},h=function(t){t=u.def(t)?t.toString():e.location.href;
var r=t.match(c);if(!r)throw new Error("This is not an url");this.Href=r[0],this.Proto=r[4]||"",this.Host=r[6]||"",this.Port=r[8]||0,this.Path=decodeURI(r[9]||""),this.Query=o(r[11]||""),this.Hash=n(r[13]||"")};h.prototype={go:function(){e.location.href=this.toString()},toString:function(){var e="";(this.Proto||this.Host)&&this.Host&&(e+=(this.Proto||"http")+"://"+this.Host,this.Port&&(e+=":"+this.Port)),this.Path&&(this.Host&&0!=this.Path.indexOf("/")&&(e+="/"),e+=encodeURI(this.Path));var t=this.query();
return t&&(e+="?"+t),this.Hash&&(e+="#"+d(this.Hash)),e},clone:function(){return new t.url(this.toString())},query:function(e){if(u.def(e))return this.clearQuery(),u.string(e)?this.Query=o(e):this.replaceParams(e),this;var t=[];for(var n in this.Query)t=t.concat(i(this.Query,n));return t.join("&")},queryKeys:function(){var e=[];for(var t in this.Query)e.push(t);return e.sort()},addParam:function(e,t){return r(this.Query,e,t),this},addParams:function(e){for(var t in e)r(this.Query,t,e[t]);return this
},removeParams:function(e){for(var t=0,n=e.length;n>t;t++)delete this.Query[e[t]];return this},replaceParams:function(e){var t=[];for(var n in e)t.push(n);return this.removeParams(t),this.addParams(e),this},clearQuery:function(){return this.Query={},this},getParam:function(e){var t=this.Query[e];return t?t[0]:null},getParams:function(e){return this.Query[e]||[]}};for(a in f)h.prototype[a]=function(e){return function(t){return u.def(t)?(this[e]=t,this):this[e]}}(f[a]);h.isValid=function(e){return l.test(e)
},t.extend({url:function(e){return new h(e)}})}(jQuery),a.ensureSearchSessionId=function(){return a.searchSessionId||(a.searchSessionId=[Date.now(),r.uid].join("")),a.searchSessionId},a.unsetSearchSessionId=function(){a.searchSessionId=""}}(jQuery,o,i),o.afterFirstDraw=function(){if(i.loadTime.timeEnd("first-draw"),i.loadTime.time("trigger-init"),clearTimeout(e.errTimeoutLimit),clearTimeout(e.longLoadTimer),clearTimeout(e.pleaseWaitTimer),o.getCookie("pref")&&(i.ErrorLog.send({event:"prefetch",theme:o.themeId,locale:o.Config.locale}),o.delCookie("pref")),e.DariaAfterLoad=!0,ns.events.trigger("pageinit"),ns.events.off("pageinit"),i.loadTime.timeEnd("trigger-init"),i.loadTime.log(),i.loader.stop(),n.documentElement.className+=" m-loaded",e.performance&&e.performance.memory&&o.IS_CORP){var t=e.performance.memory,r=0,a=function(){i.ErrorLog.send({event:"memory",used:t.usedJSHeapSize,total:t.totalJSHeapSize,limit:t.jsHeapSizeLimit,cid:i.Config.connection_id,cycle:r++}),setTimeout(a,3e5)
};a()}},ns.events.on("daria-before-init",function(){i.Metrika.init(o.Config.metricaID)}),ns.events.on("daria-before-init",function(){var e=o.is2pane()?"одна страница":o.is3pv()?"письмо справа":"письмо снизу";i.c("theme","u2709",e,o.Config["color-scheme"])}),ns.events.on("daria-before-init",function(){ns.Model.get("settings").isSet("dnd_enabled")&&o.DragNDrop.enable()}),ns.events.once("ns-page-after-load",function(){var e=ns.Model.get("settings").getSetting("show_advertisement"),t=ns.Model.get("account-information").getDataKey("reg_date"),n=864e5;
i.HAS_AD=Boolean(i.Config.MAY_HAVE_ADV&&e&&o.now()-t>10*n&&o.messages.everHadMessages()),i.Config.HAS_DIRECT=i.HAS_AD&&!Modernizr.ios&&!o.Config.workspace&&!o.IS_CORP}),ns.router.regexps.any=".+?",ns.router.regexps["int"]="-?[0-9]+",ns.router.regexps.uint="[0-9]+",ns.router.regexps.anyWithQuestionMark=".+",ns.router.regexps.search_type="discount|news|password|people|social|ticket",ns.router.regexps["setup-tab"]="abook|client|collector|collectors|filters|filters-create|folders|interface|journal|other|security|sender|todo",ns.router.regexps.TFolderDefault="archive|draft|inbox|outbox|sent|spam|template|trash",ns.router.regexps["TMessage-right-tab"]="attachments|history|links|thread",ns.router.regexps.TThreadID="t[0-9]+",ns.router.regexps.TComposeOper="forward|reply|reply-all|template",ns.router.regexps.TComposeMode="html|plain",ns.router.routes={redirect:{"#":"#inbox","#message/{ids:int}.*":function(e){if(o.is3pane()){var t=e.ids,n=ns.Model.get("message",{ids:t}).getFolderId(),r=ns.router.generateUrl("messages",{current_folder:n||ns.Model.get("folders").getFidBySymbol("inbox")});
return r+"/message/"+t}return!1},"#ppyrus.*":function(){var t=e.location.hash;return i.Config["ppyrus-url"]+"/?ui=ext&spec="+encodeURIComponent(t.replace(/^#ppyrus/,""))},"#setup":function(){return i.Config.NO_SETTINGS?"#inbox":void 0},"#setup/interface":function(){return i.Config.NO_SETTINGS?"#inbox":"#setup/interface/"+o.Config.layout},"#setup/{tab:setup-tab}/":function(){return i.Config.NO_SETTINGS?"#inbox":void 0},"#folder/{current_folder:int}":function(e){return ns.Model.get("folders").getFolderById(e.current_folder)?o.router.goToLOM(e):ns.router.url("#404")
},"#{default_folder:TFolderDefault}":function(e){return o.router.symbolToFid(e),o.router.goToLOM(e)},"#.*thread/\\d+":function(){return ns.page.getCurrentUrl().replace(/thread\/(\d+)/,"thread/t$1")},"#done":function(){var e=!1,t=ns.Model.isDefined("done")&&ns.Model.get("done");return t&&t.isDoneAllowed()||(e="#"),e}},rewriteUrl:{},route:{"#compose2/{ids:int}":"compose","#compose2/oper={oper:TComposeOper}":"compose","#compose2/to={to:any}":"compose","#compose2/mailto={mailto:any}":"compose","#compose2/mode={mode:TComposeMode}":"compose","#compose2":"compose","#compose/{ids:int}":"compose2","#compose/{ids:int}/oper={oper:TComposeOper}":"compose2","#compose/oper={oper:TComposeOper}":"compose2","#compose":"compose2","#done":"done","#contacts/group{tid:int}/{q:any}":"abook","#contacts/group{tid:int}":"abook","#contacts/all/{q:any}":"abook","#contacts/all":"abook","#contacts/shared{shared:int=1}":"abook","#contacts":"abook","#{attachments==attachments}/{ids:int}":"messages","#{attachments==attachments}":"messages","#{unread==unread}/{ids:int}":"messages","#{unread==unread}":"messages","#{important==important}/{ids:int}":"messages","#{important==important}":"messages","#{search==search}/{thread_id:TThreadID}":"messages","#{search==search}/{ids:int}":"messages","#{search==search}":"messages","#search-options":"search","#{default_folder:TFolderDefault}/message/{ids:int}":"messages","#{default_folder:TFolderDefault}/thread/{thread_id:TThreadID}":"messages","#folder/{current_folder:int}/message/{ids:int}":"messages","#folder/{current_folder:int}/thread/{thread_id:TThreadID}":"messages","#label/{current_label:int}/message/{ids:int}":"messages","#label/{current_label:int}/thread/{thread_id:TThreadID}":"messages","#folder/{current_folder:int}":"messages","#label/{current_label:int}":"messages","#thread/{thread_id:TThreadID}/message/{ids:int}":"messages","#thread/{thread_id:TThreadID}":"messages","#message/{ids:int}":"message","#message/{ids:TThreadID}":"message","#no-message":"no-message","#setup/{tab:setup-tab==collector}/":"setup-collector","#setup/{tab:setup-tab==sender}/":"setup-sender","#setup/{tab:setup-tab==filters-create}/id={id:int}":"setup","#setup/{tab:setup-tab==filters-create}/folder={folder:int}":"setup","#setup/{tab:setup-tab==filters-create}/label={label:any}":"setup","#setup/{tab:setup-tab==filters-create-simple}/":"setup","#setup/{tab:setup-tab==filters-create-simple}/{action:any}":"setup","#setup/{tab:setup-tab}/":"setup","#setup":"setup"},rewriteParams:{messages:function(e){if(e.search)return e;
var t=o.is2pane();o.router.symbolToFid(e),e.datePager&&!/^(((1[0-2])|(0[0-9]))\.)?((19[7-9][0-9])|(20[0-9]{2}))$/.test(e.datePager)&&delete e.datePager,e.attachments&&(e.extra_cond="only_atta",e["goto"]="all"),e.unread&&(e.extra_cond="only_new",e["goto"]="all"),e.important&&(e.current_label=ns.Model.get("labels").getImportantLID()),o.router.addThreadedParam(e);var n=/\d{2}\.\d{2}\.\d{4}/;return!e.search&&!e.threaded&&n.test(e.from)&&n.test(e.to)&&t&&(e.datePagerSearch="yes"),t&&!(e.thread_id||e.current_label||e.extra_cond||e.search)&&(e.showDatePager="yes"),e
},abook:function(e){if(!e.lang){var t=_(["ru","tt","uk","be"]).contains(o.Config.locale)?"ru":"en";e.lang=ns.Model.get("settings").getSetting("abook-switch-lang")||t}return e.type||(e.type="normal"),"shared"in e&&(e.shared=o.toIntFlag(e.shared)),e},compose:function(e){return e.mailto&&(e.to=e.mailto,delete e.mailto),e.subj&&(e.subject=e.subj,delete e.subj),e},compose2:function(e){var t=e.mailto&&e.mailto.replace(/^mailto:/,"");if(!t)return e;var n=t.split("?")[0],r=o.parseQuery(t.split("?")[1]),i=o.lowerifyObjectKeys(r);
return n&&(e.to=decodeURIComponent(n)),i.to&&(e.to=e.to?e.to+","+i.to:decodeURIComponent(i.to)),i.subject&&(e.subject=decodeURIComponent(i.subject)),i.cc&&(e.cc=decodeURIComponent(i.cc)),i.bcc&&(e.bcc=decodeURIComponent(i.bcc)),i.body&&(e.body=decodeURIComponent(i.body)),delete e.mailto,e},search:function(e){return e.request&&(e.text=e.request,e.q=e.request),e}}},ns.events.on("daria-before-init",ns.router.buildFoldersUrls),ns.events.on("daria:mFolders:symbolSet",function(){ns.router.buildFoldersUrls(),ns.router.init()
}),ns.events.on("pageinit",function(){ns.events.on("pageVisible.change",function(t,i){if(i.value){var a=o.getCookie("yandex_login");if(a!==o.cookieYandexLogin){var s=r.url(o.Config["passport-embeddedauth-change"]);s.replaceParams({retpath:o.Config["mail-url"]+"/favicon.ico",uid:o.uid,yu:o.getCookie("yandexuid")});var u=n.createElement("iframe");u.src=s.toString(),u.className="g-invisible",n.body.appendChild(u),e.setTimeout(function(){n.body.removeChild(u)},6e4)}}})}),ns.events.on("pageinit",function(){if(e.history&&e.history.replaceState){var t=r.url();
t.hash(""),t.replaceParams({uid:o.uid,login:o.login}),t=t.toString()+e.location.hash,e.history.replaceState({},n.title||"",t.toString())}})}(window,document,jQuery,Jane,Daria),ns.page.lazyRefresh=_.debounce(function(){ns.page.go()},50),yr.externals["ns-render"]=function(e){var t=yr.nodeset2data(e),n="mail",r=t.bosphorus;return r&&(n=r.info.yateModule),ns.assert(n,"ns-render","yateModule is not defined for view '%s'",t.id),yr.run(n,t,"ns-render")},yr.externals.c=function(){return _.defer(Jane.c,Array.prototype.slice.call(arguments)),""
},yr.externals.ckey=function(){return Daria.Page.ckey},yr.externals["daria-now"]=Daria.now,yr.externals.entityify=_.escape,yr.externals["date-format"]=Jane.Date.format,yr.externals["date-get-interval"]=Jane.Date.getInterval,function(){var e=1;yr.externals["generate-id"]=function(){return e++}}(),yr.externals["arr-isfind"]=function(e,t){return-1!==t.indexOf(e)},yr.externals["get-random-string"]=Daria.getRandomString,yr.externals["seasons-modifier"]=function(){var e=(new Date).getDate(),t=(new Date).getMonth()+1,n="";
return n=2==t&&e>24||t>2&&6>t?"spring":t>5&&9>t?"summer":t>8&&12>t?"autumn":"winter",(12==t&&e>16||1==t&&3>e)&&(n="newyear"),n},yr.externals["set-time"]=function(e,t,n,r){var i=new Date(e);return i.setHours(t),i.setMinutes(n),i.setSeconds(r),i.setMilliseconds(0),i.getTime()},yr.externals["str-escape"]=_.escape,yr.externals.translate=function(e,t,n){for(var r=0,i=t.length;i>r;r++){var o=new RegExp(Daria.regexpEscape(t.substr(r,1)),"g");e=e.replace(o,n.substr(r,1)||"")}return e},yr.externals.uid=function(){return Daria.uid
},yr.externals["has-sid"]=function(e){return-1!==$.inArray(e,Daria.SIDS)},yr.externals.tid2mid=function(e){return Daria.tid2mid(e)},yr.externals.join=function(e,t,n){var r=yr.nodeset2data(e);return 2===arguments.length?r instanceof Array?r.join(t):r:jpath(r,t).join(n)},function(e){var t={};e.externals["regexp-test"]=function(e,n,r){return n in t||(t[n]=new RegExp(n,r)),t[n].test(e)}}(yr),yr.externals.config=function(e){return Jane.Config[e]},yr.externals["phone-number-format"]=function(e){var t=/^(\+7)(\d{3})(\d{3})(\d{2})(\d{2})$/,n=t.exec(e),r=e;
return n&&(r=Daria.supplant("{1} ({2}) {3}-{4}-{5}",n)),r},yr.externals.extend=function(e,t){var n,r;return _.isObject(e)&&(n=yr.nodeset2data(e)),_.isObject(t)&&(r=yr.nodeset2data(t)),yr.object2nodeset($.extend({},n,r))},yr.externals["add-params-to-location"]=Daria.addParamsToLocation=function(e,t,n,r){var i=["inbox","sent","trash","spam","draft","setup","outbox","compose","contacts"],o=$.url(t||void 0);return Array.isArray(r)&&r.length&&o.removeParams(r),o.Hash&&!_.includes(i,o.Hash)&&(o.Hash=""),o.removeParams(["login","uid"]),e&&!e.__empty__&&o.replaceParams(e),n?decodeURIComponent(o.toString()):o.toString()
},yr.externals["uid-ends"]=function(e){return Daria.uidEnds(yr.nodeset2data(e).item)},yr.externals.setting=function(e){return ns.Model.get("settings").getSetting(e)},yr.externals["is-pg-user"]=function(){return ns.Model.get("account-information").isPG()},yr.externals["is-retina"]=function(){return window.devicePixelRatio>1},yr.externals["borschik-link"]=borschik.link,function(e){e["arr-concat"]=function(e,t){return e.concat(t)}}(yr.externals),yr.externals.cookie=Daria.getCookie,function(e){var t=function(){var e=new Date;
return e.setMinutes(0),e.setHours(0),e.setSeconds(0),e};e["date-is-today"]=function(e){return e=1e3*parseInt(e,10),t().getTime()<=e},e["date-is-week-current"]=function(e){e=1e3*parseInt(e,10);var n=new Date(t().getTime()-6048e5);return n.getTime()<=e},e["date-is-yesterday"]=function(e){e=1e3*parseInt(e,10);var n=t(),r=new Date(n.getTime()-864e5);return r.getTime()<=e&&e<n.getTime()},e["date-now"]=function(){return+new Date}}(yr.externals),function(e){e["math-abs"]=function(e){return Math.abs(e)},e["math-random"]=function(){return Math.round(1e5*Math.random())
},e["math-round"]=function(e){return Math.round(e)},e["math-sum"]=function(e){for(var t=0,n=0,r=e.length;r>n;n++)t+=Number(e[n].data);return t}}(yr.externals),function(e,t){e.modernizr=function(e){return t[e]===!0}}(yr.externals,Modernizr),function(e){e["encode-uri-component"]=function(e){return encodeURIComponent(e)},e["str-contains"]=function(e,t){return String(e).indexOf(t)>-1},e["str-length"]=function(e){return String(e).length},e["str-substr"]=function(e,t,n){return e.substr(t,n)},e["str-substr-after"]=function(e,t){e=String(e);
var n=e.indexOf(t);return n>-1?e.substr(n+1):""},e["str-substr-before"]=function(e,t){e=String(e);var n=e.indexOf(t);return n>-1?e.substr(0,n):""},e["str-to-lower"]=function(e){return String(e).toLowerCase()},e["str-to-upper"]=function(e){return String(e).toUpperCase()}}(yr.externals),Jane.i18n.convert=function(e,t){var n=e.length;if(4==n&&1==t)return e[0];var r=t%100,i=t%10,o=2;return r>10&&20>=r?o=2:1==i?o=0:i>1&&5>i&&(o=1),4==n&&o++,e[o]}});